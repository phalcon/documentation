<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Phalcon Framework. A full-stack PHP framework delivered as a PHP extension, offering lower resource consumption and high performance."><meta name=author content="Phalcon Team"><link href=https://docs.phalcon.io/5.4/db-phql/ rel=canonical><link href=../db-layer/ rel=prev><link href=../db-odm/ rel=next><link rel=icon href=../assets/images/favicon.ico><meta name=generator content="mkdocs-1.5.3, mkdocs-material-9.5.3"><title>PHQL - Phalcon Documentation</title><link rel=stylesheet href=../assets/stylesheets/main.50c56a3b.min.css><link rel=stylesheet href=../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Titillium+Web:300,300i,400,400i,700,700i%7CSource+Code+Pro:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Titillium Web";--md-code-font:"Source Code Pro"}</style><link rel=stylesheet href=../assets/css/extra.css><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-JR4REKBKH3"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-JR4REKBKH3",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-JR4REKBKH3",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><!-- Fanart --><!--

Phalcon Framework

A full-stack PHP framework delivered as a PHP extension,
offering lower resource consumption and high performance.

<3 Phalcon Team

                         ..
                         ....
   %                  ,   ......
     %%%               ,,  .......
      %%%%%%           ,,,,.........
       %%%%%%%%&        ,,,,,.........,
    /    %%%%%%%%%%      ,,,,,,..........
      //  %%%%%%%%%%%%%    ,,,,,,..........
       //// %%%%%%%%%%%%%%%  ,,,,,,..........,
         ////%%%%%%%%%%%%%%%%%%,,,,,,...........
          ///////%%%%%%%%%%%%%%%%%%,,,,...........
            ////////%%%%%%%%%%%%%%%%%%/,,...........
          %%%%/////////(%%%%%%%%%%%%%%%%%%,..........
            %%%%%//////////%%%%%%%%%%%%%%%%%%........(
               %%%%///////////(%%%%%%%%%%%%%%%%.......(
                 %%%%%////////////%%%%%%%%%%%%%%%.....//
                ....%%%%%////////////#%%%%%%%%%%%%%....//
                   .......(%/////////////%%%%%%%%%%%%..  /
                      ...........///////********/%%%%%..
                     ,,,,.............,/***************.
                         ,,,,,.............************......,/(
                               ,,,,,,..........********.....//////////
                              ((((((((**((((((((((((((*.....///////////
                                  %*********.../(((((((..........///(/#/
                               **********..........#%%%           ..*%%%
                            *********(..........%%%                  %%%
                         *********/..........%%%                     %%
                   %    *******%%.........%%%%
                  %   ******%%%%...../.*((((((   %%%%
                     ****%%%%%%.....///* (((((((%%%%%
                    ***&%%%%%%.....////* ((((((((%%  %
                    *  &%%%%%#..../////*  (((     %
                       &%%%%%....//////*           %
                        %%%% ....//////***   %%%
                     (  %%%   ...*/////*****%%%%
                     (   %     ...  //(*****/%%
                      (  &      ..   // ***  %%
                                 .     /      %
--><!-- Fanart --></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#phalcon-query-language-phql class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title="Phalcon Documentation" class="md-header__button md-logo" aria-label="Phalcon Documentation" data-md-component=logo> <img src=https://assets.phalcon.io/phalcon/images/svg/phalcon-logo-white-105x40.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Phalcon Documentation </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> PHQL </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media=(prefers-color-scheme) data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1M8 13h8v-2H8v2m9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.71-1.39 3.1-3.1 3.1h-4V17h4a5 5 0 0 0 5-5 5 5 0 0 0-5-5Z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=custom data-md-color-accent=teal aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=custom data-md-color-accent=teal aria-label="Switch to system preference" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to system preference" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5M7 15a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg> </label> </form> <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/phalcon/documentation title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> phalcon/documentation </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../introduction/ class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../installation/ class=md-tabs__link> Getting Started </a> </li> <li class=md-tabs__item> <a href=../application/ class=md-tabs__link> Core </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../db-layer/ class=md-tabs__link> Database </a> </li> <li class=md-tabs__item> <a href=../assets/ class=md-tabs__link> Front End </a> </li> <li class=md-tabs__item> <a href=../acl/ class=md-tabs__link> Business Logic </a> </li> <li class=md-tabs__item> <a href=../cache/ class=md-tabs__link> Services </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title="Phalcon Documentation" class="md-nav__button md-logo" aria-label="Phalcon Documentation" data-md-component=logo> <img src=https://assets.phalcon.io/phalcon/images/svg/phalcon-logo-white-105x40.svg alt=logo> </a> Phalcon Documentation </label> <div class=md-nav__source> <a href=https://github.com/phalcon/documentation title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> phalcon/documentation </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1> <label class=md-nav__link for=__nav_1 id=__nav_1_label tabindex> <span class=md-ellipsis> Home </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_1_label aria-expanded=false> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> Home </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../introduction/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1_2> <label class=md-nav__link for=__nav_1_2 id=__nav_1_2_label tabindex> <span class=md-ellipsis> Changelog </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_1_2_label aria-expanded=false> <label class=md-nav__title for=__nav_1_2> <span class="md-nav__icon md-icon"></span> Changelog </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=https://github.com/phalcon/cphalcon/blob/5.0.x/CHANGELOG-5.0.md class=md-nav__link> <span class=md-ellipsis> Current Version </span> </a> </li> <li class=md-nav__item> <a href=../releases/ class=md-nav__link> <span class=md-ellipsis> Releases </span> </a> </li> <li class=md-nav__item> <a href=../upgrade/ class=md-nav__link> <span class=md-ellipsis> How to upgrade </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1_3> <label class=md-nav__link for=__nav_1_3 id=__nav_1_3_label tabindex> <span class=md-ellipsis> Contributing </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_1_3_label aria-expanded=false> <label class=md-nav__title for=__nav_1_3> <span class="md-nav__icon md-icon"></span> Contributing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../contributions/ class=md-nav__link> <span class=md-ellipsis> Contributions </span> </a> </li> <li class=md-nav__item> <a href=https://phalcon.io/discussions class=md-nav__link> <span class=md-ellipsis> Asking a question </span> </a> </li> <li class=md-nav__item> <a href=../new-feature-request/ class=md-nav__link> <span class=md-ellipsis> Requesting a change </span> </a> </li> <li class=md-nav__item> <a href=../new-pull-request/ class=md-nav__link> <span class=md-ellipsis> Issuing a Pull Request </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1_4> <label class=md-nav__link for=__nav_1_4 id=__nav_1_4_label tabindex> <span class=md-ellipsis> Guides </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_1_4_label aria-expanded=false> <label class=md-nav__title for=__nav_1_4> <span class="md-nav__icon md-icon"></span> Guides </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../generating-backtrace/ class=md-nav__link> <span class=md-ellipsis> Backtrace Generation </span> </a> </li> <li class=md-nav__item> <a href=../reproducible-tests/ class=md-nav__link> <span class=md-ellipsis> Reproducible Tests </span> </a> </li> <li class=md-nav__item> <a href=../testing-environment/ class=md-nav__link> <span class=md-ellipsis> Testing environment </span> </a> </li> <li class=md-nav__item> <a href=../coding-standard/ class=md-nav__link> <span class=md-ellipsis> Coding Standard </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../sponsors/ class=md-nav__link> <span class=md-ellipsis> Sponsoring </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex> <span class=md-ellipsis> Getting Started </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Getting Started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../installation/ class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class=md-nav__item> <a href=../webserver-setup/ class=md-nav__link> <span class=md-ellipsis> Webserver Setup </span> </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3> <label class=md-nav__link for=__nav_2_3 id=__nav_2_3_label tabindex> <span class=md-ellipsis> Environments </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> Environments </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../environments-devilbox/ class=md-nav__link> <span class=md-ellipsis> Devilbox </span> </a> </li> <li class=md-nav__item> <a href=../environments-nanobox/ class=md-nav__link> <span class=md-ellipsis> Nanobox </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4> <label class=md-nav__link for=__nav_2_4 id=__nav_2_4_label tabindex> <span class=md-ellipsis> Development Tools </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4> <span class="md-nav__icon md-icon"></span> Development Tools </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../devtools/ class=md-nav__link> <span class=md-ellipsis> Devtools </span> </a> </li> <li class=md-nav__item> <a href=../support-debug/ class=md-nav__link> <span class=md-ellipsis> Debug </span> </a> </li> <li class=md-nav__item> <a href=../db-migrations/ class=md-nav__link> <span class=md-ellipsis> Migrations </span> </a> </li> <li class=md-nav__item> <a href=../unit-testing/ class=md-nav__link> <span class=md-ellipsis> Unit Testing </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5> <label class=md-nav__link for=__nav_2_5 id=__nav_2_5_label tabindex> <span class=md-ellipsis> Tutorials </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_5_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5> <span class="md-nav__icon md-icon"></span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../tutorial-basic/ class=md-nav__link> <span class=md-ellipsis> Basic </span> </a> </li> <li class=md-nav__item> <a href=../tutorial-invo/ class=md-nav__link> <span class=md-ellipsis> Invo </span> </a> </li> <li class=md-nav__item> <a href=../tutorial-rest/ class=md-nav__link> <span class=md-ellipsis> REST </span> </a> </li> <li class=md-nav__item> <a href=../tutorial-vokuro/ class=md-nav__link> <span class=md-ellipsis> Vokuro </span> </a> </li> <li class=md-nav__item> <a href=../use-case/ class=md-nav__link> <span class=md-ellipsis> Use case </span> </a> </li> <li class=md-nav__item> <a href=../performance/ class=md-nav__link> <span class=md-ellipsis> Performance </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <div class="md-nav__link md-nav__container"> <a href=../api/ class="md-nav__link "> <span class=md-ellipsis> Core </span> </a> <label class="md-nav__link " for=__nav_3 id=__nav_3_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Core </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../application/ class=md-nav__link> <span class=md-ellipsis> Application </span> </a> </li> <li class=md-nav__item> <a href=../application-micro/ class=md-nav__link> <span class=md-ellipsis> Micro </span> </a> </li> <li class=md-nav__item> <a href=../application-cli/ class=md-nav__link> <span class=md-ellipsis> CLI </span> </a> </li> <li class=md-nav__item> <a href=../di/ class=md-nav__link> <span class=md-ellipsis> DI Container </span> </a> </li> <li class=md-nav__item> <a href=../mvc/ class=md-nav__link> <span class=md-ellipsis> MVC </span> </a> </li> <li class=md-nav__item> <a href=../namespaces/ class=md-nav__link> <span class=md-ellipsis> Namespaces </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex> <span class=md-ellipsis> Database </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=true> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Database </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../db-layer/ class=md-nav__link> <span class=md-ellipsis> Layer </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> PHQL </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> PHQL </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#query class=md-nav__link> <span class=md-ellipsis> Query </span> </a> </li> <li class=md-nav__item> <a href=#models-manager class=md-nav__link> <span class=md-ellipsis> Models Manager </span> </a> </li> <li class=md-nav__item> <a href=#select class=md-nav__link> <span class=md-ellipsis> Select </span> </a> <nav class=md-nav aria-label=Select> <ul class=md-nav__list> <li class=md-nav__item> <a href=#results class=md-nav__link> <span class=md-ellipsis> Results </span> </a> </li> <li class=md-nav__item> <a href=#joins class=md-nav__link> <span class=md-ellipsis> Joins </span> </a> </li> <li class=md-nav__item> <a href=#aggregations class=md-nav__link> <span class=md-ellipsis> Aggregations </span> </a> </li> <li class=md-nav__item> <a href=#conditions class=md-nav__link> <span class=md-ellipsis> Conditions </span> </a> </li> <li class=md-nav__item> <a href=#parameters class=md-nav__link> <span class=md-ellipsis> Parameters </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#insert class=md-nav__link> <span class=md-ellipsis> Insert </span> </a> </li> <li class=md-nav__item> <a href=#update class=md-nav__link> <span class=md-ellipsis> Update </span> </a> </li> <li class=md-nav__item> <a href=#deleting-data class=md-nav__link> <span class=md-ellipsis> Deleting Data </span> </a> </li> <li class=md-nav__item> <a href=#query-builder class=md-nav__link> <span class=md-ellipsis> Query Builder </span> </a> <nav class=md-nav aria-label="Query Builder"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#parameters_1 class=md-nav__link> <span class=md-ellipsis> Parameters </span> </a> </li> <li class=md-nav__item> <a href=#getters class=md-nav__link> <span class=md-ellipsis> Getters </span> </a> </li> <li class=md-nav__item> <a href=#methods class=md-nav__link> <span class=md-ellipsis> Methods </span> </a> </li> <li class=md-nav__item> <a href=#examples class=md-nav__link> <span class=md-ellipsis> Examples </span> </a> </li> <li class=md-nav__item> <a href=#bound-parameters class=md-nav__link> <span class=md-ellipsis> Bound Parameters </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#disable-literals-in-phql class=md-nav__link> <span class=md-ellipsis> Disable Literals in PHQL </span> </a> </li> <li class=md-nav__item> <a href=#reserved-words class=md-nav__link> <span class=md-ellipsis> Reserved Words </span> </a> </li> <li class=md-nav__item> <a href=#custom-dialect class=md-nav__link> <span class=md-ellipsis> Custom Dialect </span> </a> </li> <li class=md-nav__item> <a href=#caching class=md-nav__link> <span class=md-ellipsis> Caching </span> </a> </li> <li class=md-nav__item> <a href=#lifecycle class=md-nav__link> <span class=md-ellipsis> Lifecycle </span> </a> </li> <li class=md-nav__item> <a href=#raw-sql class=md-nav__link> <span class=md-ellipsis> Raw SQL </span> </a> </li> <li class=md-nav__item> <a href=#troubleshooting class=md-nav__link> <span class=md-ellipsis> Troubleshooting </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../db-odm/ class=md-nav__link> <span class=md-ellipsis> ODM </span> </a> </li> <li class=md-nav__item> <a href=../db-models/ class=md-nav__link> <span class=md-ellipsis> Models </span> </a> </li> <li class=md-nav__item> <a href=../db-models-behaviors/ class=md-nav__link> <span class=md-ellipsis> Behaviors </span> </a> </li> <li class=md-nav__item> <a href=../db-models-cache/ class=md-nav__link> <span class=md-ellipsis> Cache </span> </a> </li> <li class=md-nav__item> <a href=../db-models-events/ class=md-nav__link> <span class=md-ellipsis> Events </span> </a> </li> <li class=md-nav__item> <a href=../db-models-metadata/ class=md-nav__link> <span class=md-ellipsis> Metadata </span> </a> </li> <li class=md-nav__item> <a href=../db-models-relationships/ class=md-nav__link> <span class=md-ellipsis> Relationships </span> </a> </li> <li class=md-nav__item> <a href=../db-models-transactions/ class=md-nav__link> <span class=md-ellipsis> Transactions </span> </a> </li> <li class=md-nav__item> <a href=../db-models-validation/ class=md-nav__link> <span class=md-ellipsis> Validators </span> </a> </li> <li class=md-nav__item> <a href=../db-pagination/ class=md-nav__link> <span class=md-ellipsis> Pagination </span> </a> </li> <li class=md-nav__item> <a href=../db-migrations/ class=md-nav__link> <span class=md-ellipsis> Migrations </span> </a> </li> <li class=md-nav__item> <a href=../datamapper/ class=md-nav__link> <span class=md-ellipsis> DataMapper </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex> <span class=md-ellipsis> Front End </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Front End </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../assets/ class=md-nav__link> <span class=md-ellipsis> Assets </span> </a> </li> <li class=md-nav__item> <a href=../flash/ class=md-nav__link> <span class=md-ellipsis> Flash Messenger </span> </a> </li> <li class=md-nav__item> <a href=../forms/ class=md-nav__link> <span class=md-ellipsis> Forms </span> </a> </li> <li class=md-nav__item> <a href=../image/ class=md-nav__link> <span class=md-ellipsis> Image </span> </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_5> <label class=md-nav__link for=__nav_5_5 id=__nav_5_5_label tabindex> <span class=md-ellipsis> HTML </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5_5> <span class="md-nav__icon md-icon"></span> HTML </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../html-attributes/ class=md-nav__link> <span class=md-ellipsis> Attributes </span> </a> </li> <li class=md-nav__item> <a href=../html-breadcrumbs/ class=md-nav__link> <span class=md-ellipsis> Breadcrumbs </span> </a> </li> <li class=md-nav__item> <a href=../html-escaper/ class=md-nav__link> <span class=md-ellipsis> Escaper </span> </a> </li> <li class=md-nav__item> <a href=../html-link/ class=md-nav__link> <span class=md-ellipsis> Link </span> </a> </li> <li class=md-nav__item> <a href=../html-tagfactory/ class=md-nav__link> <span class=md-ellipsis> Tag Factory </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../tag/ class=md-nav__link> <span class=md-ellipsis> Tag (legacy) </span> </a> </li> <li class=md-nav__item> <a href=../views/ class=md-nav__link> <span class=md-ellipsis> View </span> </a> </li> <li class=md-nav__item> <a href=../volt/ class=md-nav__link> <span class=md-ellipsis> Volt </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex> <span class=md-ellipsis> Business Logic </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Business Logic </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../acl/ class=md-nav__link> <span class=md-ellipsis> Access Control Lists </span> </a> </li> <li class=md-nav__item> <a href=../annotations/ class=md-nav__link> <span class=md-ellipsis> Annotations </span> </a> </li> <li class=md-nav__item> <a href=../controllers/ class=md-nav__link> <span class=md-ellipsis> Controllers </span> </a> </li> <li class=md-nav__item> <a href=../dispatcher/ class=md-nav__link> <span class=md-ellipsis> Dispatcher </span> </a> </li> <li class=md-nav__item> <a href=../events/ class=md-nav__link> <span class=md-ellipsis> Event Manager </span> </a> </li> <li class=md-nav__item> <a href=../filter-filter/ class=md-nav__link> <span class=md-ellipsis> Filters </span> </a> </li> <li class=md-nav__item> <a href=../routing/ class=md-nav__link> <span class=md-ellipsis> Routing </span> </a> </li> <li class=md-nav__item> <a href=../session/ class=md-nav__link> <span class=md-ellipsis> Sessions </span> </a> </li> <li class=md-nav__item> <a href=../mvc-url/ class=md-nav__link> <span class=md-ellipsis> Url </span> </a> </li> <li class=md-nav__item> <a href=../filter-validation/ class=md-nav__link> <span class=md-ellipsis> Validation </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7 id=__nav_7_label tabindex> <span class=md-ellipsis> Services </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Services </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../cache/ class=md-nav__link> <span class=md-ellipsis> Cache </span> </a> </li> <li class=md-nav__item> <a href=../config/ class=md-nav__link> <span class=md-ellipsis> Config </span> </a> </li> <li class=md-nav__item> <a href=../html-escaper/ class=md-nav__link> <span class=md-ellipsis> Escaper </span> </a> </li> <li class=md-nav__item> <a href=../autoload/ class=md-nav__link> <span class=md-ellipsis> Loader </span> </a> </li> <li class=md-nav__item> <a href=../logger/ class=md-nav__link> <span class=md-ellipsis> Logger </span> </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7_6> <label class=md-nav__link for=__nav_7_6 id=__nav_7_6_label tabindex> <span class=md-ellipsis> HTTP </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_7_6_label aria-expanded=false> <label class=md-nav__title for=__nav_7_6> <span class="md-nav__icon md-icon"></span> HTTP </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../response/#cookies class=md-nav__link> <span class=md-ellipsis> Cookies </span> </a> </li> <li class=md-nav__item> <a href=../request/ class=md-nav__link> <span class=md-ellipsis> Request </span> </a> </li> <li class=md-nav__item> <a href=../response/ class=md-nav__link> <span class=md-ellipsis> Response </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7_7> <label class=md-nav__link for=__nav_7_7 id=__nav_7_7_label tabindex> <span class=md-ellipsis> i18n </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_7_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7_7> <span class="md-nav__icon md-icon"></span> i18n </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../i18n/ class=md-nav__link> <span class=md-ellipsis> Internationalization </span> </a> </li> <li class=md-nav__item> <a href=../translate/ class=md-nav__link> <span class=md-ellipsis> Translate </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../queue/ class=md-nav__link> <span class=md-ellipsis> Queue </span> </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7_9> <label class=md-nav__link for=__nav_7_9 id=__nav_7_9_label tabindex> <span class=md-ellipsis> Security </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_7_9_label aria-expanded=false> <label class=md-nav__title for=__nav_7_9> <span class="md-nav__icon md-icon"></span> Security </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../encryption-crypt/ class=md-nav__link> <span class=md-ellipsis> Cryptography </span> </a> </li> <li class=md-nav__item> <a href=../encryption-security/ class=md-nav__link> <span class=md-ellipsis> Security </span> </a> </li> <li class=md-nav__item> <a href=../encryption-security-jwt/ class=md-nav__link> <span class=md-ellipsis> JWT </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../storage/ class=md-nav__link> <span class=md-ellipsis> Storage </span> </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7_11> <label class=md-nav__link for=__nav_7_11 id=__nav_7_11_label tabindex> <span class=md-ellipsis> Utility </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_7_11_label aria-expanded=false> <label class=md-nav__title for=__nav_7_11> <span class="md-nav__icon md-icon"></span> Utility </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../support-collection/ class=md-nav__link> <span class=md-ellipsis> Collection </span> </a> </li> <li class=md-nav__item> <a href=../domain/ class=md-nav__link> <span class=md-ellipsis> Domain </span> </a> </li> <li class=md-nav__item> <a href=../support-helper/ class=md-nav__link> <span class=md-ellipsis> Helper </span> </a> </li> <li class=md-nav__item> <a href=../support-registry/ class=md-nav__link> <span class=md-ellipsis> Registry </span> </a> </li> <li class=md-nav__item> <a href=../support-version/ class=md-nav__link> <span class=md-ellipsis> Version </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#query class=md-nav__link> <span class=md-ellipsis> Query </span> </a> </li> <li class=md-nav__item> <a href=#models-manager class=md-nav__link> <span class=md-ellipsis> Models Manager </span> </a> </li> <li class=md-nav__item> <a href=#select class=md-nav__link> <span class=md-ellipsis> Select </span> </a> <nav class=md-nav aria-label=Select> <ul class=md-nav__list> <li class=md-nav__item> <a href=#results class=md-nav__link> <span class=md-ellipsis> Results </span> </a> </li> <li class=md-nav__item> <a href=#joins class=md-nav__link> <span class=md-ellipsis> Joins </span> </a> </li> <li class=md-nav__item> <a href=#aggregations class=md-nav__link> <span class=md-ellipsis> Aggregations </span> </a> </li> <li class=md-nav__item> <a href=#conditions class=md-nav__link> <span class=md-ellipsis> Conditions </span> </a> </li> <li class=md-nav__item> <a href=#parameters class=md-nav__link> <span class=md-ellipsis> Parameters </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#insert class=md-nav__link> <span class=md-ellipsis> Insert </span> </a> </li> <li class=md-nav__item> <a href=#update class=md-nav__link> <span class=md-ellipsis> Update </span> </a> </li> <li class=md-nav__item> <a href=#deleting-data class=md-nav__link> <span class=md-ellipsis> Deleting Data </span> </a> </li> <li class=md-nav__item> <a href=#query-builder class=md-nav__link> <span class=md-ellipsis> Query Builder </span> </a> <nav class=md-nav aria-label="Query Builder"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#parameters_1 class=md-nav__link> <span class=md-ellipsis> Parameters </span> </a> </li> <li class=md-nav__item> <a href=#getters class=md-nav__link> <span class=md-ellipsis> Getters </span> </a> </li> <li class=md-nav__item> <a href=#methods class=md-nav__link> <span class=md-ellipsis> Methods </span> </a> </li> <li class=md-nav__item> <a href=#examples class=md-nav__link> <span class=md-ellipsis> Examples </span> </a> </li> <li class=md-nav__item> <a href=#bound-parameters class=md-nav__link> <span class=md-ellipsis> Bound Parameters </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#disable-literals-in-phql class=md-nav__link> <span class=md-ellipsis> Disable Literals in PHQL </span> </a> </li> <li class=md-nav__item> <a href=#reserved-words class=md-nav__link> <span class=md-ellipsis> Reserved Words </span> </a> </li> <li class=md-nav__item> <a href=#custom-dialect class=md-nav__link> <span class=md-ellipsis> Custom Dialect </span> </a> </li> <li class=md-nav__item> <a href=#caching class=md-nav__link> <span class=md-ellipsis> Caching </span> </a> </li> <li class=md-nav__item> <a href=#lifecycle class=md-nav__link> <span class=md-ellipsis> Lifecycle </span> </a> </li> <li class=md-nav__item> <a href=#raw-sql class=md-nav__link> <span class=md-ellipsis> Raw SQL </span> </a> </li> <li class=md-nav__item> <a href=#troubleshooting class=md-nav__link> <span class=md-ellipsis> Troubleshooting </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/phalcon/documentation/edit/master/docs/db-phql.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg> </a> <a href=https://github.com/phalcon/documentation/raw/master/docs/db-phql.md title="View source of this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.15 8.15 0 0 1-1.23-2Z"/></svg> </a> <h1 id=phalcon-query-language-phql>Phalcon Query Language (PHQL)<a class=headerlink href=#phalcon-query-language-phql title="Permanent link">&para;</a></h1> <hr> <h2 id=overview>Overview<a class=headerlink href=#overview title="Permanent link">&para;</a></h2> <p>Phalcon Query Language, PhalconQL or simply PHQL is a high-level, object-oriented SQL dialect that allows you to write queries using a standardized SQL-like language. PHQL is implemented as a parser (written in C) that translates syntax in that of the target RDBMS.</p> <p>To achieve the highest performance possible, Phalcon provides a parser that uses the same technology as <a href=https://en.wikipedia.org/wiki/Lemon_Parser_Generator>SQLite</a>. This technology provides a small in-memory parser with a very low memory footprint that is also thread-safe.</p> <p>The parser first checks the syntax of the PHQL statement to be parsed, then builds an intermediate representation of the statement, and finally it converts it to the respective SQL dialect of the target RDBMS.</p> <p>In PHQL, we have implemented a set of features to make your access to databases more securely:</p> <ul> <li>Bound parameters are part of the PHQL language helping you to secure your code</li> <li>PHQL only allows one SQL statement to be executed per call preventing injections</li> <li>PHQL ignores all SQL comments which are often used in SQL injections</li> <li>PHQL only allows data manipulation statements, avoiding altering or dropping tables/databases by mistake or externally without authorization</li> <li>PHQL implements a high-level abstraction allowing you to handle tables as models and fields as class attributes</li> </ul> <p>To better explain how PHQL works, for this article we are going to use two models <code>Invoices</code> and <code>Customers</code>:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=k>namespace</span> <span class=nx>MyApp\Models</span><span class=p>;</span>
<a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a>
<a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a><span class=k>use</span> <span class=nx>MyApp\Models\Customers</span><span class=p>;</span>
<a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\Model</span><span class=p>;</span>
<a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a>
<a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a><span class=k>class</span> <span class=nc>Invoices</span> <span class=k>extends</span> <span class=nx>Model</span>
<a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a><span class=p>{</span>
<a id=__codelineno-0-10 name=__codelineno-0-10 href=#__codelineno-0-10></a>    <span class=k>public</span> <span class=nv>$inv_cst_id</span><span class=p>;</span>
<a id=__codelineno-0-11 name=__codelineno-0-11 href=#__codelineno-0-11></a>
<a id=__codelineno-0-12 name=__codelineno-0-12 href=#__codelineno-0-12></a>    <span class=k>public</span> <span class=nv>$inv_id</span><span class=p>;</span>
<a id=__codelineno-0-13 name=__codelineno-0-13 href=#__codelineno-0-13></a>
<a id=__codelineno-0-14 name=__codelineno-0-14 href=#__codelineno-0-14></a>    <span class=k>public</span> <span class=nv>$inv_status_flag</span><span class=p>;</span>
<a id=__codelineno-0-15 name=__codelineno-0-15 href=#__codelineno-0-15></a>
<a id=__codelineno-0-16 name=__codelineno-0-16 href=#__codelineno-0-16></a>    <span class=k>public</span> <span class=nv>$inv_title</span><span class=p>;</span>
<a id=__codelineno-0-17 name=__codelineno-0-17 href=#__codelineno-0-17></a>
<a id=__codelineno-0-18 name=__codelineno-0-18 href=#__codelineno-0-18></a>    <span class=k>public</span> <span class=nv>$inv_created_at</span><span class=p>;</span>
<a id=__codelineno-0-19 name=__codelineno-0-19 href=#__codelineno-0-19></a>
<a id=__codelineno-0-20 name=__codelineno-0-20 href=#__codelineno-0-20></a>    <span class=k>public</span> <span class=k>function</span> <span class=nf>initialize</span><span class=p>()</span>
<a id=__codelineno-0-21 name=__codelineno-0-21 href=#__codelineno-0-21></a>    <span class=p>{</span>
<a id=__codelineno-0-22 name=__codelineno-0-22 href=#__codelineno-0-22></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>setSource</span><span class=p>(</span><span class=s1>&#39;co_invoices&#39;</span><span class=p>);</span>
<a id=__codelineno-0-23 name=__codelineno-0-23 href=#__codelineno-0-23></a>
<a id=__codelineno-0-24 name=__codelineno-0-24 href=#__codelineno-0-24></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>belongsTo</span><span class=p>(</span>
<a id=__codelineno-0-25 name=__codelineno-0-25 href=#__codelineno-0-25></a>            <span class=s1>&#39;inv_cst_id&#39;</span><span class=p>,</span> 
<a id=__codelineno-0-26 name=__codelineno-0-26 href=#__codelineno-0-26></a>            <span class=nx>Customers</span><span class=o>::</span><span class=na>class</span><span class=p>,</span> 
<a id=__codelineno-0-27 name=__codelineno-0-27 href=#__codelineno-0-27></a>            <span class=s1>&#39;cst_id&#39;</span>
<a id=__codelineno-0-28 name=__codelineno-0-28 href=#__codelineno-0-28></a>        <span class=p>);</span>
<a id=__codelineno-0-29 name=__codelineno-0-29 href=#__codelineno-0-29></a>    <span class=p>}</span>
<a id=__codelineno-0-30 name=__codelineno-0-30 href=#__codelineno-0-30></a><span class=p>}</span>
</code></pre></div> <p>And every Customer has one or more invoices:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a>
<a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a><span class=k>namespace</span> <span class=nx>MyApp\Models</span><span class=p>;</span>
<a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a>
<a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a><span class=k>use</span> <span class=nx>MyApp\Models\Invoices</span><span class=p>;</span>
<a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\Model</span><span class=p>;</span>
<a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a>
<a id=__codelineno-1-8 name=__codelineno-1-8 href=#__codelineno-1-8></a><span class=k>class</span> <span class=nc>Customers</span> <span class=k>extends</span> <span class=nx>Model</span>
<a id=__codelineno-1-9 name=__codelineno-1-9 href=#__codelineno-1-9></a><span class=p>{</span>
<a id=__codelineno-1-10 name=__codelineno-1-10 href=#__codelineno-1-10></a>    <span class=k>public</span> <span class=nv>$cst_id</span><span class=p>;</span>
<a id=__codelineno-1-11 name=__codelineno-1-11 href=#__codelineno-1-11></a>
<a id=__codelineno-1-12 name=__codelineno-1-12 href=#__codelineno-1-12></a>    <span class=k>public</span> <span class=nv>$cst_active_flag</span><span class=p>;</span>
<a id=__codelineno-1-13 name=__codelineno-1-13 href=#__codelineno-1-13></a>
<a id=__codelineno-1-14 name=__codelineno-1-14 href=#__codelineno-1-14></a>    <span class=k>public</span> <span class=nv>$cst_name_last</span><span class=p>;</span>
<a id=__codelineno-1-15 name=__codelineno-1-15 href=#__codelineno-1-15></a>
<a id=__codelineno-1-16 name=__codelineno-1-16 href=#__codelineno-1-16></a>    <span class=k>public</span> <span class=nv>$cst_name_first</span><span class=p>;</span>
<a id=__codelineno-1-17 name=__codelineno-1-17 href=#__codelineno-1-17></a>
<a id=__codelineno-1-18 name=__codelineno-1-18 href=#__codelineno-1-18></a>    <span class=k>public</span> <span class=nv>$cst_created_at</span><span class=p>;</span>
<a id=__codelineno-1-19 name=__codelineno-1-19 href=#__codelineno-1-19></a>
<a id=__codelineno-1-20 name=__codelineno-1-20 href=#__codelineno-1-20></a>    <span class=k>public</span> <span class=k>function</span> <span class=nf>initialize</span><span class=p>()</span>
<a id=__codelineno-1-21 name=__codelineno-1-21 href=#__codelineno-1-21></a>    <span class=p>{</span>
<a id=__codelineno-1-22 name=__codelineno-1-22 href=#__codelineno-1-22></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>setSource</span><span class=p>(</span><span class=s1>&#39;co_customers&#39;</span><span class=p>);</span>
<a id=__codelineno-1-23 name=__codelineno-1-23 href=#__codelineno-1-23></a>
<a id=__codelineno-1-24 name=__codelineno-1-24 href=#__codelineno-1-24></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>hasMany</span><span class=p>(</span>
<a id=__codelineno-1-25 name=__codelineno-1-25 href=#__codelineno-1-25></a>            <span class=s1>&#39;cst_id&#39;</span><span class=p>,</span> 
<a id=__codelineno-1-26 name=__codelineno-1-26 href=#__codelineno-1-26></a>            <span class=nx>Invoices</span><span class=o>::</span><span class=na>class</span><span class=p>,</span> 
<a id=__codelineno-1-27 name=__codelineno-1-27 href=#__codelineno-1-27></a>            <span class=s1>&#39;inv_cst_id&#39;</span>
<a id=__codelineno-1-28 name=__codelineno-1-28 href=#__codelineno-1-28></a>        <span class=p>);</span>
<a id=__codelineno-1-29 name=__codelineno-1-29 href=#__codelineno-1-29></a>    <span class=p>}</span>
<a id=__codelineno-1-30 name=__codelineno-1-30 href=#__codelineno-1-30></a><span class=p>}</span>
</code></pre></div> <h2 id=query>Query<a class=headerlink href=#query title="Permanent link">&para;</a></h2> <p>PHQL queries can be created just by instantiating the class <a href=../api/phalcon_mvc/#mvc-model-query>Phalcon\Mvc\Model\Query</a>:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a>
<a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\Model\Query</span><span class=p>;</span>
<a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a>
<a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a><span class=nv>$container</span> <span class=o>=</span> <span class=nx>Di</span><span class=o>::</span><span class=na>getDefault</span><span class=p>();</span>
<a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a><span class=nv>$query</span>     <span class=o>=</span> <span class=k>new</span> <span class=nx>Query</span><span class=p>(</span>
<a id=__codelineno-2-7 name=__codelineno-2-7 href=#__codelineno-2-7></a>    <span class=s1>&#39;SELECT * FROM Invoices&#39;</span><span class=p>,</span>
<a id=__codelineno-2-8 name=__codelineno-2-8 href=#__codelineno-2-8></a>    <span class=nv>$container</span>
<a id=__codelineno-2-9 name=__codelineno-2-9 href=#__codelineno-2-9></a><span class=p>);</span>
<a id=__codelineno-2-10 name=__codelineno-2-10 href=#__codelineno-2-10></a>
<a id=__codelineno-2-11 name=__codelineno-2-11 href=#__codelineno-2-11></a><span class=nv>$invoices</span> <span class=o>=</span> <span class=nv>$query</span><span class=o>-&gt;</span><span class=na>execute</span><span class=p>();</span>
</code></pre></div> <p>The <a href=../api/phalcon_mvc/#mvc-model-query>Phalcon\Mvc\Model\Query</a> requires the second parameter of the constructor to be the DI container. When calling the above code from a controller or any class that extends the <a href=../api/phalcon_di/#di-injectable>Phalcon\Di\Injectable</a>, you can use:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a>
<a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a><span class=k>use</span> <span class=nx>Phalcon\Di\Di</span><span class=p>;</span>
<a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\Controller</span><span class=p>;</span>
<a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\Model\Query</span><span class=p>;</span>
<a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\View</span><span class=p>;</span>
<a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a>
<a id=__codelineno-3-8 name=__codelineno-3-8 href=#__codelineno-3-8></a><span class=sd>/**</span>
<a id=__codelineno-3-9 name=__codelineno-3-9 href=#__codelineno-3-9></a><span class=sd> * @property Di   $di</span>
<a id=__codelineno-3-10 name=__codelineno-3-10 href=#__codelineno-3-10></a><span class=sd> * @property View $view</span>
<a id=__codelineno-3-11 name=__codelineno-3-11 href=#__codelineno-3-11></a><span class=sd> */</span>
<a id=__codelineno-3-12 name=__codelineno-3-12 href=#__codelineno-3-12></a><span class=k>class</span> <span class=nc>Invoices</span> <span class=k>extends</span> <span class=nx>Controller</span>
<a id=__codelineno-3-13 name=__codelineno-3-13 href=#__codelineno-3-13></a><span class=p>{</span>
<a id=__codelineno-3-14 name=__codelineno-3-14 href=#__codelineno-3-14></a>    <span class=k>public</span> <span class=k>function</span> <span class=nf>listAction</span><span class=p>()</span>
<a id=__codelineno-3-15 name=__codelineno-3-15 href=#__codelineno-3-15></a>    <span class=p>{</span>
<a id=__codelineno-3-16 name=__codelineno-3-16 href=#__codelineno-3-16></a>        <span class=nv>$query</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Query</span><span class=p>(</span>
<a id=__codelineno-3-17 name=__codelineno-3-17 href=#__codelineno-3-17></a>            <span class=s1>&#39;SELECT * FROM Invoices&#39;</span><span class=p>,</span>
<a id=__codelineno-3-18 name=__codelineno-3-18 href=#__codelineno-3-18></a>            <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>di</span>
<a id=__codelineno-3-19 name=__codelineno-3-19 href=#__codelineno-3-19></a>        <span class=p>);</span>
<a id=__codelineno-3-20 name=__codelineno-3-20 href=#__codelineno-3-20></a>
<a id=__codelineno-3-21 name=__codelineno-3-21 href=#__codelineno-3-21></a>        <span class=nv>$invoices</span> <span class=o>=</span> <span class=nv>$query</span><span class=o>-&gt;</span><span class=na>execute</span><span class=p>();</span>
<a id=__codelineno-3-22 name=__codelineno-3-22 href=#__codelineno-3-22></a>
<a id=__codelineno-3-23 name=__codelineno-3-23 href=#__codelineno-3-23></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>view</span><span class=o>-&gt;</span><span class=na>setVar</span><span class=p>(</span><span class=s1>&#39;invoices&#39;</span><span class=p>,</span> <span class=nv>$invoices</span><span class=p>);</span>
<a id=__codelineno-3-24 name=__codelineno-3-24 href=#__codelineno-3-24></a>    <span class=p>}</span>
<a id=__codelineno-3-25 name=__codelineno-3-25 href=#__codelineno-3-25></a><span class=p>}</span>
</code></pre></div> <h2 id=models-manager>Models Manager<a class=headerlink href=#models-manager title="Permanent link">&para;</a></h2> <p>We can also utilize the <a href=../api/phalcon_mvc/#mvc-model-manager>Phalcon\Mvc\Model\Manager</a> which is injected in the DI container:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a>
<a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\Controller</span><span class=p>;</span>
<a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\Model\Manager</span><span class=p>;</span>
<a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\View</span><span class=p>;</span>
<a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a>
<a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a><span class=sd>/**</span>
<a id=__codelineno-4-8 name=__codelineno-4-8 href=#__codelineno-4-8></a><span class=sd> * @property Manager $modelsManager</span>
<a id=__codelineno-4-9 name=__codelineno-4-9 href=#__codelineno-4-9></a><span class=sd> * @property View    $view</span>
<a id=__codelineno-4-10 name=__codelineno-4-10 href=#__codelineno-4-10></a><span class=sd> */</span>
<a id=__codelineno-4-11 name=__codelineno-4-11 href=#__codelineno-4-11></a><span class=k>class</span> <span class=nc>Invoices</span> <span class=k>extends</span> <span class=nx>Controller</span>
<a id=__codelineno-4-12 name=__codelineno-4-12 href=#__codelineno-4-12></a><span class=p>{</span>
<a id=__codelineno-4-13 name=__codelineno-4-13 href=#__codelineno-4-13></a>    <span class=k>public</span> <span class=k>function</span> <span class=nf>listAction</span><span class=p>()</span>
<a id=__codelineno-4-14 name=__codelineno-4-14 href=#__codelineno-4-14></a>    <span class=p>{</span>
<a id=__codelineno-4-15 name=__codelineno-4-15 href=#__codelineno-4-15></a>        <span class=nv>$query</span> <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-4-16 name=__codelineno-4-16 href=#__codelineno-4-16></a>            <span class=o>-&gt;</span><span class=na>modelsManager</span>
<a id=__codelineno-4-17 name=__codelineno-4-17 href=#__codelineno-4-17></a>            <span class=o>-&gt;</span><span class=na>createQuery</span><span class=p>(</span>
<a id=__codelineno-4-18 name=__codelineno-4-18 href=#__codelineno-4-18></a>                <span class=s1>&#39;SELECT * FROM Invoices&#39;</span>
<a id=__codelineno-4-19 name=__codelineno-4-19 href=#__codelineno-4-19></a>            <span class=p>)</span>
<a id=__codelineno-4-20 name=__codelineno-4-20 href=#__codelineno-4-20></a>        <span class=p>;</span>
<a id=__codelineno-4-21 name=__codelineno-4-21 href=#__codelineno-4-21></a>
<a id=__codelineno-4-22 name=__codelineno-4-22 href=#__codelineno-4-22></a>        <span class=nv>$invoices</span> <span class=o>=</span> <span class=nv>$query</span><span class=o>-&gt;</span><span class=na>execute</span><span class=p>();</span>
<a id=__codelineno-4-23 name=__codelineno-4-23 href=#__codelineno-4-23></a>
<a id=__codelineno-4-24 name=__codelineno-4-24 href=#__codelineno-4-24></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>view</span><span class=o>-&gt;</span><span class=na>setVar</span><span class=p>(</span><span class=s1>&#39;invoices&#39;</span><span class=p>,</span> <span class=nv>$invoices</span><span class=p>);</span>
<a id=__codelineno-4-25 name=__codelineno-4-25 href=#__codelineno-4-25></a>    <span class=p>}</span>
<a id=__codelineno-4-26 name=__codelineno-4-26 href=#__codelineno-4-26></a><span class=p>}</span>
</code></pre></div> <p>Using bound parameters:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a>
<a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a><span class=k>use</span> <span class=nx>Phalcon\Http\Request</span><span class=p>;</span>
<a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\Controller</span><span class=p>;</span>
<a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\Model\Manager</span><span class=p>;</span>
<a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\View</span><span class=p>;</span>
<a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a>
<a id=__codelineno-5-8 name=__codelineno-5-8 href=#__codelineno-5-8></a><span class=sd>/**</span>
<a id=__codelineno-5-9 name=__codelineno-5-9 href=#__codelineno-5-9></a><span class=sd> * @property Manager $modelsManager</span>
<a id=__codelineno-5-10 name=__codelineno-5-10 href=#__codelineno-5-10></a><span class=sd> * @property Request $request</span>
<a id=__codelineno-5-11 name=__codelineno-5-11 href=#__codelineno-5-11></a><span class=sd> * @property View    $view</span>
<a id=__codelineno-5-12 name=__codelineno-5-12 href=#__codelineno-5-12></a><span class=sd> */</span>
<a id=__codelineno-5-13 name=__codelineno-5-13 href=#__codelineno-5-13></a><span class=k>class</span> <span class=nc>Invoices</span> <span class=k>extends</span> <span class=nx>Controller</span>
<a id=__codelineno-5-14 name=__codelineno-5-14 href=#__codelineno-5-14></a><span class=p>{</span>
<a id=__codelineno-5-15 name=__codelineno-5-15 href=#__codelineno-5-15></a>    <span class=k>public</span> <span class=k>function</span> <span class=nf>viewAction</span><span class=p>()</span>
<a id=__codelineno-5-16 name=__codelineno-5-16 href=#__codelineno-5-16></a>    <span class=p>{</span>
<a id=__codelineno-5-17 name=__codelineno-5-17 href=#__codelineno-5-17></a>        <span class=nv>$invoiceId</span> <span class=o>=</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>request</span><span class=o>-&gt;</span><span class=na>getQuery</span><span class=p>(</span><span class=s1>&#39;id&#39;</span><span class=p>,</span> <span class=s1>&#39;int&#39;</span><span class=p>);</span>
<a id=__codelineno-5-18 name=__codelineno-5-18 href=#__codelineno-5-18></a>        <span class=nv>$query</span>     <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-5-19 name=__codelineno-5-19 href=#__codelineno-5-19></a>            <span class=o>-&gt;</span><span class=na>modelsManager</span>
<a id=__codelineno-5-20 name=__codelineno-5-20 href=#__codelineno-5-20></a>            <span class=o>-&gt;</span><span class=na>createQuery</span><span class=p>(</span>
<a id=__codelineno-5-21 name=__codelineno-5-21 href=#__codelineno-5-21></a>                <span class=s1>&#39;SELECT * FROM Invoices WHERE inv_id = :id:&#39;</span>
<a id=__codelineno-5-22 name=__codelineno-5-22 href=#__codelineno-5-22></a>            <span class=p>)</span>
<a id=__codelineno-5-23 name=__codelineno-5-23 href=#__codelineno-5-23></a>        <span class=p>;</span>
<a id=__codelineno-5-24 name=__codelineno-5-24 href=#__codelineno-5-24></a>
<a id=__codelineno-5-25 name=__codelineno-5-25 href=#__codelineno-5-25></a>        <span class=nv>$invoices</span> <span class=o>=</span> <span class=nv>$query</span><span class=o>-&gt;</span><span class=na>execute</span><span class=p>(</span>
<a id=__codelineno-5-26 name=__codelineno-5-26 href=#__codelineno-5-26></a>            <span class=p>[</span>
<a id=__codelineno-5-27 name=__codelineno-5-27 href=#__codelineno-5-27></a>                <span class=s1>&#39;id&#39;</span> <span class=o>=&gt;</span> <span class=nv>$invoiceId</span><span class=p>,</span>
<a id=__codelineno-5-28 name=__codelineno-5-28 href=#__codelineno-5-28></a>            <span class=p>]</span>
<a id=__codelineno-5-29 name=__codelineno-5-29 href=#__codelineno-5-29></a>        <span class=p>);</span>
<a id=__codelineno-5-30 name=__codelineno-5-30 href=#__codelineno-5-30></a>
<a id=__codelineno-5-31 name=__codelineno-5-31 href=#__codelineno-5-31></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>view</span><span class=o>-&gt;</span><span class=na>setVar</span><span class=p>(</span><span class=s1>&#39;invoices&#39;</span><span class=p>,</span> <span class=nv>$invoices</span><span class=p>);</span>
<a id=__codelineno-5-32 name=__codelineno-5-32 href=#__codelineno-5-32></a>    <span class=p>}</span>
<a id=__codelineno-5-33 name=__codelineno-5-33 href=#__codelineno-5-33></a><span class=p>}</span>
</code></pre></div> <p>You can also skip creating the query and then executing it and instead execute the query directly from the Models Manager object:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a>
<a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\Controller</span><span class=p>;</span>
<a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\Model\Manager</span><span class=p>;</span>
<a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\View</span><span class=p>;</span>
<a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a>
<a id=__codelineno-6-7 name=__codelineno-6-7 href=#__codelineno-6-7></a><span class=sd>/**</span>
<a id=__codelineno-6-8 name=__codelineno-6-8 href=#__codelineno-6-8></a><span class=sd> * @property Manager $modelsManager</span>
<a id=__codelineno-6-9 name=__codelineno-6-9 href=#__codelineno-6-9></a><span class=sd> * @property View    $view</span>
<a id=__codelineno-6-10 name=__codelineno-6-10 href=#__codelineno-6-10></a><span class=sd> */</span>
<a id=__codelineno-6-11 name=__codelineno-6-11 href=#__codelineno-6-11></a><span class=k>class</span> <span class=nc>Invoices</span> <span class=k>extends</span> <span class=nx>Controller</span>
<a id=__codelineno-6-12 name=__codelineno-6-12 href=#__codelineno-6-12></a><span class=p>{</span>
<a id=__codelineno-6-13 name=__codelineno-6-13 href=#__codelineno-6-13></a>    <span class=k>public</span> <span class=k>function</span> <span class=nf>listAction</span><span class=p>()</span>
<a id=__codelineno-6-14 name=__codelineno-6-14 href=#__codelineno-6-14></a>    <span class=p>{</span>
<a id=__codelineno-6-15 name=__codelineno-6-15 href=#__codelineno-6-15></a>        <span class=nv>$invoices</span> <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-6-16 name=__codelineno-6-16 href=#__codelineno-6-16></a>            <span class=o>-&gt;</span><span class=na>modelsManager</span>
<a id=__codelineno-6-17 name=__codelineno-6-17 href=#__codelineno-6-17></a>            <span class=o>-&gt;</span><span class=na>executeQuery</span><span class=p>(</span>
<a id=__codelineno-6-18 name=__codelineno-6-18 href=#__codelineno-6-18></a>                <span class=s1>&#39;SELECT * FROM Invoices&#39;</span>
<a id=__codelineno-6-19 name=__codelineno-6-19 href=#__codelineno-6-19></a>            <span class=p>)</span>
<a id=__codelineno-6-20 name=__codelineno-6-20 href=#__codelineno-6-20></a>        <span class=p>;</span>
<a id=__codelineno-6-21 name=__codelineno-6-21 href=#__codelineno-6-21></a>
<a id=__codelineno-6-22 name=__codelineno-6-22 href=#__codelineno-6-22></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>view</span><span class=o>-&gt;</span><span class=na>setVar</span><span class=p>(</span><span class=s1>&#39;invoices&#39;</span><span class=p>,</span> <span class=nv>$invoices</span><span class=p>);</span>
<a id=__codelineno-6-23 name=__codelineno-6-23 href=#__codelineno-6-23></a>    <span class=p>}</span>
<a id=__codelineno-6-24 name=__codelineno-6-24 href=#__codelineno-6-24></a><span class=p>}</span>
</code></pre></div> <p>Using bound parameters:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a>
<a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a><span class=k>use</span> <span class=nx>Phalcon\Http\Request</span><span class=p>;</span>
<a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\Controller</span><span class=p>;</span>
<a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\Model\Manager</span><span class=p>;</span>
<a id=__codelineno-7-6 name=__codelineno-7-6 href=#__codelineno-7-6></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\View</span><span class=p>;</span>
<a id=__codelineno-7-7 name=__codelineno-7-7 href=#__codelineno-7-7></a>
<a id=__codelineno-7-8 name=__codelineno-7-8 href=#__codelineno-7-8></a><span class=sd>/**</span>
<a id=__codelineno-7-9 name=__codelineno-7-9 href=#__codelineno-7-9></a><span class=sd> * @property Manager $modelsManager</span>
<a id=__codelineno-7-10 name=__codelineno-7-10 href=#__codelineno-7-10></a><span class=sd> * @property Request $request</span>
<a id=__codelineno-7-11 name=__codelineno-7-11 href=#__codelineno-7-11></a><span class=sd> * @property View    $view</span>
<a id=__codelineno-7-12 name=__codelineno-7-12 href=#__codelineno-7-12></a><span class=sd> */</span>
<a id=__codelineno-7-13 name=__codelineno-7-13 href=#__codelineno-7-13></a><span class=k>class</span> <span class=nc>Invoices</span> <span class=k>extends</span> <span class=nx>Controller</span>
<a id=__codelineno-7-14 name=__codelineno-7-14 href=#__codelineno-7-14></a><span class=p>{</span>
<a id=__codelineno-7-15 name=__codelineno-7-15 href=#__codelineno-7-15></a>    <span class=k>public</span> <span class=k>function</span> <span class=nf>viewAction</span><span class=p>()</span>
<a id=__codelineno-7-16 name=__codelineno-7-16 href=#__codelineno-7-16></a>    <span class=p>{</span>
<a id=__codelineno-7-17 name=__codelineno-7-17 href=#__codelineno-7-17></a>        <span class=nv>$invoiceId</span> <span class=o>=</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>request</span><span class=o>-&gt;</span><span class=na>getQuery</span><span class=p>(</span><span class=s1>&#39;id&#39;</span><span class=p>,</span> <span class=s1>&#39;int&#39;</span><span class=p>);</span>
<a id=__codelineno-7-18 name=__codelineno-7-18 href=#__codelineno-7-18></a>        <span class=nv>$invoices</span>  <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-7-19 name=__codelineno-7-19 href=#__codelineno-7-19></a>            <span class=o>-&gt;</span><span class=na>modelsManager</span>
<a id=__codelineno-7-20 name=__codelineno-7-20 href=#__codelineno-7-20></a>            <span class=o>-&gt;</span><span class=na>executeQuery</span><span class=p>(</span>
<a id=__codelineno-7-21 name=__codelineno-7-21 href=#__codelineno-7-21></a>                <span class=s1>&#39;SELECT * FROM Invoices WHERE inv_id = :id:&#39;</span><span class=p>,</span>
<a id=__codelineno-7-22 name=__codelineno-7-22 href=#__codelineno-7-22></a>                <span class=p>[</span>
<a id=__codelineno-7-23 name=__codelineno-7-23 href=#__codelineno-7-23></a>                    <span class=s1>&#39;id&#39;</span> <span class=o>=&gt;</span> <span class=nv>$invoiceId</span><span class=p>,</span>
<a id=__codelineno-7-24 name=__codelineno-7-24 href=#__codelineno-7-24></a>                <span class=p>]</span>
<a id=__codelineno-7-25 name=__codelineno-7-25 href=#__codelineno-7-25></a>            <span class=p>)</span>
<a id=__codelineno-7-26 name=__codelineno-7-26 href=#__codelineno-7-26></a>        <span class=p>;</span>
<a id=__codelineno-7-27 name=__codelineno-7-27 href=#__codelineno-7-27></a>
<a id=__codelineno-7-28 name=__codelineno-7-28 href=#__codelineno-7-28></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>view</span><span class=o>-&gt;</span><span class=na>setVar</span><span class=p>(</span><span class=s1>&#39;invoices&#39;</span><span class=p>,</span> <span class=nv>$invoices</span><span class=p>);</span>
<a id=__codelineno-7-29 name=__codelineno-7-29 href=#__codelineno-7-29></a>    <span class=p>}</span>
<a id=__codelineno-7-30 name=__codelineno-7-30 href=#__codelineno-7-30></a><span class=p>}</span>
</code></pre></div> <h2 id=select>Select<a class=headerlink href=#select title="Permanent link">&para;</a></h2> <p>As the familiar SQL, PHQL allows selecting records using the <code>SELECT</code> statement, except that instead of specifying tables, we use the model classes:</p> <p><strong>Models</strong></p> <div class=highlight><pre><span></span><code><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=k>SELECT</span><span class=w> </span>
<a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a><span class=w>    </span><span class=o>*</span><span class=w> </span>
<a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a><span class=k>FROM</span><span class=w>   </span>
<a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a><span class=w>    </span><span class=n>Invoices</span><span class=w>  </span>
<a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span>
<a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a><span class=w>    </span><span class=n>Invoices</span><span class=p>.</span><span class=n>inv_title</span>
</code></pre></div> <div class=highlight><pre><span></span><code><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=k>SELECT</span><span class=w> </span>
<a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a><span class=w>    </span><span class=n>Invoices</span><span class=p>.</span><span class=n>inv_id</span><span class=p>,</span><span class=w> </span>
<a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a><span class=w>    </span><span class=n>Invoices</span><span class=p>.</span><span class=n>inv_title</span><span class=p>,</span><span class=w> </span>
<a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a><span class=w>    </span><span class=n>Invoices</span><span class=p>.</span><span class=n>inv_status_flag</span>
<a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a><span class=k>FROM</span><span class=w>   </span>
<a id=__codelineno-9-6 name=__codelineno-9-6 href=#__codelineno-9-6></a><span class=w>    </span><span class=n>Invoices</span><span class=w>  </span>
<a id=__codelineno-9-7 name=__codelineno-9-7 href=#__codelineno-9-7></a><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span>
<a id=__codelineno-9-8 name=__codelineno-9-8 href=#__codelineno-9-8></a><span class=w>    </span><span class=n>Invoices</span><span class=p>.</span><span class=n>inv_title</span>
</code></pre></div> <p><strong>Namespaced models</strong></p> <div class=highlight><pre><span></span><code><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=k>SELECT</span><span class=w> </span>
<a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a><span class=w>    </span><span class=o>*</span><span class=w> </span>
<a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a><span class=k>FROM</span><span class=w>   </span>
<a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a><span class=w>    </span><span class=n>MyApp</span><span class=err>\</span><span class=n>Models</span><span class=err>\</span><span class=n>Invoices</span>
<a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span>
<a id=__codelineno-10-6 name=__codelineno-10-6 href=#__codelineno-10-6></a><span class=w>    </span><span class=n>MyApp</span><span class=err>\</span><span class=n>Models</span><span class=err>\</span><span class=n>Invoices</span><span class=p>.</span><span class=n>inv_title</span><span class=err>&#39;</span>
</code></pre></div> <p><strong>Aliases</strong></p> <div class=highlight><pre><span></span><code><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=k>SELECT</span><span class=w> </span>
<a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a><span class=w>    </span><span class=n>i</span><span class=p>.</span><span class=n>inv_id</span><span class=p>,</span><span class=w> </span>
<a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a><span class=w>    </span><span class=n>i</span><span class=p>.</span><span class=n>inv_title</span><span class=p>,</span><span class=w> </span>
<a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a><span class=w>    </span><span class=n>i</span><span class=p>.</span><span class=n>inv_status_flag</span>
<a id=__codelineno-11-5 name=__codelineno-11-5 href=#__codelineno-11-5></a><span class=k>FROM</span><span class=w>   </span>
<a id=__codelineno-11-6 name=__codelineno-11-6 href=#__codelineno-11-6></a><span class=w>    </span><span class=n>Invoices</span><span class=w> </span><span class=n>i</span><span class=w>  </span>
<a id=__codelineno-11-7 name=__codelineno-11-7 href=#__codelineno-11-7></a><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span>
<a id=__codelineno-11-8 name=__codelineno-11-8 href=#__codelineno-11-8></a><span class=w>    </span><span class=n>i</span><span class=p>.</span><span class=n>inv_title</span>
</code></pre></div> <p><strong><code>CASE</code></strong></p> <div class=highlight><pre><span></span><code><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=k>SELECT</span><span class=w> </span>
<a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a><span class=w>    </span><span class=n>i</span><span class=p>.</span><span class=n>inv_id</span><span class=p>,</span><span class=w> </span>
<a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a><span class=w>    </span><span class=n>i</span><span class=p>.</span><span class=n>inv_title</span><span class=p>,</span><span class=w> </span>
<a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a><span class=w>    </span><span class=k>CASE</span><span class=w> </span><span class=n>i</span><span class=p>.</span><span class=n>inv_status_flag</span>
<a id=__codelineno-12-5 name=__codelineno-12-5 href=#__codelineno-12-5></a><span class=w>        </span><span class=k>WHEN</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=k>THEN</span><span class=w> </span><span class=s1>&#39;Paid&#39;</span>
<a id=__codelineno-12-6 name=__codelineno-12-6 href=#__codelineno-12-6></a><span class=w>        </span><span class=k>WHEN</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=k>THEN</span><span class=w> </span><span class=s1>&#39;Unpaid&#39;</span>
<a id=__codelineno-12-7 name=__codelineno-12-7 href=#__codelineno-12-7></a><span class=w>    </span><span class=k>END</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>status_text</span>
<a id=__codelineno-12-8 name=__codelineno-12-8 href=#__codelineno-12-8></a><span class=k>FROM</span><span class=w>   </span>
<a id=__codelineno-12-9 name=__codelineno-12-9 href=#__codelineno-12-9></a><span class=w>    </span><span class=n>Invoices</span><span class=w> </span><span class=n>i</span>
<a id=__codelineno-12-10 name=__codelineno-12-10 href=#__codelineno-12-10></a><span class=k>WHERE</span><span class=w>  </span>
<a id=__codelineno-12-11 name=__codelineno-12-11 href=#__codelineno-12-11></a><span class=w>    </span><span class=n>i</span><span class=p>.</span><span class=n>inv_status_flag</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=w>  </span>
<a id=__codelineno-12-12 name=__codelineno-12-12 href=#__codelineno-12-12></a><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span>
<a id=__codelineno-12-13 name=__codelineno-12-13 href=#__codelineno-12-13></a><span class=w>    </span><span class=n>i</span><span class=p>.</span><span class=n>inv_title</span>
<a id=__codelineno-12-14 name=__codelineno-12-14 href=#__codelineno-12-14></a><span class=k>LIMIT</span><span class=w> </span><span class=mi>100</span>
</code></pre></div> <p><strong><code>LIMIT</code></strong></p> <div class=highlight><pre><span></span><code><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a><span class=k>SELECT</span><span class=w> </span>
<a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a><span class=w>    </span><span class=n>i</span><span class=p>.</span><span class=n>inv_id</span><span class=p>,</span><span class=w> </span>
<a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a><span class=w>    </span><span class=n>i</span><span class=p>.</span><span class=n>inv_title</span><span class=p>,</span><span class=w> </span>
<a id=__codelineno-13-4 name=__codelineno-13-4 href=#__codelineno-13-4></a><span class=w>    </span><span class=n>i</span><span class=p>.</span><span class=n>inv_status_flag</span>
<a id=__codelineno-13-5 name=__codelineno-13-5 href=#__codelineno-13-5></a><span class=k>FROM</span><span class=w>   </span>
<a id=__codelineno-13-6 name=__codelineno-13-6 href=#__codelineno-13-6></a><span class=w>    </span><span class=n>Invoices</span><span class=w> </span><span class=n>i</span>
<a id=__codelineno-13-7 name=__codelineno-13-7 href=#__codelineno-13-7></a><span class=k>WHERE</span><span class=w>  </span>
<a id=__codelineno-13-8 name=__codelineno-13-8 href=#__codelineno-13-8></a><span class=w>    </span><span class=n>i</span><span class=p>.</span><span class=n>inv_status_flag</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=w>  </span>
<a id=__codelineno-13-9 name=__codelineno-13-9 href=#__codelineno-13-9></a><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span>
<a id=__codelineno-13-10 name=__codelineno-13-10 href=#__codelineno-13-10></a><span class=w>    </span><span class=n>i</span><span class=p>.</span><span class=n>inv_title</span>
<a id=__codelineno-13-11 name=__codelineno-13-11 href=#__codelineno-13-11></a><span class=k>LIMIT</span><span class=w> </span><span class=mi>100</span>
</code></pre></div> <p><strong>Subqueries</strong></p> <p>PHQL also supports subqueries. The syntax is similar to the one offered by PDO.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a><span class=k>SELECT</span><span class=w> </span>
<a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a><span class=w>    </span><span class=n>i</span><span class=p>.</span><span class=n>inv_id</span><span class=w> </span>
<a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a><span class=k>FROM</span><span class=w>   </span>
<a id=__codelineno-14-4 name=__codelineno-14-4 href=#__codelineno-14-4></a><span class=w>    </span><span class=n>Invoices</span><span class=w> </span><span class=n>i</span>
<a id=__codelineno-14-5 name=__codelineno-14-5 href=#__codelineno-14-5></a><span class=k>WHERE</span><span class=w> </span><span class=k>EXISTS</span><span class=w> </span><span class=p>(</span><span class=w>  </span>
<a id=__codelineno-14-6 name=__codelineno-14-6 href=#__codelineno-14-6></a><span class=w>    </span><span class=k>SELECT</span><span class=w> </span>
<a id=__codelineno-14-7 name=__codelineno-14-7 href=#__codelineno-14-7></a><span class=w>        </span><span class=n>cst_id</span>
<a id=__codelineno-14-8 name=__codelineno-14-8 href=#__codelineno-14-8></a><span class=w>    </span><span class=k>FROM</span>
<a id=__codelineno-14-9 name=__codelineno-14-9 href=#__codelineno-14-9></a><span class=w>        </span><span class=n>Customers</span><span class=w> </span><span class=k>c</span>
<a id=__codelineno-14-10 name=__codelineno-14-10 href=#__codelineno-14-10></a><span class=w>    </span><span class=k>WHERE</span><span class=w> </span>
<a id=__codelineno-14-11 name=__codelineno-14-11 href=#__codelineno-14-11></a><span class=w>        </span><span class=k>c</span><span class=p>.</span><span class=n>cst_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>i</span><span class=p>.</span><span class=n>inv_cst_id</span>
<a id=__codelineno-14-12 name=__codelineno-14-12 href=#__codelineno-14-12></a><span class=p>)</span>
</code></pre></div> <div class=highlight><pre><span></span><code><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a><span class=k>SELECT</span><span class=w> </span>
<a id=__codelineno-15-2 name=__codelineno-15-2 href=#__codelineno-15-2></a><span class=w>    </span><span class=n>inv_id</span><span class=w> </span>
<a id=__codelineno-15-3 name=__codelineno-15-3 href=#__codelineno-15-3></a><span class=k>FROM</span><span class=w>   </span>
<a id=__codelineno-15-4 name=__codelineno-15-4 href=#__codelineno-15-4></a><span class=w>    </span><span class=n>Invoices</span><span class=w> </span>
<a id=__codelineno-15-5 name=__codelineno-15-5 href=#__codelineno-15-5></a><span class=k>WHERE</span><span class=w> </span><span class=n>inv_cst_id</span><span class=w> </span><span class=k>IN</span><span class=w> </span><span class=p>(</span><span class=w>  </span>
<a id=__codelineno-15-6 name=__codelineno-15-6 href=#__codelineno-15-6></a><span class=w>    </span><span class=k>SELECT</span><span class=w> </span>
<a id=__codelineno-15-7 name=__codelineno-15-7 href=#__codelineno-15-7></a><span class=w>        </span><span class=n>cst_id</span>
<a id=__codelineno-15-8 name=__codelineno-15-8 href=#__codelineno-15-8></a><span class=w>    </span><span class=k>FROM</span>
<a id=__codelineno-15-9 name=__codelineno-15-9 href=#__codelineno-15-9></a><span class=w>        </span><span class=n>Customers</span><span class=w> </span>
<a id=__codelineno-15-10 name=__codelineno-15-10 href=#__codelineno-15-10></a><span class=w>    </span><span class=k>WHERE</span><span class=w> </span>
<a id=__codelineno-15-11 name=__codelineno-15-11 href=#__codelineno-15-11></a><span class=w>        </span><span class=n>cst_name</span><span class=w> </span><span class=k>LIKE</span><span class=w> </span><span class=s1>&#39;%ACME%&#39;</span>
<a id=__codelineno-15-12 name=__codelineno-15-12 href=#__codelineno-15-12></a><span class=p>)</span>
</code></pre></div> <h3 id=results>Results<a class=headerlink href=#results title="Permanent link">&para;</a></h3> <p>Depending on the columns we query as well as the tables, the result types will vary. </p> <p>If you retrieve all the columns from a single table, you will get back a fully functional <a href=../api/phalcon_mvc/#mvc-model-resultset-simple>Phalcon\Mvc\Model\Resultset\Simple</a> object back. The object returned is a <em>complete</em> and can be modified and re-saved in the database because they represent a complete record of the associated table.</p> <p>The following examples return identical results:</p> <p><strong>Model</strong></p> <div class=highlight><pre><span></span><code><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a>
<a id=__codelineno-16-3 name=__codelineno-16-3 href=#__codelineno-16-3></a><span class=k>use</span> <span class=nx>MyApp\Models\Invoices</span><span class=p>;</span>
<a id=__codelineno-16-4 name=__codelineno-16-4 href=#__codelineno-16-4></a>
<a id=__codelineno-16-5 name=__codelineno-16-5 href=#__codelineno-16-5></a><span class=nv>$invoices</span> <span class=o>=</span> <span class=nx>Invoices</span><span class=o>::</span><span class=na>find</span><span class=p>(</span>
<a id=__codelineno-16-6 name=__codelineno-16-6 href=#__codelineno-16-6></a>    <span class=p>[</span>
<a id=__codelineno-16-7 name=__codelineno-16-7 href=#__codelineno-16-7></a>        <span class=s1>&#39;order&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;inv_title&#39;</span>
<a id=__codelineno-16-8 name=__codelineno-16-8 href=#__codelineno-16-8></a>    <span class=p>]</span>
<a id=__codelineno-16-9 name=__codelineno-16-9 href=#__codelineno-16-9></a><span class=p>);</span>
<a id=__codelineno-16-10 name=__codelineno-16-10 href=#__codelineno-16-10></a>
<a id=__codelineno-16-11 name=__codelineno-16-11 href=#__codelineno-16-11></a><span class=k>foreach</span> <span class=p>(</span><span class=nv>$invoices</span> <span class=k>as</span> <span class=nv>$invoice</span><span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-16-12 name=__codelineno-16-12 href=#__codelineno-16-12></a>    <span class=k>echo</span> <span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>inv_id</span><span class=p>,</span> <span class=s1>&#39; - &#39;</span><span class=p>,</span> <span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>inv_name</span><span class=p>,</span> <span class=nx>PHP_EOL</span><span class=p>;</span>
<a id=__codelineno-16-13 name=__codelineno-16-13 href=#__codelineno-16-13></a><span class=p>}</span>
</code></pre></div> <p><strong>PHQL</strong></p> <div class=highlight><pre><span></span><code><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-17-2 name=__codelineno-17-2 href=#__codelineno-17-2></a>
<a id=__codelineno-17-3 name=__codelineno-17-3 href=#__codelineno-17-3></a><span class=nv>$phql</span> <span class=o>=</span> <span class=s2>&quot;</span>
<a id=__codelineno-17-4 name=__codelineno-17-4 href=#__codelineno-17-4></a><span class=s2>    SELECT </span>
<a id=__codelineno-17-5 name=__codelineno-17-5 href=#__codelineno-17-5></a><span class=s2>        * </span>
<a id=__codelineno-17-6 name=__codelineno-17-6 href=#__codelineno-17-6></a><span class=s2>    FROM </span>
<a id=__codelineno-17-7 name=__codelineno-17-7 href=#__codelineno-17-7></a><span class=s2>        Invoices </span>
<a id=__codelineno-17-8 name=__codelineno-17-8 href=#__codelineno-17-8></a><span class=s2>    ORDER BY </span>
<a id=__codelineno-17-9 name=__codelineno-17-9 href=#__codelineno-17-9></a><span class=s2>        inv_title&quot;</span><span class=p>;</span>
<a id=__codelineno-17-10 name=__codelineno-17-10 href=#__codelineno-17-10></a><span class=nv>$invoices</span>  <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-17-11 name=__codelineno-17-11 href=#__codelineno-17-11></a>    <span class=o>-&gt;</span><span class=na>modelsManager</span>
<a id=__codelineno-17-12 name=__codelineno-17-12 href=#__codelineno-17-12></a>    <span class=o>-&gt;</span><span class=na>executeQuery</span><span class=p>(</span><span class=nv>$phql</span><span class=p>)</span>
<a id=__codelineno-17-13 name=__codelineno-17-13 href=#__codelineno-17-13></a><span class=p>;</span>
<a id=__codelineno-17-14 name=__codelineno-17-14 href=#__codelineno-17-14></a>
<a id=__codelineno-17-15 name=__codelineno-17-15 href=#__codelineno-17-15></a><span class=k>foreach</span> <span class=p>(</span><span class=nv>$invoices</span> <span class=k>as</span> <span class=nv>$invoice</span><span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-17-16 name=__codelineno-17-16 href=#__codelineno-17-16></a>    <span class=k>echo</span> <span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>inv_id</span><span class=p>,</span> <span class=s1>&#39; - &#39;</span><span class=p>,</span> <span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>inv_name</span><span class=p>,</span> <span class=nx>PHP_EOL</span><span class=p>;</span>
<a id=__codelineno-17-17 name=__codelineno-17-17 href=#__codelineno-17-17></a><span class=p>}</span>
</code></pre></div> <p>Any queries that use specific columns do not return <em>complete</em> objects, and therefore database operations cannot be performed on them. However, they are much smaller than their complete counterparts and offer micro optimizations in your code.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-18-2 name=__codelineno-18-2 href=#__codelineno-18-2></a>
<a id=__codelineno-18-3 name=__codelineno-18-3 href=#__codelineno-18-3></a><span class=nv>$phql</span> <span class=o>=</span> <span class=s2>&quot;</span>
<a id=__codelineno-18-4 name=__codelineno-18-4 href=#__codelineno-18-4></a><span class=s2>    SELECT </span>
<a id=__codelineno-18-5 name=__codelineno-18-5 href=#__codelineno-18-5></a><span class=s2>        inv_id, inv_title </span>
<a id=__codelineno-18-6 name=__codelineno-18-6 href=#__codelineno-18-6></a><span class=s2>    FROM </span>
<a id=__codelineno-18-7 name=__codelineno-18-7 href=#__codelineno-18-7></a><span class=s2>        Invoices </span>
<a id=__codelineno-18-8 name=__codelineno-18-8 href=#__codelineno-18-8></a><span class=s2>    ORDER BY </span>
<a id=__codelineno-18-9 name=__codelineno-18-9 href=#__codelineno-18-9></a><span class=s2>        inv_title&quot;</span><span class=p>;</span>
<a id=__codelineno-18-10 name=__codelineno-18-10 href=#__codelineno-18-10></a><span class=nv>$invoices</span>  <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-18-11 name=__codelineno-18-11 href=#__codelineno-18-11></a>    <span class=o>-&gt;</span><span class=na>modelsManager</span>
<a id=__codelineno-18-12 name=__codelineno-18-12 href=#__codelineno-18-12></a>    <span class=o>-&gt;</span><span class=na>executeQuery</span><span class=p>(</span><span class=nv>$phql</span><span class=p>)</span>
<a id=__codelineno-18-13 name=__codelineno-18-13 href=#__codelineno-18-13></a><span class=p>;</span>
<a id=__codelineno-18-14 name=__codelineno-18-14 href=#__codelineno-18-14></a>
<a id=__codelineno-18-15 name=__codelineno-18-15 href=#__codelineno-18-15></a><span class=k>foreach</span> <span class=p>(</span><span class=nv>$invoices</span> <span class=k>as</span> <span class=nv>$invoice</span><span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-18-16 name=__codelineno-18-16 href=#__codelineno-18-16></a>    <span class=k>echo</span> <span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>inv_id</span><span class=p>,</span> <span class=s1>&#39; - &#39;</span><span class=p>,</span> <span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>inv_name</span><span class=p>,</span> <span class=nx>PHP_EOL</span><span class=p>;</span>
<a id=__codelineno-18-17 name=__codelineno-18-17 href=#__codelineno-18-17></a><span class=p>}</span>
</code></pre></div> <p>The returned result is a <a href=../api/phalcon_mvc/#mvc-model-resultset-simple>Phalcon\Mvc\Model\Resultset\Simple</a> object. However, each element is a standard object that only contain the two columns that were requested.</p> <p>These values that do not represent complete objects are what we call scalars. PHQL allows you to query all types of scalars: fields, functions, literals, expressions, etc..:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-19-2 name=__codelineno-19-2 href=#__codelineno-19-2></a>
<a id=__codelineno-19-3 name=__codelineno-19-3 href=#__codelineno-19-3></a><span class=nv>$phql</span> <span class=o>=</span> <span class=s2>&quot;</span>
<a id=__codelineno-19-4 name=__codelineno-19-4 href=#__codelineno-19-4></a><span class=s2>    SELECT </span>
<a id=__codelineno-19-5 name=__codelineno-19-5 href=#__codelineno-19-5></a><span class=s2>        CONCAT(inv_id, &#39; - &#39;, inv_title) AS id_name </span>
<a id=__codelineno-19-6 name=__codelineno-19-6 href=#__codelineno-19-6></a><span class=s2>    FROM </span>
<a id=__codelineno-19-7 name=__codelineno-19-7 href=#__codelineno-19-7></a><span class=s2>        Invoices </span>
<a id=__codelineno-19-8 name=__codelineno-19-8 href=#__codelineno-19-8></a><span class=s2>    ORDER BY </span>
<a id=__codelineno-19-9 name=__codelineno-19-9 href=#__codelineno-19-9></a><span class=s2>        inv_title&quot;</span><span class=p>;</span>
<a id=__codelineno-19-10 name=__codelineno-19-10 href=#__codelineno-19-10></a><span class=nv>$invoices</span>  <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-19-11 name=__codelineno-19-11 href=#__codelineno-19-11></a>    <span class=o>-&gt;</span><span class=na>modelsManager</span>
<a id=__codelineno-19-12 name=__codelineno-19-12 href=#__codelineno-19-12></a>    <span class=o>-&gt;</span><span class=na>executeQuery</span><span class=p>(</span><span class=nv>$phql</span><span class=p>)</span>
<a id=__codelineno-19-13 name=__codelineno-19-13 href=#__codelineno-19-13></a><span class=p>;</span>
<a id=__codelineno-19-14 name=__codelineno-19-14 href=#__codelineno-19-14></a>
<a id=__codelineno-19-15 name=__codelineno-19-15 href=#__codelineno-19-15></a><span class=k>foreach</span> <span class=p>(</span><span class=nv>$invoices</span> <span class=k>as</span> <span class=nv>$invoice</span><span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-19-16 name=__codelineno-19-16 href=#__codelineno-19-16></a>    <span class=k>echo</span> <span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>id_name</span><span class=p>,</span> <span class=nx>PHP_EOL</span><span class=p>;</span>
<a id=__codelineno-19-17 name=__codelineno-19-17 href=#__codelineno-19-17></a><span class=p>}</span>
</code></pre></div> <p>We can query complete objects or scalars, therefore can also query both at once:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-20-1 name=__codelineno-20-1 href=#__codelineno-20-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-20-2 name=__codelineno-20-2 href=#__codelineno-20-2></a>
<a id=__codelineno-20-3 name=__codelineno-20-3 href=#__codelineno-20-3></a><span class=nv>$phql</span> <span class=o>=</span> <span class=s2>&quot;</span>
<a id=__codelineno-20-4 name=__codelineno-20-4 href=#__codelineno-20-4></a><span class=s2>    SELECT </span>
<a id=__codelineno-20-5 name=__codelineno-20-5 href=#__codelineno-20-5></a><span class=s2>        i.*, </span>
<a id=__codelineno-20-6 name=__codelineno-20-6 href=#__codelineno-20-6></a><span class=s2>        IF(i.inv_status_flag = 1, &#39;Paid&#39;, &#39;Unpaid&#39;) AS status </span>
<a id=__codelineno-20-7 name=__codelineno-20-7 href=#__codelineno-20-7></a><span class=s2>    FROM </span>
<a id=__codelineno-20-8 name=__codelineno-20-8 href=#__codelineno-20-8></a><span class=s2>        Invoices i </span>
<a id=__codelineno-20-9 name=__codelineno-20-9 href=#__codelineno-20-9></a><span class=s2>    ORDER BY </span>
<a id=__codelineno-20-10 name=__codelineno-20-10 href=#__codelineno-20-10></a><span class=s2>        i.inv_title&quot;</span><span class=p>;</span>
<a id=__codelineno-20-11 name=__codelineno-20-11 href=#__codelineno-20-11></a><span class=nv>$invoices</span>  <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-20-12 name=__codelineno-20-12 href=#__codelineno-20-12></a>    <span class=o>-&gt;</span><span class=na>modelsManager</span>
<a id=__codelineno-20-13 name=__codelineno-20-13 href=#__codelineno-20-13></a>    <span class=o>-&gt;</span><span class=na>executeQuery</span><span class=p>(</span><span class=nv>$phql</span><span class=p>)</span>
<a id=__codelineno-20-14 name=__codelineno-20-14 href=#__codelineno-20-14></a><span class=p>;</span>
</code></pre></div> <p>The result in this case is a <a href=../api/phalcon_mvc/#mvc-model-resultset-complex>Phalcon\Mvc\Model\Resultset\Complex</a> object. This allows access to both complete objects and scalars at once:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-21-1 name=__codelineno-21-1 href=#__codelineno-21-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-21-2 name=__codelineno-21-2 href=#__codelineno-21-2></a>
<a id=__codelineno-21-3 name=__codelineno-21-3 href=#__codelineno-21-3></a><span class=k>foreach</span> <span class=p>(</span><span class=nv>$invoices</span> <span class=k>as</span> <span class=nv>$invoice</span><span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-21-4 name=__codelineno-21-4 href=#__codelineno-21-4></a>    <span class=k>echo</span> <span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>status</span><span class=p>,</span> 
<a id=__codelineno-21-5 name=__codelineno-21-5 href=#__codelineno-21-5></a>         <span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>i</span><span class=o>-&gt;</span><span class=na>inv_id</span><span class=p>,</span> 
<a id=__codelineno-21-6 name=__codelineno-21-6 href=#__codelineno-21-6></a>         <span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>i</span><span class=o>-&gt;</span><span class=na>inv_name</span><span class=p>,</span> 
<a id=__codelineno-21-7 name=__codelineno-21-7 href=#__codelineno-21-7></a>         <span class=nx>PHP_EOL</span>
<a id=__codelineno-21-8 name=__codelineno-21-8 href=#__codelineno-21-8></a>    <span class=p>;</span>
<a id=__codelineno-21-9 name=__codelineno-21-9 href=#__codelineno-21-9></a><span class=p>}</span>
</code></pre></div> <p>Scalars are mapped as properties of each 'row', while complete objects are mapped as properties with the name of its related model. In the above example, the scalar <code>status</code> is accessed directly from the object, while the database row can be accessed by the <code>invoices</code> property, which is the same name as the name of the model. </p> <p>If you mix <code>*</code> selections from one model with columns from another, you will end up with both scalars and objects.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-22-1 name=__codelineno-22-1 href=#__codelineno-22-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-22-2 name=__codelineno-22-2 href=#__codelineno-22-2></a>
<a id=__codelineno-22-3 name=__codelineno-22-3 href=#__codelineno-22-3></a><span class=nv>$phql</span> <span class=o>=</span> <span class=s2>&quot;</span>
<a id=__codelineno-22-4 name=__codelineno-22-4 href=#__codelineno-22-4></a><span class=s2>    SELECT </span>
<a id=__codelineno-22-5 name=__codelineno-22-5 href=#__codelineno-22-5></a><span class=s2>        i.*, </span>
<a id=__codelineno-22-6 name=__codelineno-22-6 href=#__codelineno-22-6></a><span class=s2>        IF(i.inv_status_flag = 1, &#39;Paid&#39;, &#39;Unpaid&#39;) AS status</span>
<a id=__codelineno-22-7 name=__codelineno-22-7 href=#__codelineno-22-7></a><span class=s2>        c.* </span>
<a id=__codelineno-22-8 name=__codelineno-22-8 href=#__codelineno-22-8></a><span class=s2>    FROM </span>
<a id=__codelineno-22-9 name=__codelineno-22-9 href=#__codelineno-22-9></a><span class=s2>        Invoices i</span>
<a id=__codelineno-22-10 name=__codelineno-22-10 href=#__codelineno-22-10></a><span class=s2>    JOIN</span>
<a id=__codelineno-22-11 name=__codelineno-22-11 href=#__codelineno-22-11></a><span class=s2>        Customers c</span>
<a id=__codelineno-22-12 name=__codelineno-22-12 href=#__codelineno-22-12></a><span class=s2>    ON</span>
<a id=__codelineno-22-13 name=__codelineno-22-13 href=#__codelineno-22-13></a><span class=s2>        i.inv_cst_id = c.cst_id </span>
<a id=__codelineno-22-14 name=__codelineno-22-14 href=#__codelineno-22-14></a><span class=s2>    ORDER BY </span>
<a id=__codelineno-22-15 name=__codelineno-22-15 href=#__codelineno-22-15></a><span class=s2>        i.inv_title&quot;</span><span class=p>;</span>
<a id=__codelineno-22-16 name=__codelineno-22-16 href=#__codelineno-22-16></a><span class=nv>$invoices</span>  <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-22-17 name=__codelineno-22-17 href=#__codelineno-22-17></a>    <span class=o>-&gt;</span><span class=na>modelsManager</span>
<a id=__codelineno-22-18 name=__codelineno-22-18 href=#__codelineno-22-18></a>    <span class=o>-&gt;</span><span class=na>executeQuery</span><span class=p>(</span><span class=nv>$phql</span><span class=p>)</span>
<a id=__codelineno-22-19 name=__codelineno-22-19 href=#__codelineno-22-19></a><span class=p>;</span>
</code></pre></div> <p>The above will produce:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-23-1 name=__codelineno-23-1 href=#__codelineno-23-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-23-2 name=__codelineno-23-2 href=#__codelineno-23-2></a>
<a id=__codelineno-23-3 name=__codelineno-23-3 href=#__codelineno-23-3></a><span class=k>foreach</span> <span class=p>(</span><span class=nv>$invoices</span> <span class=k>as</span> <span class=nv>$invoice</span><span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-23-4 name=__codelineno-23-4 href=#__codelineno-23-4></a>    <span class=k>echo</span> <span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>status</span><span class=p>,</span> 
<a id=__codelineno-23-5 name=__codelineno-23-5 href=#__codelineno-23-5></a>         <span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>i</span><span class=o>-&gt;</span><span class=na>inv_id</span><span class=p>,</span> 
<a id=__codelineno-23-6 name=__codelineno-23-6 href=#__codelineno-23-6></a>         <span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>i</span><span class=o>-&gt;</span><span class=na>inv_name</span><span class=p>,</span> 
<a id=__codelineno-23-7 name=__codelineno-23-7 href=#__codelineno-23-7></a>         <span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>c</span><span class=o>-&gt;</span><span class=na>cst_id</span><span class=p>,</span> 
<a id=__codelineno-23-8 name=__codelineno-23-8 href=#__codelineno-23-8></a>         <span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>c</span><span class=o>-&gt;</span><span class=na>cst_name_last</span><span class=p>,</span> 
<a id=__codelineno-23-9 name=__codelineno-23-9 href=#__codelineno-23-9></a>         <span class=nx>PHP_EOL</span>
<a id=__codelineno-23-10 name=__codelineno-23-10 href=#__codelineno-23-10></a>    <span class=p>;</span>
<a id=__codelineno-23-11 name=__codelineno-23-11 href=#__codelineno-23-11></a><span class=p>}</span>
</code></pre></div> <p>Another example:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-24-1 name=__codelineno-24-1 href=#__codelineno-24-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-24-2 name=__codelineno-24-2 href=#__codelineno-24-2></a>
<a id=__codelineno-24-3 name=__codelineno-24-3 href=#__codelineno-24-3></a><span class=nv>$phql</span> <span class=o>=</span> <span class=s2>&quot;</span>
<a id=__codelineno-24-4 name=__codelineno-24-4 href=#__codelineno-24-4></a><span class=s2>    SELECT </span>
<a id=__codelineno-24-5 name=__codelineno-24-5 href=#__codelineno-24-5></a><span class=s2>        i.*, </span>
<a id=__codelineno-24-6 name=__codelineno-24-6 href=#__codelineno-24-6></a><span class=s2>        c.cst_name_last AS name_last </span>
<a id=__codelineno-24-7 name=__codelineno-24-7 href=#__codelineno-24-7></a><span class=s2>    FROM </span>
<a id=__codelineno-24-8 name=__codelineno-24-8 href=#__codelineno-24-8></a><span class=s2>        Invoices i</span>
<a id=__codelineno-24-9 name=__codelineno-24-9 href=#__codelineno-24-9></a><span class=s2>    JOIN</span>
<a id=__codelineno-24-10 name=__codelineno-24-10 href=#__codelineno-24-10></a><span class=s2>        Customers c</span>
<a id=__codelineno-24-11 name=__codelineno-24-11 href=#__codelineno-24-11></a><span class=s2>    ON</span>
<a id=__codelineno-24-12 name=__codelineno-24-12 href=#__codelineno-24-12></a><span class=s2>        i.inv_cst_id = c.cst_id </span>
<a id=__codelineno-24-13 name=__codelineno-24-13 href=#__codelineno-24-13></a><span class=s2>    ORDER BY </span>
<a id=__codelineno-24-14 name=__codelineno-24-14 href=#__codelineno-24-14></a><span class=s2>        i.inv_title&quot;</span><span class=p>;</span>
<a id=__codelineno-24-15 name=__codelineno-24-15 href=#__codelineno-24-15></a><span class=nv>$invoices</span>  <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-24-16 name=__codelineno-24-16 href=#__codelineno-24-16></a>    <span class=o>-&gt;</span><span class=na>modelsManager</span>
<a id=__codelineno-24-17 name=__codelineno-24-17 href=#__codelineno-24-17></a>    <span class=o>-&gt;</span><span class=na>executeQuery</span><span class=p>(</span><span class=nv>$phql</span><span class=p>)</span>
<a id=__codelineno-24-18 name=__codelineno-24-18 href=#__codelineno-24-18></a><span class=p>;</span>
</code></pre></div> <p>The above will produce:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-25-1 name=__codelineno-25-1 href=#__codelineno-25-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-25-2 name=__codelineno-25-2 href=#__codelineno-25-2></a>
<a id=__codelineno-25-3 name=__codelineno-25-3 href=#__codelineno-25-3></a><span class=k>foreach</span> <span class=p>(</span><span class=nv>$invoices</span> <span class=k>as</span> <span class=nv>$invoice</span><span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-25-4 name=__codelineno-25-4 href=#__codelineno-25-4></a>    <span class=k>echo</span> <span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>name_last</span><span class=p>,</span> 
<a id=__codelineno-25-5 name=__codelineno-25-5 href=#__codelineno-25-5></a>         <span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>i</span><span class=o>-&gt;</span><span class=na>inv_id</span><span class=p>,</span> 
<a id=__codelineno-25-6 name=__codelineno-25-6 href=#__codelineno-25-6></a>         <span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>i</span><span class=o>-&gt;</span><span class=na>inv_name</span><span class=p>,</span> 
<a id=__codelineno-25-7 name=__codelineno-25-7 href=#__codelineno-25-7></a>         <span class=nx>PHP_EOL</span>
<a id=__codelineno-25-8 name=__codelineno-25-8 href=#__codelineno-25-8></a>    <span class=p>;</span>
<a id=__codelineno-25-9 name=__codelineno-25-9 href=#__codelineno-25-9></a><span class=p>}</span>
</code></pre></div> <p>Note that we are selecting one column from the <code>Customers</code> model, and we need to alias it (<code>name_last</code>) so that it becomes a scalar in our resultset.</p> <h3 id=joins>Joins<a class=headerlink href=#joins title="Permanent link">&para;</a></h3> <p>It's easy to request records from multiple models using PHQL. Most kinds of Joins are supported. As we defined relationships in the models, PHQL adds these conditions automatically:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-26-1 name=__codelineno-26-1 href=#__codelineno-26-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-26-2 name=__codelineno-26-2 href=#__codelineno-26-2></a>
<a id=__codelineno-26-3 name=__codelineno-26-3 href=#__codelineno-26-3></a><span class=nv>$phql</span> <span class=o>=</span> <span class=s2>&quot;</span>
<a id=__codelineno-26-4 name=__codelineno-26-4 href=#__codelineno-26-4></a><span class=s2>    SELECT </span>
<a id=__codelineno-26-5 name=__codelineno-26-5 href=#__codelineno-26-5></a><span class=s2>        Invoices.inv_id AS invoice_id, </span>
<a id=__codelineno-26-6 name=__codelineno-26-6 href=#__codelineno-26-6></a><span class=s2>        Invoices.inv_title AS invoice_title, </span>
<a id=__codelineno-26-7 name=__codelineno-26-7 href=#__codelineno-26-7></a><span class=s2>        Customers.cst_id AS customer_id,</span>
<a id=__codelineno-26-8 name=__codelineno-26-8 href=#__codelineno-26-8></a><span class=s2>        Customers.cst_name_last,</span>
<a id=__codelineno-26-9 name=__codelineno-26-9 href=#__codelineno-26-9></a><span class=s2>        Customers.cst_name_first </span>
<a id=__codelineno-26-10 name=__codelineno-26-10 href=#__codelineno-26-10></a><span class=s2>    FROM </span>
<a id=__codelineno-26-11 name=__codelineno-26-11 href=#__codelineno-26-11></a><span class=s2>        Customers</span>
<a id=__codelineno-26-12 name=__codelineno-26-12 href=#__codelineno-26-12></a><span class=s2>    INNER JOIN </span>
<a id=__codelineno-26-13 name=__codelineno-26-13 href=#__codelineno-26-13></a><span class=s2>        Invoices </span>
<a id=__codelineno-26-14 name=__codelineno-26-14 href=#__codelineno-26-14></a><span class=s2>    ORDER BY </span>
<a id=__codelineno-26-15 name=__codelineno-26-15 href=#__codelineno-26-15></a><span class=s2>        Customers.cst_name_last, Customers.cst_name_first&quot;</span><span class=p>;</span>
<a id=__codelineno-26-16 name=__codelineno-26-16 href=#__codelineno-26-16></a><span class=nv>$records</span>  <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-26-17 name=__codelineno-26-17 href=#__codelineno-26-17></a>    <span class=o>-&gt;</span><span class=na>modelsManager</span>
<a id=__codelineno-26-18 name=__codelineno-26-18 href=#__codelineno-26-18></a>    <span class=o>-&gt;</span><span class=na>executeQuery</span><span class=p>(</span><span class=nv>$phql</span><span class=p>)</span>
<a id=__codelineno-26-19 name=__codelineno-26-19 href=#__codelineno-26-19></a><span class=p>;</span>
<a id=__codelineno-26-20 name=__codelineno-26-20 href=#__codelineno-26-20></a>
<a id=__codelineno-26-21 name=__codelineno-26-21 href=#__codelineno-26-21></a><span class=k>foreach</span> <span class=p>(</span><span class=nv>$records</span> <span class=k>as</span> <span class=nv>$record</span><span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-26-22 name=__codelineno-26-22 href=#__codelineno-26-22></a>    <span class=k>echo</span> <span class=nv>$record</span><span class=o>-&gt;</span><span class=na>invoice_id</span><span class=p>,</span> 
<a id=__codelineno-26-23 name=__codelineno-26-23 href=#__codelineno-26-23></a>         <span class=nv>$record</span><span class=o>-&gt;</span><span class=na>invoice_title</span><span class=p>,</span> 
<a id=__codelineno-26-24 name=__codelineno-26-24 href=#__codelineno-26-24></a>         <span class=nv>$record</span><span class=o>-&gt;</span><span class=na>customer_id</span><span class=p>,</span>
<a id=__codelineno-26-25 name=__codelineno-26-25 href=#__codelineno-26-25></a>         <span class=nv>$record</span><span class=o>-&gt;</span><span class=na>cst_name_last</span><span class=p>,</span>
<a id=__codelineno-26-26 name=__codelineno-26-26 href=#__codelineno-26-26></a>         <span class=nv>$record</span><span class=o>-&gt;</span><span class=na>cst_name_first</span><span class=p>,</span> 
<a id=__codelineno-26-27 name=__codelineno-26-27 href=#__codelineno-26-27></a>         <span class=nx>PHP_EOL</span>
<a id=__codelineno-26-28 name=__codelineno-26-28 href=#__codelineno-26-28></a>    <span class=p>;</span>
<a id=__codelineno-26-29 name=__codelineno-26-29 href=#__codelineno-26-29></a><span class=p>}</span>
</code></pre></div> <div class="admonition info"> <p class=admonition-title>NOTE</p> <p>By default, an <code>INNER JOIN</code> is assumed. </p> </div> <p>You can specify the following types of joins in your query:</p> <ul> <li><code>CROSS JOIN</code></li> <li><code>LEFT JOIN</code></li> <li><code>LEFT OUTER JOIN</code></li> <li><code>INNER JOIN</code></li> <li><code>JOIN</code></li> <li><code>RIGHT JOIN</code></li> <li><code>RIGHT OUTER JOIN</code></li> </ul> <p>The PHQL parser will automatically resolve the conditions of the <code>JOIN</code> operation, depending on the relationships set up in the <code>initialize()</code> of each model. These are calls to <code>hasMany</code>, <code>hasOne</code>, <code>belongsTo</code> etc.</p> <p>It is however possible to manually set the conditions of the <code>JOIN</code>:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-27-1 name=__codelineno-27-1 href=#__codelineno-27-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-27-2 name=__codelineno-27-2 href=#__codelineno-27-2></a>
<a id=__codelineno-27-3 name=__codelineno-27-3 href=#__codelineno-27-3></a><span class=nv>$phql</span> <span class=o>=</span> <span class=s2>&quot;</span>
<a id=__codelineno-27-4 name=__codelineno-27-4 href=#__codelineno-27-4></a><span class=s2>    SELECT </span>
<a id=__codelineno-27-5 name=__codelineno-27-5 href=#__codelineno-27-5></a><span class=s2>        Invoices.inv_id AS invoice_id, </span>
<a id=__codelineno-27-6 name=__codelineno-27-6 href=#__codelineno-27-6></a><span class=s2>        Invoices.inv_title AS invoice_title, </span>
<a id=__codelineno-27-7 name=__codelineno-27-7 href=#__codelineno-27-7></a><span class=s2>        Customers.cst_id AS customer_id,</span>
<a id=__codelineno-27-8 name=__codelineno-27-8 href=#__codelineno-27-8></a><span class=s2>        Customers.cst_name_last,</span>
<a id=__codelineno-27-9 name=__codelineno-27-9 href=#__codelineno-27-9></a><span class=s2>        Customers.cst_name_first </span>
<a id=__codelineno-27-10 name=__codelineno-27-10 href=#__codelineno-27-10></a><span class=s2>    FROM </span>
<a id=__codelineno-27-11 name=__codelineno-27-11 href=#__codelineno-27-11></a><span class=s2>        Customers</span>
<a id=__codelineno-27-12 name=__codelineno-27-12 href=#__codelineno-27-12></a><span class=s2>    INNER JOIN </span>
<a id=__codelineno-27-13 name=__codelineno-27-13 href=#__codelineno-27-13></a><span class=s2>        Invoices</span>
<a id=__codelineno-27-14 name=__codelineno-27-14 href=#__codelineno-27-14></a><span class=s2>    ON </span>
<a id=__codelineno-27-15 name=__codelineno-27-15 href=#__codelineno-27-15></a><span class=s2>        Customers.cst_id = Invoices.inv_cst_id </span>
<a id=__codelineno-27-16 name=__codelineno-27-16 href=#__codelineno-27-16></a><span class=s2>    ORDER BY </span>
<a id=__codelineno-27-17 name=__codelineno-27-17 href=#__codelineno-27-17></a><span class=s2>        Customers.cst_name_last, Customers.cst_name_first&quot;</span><span class=p>;</span>
<a id=__codelineno-27-18 name=__codelineno-27-18 href=#__codelineno-27-18></a>
<a id=__codelineno-27-19 name=__codelineno-27-19 href=#__codelineno-27-19></a><span class=nv>$records</span>  <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-27-20 name=__codelineno-27-20 href=#__codelineno-27-20></a>    <span class=o>-&gt;</span><span class=na>modelsManager</span>
<a id=__codelineno-27-21 name=__codelineno-27-21 href=#__codelineno-27-21></a>    <span class=o>-&gt;</span><span class=na>executeQuery</span><span class=p>(</span><span class=nv>$phql</span><span class=p>)</span>
<a id=__codelineno-27-22 name=__codelineno-27-22 href=#__codelineno-27-22></a><span class=p>;</span>
</code></pre></div> <p>Also, the joins can be created using multiple tables in the <code>FROM</code> clause, using the alternative <em>join</em> syntax:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-28-1 name=__codelineno-28-1 href=#__codelineno-28-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-28-2 name=__codelineno-28-2 href=#__codelineno-28-2></a>
<a id=__codelineno-28-3 name=__codelineno-28-3 href=#__codelineno-28-3></a><span class=nv>$phql</span> <span class=o>=</span> <span class=s2>&quot;</span>
<a id=__codelineno-28-4 name=__codelineno-28-4 href=#__codelineno-28-4></a><span class=s2>    SELECT </span>
<a id=__codelineno-28-5 name=__codelineno-28-5 href=#__codelineno-28-5></a><span class=s2>        Invoices.*, </span>
<a id=__codelineno-28-6 name=__codelineno-28-6 href=#__codelineno-28-6></a><span class=s2>        Customers.* </span>
<a id=__codelineno-28-7 name=__codelineno-28-7 href=#__codelineno-28-7></a><span class=s2>    FROM </span>
<a id=__codelineno-28-8 name=__codelineno-28-8 href=#__codelineno-28-8></a><span class=s2>        Customers, Invoices</span>
<a id=__codelineno-28-9 name=__codelineno-28-9 href=#__codelineno-28-9></a><span class=s2>    WHERE </span>
<a id=__codelineno-28-10 name=__codelineno-28-10 href=#__codelineno-28-10></a><span class=s2>        Customers.cst_id = Invoices.inv_cst_id </span>
<a id=__codelineno-28-11 name=__codelineno-28-11 href=#__codelineno-28-11></a><span class=s2>    ORDER BY </span>
<a id=__codelineno-28-12 name=__codelineno-28-12 href=#__codelineno-28-12></a><span class=s2>        Customers.cst_name_last, Customers.cst_name_first&quot;</span><span class=p>;</span>
<a id=__codelineno-28-13 name=__codelineno-28-13 href=#__codelineno-28-13></a>
<a id=__codelineno-28-14 name=__codelineno-28-14 href=#__codelineno-28-14></a><span class=nv>$records</span>  <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-28-15 name=__codelineno-28-15 href=#__codelineno-28-15></a>    <span class=o>-&gt;</span><span class=na>modelsManager</span>
<a id=__codelineno-28-16 name=__codelineno-28-16 href=#__codelineno-28-16></a>    <span class=o>-&gt;</span><span class=na>executeQuery</span><span class=p>(</span><span class=nv>$phql</span><span class=p>)</span>
<a id=__codelineno-28-17 name=__codelineno-28-17 href=#__codelineno-28-17></a><span class=p>;</span>
<a id=__codelineno-28-18 name=__codelineno-28-18 href=#__codelineno-28-18></a>
<a id=__codelineno-28-19 name=__codelineno-28-19 href=#__codelineno-28-19></a><span class=k>foreach</span> <span class=p>(</span><span class=nv>$records</span> <span class=k>as</span> <span class=nv>$record</span><span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-28-20 name=__codelineno-28-20 href=#__codelineno-28-20></a>    <span class=k>echo</span> <span class=nv>$record</span><span class=o>-&gt;</span><span class=na>invoices</span><span class=o>-&gt;</span><span class=na>inv_id</span><span class=p>,</span> 
<a id=__codelineno-28-21 name=__codelineno-28-21 href=#__codelineno-28-21></a>         <span class=nv>$record</span><span class=o>-&gt;</span><span class=na>invoices</span><span class=o>-&gt;</span><span class=na>inv_title</span><span class=p>,</span> 
<a id=__codelineno-28-22 name=__codelineno-28-22 href=#__codelineno-28-22></a>         <span class=nv>$record</span><span class=o>-&gt;</span><span class=na>customers</span><span class=o>-&gt;</span><span class=na>cst_id</span><span class=p>,</span>
<a id=__codelineno-28-23 name=__codelineno-28-23 href=#__codelineno-28-23></a>         <span class=nv>$record</span><span class=o>-&gt;</span><span class=na>customers</span><span class=o>-&gt;</span><span class=na>cst_name_last</span><span class=p>,</span>
<a id=__codelineno-28-24 name=__codelineno-28-24 href=#__codelineno-28-24></a>         <span class=nv>$record</span><span class=o>-&gt;</span><span class=na>customers</span><span class=o>-&gt;</span><span class=na>cst_name_first</span><span class=p>,</span> 
<a id=__codelineno-28-25 name=__codelineno-28-25 href=#__codelineno-28-25></a>         <span class=nx>PHP_EOL</span>
<a id=__codelineno-28-26 name=__codelineno-28-26 href=#__codelineno-28-26></a>    <span class=p>;</span>
<a id=__codelineno-28-27 name=__codelineno-28-27 href=#__codelineno-28-27></a><span class=p>}</span>
</code></pre></div> <p>If aliases are used for models, then the resultset will use those aliases to name the attributes in the every row of the result:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-29-1 name=__codelineno-29-1 href=#__codelineno-29-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-29-2 name=__codelineno-29-2 href=#__codelineno-29-2></a>
<a id=__codelineno-29-3 name=__codelineno-29-3 href=#__codelineno-29-3></a><span class=nv>$phql</span> <span class=o>=</span> <span class=s2>&quot;</span>
<a id=__codelineno-29-4 name=__codelineno-29-4 href=#__codelineno-29-4></a><span class=s2>    SELECT </span>
<a id=__codelineno-29-5 name=__codelineno-29-5 href=#__codelineno-29-5></a><span class=s2>        i.*, </span>
<a id=__codelineno-29-6 name=__codelineno-29-6 href=#__codelineno-29-6></a><span class=s2>        c.* </span>
<a id=__codelineno-29-7 name=__codelineno-29-7 href=#__codelineno-29-7></a><span class=s2>    FROM </span>
<a id=__codelineno-29-8 name=__codelineno-29-8 href=#__codelineno-29-8></a><span class=s2>        Customers c, Invoices i</span>
<a id=__codelineno-29-9 name=__codelineno-29-9 href=#__codelineno-29-9></a><span class=s2>    WHERE </span>
<a id=__codelineno-29-10 name=__codelineno-29-10 href=#__codelineno-29-10></a><span class=s2>        c.cst_id = i.inv_cst_id </span>
<a id=__codelineno-29-11 name=__codelineno-29-11 href=#__codelineno-29-11></a><span class=s2>    ORDER BY </span>
<a id=__codelineno-29-12 name=__codelineno-29-12 href=#__codelineno-29-12></a><span class=s2>        c.cst_name_last, c.cst_name_first&quot;</span><span class=p>;</span>
<a id=__codelineno-29-13 name=__codelineno-29-13 href=#__codelineno-29-13></a>
<a id=__codelineno-29-14 name=__codelineno-29-14 href=#__codelineno-29-14></a><span class=nv>$records</span>  <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-29-15 name=__codelineno-29-15 href=#__codelineno-29-15></a>    <span class=o>-&gt;</span><span class=na>modelsManager</span>
<a id=__codelineno-29-16 name=__codelineno-29-16 href=#__codelineno-29-16></a>    <span class=o>-&gt;</span><span class=na>executeQuery</span><span class=p>(</span><span class=nv>$phql</span><span class=p>)</span>
<a id=__codelineno-29-17 name=__codelineno-29-17 href=#__codelineno-29-17></a><span class=p>;</span>
<a id=__codelineno-29-18 name=__codelineno-29-18 href=#__codelineno-29-18></a>
<a id=__codelineno-29-19 name=__codelineno-29-19 href=#__codelineno-29-19></a><span class=k>foreach</span> <span class=p>(</span><span class=nv>$records</span> <span class=k>as</span> <span class=nv>$record</span><span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-29-20 name=__codelineno-29-20 href=#__codelineno-29-20></a>    <span class=k>echo</span> <span class=nv>$record</span><span class=o>-&gt;</span><span class=na>i</span><span class=o>-&gt;</span><span class=na>inv_id</span><span class=p>,</span> 
<a id=__codelineno-29-21 name=__codelineno-29-21 href=#__codelineno-29-21></a>         <span class=nv>$record</span><span class=o>-&gt;</span><span class=na>i</span><span class=o>-&gt;</span><span class=na>inv_title</span><span class=p>,</span> 
<a id=__codelineno-29-22 name=__codelineno-29-22 href=#__codelineno-29-22></a>         <span class=nv>$record</span><span class=o>-&gt;</span><span class=na>c</span><span class=o>-&gt;</span><span class=na>cst_id</span><span class=p>,</span>
<a id=__codelineno-29-23 name=__codelineno-29-23 href=#__codelineno-29-23></a>         <span class=nv>$record</span><span class=o>-&gt;</span><span class=na>c</span><span class=o>-&gt;</span><span class=na>cst_name_last</span><span class=p>,</span>
<a id=__codelineno-29-24 name=__codelineno-29-24 href=#__codelineno-29-24></a>         <span class=nv>$record</span><span class=o>-&gt;</span><span class=na>c</span><span class=o>-&gt;</span><span class=na>cst_name_first</span><span class=p>,</span> 
<a id=__codelineno-29-25 name=__codelineno-29-25 href=#__codelineno-29-25></a>         <span class=nx>PHP_EOL</span>
<a id=__codelineno-29-26 name=__codelineno-29-26 href=#__codelineno-29-26></a>    <span class=p>;</span>
<a id=__codelineno-29-27 name=__codelineno-29-27 href=#__codelineno-29-27></a><span class=p>}</span>
</code></pre></div> <p>When the joined model has a many-to-many relation to the <code>from</code> model, the intermediate model is implicitly added to the generated query. For this example we have <code>Invoices</code>, <code>InvoicesXProducts</code> and <code>Products</code> models:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-30-1 name=__codelineno-30-1 href=#__codelineno-30-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-30-2 name=__codelineno-30-2 href=#__codelineno-30-2></a>
<a id=__codelineno-30-3 name=__codelineno-30-3 href=#__codelineno-30-3></a><span class=nv>$phql</span> <span class=o>=</span> <span class=s2>&quot;</span>
<a id=__codelineno-30-4 name=__codelineno-30-4 href=#__codelineno-30-4></a><span class=s2>    SELECT </span>
<a id=__codelineno-30-5 name=__codelineno-30-5 href=#__codelineno-30-5></a><span class=s2>        Invoices.inv_id, </span>
<a id=__codelineno-30-6 name=__codelineno-30-6 href=#__codelineno-30-6></a><span class=s2>        Invoices.inv_title, </span>
<a id=__codelineno-30-7 name=__codelineno-30-7 href=#__codelineno-30-7></a><span class=s2>        Products.prd_id,</span>
<a id=__codelineno-30-8 name=__codelineno-30-8 href=#__codelineno-30-8></a><span class=s2>        Products.prd_title </span>
<a id=__codelineno-30-9 name=__codelineno-30-9 href=#__codelineno-30-9></a><span class=s2>    FROM </span>
<a id=__codelineno-30-10 name=__codelineno-30-10 href=#__codelineno-30-10></a><span class=s2>        Invoices</span>
<a id=__codelineno-30-11 name=__codelineno-30-11 href=#__codelineno-30-11></a><span class=s2>    JOIN</span>
<a id=__codelineno-30-12 name=__codelineno-30-12 href=#__codelineno-30-12></a><span class=s2>        Products</span>
<a id=__codelineno-30-13 name=__codelineno-30-13 href=#__codelineno-30-13></a><span class=s2>    WHERE </span>
<a id=__codelineno-30-14 name=__codelineno-30-14 href=#__codelineno-30-14></a><span class=s2>        Invoices.inv_id = 1 </span>
<a id=__codelineno-30-15 name=__codelineno-30-15 href=#__codelineno-30-15></a><span class=s2>    ORDER BY </span>
<a id=__codelineno-30-16 name=__codelineno-30-16 href=#__codelineno-30-16></a><span class=s2>        Products.prd_name&quot;</span><span class=p>;</span>
<a id=__codelineno-30-17 name=__codelineno-30-17 href=#__codelineno-30-17></a>
<a id=__codelineno-30-18 name=__codelineno-30-18 href=#__codelineno-30-18></a><span class=nv>$records</span>  <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-30-19 name=__codelineno-30-19 href=#__codelineno-30-19></a>    <span class=o>-&gt;</span><span class=na>modelsManager</span>
<a id=__codelineno-30-20 name=__codelineno-30-20 href=#__codelineno-30-20></a>    <span class=o>-&gt;</span><span class=na>executeQuery</span><span class=p>(</span><span class=nv>$phql</span><span class=p>)</span>
<a id=__codelineno-30-21 name=__codelineno-30-21 href=#__codelineno-30-21></a><span class=p>;</span>
</code></pre></div> <p>This code executes the following SQL in MySQL:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-31-1 name=__codelineno-31-1 href=#__codelineno-31-1></a><span class=k>SELECT</span><span class=w> </span>
<a id=__codelineno-31-2 name=__codelineno-31-2 href=#__codelineno-31-2></a><span class=w>    </span><span class=n>co_invoices</span><span class=p>.</span><span class=n>inv_id</span><span class=p>,</span><span class=w> </span>
<a id=__codelineno-31-3 name=__codelineno-31-3 href=#__codelineno-31-3></a><span class=w>    </span><span class=n>co_invoices</span><span class=p>.</span><span class=n>inv_title</span><span class=p>,</span><span class=w> </span>
<a id=__codelineno-31-4 name=__codelineno-31-4 href=#__codelineno-31-4></a><span class=w>    </span><span class=n>co_products</span><span class=p>.</span><span class=n>prd_id</span><span class=p>,</span>
<a id=__codelineno-31-5 name=__codelineno-31-5 href=#__codelineno-31-5></a><span class=w>    </span><span class=n>co_products</span><span class=p>.</span><span class=n>prd_title</span><span class=w> </span>
<a id=__codelineno-31-6 name=__codelineno-31-6 href=#__codelineno-31-6></a><span class=k>FROM</span><span class=w> </span>
<a id=__codelineno-31-7 name=__codelineno-31-7 href=#__codelineno-31-7></a><span class=w>    </span><span class=n>co_invoices</span>
<a id=__codelineno-31-8 name=__codelineno-31-8 href=#__codelineno-31-8></a><span class=k>JOIN</span>
<a id=__codelineno-31-9 name=__codelineno-31-9 href=#__codelineno-31-9></a><span class=w>    </span><span class=n>co_invoices_x_products</span><span class=w> </span>
<a id=__codelineno-31-10 name=__codelineno-31-10 href=#__codelineno-31-10></a><span class=k>ON</span><span class=w> </span>
<a id=__codelineno-31-11 name=__codelineno-31-11 href=#__codelineno-31-11></a><span class=w>    </span><span class=n>co_invoices</span><span class=p>.</span><span class=n>inv_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>co_invoices_x_products</span><span class=p>.</span><span class=n>ixp_inv_id</span>
<a id=__codelineno-31-12 name=__codelineno-31-12 href=#__codelineno-31-12></a><span class=k>JOIN</span>
<a id=__codelineno-31-13 name=__codelineno-31-13 href=#__codelineno-31-13></a><span class=w>    </span><span class=n>co_products</span><span class=w> </span>
<a id=__codelineno-31-14 name=__codelineno-31-14 href=#__codelineno-31-14></a><span class=k>ON</span><span class=w> </span>
<a id=__codelineno-31-15 name=__codelineno-31-15 href=#__codelineno-31-15></a><span class=w>    </span><span class=n>co_invoices_x_products</span><span class=p>.</span><span class=n>ixp_prd_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>co_products</span><span class=p>.</span><span class=n>prd_id</span>
<a id=__codelineno-31-16 name=__codelineno-31-16 href=#__codelineno-31-16></a><span class=k>WHERE</span>
<a id=__codelineno-31-17 name=__codelineno-31-17 href=#__codelineno-31-17></a><span class=w>    </span><span class=n>co_invoices</span><span class=p>.</span><span class=n>inv_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span>
<a id=__codelineno-31-18 name=__codelineno-31-18 href=#__codelineno-31-18></a><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span>
<a id=__codelineno-31-19 name=__codelineno-31-19 href=#__codelineno-31-19></a><span class=w>    </span><span class=n>co_products</span><span class=p>.</span><span class=n>prd_name</span>
</code></pre></div> <h3 id=aggregations>Aggregations<a class=headerlink href=#aggregations title="Permanent link">&para;</a></h3> <p>The following examples show how to use aggregations in PHQL:</p> <p><strong>Average</strong></p> <p>What is the average amount of invoices for a customer with <code>inv_cst_id = 1</code> </p> <div class=highlight><pre><span></span><code><a id=__codelineno-32-1 name=__codelineno-32-1 href=#__codelineno-32-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-32-2 name=__codelineno-32-2 href=#__codelineno-32-2></a>
<a id=__codelineno-32-3 name=__codelineno-32-3 href=#__codelineno-32-3></a><span class=nv>$phql</span> <span class=o>=</span> <span class=s2>&quot;</span>
<a id=__codelineno-32-4 name=__codelineno-32-4 href=#__codelineno-32-4></a><span class=s2>    SELECT </span>
<a id=__codelineno-32-5 name=__codelineno-32-5 href=#__codelineno-32-5></a><span class=s2>        AVERAGE(inv_total) AS invoice_average</span>
<a id=__codelineno-32-6 name=__codelineno-32-6 href=#__codelineno-32-6></a><span class=s2>    FROM </span>
<a id=__codelineno-32-7 name=__codelineno-32-7 href=#__codelineno-32-7></a><span class=s2>        Invoices</span>
<a id=__codelineno-32-8 name=__codelineno-32-8 href=#__codelineno-32-8></a><span class=s2>    WHERE </span>
<a id=__codelineno-32-9 name=__codelineno-32-9 href=#__codelineno-32-9></a><span class=s2>        Invoices.inv_cst_id = 1&quot;</span><span class=p>;</span>
<a id=__codelineno-32-10 name=__codelineno-32-10 href=#__codelineno-32-10></a>
<a id=__codelineno-32-11 name=__codelineno-32-11 href=#__codelineno-32-11></a><span class=nv>$results</span>  <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-32-12 name=__codelineno-32-12 href=#__codelineno-32-12></a>    <span class=o>-&gt;</span><span class=na>modelsManager</span>
<a id=__codelineno-32-13 name=__codelineno-32-13 href=#__codelineno-32-13></a>    <span class=o>-&gt;</span><span class=na>executeQuery</span><span class=p>(</span><span class=nv>$phql</span><span class=p>)</span>
<a id=__codelineno-32-14 name=__codelineno-32-14 href=#__codelineno-32-14></a><span class=p>;</span>
<a id=__codelineno-32-15 name=__codelineno-32-15 href=#__codelineno-32-15></a>
<a id=__codelineno-32-16 name=__codelineno-32-16 href=#__codelineno-32-16></a><span class=k>echo</span> <span class=nv>$results</span><span class=p>[</span><span class=s1>&#39;invoice_average&#39;</span><span class=p>],</span> <span class=nx>PHP_EOL</span><span class=p>;</span>
</code></pre></div> <p><strong>Count</strong></p> <p>How many invoices does each customer have</p> <div class=highlight><pre><span></span><code><a id=__codelineno-33-1 name=__codelineno-33-1 href=#__codelineno-33-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-33-2 name=__codelineno-33-2 href=#__codelineno-33-2></a>
<a id=__codelineno-33-3 name=__codelineno-33-3 href=#__codelineno-33-3></a><span class=nv>$phql</span> <span class=o>=</span> <span class=s2>&quot;</span>
<a id=__codelineno-33-4 name=__codelineno-33-4 href=#__codelineno-33-4></a><span class=s2>    SELECT </span>
<a id=__codelineno-33-5 name=__codelineno-33-5 href=#__codelineno-33-5></a><span class=s2>        inv_cst_id,</span>
<a id=__codelineno-33-6 name=__codelineno-33-6 href=#__codelineno-33-6></a><span class=s2>        COUNT(*) AS invoice_count</span>
<a id=__codelineno-33-7 name=__codelineno-33-7 href=#__codelineno-33-7></a><span class=s2>    FROM </span>
<a id=__codelineno-33-8 name=__codelineno-33-8 href=#__codelineno-33-8></a><span class=s2>        Invoices</span>
<a id=__codelineno-33-9 name=__codelineno-33-9 href=#__codelineno-33-9></a><span class=s2>    GROUP BY </span>
<a id=__codelineno-33-10 name=__codelineno-33-10 href=#__codelineno-33-10></a><span class=s2>        Invoices.inv_cst_id</span>
<a id=__codelineno-33-11 name=__codelineno-33-11 href=#__codelineno-33-11></a><span class=s2>    ORDER BY </span>
<a id=__codelineno-33-12 name=__codelineno-33-12 href=#__codelineno-33-12></a><span class=s2>        Invoices.inv_cst_id&quot;</span><span class=p>;</span>
<a id=__codelineno-33-13 name=__codelineno-33-13 href=#__codelineno-33-13></a>
<a id=__codelineno-33-14 name=__codelineno-33-14 href=#__codelineno-33-14></a><span class=nv>$records</span>  <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-33-15 name=__codelineno-33-15 href=#__codelineno-33-15></a>    <span class=o>-&gt;</span><span class=na>modelsManager</span>
<a id=__codelineno-33-16 name=__codelineno-33-16 href=#__codelineno-33-16></a>    <span class=o>-&gt;</span><span class=na>executeQuery</span><span class=p>(</span><span class=nv>$phql</span><span class=p>)</span>
<a id=__codelineno-33-17 name=__codelineno-33-17 href=#__codelineno-33-17></a><span class=p>;</span>
<a id=__codelineno-33-18 name=__codelineno-33-18 href=#__codelineno-33-18></a>
<a id=__codelineno-33-19 name=__codelineno-33-19 href=#__codelineno-33-19></a><span class=k>foreach</span> <span class=p>(</span><span class=nv>$records</span> <span class=k>as</span> <span class=nv>$record</span><span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-33-20 name=__codelineno-33-20 href=#__codelineno-33-20></a>    <span class=k>echo</span> <span class=nv>$record</span><span class=o>-&gt;</span><span class=na>inv_cst_id</span><span class=p>,</span> 
<a id=__codelineno-33-21 name=__codelineno-33-21 href=#__codelineno-33-21></a>         <span class=nv>$record</span><span class=o>-&gt;</span><span class=na>invoice_count</span><span class=p>,</span> 
<a id=__codelineno-33-22 name=__codelineno-33-22 href=#__codelineno-33-22></a>         <span class=nx>PHP_EOL</span>
<a id=__codelineno-33-23 name=__codelineno-33-23 href=#__codelineno-33-23></a>    <span class=p>;</span>
<a id=__codelineno-33-24 name=__codelineno-33-24 href=#__codelineno-33-24></a><span class=p>}</span>
</code></pre></div> <p><strong>Count Distinct</strong></p> <p>How many invoices does each customer have</p> <div class=highlight><pre><span></span><code><a id=__codelineno-34-1 name=__codelineno-34-1 href=#__codelineno-34-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-34-2 name=__codelineno-34-2 href=#__codelineno-34-2></a>
<a id=__codelineno-34-3 name=__codelineno-34-3 href=#__codelineno-34-3></a><span class=nv>$phql</span> <span class=o>=</span> <span class=s2>&quot;</span>
<a id=__codelineno-34-4 name=__codelineno-34-4 href=#__codelineno-34-4></a><span class=s2>    SELECT </span>
<a id=__codelineno-34-5 name=__codelineno-34-5 href=#__codelineno-34-5></a><span class=s2>        COUNT(DISTINCT inv_cst_id) AS customer_id</span>
<a id=__codelineno-34-6 name=__codelineno-34-6 href=#__codelineno-34-6></a><span class=s2>    FROM </span>
<a id=__codelineno-34-7 name=__codelineno-34-7 href=#__codelineno-34-7></a><span class=s2>        Invoices</span>
<a id=__codelineno-34-8 name=__codelineno-34-8 href=#__codelineno-34-8></a><span class=s2>    ORDER BY </span>
<a id=__codelineno-34-9 name=__codelineno-34-9 href=#__codelineno-34-9></a><span class=s2>        Invoices.inv_cst_id&quot;</span><span class=p>;</span>
<a id=__codelineno-34-10 name=__codelineno-34-10 href=#__codelineno-34-10></a>
<a id=__codelineno-34-11 name=__codelineno-34-11 href=#__codelineno-34-11></a><span class=nv>$records</span>  <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-34-12 name=__codelineno-34-12 href=#__codelineno-34-12></a>    <span class=o>-&gt;</span><span class=na>modelsManager</span>
<a id=__codelineno-34-13 name=__codelineno-34-13 href=#__codelineno-34-13></a>    <span class=o>-&gt;</span><span class=na>executeQuery</span><span class=p>(</span><span class=nv>$phql</span><span class=p>)</span>
<a id=__codelineno-34-14 name=__codelineno-34-14 href=#__codelineno-34-14></a><span class=p>;</span>
<a id=__codelineno-34-15 name=__codelineno-34-15 href=#__codelineno-34-15></a>
<a id=__codelineno-34-16 name=__codelineno-34-16 href=#__codelineno-34-16></a><span class=k>foreach</span> <span class=p>(</span><span class=nv>$records</span> <span class=k>as</span> <span class=nv>$record</span><span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-34-17 name=__codelineno-34-17 href=#__codelineno-34-17></a>    <span class=k>echo</span> <span class=nv>$record</span><span class=o>-&gt;</span><span class=na>inv_cst_id</span><span class=p>,</span> 
<a id=__codelineno-34-18 name=__codelineno-34-18 href=#__codelineno-34-18></a>         <span class=nx>PHP_EOL</span>
<a id=__codelineno-34-19 name=__codelineno-34-19 href=#__codelineno-34-19></a>    <span class=p>;</span>
<a id=__codelineno-34-20 name=__codelineno-34-20 href=#__codelineno-34-20></a><span class=p>}</span>
</code></pre></div> <p><strong>Max</strong></p> <p>What is the maximum invoice amount for a customer with <code>inv_cst_id = 1</code></p> <div class=highlight><pre><span></span><code><a id=__codelineno-35-1 name=__codelineno-35-1 href=#__codelineno-35-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-35-2 name=__codelineno-35-2 href=#__codelineno-35-2></a>
<a id=__codelineno-35-3 name=__codelineno-35-3 href=#__codelineno-35-3></a><span class=nv>$phql</span> <span class=o>=</span> <span class=s2>&quot;</span>
<a id=__codelineno-35-4 name=__codelineno-35-4 href=#__codelineno-35-4></a><span class=s2>    SELECT </span>
<a id=__codelineno-35-5 name=__codelineno-35-5 href=#__codelineno-35-5></a><span class=s2>        MAX(inv_total) AS invoice_max</span>
<a id=__codelineno-35-6 name=__codelineno-35-6 href=#__codelineno-35-6></a><span class=s2>    FROM </span>
<a id=__codelineno-35-7 name=__codelineno-35-7 href=#__codelineno-35-7></a><span class=s2>        Invoices</span>
<a id=__codelineno-35-8 name=__codelineno-35-8 href=#__codelineno-35-8></a><span class=s2>    WHERE </span>
<a id=__codelineno-35-9 name=__codelineno-35-9 href=#__codelineno-35-9></a><span class=s2>        Invoices.inv_cst_id = 1&quot;</span><span class=p>;</span>
<a id=__codelineno-35-10 name=__codelineno-35-10 href=#__codelineno-35-10></a>
<a id=__codelineno-35-11 name=__codelineno-35-11 href=#__codelineno-35-11></a><span class=nv>$results</span>  <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-35-12 name=__codelineno-35-12 href=#__codelineno-35-12></a>    <span class=o>-&gt;</span><span class=na>modelsManager</span>
<a id=__codelineno-35-13 name=__codelineno-35-13 href=#__codelineno-35-13></a>    <span class=o>-&gt;</span><span class=na>executeQuery</span><span class=p>(</span><span class=nv>$phql</span><span class=p>)</span>
<a id=__codelineno-35-14 name=__codelineno-35-14 href=#__codelineno-35-14></a><span class=p>;</span>
<a id=__codelineno-35-15 name=__codelineno-35-15 href=#__codelineno-35-15></a>
<a id=__codelineno-35-16 name=__codelineno-35-16 href=#__codelineno-35-16></a><span class=k>echo</span> <span class=nv>$results</span><span class=p>[</span><span class=s1>&#39;invoice_max&#39;</span><span class=p>],</span> <span class=nx>PHP_EOL</span><span class=p>;</span>
</code></pre></div> <p><strong>Min</strong></p> <p>What is the minimum invoice amount for a customer with <code>inv_cst_id = 1</code></p> <div class=highlight><pre><span></span><code><a id=__codelineno-36-1 name=__codelineno-36-1 href=#__codelineno-36-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-36-2 name=__codelineno-36-2 href=#__codelineno-36-2></a>
<a id=__codelineno-36-3 name=__codelineno-36-3 href=#__codelineno-36-3></a><span class=nv>$phql</span> <span class=o>=</span> <span class=s2>&quot;</span>
<a id=__codelineno-36-4 name=__codelineno-36-4 href=#__codelineno-36-4></a><span class=s2>    SELECT </span>
<a id=__codelineno-36-5 name=__codelineno-36-5 href=#__codelineno-36-5></a><span class=s2>        MIN(inv_total) AS invoice_min</span>
<a id=__codelineno-36-6 name=__codelineno-36-6 href=#__codelineno-36-6></a><span class=s2>    FROM </span>
<a id=__codelineno-36-7 name=__codelineno-36-7 href=#__codelineno-36-7></a><span class=s2>        Invoices</span>
<a id=__codelineno-36-8 name=__codelineno-36-8 href=#__codelineno-36-8></a><span class=s2>    WHERE </span>
<a id=__codelineno-36-9 name=__codelineno-36-9 href=#__codelineno-36-9></a><span class=s2>        Invoices.inv_cst_id = 1&quot;</span><span class=p>;</span>
<a id=__codelineno-36-10 name=__codelineno-36-10 href=#__codelineno-36-10></a>
<a id=__codelineno-36-11 name=__codelineno-36-11 href=#__codelineno-36-11></a><span class=nv>$results</span>  <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-36-12 name=__codelineno-36-12 href=#__codelineno-36-12></a>    <span class=o>-&gt;</span><span class=na>modelsManager</span>
<a id=__codelineno-36-13 name=__codelineno-36-13 href=#__codelineno-36-13></a>    <span class=o>-&gt;</span><span class=na>executeQuery</span><span class=p>(</span><span class=nv>$phql</span><span class=p>)</span>
<a id=__codelineno-36-14 name=__codelineno-36-14 href=#__codelineno-36-14></a><span class=p>;</span>
<a id=__codelineno-36-15 name=__codelineno-36-15 href=#__codelineno-36-15></a>
<a id=__codelineno-36-16 name=__codelineno-36-16 href=#__codelineno-36-16></a><span class=k>echo</span> <span class=nv>$results</span><span class=p>[</span><span class=s1>&#39;invoice_min&#39;</span><span class=p>],</span> <span class=nx>PHP_EOL</span><span class=p>;</span>
</code></pre></div> <p><strong>Sum</strong></p> <p>What is the total amount of invoices for a customer with <code>inv_cst_id = 1</code> </p> <div class=highlight><pre><span></span><code><a id=__codelineno-37-1 name=__codelineno-37-1 href=#__codelineno-37-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-37-2 name=__codelineno-37-2 href=#__codelineno-37-2></a>
<a id=__codelineno-37-3 name=__codelineno-37-3 href=#__codelineno-37-3></a><span class=nv>$phql</span> <span class=o>=</span> <span class=s2>&quot;</span>
<a id=__codelineno-37-4 name=__codelineno-37-4 href=#__codelineno-37-4></a><span class=s2>    SELECT </span>
<a id=__codelineno-37-5 name=__codelineno-37-5 href=#__codelineno-37-5></a><span class=s2>        SUM(inv_total) AS invoice_total</span>
<a id=__codelineno-37-6 name=__codelineno-37-6 href=#__codelineno-37-6></a><span class=s2>    FROM </span>
<a id=__codelineno-37-7 name=__codelineno-37-7 href=#__codelineno-37-7></a><span class=s2>        Invoices</span>
<a id=__codelineno-37-8 name=__codelineno-37-8 href=#__codelineno-37-8></a><span class=s2>    WHERE </span>
<a id=__codelineno-37-9 name=__codelineno-37-9 href=#__codelineno-37-9></a><span class=s2>        Invoices.inv_cst_id = 1&quot;</span><span class=p>;</span>
<a id=__codelineno-37-10 name=__codelineno-37-10 href=#__codelineno-37-10></a>
<a id=__codelineno-37-11 name=__codelineno-37-11 href=#__codelineno-37-11></a><span class=nv>$results</span>  <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-37-12 name=__codelineno-37-12 href=#__codelineno-37-12></a>    <span class=o>-&gt;</span><span class=na>modelsManager</span>
<a id=__codelineno-37-13 name=__codelineno-37-13 href=#__codelineno-37-13></a>    <span class=o>-&gt;</span><span class=na>executeQuery</span><span class=p>(</span><span class=nv>$phql</span><span class=p>)</span>
<a id=__codelineno-37-14 name=__codelineno-37-14 href=#__codelineno-37-14></a><span class=p>;</span>
<a id=__codelineno-37-15 name=__codelineno-37-15 href=#__codelineno-37-15></a>
<a id=__codelineno-37-16 name=__codelineno-37-16 href=#__codelineno-37-16></a><span class=k>echo</span> <span class=nv>$results</span><span class=p>[</span><span class=s1>&#39;invoice_total&#39;</span><span class=p>],</span> <span class=nx>PHP_EOL</span><span class=p>;</span>
</code></pre></div> <h3 id=conditions>Conditions<a class=headerlink href=#conditions title="Permanent link">&para;</a></h3> <p>Conditions allow us to filter the set of records we want to query using the <code>WHERE</code> keyword.</p> <p>Select a record with a single numeric comparison:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-38-1 name=__codelineno-38-1 href=#__codelineno-38-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-38-2 name=__codelineno-38-2 href=#__codelineno-38-2></a>
<a id=__codelineno-38-3 name=__codelineno-38-3 href=#__codelineno-38-3></a><span class=nv>$phql</span> <span class=o>=</span> <span class=s2>&quot;</span>
<a id=__codelineno-38-4 name=__codelineno-38-4 href=#__codelineno-38-4></a><span class=s2>    SELECT </span>
<a id=__codelineno-38-5 name=__codelineno-38-5 href=#__codelineno-38-5></a><span class=s2>        *</span>
<a id=__codelineno-38-6 name=__codelineno-38-6 href=#__codelineno-38-6></a><span class=s2>    FROM </span>
<a id=__codelineno-38-7 name=__codelineno-38-7 href=#__codelineno-38-7></a><span class=s2>        Invoices</span>
<a id=__codelineno-38-8 name=__codelineno-38-8 href=#__codelineno-38-8></a><span class=s2>    WHERE </span>
<a id=__codelineno-38-9 name=__codelineno-38-9 href=#__codelineno-38-9></a><span class=s2>        Invoices.inv_cst_id = 1&quot;</span><span class=p>;</span>
<a id=__codelineno-38-10 name=__codelineno-38-10 href=#__codelineno-38-10></a>
<a id=__codelineno-38-11 name=__codelineno-38-11 href=#__codelineno-38-11></a><span class=nv>$records</span>  <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-38-12 name=__codelineno-38-12 href=#__codelineno-38-12></a>    <span class=o>-&gt;</span><span class=na>modelsManager</span>
<a id=__codelineno-38-13 name=__codelineno-38-13 href=#__codelineno-38-13></a>    <span class=o>-&gt;</span><span class=na>executeQuery</span><span class=p>(</span><span class=nv>$phql</span><span class=p>)</span>
<a id=__codelineno-38-14 name=__codelineno-38-14 href=#__codelineno-38-14></a><span class=p>;</span>
</code></pre></div> <p>Select records with a greater than numeric comparison:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-39-1 name=__codelineno-39-1 href=#__codelineno-39-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-39-2 name=__codelineno-39-2 href=#__codelineno-39-2></a>
<a id=__codelineno-39-3 name=__codelineno-39-3 href=#__codelineno-39-3></a><span class=nv>$phql</span> <span class=o>=</span> <span class=s2>&quot;</span>
<a id=__codelineno-39-4 name=__codelineno-39-4 href=#__codelineno-39-4></a><span class=s2>    SELECT </span>
<a id=__codelineno-39-5 name=__codelineno-39-5 href=#__codelineno-39-5></a><span class=s2>        *</span>
<a id=__codelineno-39-6 name=__codelineno-39-6 href=#__codelineno-39-6></a><span class=s2>    FROM </span>
<a id=__codelineno-39-7 name=__codelineno-39-7 href=#__codelineno-39-7></a><span class=s2>        Invoices</span>
<a id=__codelineno-39-8 name=__codelineno-39-8 href=#__codelineno-39-8></a><span class=s2>    WHERE </span>
<a id=__codelineno-39-9 name=__codelineno-39-9 href=#__codelineno-39-9></a><span class=s2>        Invoices.inv_total &gt; 1000&quot;</span><span class=p>;</span>
<a id=__codelineno-39-10 name=__codelineno-39-10 href=#__codelineno-39-10></a>
<a id=__codelineno-39-11 name=__codelineno-39-11 href=#__codelineno-39-11></a><span class=nv>$records</span>  <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-39-12 name=__codelineno-39-12 href=#__codelineno-39-12></a>    <span class=o>-&gt;</span><span class=na>modelsManager</span>
<a id=__codelineno-39-13 name=__codelineno-39-13 href=#__codelineno-39-13></a>    <span class=o>-&gt;</span><span class=na>executeQuery</span><span class=p>(</span><span class=nv>$phql</span><span class=p>)</span>
<a id=__codelineno-39-14 name=__codelineno-39-14 href=#__codelineno-39-14></a><span class=p>;</span>
</code></pre></div> <p>Select records with a single text comparison using <code>TRIM</code>:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-40-1 name=__codelineno-40-1 href=#__codelineno-40-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-40-2 name=__codelineno-40-2 href=#__codelineno-40-2></a>
<a id=__codelineno-40-3 name=__codelineno-40-3 href=#__codelineno-40-3></a><span class=nv>$phql</span> <span class=o>=</span> <span class=s2>&quot;</span>
<a id=__codelineno-40-4 name=__codelineno-40-4 href=#__codelineno-40-4></a><span class=s2>    SELECT </span>
<a id=__codelineno-40-5 name=__codelineno-40-5 href=#__codelineno-40-5></a><span class=s2>        *</span>
<a id=__codelineno-40-6 name=__codelineno-40-6 href=#__codelineno-40-6></a><span class=s2>    FROM </span>
<a id=__codelineno-40-7 name=__codelineno-40-7 href=#__codelineno-40-7></a><span class=s2>        Invoices</span>
<a id=__codelineno-40-8 name=__codelineno-40-8 href=#__codelineno-40-8></a><span class=s2>    WHERE </span>
<a id=__codelineno-40-9 name=__codelineno-40-9 href=#__codelineno-40-9></a><span class=s2>        TRIM(Invoices.inv_title) = &#39;Invoice for ACME Inc.&#39;&quot;</span><span class=p>;</span>
<a id=__codelineno-40-10 name=__codelineno-40-10 href=#__codelineno-40-10></a>
<a id=__codelineno-40-11 name=__codelineno-40-11 href=#__codelineno-40-11></a><span class=nv>$records</span>  <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-40-12 name=__codelineno-40-12 href=#__codelineno-40-12></a>    <span class=o>-&gt;</span><span class=na>modelsManager</span>
<a id=__codelineno-40-13 name=__codelineno-40-13 href=#__codelineno-40-13></a>    <span class=o>-&gt;</span><span class=na>executeQuery</span><span class=p>(</span><span class=nv>$phql</span><span class=p>)</span>
<a id=__codelineno-40-14 name=__codelineno-40-14 href=#__codelineno-40-14></a><span class=p>;</span>
</code></pre></div> <p>Select records using the <code>LIKE</code> keyword:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-41-1 name=__codelineno-41-1 href=#__codelineno-41-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-41-2 name=__codelineno-41-2 href=#__codelineno-41-2></a>
<a id=__codelineno-41-3 name=__codelineno-41-3 href=#__codelineno-41-3></a><span class=nv>$phql</span> <span class=o>=</span> <span class=s2>&quot;</span>
<a id=__codelineno-41-4 name=__codelineno-41-4 href=#__codelineno-41-4></a><span class=s2>    SELECT </span>
<a id=__codelineno-41-5 name=__codelineno-41-5 href=#__codelineno-41-5></a><span class=s2>        *</span>
<a id=__codelineno-41-6 name=__codelineno-41-6 href=#__codelineno-41-6></a><span class=s2>    FROM </span>
<a id=__codelineno-41-7 name=__codelineno-41-7 href=#__codelineno-41-7></a><span class=s2>        Invoices</span>
<a id=__codelineno-41-8 name=__codelineno-41-8 href=#__codelineno-41-8></a><span class=s2>    WHERE </span>
<a id=__codelineno-41-9 name=__codelineno-41-9 href=#__codelineno-41-9></a><span class=s2>        Invoices.inv_title LIKE &#39;%ACME%&#39;&quot;</span><span class=p>;</span>
<a id=__codelineno-41-10 name=__codelineno-41-10 href=#__codelineno-41-10></a>
<a id=__codelineno-41-11 name=__codelineno-41-11 href=#__codelineno-41-11></a><span class=nv>$records</span>  <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-41-12 name=__codelineno-41-12 href=#__codelineno-41-12></a>    <span class=o>-&gt;</span><span class=na>modelsManager</span>
<a id=__codelineno-41-13 name=__codelineno-41-13 href=#__codelineno-41-13></a>    <span class=o>-&gt;</span><span class=na>executeQuery</span><span class=p>(</span><span class=nv>$phql</span><span class=p>)</span>
<a id=__codelineno-41-14 name=__codelineno-41-14 href=#__codelineno-41-14></a><span class=p>;</span>
</code></pre></div> <p>Select records using the <code>NOT LIKE</code> keywords:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-42-1 name=__codelineno-42-1 href=#__codelineno-42-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-42-2 name=__codelineno-42-2 href=#__codelineno-42-2></a>
<a id=__codelineno-42-3 name=__codelineno-42-3 href=#__codelineno-42-3></a><span class=nv>$phql</span> <span class=o>=</span> <span class=s2>&quot;</span>
<a id=__codelineno-42-4 name=__codelineno-42-4 href=#__codelineno-42-4></a><span class=s2>    SELECT </span>
<a id=__codelineno-42-5 name=__codelineno-42-5 href=#__codelineno-42-5></a><span class=s2>        *</span>
<a id=__codelineno-42-6 name=__codelineno-42-6 href=#__codelineno-42-6></a><span class=s2>    FROM </span>
<a id=__codelineno-42-7 name=__codelineno-42-7 href=#__codelineno-42-7></a><span class=s2>        Invoices</span>
<a id=__codelineno-42-8 name=__codelineno-42-8 href=#__codelineno-42-8></a><span class=s2>    WHERE </span>
<a id=__codelineno-42-9 name=__codelineno-42-9 href=#__codelineno-42-9></a><span class=s2>        Invoices.inv_title NOT LIKE &#39;%ACME%&#39;&quot;</span><span class=p>;</span>
<a id=__codelineno-42-10 name=__codelineno-42-10 href=#__codelineno-42-10></a>
<a id=__codelineno-42-11 name=__codelineno-42-11 href=#__codelineno-42-11></a><span class=nv>$records</span>  <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-42-12 name=__codelineno-42-12 href=#__codelineno-42-12></a>    <span class=o>-&gt;</span><span class=na>modelsManager</span>
<a id=__codelineno-42-13 name=__codelineno-42-13 href=#__codelineno-42-13></a>    <span class=o>-&gt;</span><span class=na>executeQuery</span><span class=p>(</span><span class=nv>$phql</span><span class=p>)</span>
<a id=__codelineno-42-14 name=__codelineno-42-14 href=#__codelineno-42-14></a><span class=p>;</span>
</code></pre></div> <p>Select records where a field is <code>NULL</code>:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-43-1 name=__codelineno-43-1 href=#__codelineno-43-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-43-2 name=__codelineno-43-2 href=#__codelineno-43-2></a>
<a id=__codelineno-43-3 name=__codelineno-43-3 href=#__codelineno-43-3></a><span class=nv>$phql</span> <span class=o>=</span> <span class=s2>&quot;</span>
<a id=__codelineno-43-4 name=__codelineno-43-4 href=#__codelineno-43-4></a><span class=s2>    SELECT </span>
<a id=__codelineno-43-5 name=__codelineno-43-5 href=#__codelineno-43-5></a><span class=s2>        *</span>
<a id=__codelineno-43-6 name=__codelineno-43-6 href=#__codelineno-43-6></a><span class=s2>    FROM </span>
<a id=__codelineno-43-7 name=__codelineno-43-7 href=#__codelineno-43-7></a><span class=s2>        Invoices</span>
<a id=__codelineno-43-8 name=__codelineno-43-8 href=#__codelineno-43-8></a><span class=s2>    WHERE </span>
<a id=__codelineno-43-9 name=__codelineno-43-9 href=#__codelineno-43-9></a><span class=s2>        Invoices.inv_total IS NULL&quot;</span><span class=p>;</span>
<a id=__codelineno-43-10 name=__codelineno-43-10 href=#__codelineno-43-10></a>
<a id=__codelineno-43-11 name=__codelineno-43-11 href=#__codelineno-43-11></a><span class=nv>$records</span>  <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-43-12 name=__codelineno-43-12 href=#__codelineno-43-12></a>    <span class=o>-&gt;</span><span class=na>modelsManager</span>
<a id=__codelineno-43-13 name=__codelineno-43-13 href=#__codelineno-43-13></a>    <span class=o>-&gt;</span><span class=na>executeQuery</span><span class=p>(</span><span class=nv>$phql</span><span class=p>)</span>
<a id=__codelineno-43-14 name=__codelineno-43-14 href=#__codelineno-43-14></a><span class=p>;</span>
</code></pre></div> <p>Select records using the <code>IN</code> keyword:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-44-1 name=__codelineno-44-1 href=#__codelineno-44-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-44-2 name=__codelineno-44-2 href=#__codelineno-44-2></a>
<a id=__codelineno-44-3 name=__codelineno-44-3 href=#__codelineno-44-3></a><span class=nv>$phql</span> <span class=o>=</span> <span class=s2>&quot;</span>
<a id=__codelineno-44-4 name=__codelineno-44-4 href=#__codelineno-44-4></a><span class=s2>    SELECT </span>
<a id=__codelineno-44-5 name=__codelineno-44-5 href=#__codelineno-44-5></a><span class=s2>        *</span>
<a id=__codelineno-44-6 name=__codelineno-44-6 href=#__codelineno-44-6></a><span class=s2>    FROM </span>
<a id=__codelineno-44-7 name=__codelineno-44-7 href=#__codelineno-44-7></a><span class=s2>        Invoices</span>
<a id=__codelineno-44-8 name=__codelineno-44-8 href=#__codelineno-44-8></a><span class=s2>    WHERE </span>
<a id=__codelineno-44-9 name=__codelineno-44-9 href=#__codelineno-44-9></a><span class=s2>        Invoices.inv_cst_id IN (1, 3, 5)&quot;</span><span class=p>;</span>
<a id=__codelineno-44-10 name=__codelineno-44-10 href=#__codelineno-44-10></a>
<a id=__codelineno-44-11 name=__codelineno-44-11 href=#__codelineno-44-11></a><span class=nv>$records</span>  <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-44-12 name=__codelineno-44-12 href=#__codelineno-44-12></a>    <span class=o>-&gt;</span><span class=na>modelsManager</span>
<a id=__codelineno-44-13 name=__codelineno-44-13 href=#__codelineno-44-13></a>    <span class=o>-&gt;</span><span class=na>executeQuery</span><span class=p>(</span><span class=nv>$phql</span><span class=p>)</span>
<a id=__codelineno-44-14 name=__codelineno-44-14 href=#__codelineno-44-14></a><span class=p>;</span>
</code></pre></div> <p>Select records using the <code>NOT IN</code> keywords:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-45-1 name=__codelineno-45-1 href=#__codelineno-45-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-45-2 name=__codelineno-45-2 href=#__codelineno-45-2></a>
<a id=__codelineno-45-3 name=__codelineno-45-3 href=#__codelineno-45-3></a><span class=nv>$phql</span> <span class=o>=</span> <span class=s2>&quot;</span>
<a id=__codelineno-45-4 name=__codelineno-45-4 href=#__codelineno-45-4></a><span class=s2>    SELECT </span>
<a id=__codelineno-45-5 name=__codelineno-45-5 href=#__codelineno-45-5></a><span class=s2>        *</span>
<a id=__codelineno-45-6 name=__codelineno-45-6 href=#__codelineno-45-6></a><span class=s2>    FROM </span>
<a id=__codelineno-45-7 name=__codelineno-45-7 href=#__codelineno-45-7></a><span class=s2>        Invoices</span>
<a id=__codelineno-45-8 name=__codelineno-45-8 href=#__codelineno-45-8></a><span class=s2>    WHERE </span>
<a id=__codelineno-45-9 name=__codelineno-45-9 href=#__codelineno-45-9></a><span class=s2>        Invoices.inv_cst_id NOT IN (1, 3, 5)&quot;</span><span class=p>;</span>
<a id=__codelineno-45-10 name=__codelineno-45-10 href=#__codelineno-45-10></a>
<a id=__codelineno-45-11 name=__codelineno-45-11 href=#__codelineno-45-11></a><span class=nv>$records</span>  <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-45-12 name=__codelineno-45-12 href=#__codelineno-45-12></a>    <span class=o>-&gt;</span><span class=na>modelsManager</span>
<a id=__codelineno-45-13 name=__codelineno-45-13 href=#__codelineno-45-13></a>    <span class=o>-&gt;</span><span class=na>executeQuery</span><span class=p>(</span><span class=nv>$phql</span><span class=p>)</span>
<a id=__codelineno-45-14 name=__codelineno-45-14 href=#__codelineno-45-14></a><span class=p>;</span>
</code></pre></div> <p>Select records using the <code>BETWEEN</code> keywords:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-46-1 name=__codelineno-46-1 href=#__codelineno-46-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-46-2 name=__codelineno-46-2 href=#__codelineno-46-2></a>
<a id=__codelineno-46-3 name=__codelineno-46-3 href=#__codelineno-46-3></a><span class=nv>$phql</span> <span class=o>=</span> <span class=s2>&quot;</span>
<a id=__codelineno-46-4 name=__codelineno-46-4 href=#__codelineno-46-4></a><span class=s2>    SELECT </span>
<a id=__codelineno-46-5 name=__codelineno-46-5 href=#__codelineno-46-5></a><span class=s2>        *</span>
<a id=__codelineno-46-6 name=__codelineno-46-6 href=#__codelineno-46-6></a><span class=s2>    FROM </span>
<a id=__codelineno-46-7 name=__codelineno-46-7 href=#__codelineno-46-7></a><span class=s2>        Invoices</span>
<a id=__codelineno-46-8 name=__codelineno-46-8 href=#__codelineno-46-8></a><span class=s2>    WHERE </span>
<a id=__codelineno-46-9 name=__codelineno-46-9 href=#__codelineno-46-9></a><span class=s2>        Invoices.inv_cst_id BETWEEN 1 AND 5&quot;</span><span class=p>;</span>
<a id=__codelineno-46-10 name=__codelineno-46-10 href=#__codelineno-46-10></a>
<a id=__codelineno-46-11 name=__codelineno-46-11 href=#__codelineno-46-11></a><span class=nv>$records</span>  <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-46-12 name=__codelineno-46-12 href=#__codelineno-46-12></a>    <span class=o>-&gt;</span><span class=na>modelsManager</span>
<a id=__codelineno-46-13 name=__codelineno-46-13 href=#__codelineno-46-13></a>    <span class=o>-&gt;</span><span class=na>executeQuery</span><span class=p>(</span><span class=nv>$phql</span><span class=p>)</span>
<a id=__codelineno-46-14 name=__codelineno-46-14 href=#__codelineno-46-14></a><span class=p>;</span>
</code></pre></div> <h3 id=parameters>Parameters<a class=headerlink href=#parameters title="Permanent link">&para;</a></h3> <p>PHQL automatically escapes parameters, introducing more security:</p> <p>Using named parameters:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-47-1 name=__codelineno-47-1 href=#__codelineno-47-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-47-2 name=__codelineno-47-2 href=#__codelineno-47-2></a>
<a id=__codelineno-47-3 name=__codelineno-47-3 href=#__codelineno-47-3></a><span class=nv>$phql</span> <span class=o>=</span> <span class=s2>&quot;</span>
<a id=__codelineno-47-4 name=__codelineno-47-4 href=#__codelineno-47-4></a><span class=s2>    SELECT </span>
<a id=__codelineno-47-5 name=__codelineno-47-5 href=#__codelineno-47-5></a><span class=s2>        *</span>
<a id=__codelineno-47-6 name=__codelineno-47-6 href=#__codelineno-47-6></a><span class=s2>    FROM </span>
<a id=__codelineno-47-7 name=__codelineno-47-7 href=#__codelineno-47-7></a><span class=s2>        Invoices</span>
<a id=__codelineno-47-8 name=__codelineno-47-8 href=#__codelineno-47-8></a><span class=s2>    WHERE </span>
<a id=__codelineno-47-9 name=__codelineno-47-9 href=#__codelineno-47-9></a><span class=s2>        Invoices.inv_cst_id = :customer_id:&quot;</span><span class=p>;</span>
<a id=__codelineno-47-10 name=__codelineno-47-10 href=#__codelineno-47-10></a>
<a id=__codelineno-47-11 name=__codelineno-47-11 href=#__codelineno-47-11></a><span class=nv>$records</span>  <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-47-12 name=__codelineno-47-12 href=#__codelineno-47-12></a>    <span class=o>-&gt;</span><span class=na>modelsManager</span>
<a id=__codelineno-47-13 name=__codelineno-47-13 href=#__codelineno-47-13></a>    <span class=o>-&gt;</span><span class=na>executeQuery</span><span class=p>(</span>
<a id=__codelineno-47-14 name=__codelineno-47-14 href=#__codelineno-47-14></a>        <span class=nv>$phql</span><span class=p>,</span>
<a id=__codelineno-47-15 name=__codelineno-47-15 href=#__codelineno-47-15></a>        <span class=p>[</span>
<a id=__codelineno-47-16 name=__codelineno-47-16 href=#__codelineno-47-16></a>            <span class=s1>&#39;customer_id&#39;</span> <span class=o>=&gt;</span> <span class=mi>1</span><span class=p>,</span>
<a id=__codelineno-47-17 name=__codelineno-47-17 href=#__codelineno-47-17></a>        <span class=p>]</span>
<a id=__codelineno-47-18 name=__codelineno-47-18 href=#__codelineno-47-18></a>    <span class=p>)</span>
<a id=__codelineno-47-19 name=__codelineno-47-19 href=#__codelineno-47-19></a><span class=p>;</span>
</code></pre></div> <p>Using numeric indexes:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-48-1 name=__codelineno-48-1 href=#__codelineno-48-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-48-2 name=__codelineno-48-2 href=#__codelineno-48-2></a>
<a id=__codelineno-48-3 name=__codelineno-48-3 href=#__codelineno-48-3></a><span class=nv>$phql</span> <span class=o>=</span> <span class=s2>&quot;</span>
<a id=__codelineno-48-4 name=__codelineno-48-4 href=#__codelineno-48-4></a><span class=s2>    SELECT </span>
<a id=__codelineno-48-5 name=__codelineno-48-5 href=#__codelineno-48-5></a><span class=s2>        *</span>
<a id=__codelineno-48-6 name=__codelineno-48-6 href=#__codelineno-48-6></a><span class=s2>    FROM </span>
<a id=__codelineno-48-7 name=__codelineno-48-7 href=#__codelineno-48-7></a><span class=s2>        Invoices</span>
<a id=__codelineno-48-8 name=__codelineno-48-8 href=#__codelineno-48-8></a><span class=s2>    WHERE </span>
<a id=__codelineno-48-9 name=__codelineno-48-9 href=#__codelineno-48-9></a><span class=s2>        Invoices.inv_cst_id = ?2&quot;</span><span class=p>;</span>
<a id=__codelineno-48-10 name=__codelineno-48-10 href=#__codelineno-48-10></a>
<a id=__codelineno-48-11 name=__codelineno-48-11 href=#__codelineno-48-11></a><span class=nv>$records</span>  <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-48-12 name=__codelineno-48-12 href=#__codelineno-48-12></a>    <span class=o>-&gt;</span><span class=na>modelsManager</span>
<a id=__codelineno-48-13 name=__codelineno-48-13 href=#__codelineno-48-13></a>    <span class=o>-&gt;</span><span class=na>executeQuery</span><span class=p>(</span>
<a id=__codelineno-48-14 name=__codelineno-48-14 href=#__codelineno-48-14></a>        <span class=nv>$phql</span><span class=p>,</span>
<a id=__codelineno-48-15 name=__codelineno-48-15 href=#__codelineno-48-15></a>        <span class=p>[</span>
<a id=__codelineno-48-16 name=__codelineno-48-16 href=#__codelineno-48-16></a>            <span class=mi>2</span> <span class=o>=&gt;</span> <span class=mi>1</span><span class=p>,</span>
<a id=__codelineno-48-17 name=__codelineno-48-17 href=#__codelineno-48-17></a>        <span class=p>]</span>
<a id=__codelineno-48-18 name=__codelineno-48-18 href=#__codelineno-48-18></a>    <span class=p>)</span>
<a id=__codelineno-48-19 name=__codelineno-48-19 href=#__codelineno-48-19></a><span class=p>;</span>
</code></pre></div> <h2 id=insert>Insert<a class=headerlink href=#insert title="Permanent link">&para;</a></h2> <p>With PHQL it's possible to insert data using the familiar <code>INSERT</code> statement:</p> <p>Inserting data without columns:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-49-1 name=__codelineno-49-1 href=#__codelineno-49-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-49-2 name=__codelineno-49-2 href=#__codelineno-49-2></a>
<a id=__codelineno-49-3 name=__codelineno-49-3 href=#__codelineno-49-3></a><span class=nv>$phql</span> <span class=o>=</span> <span class=s2>&quot;</span>
<a id=__codelineno-49-4 name=__codelineno-49-4 href=#__codelineno-49-4></a><span class=s2>    INSERT INTO Invoices</span>
<a id=__codelineno-49-5 name=__codelineno-49-5 href=#__codelineno-49-5></a><span class=s2>    VALUES (</span>
<a id=__codelineno-49-6 name=__codelineno-49-6 href=#__codelineno-49-6></a><span class=s2>        NULL,</span>
<a id=__codelineno-49-7 name=__codelineno-49-7 href=#__codelineno-49-7></a><span class=s2>        1,</span>
<a id=__codelineno-49-8 name=__codelineno-49-8 href=#__codelineno-49-8></a><span class=s2>        0,</span>
<a id=__codelineno-49-9 name=__codelineno-49-9 href=#__codelineno-49-9></a><span class=s2>        &#39;Invoice for ACME Inc.&#39;,</span>
<a id=__codelineno-49-10 name=__codelineno-49-10 href=#__codelineno-49-10></a><span class=s2>        0</span>
<a id=__codelineno-49-11 name=__codelineno-49-11 href=#__codelineno-49-11></a><span class=s2>    )&quot;</span><span class=p>;</span>
<a id=__codelineno-49-12 name=__codelineno-49-12 href=#__codelineno-49-12></a>
<a id=__codelineno-49-13 name=__codelineno-49-13 href=#__codelineno-49-13></a><span class=nv>$records</span>  <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-49-14 name=__codelineno-49-14 href=#__codelineno-49-14></a>    <span class=o>-&gt;</span><span class=na>modelsManager</span>
<a id=__codelineno-49-15 name=__codelineno-49-15 href=#__codelineno-49-15></a>    <span class=o>-&gt;</span><span class=na>executeQuery</span><span class=p>(</span><span class=nv>$phql</span><span class=p>)</span>
<a id=__codelineno-49-16 name=__codelineno-49-16 href=#__codelineno-49-16></a><span class=p>;</span>
</code></pre></div> <p>Inserting data with specific columns:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-50-1 name=__codelineno-50-1 href=#__codelineno-50-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-50-2 name=__codelineno-50-2 href=#__codelineno-50-2></a>
<a id=__codelineno-50-3 name=__codelineno-50-3 href=#__codelineno-50-3></a><span class=nv>$phql</span> <span class=o>=</span> <span class=s2>&quot;</span>
<a id=__codelineno-50-4 name=__codelineno-50-4 href=#__codelineno-50-4></a><span class=s2>    INSERT INTO Invoices (</span>
<a id=__codelineno-50-5 name=__codelineno-50-5 href=#__codelineno-50-5></a><span class=s2>        inv_id,</span>
<a id=__codelineno-50-6 name=__codelineno-50-6 href=#__codelineno-50-6></a><span class=s2>        inv_cst_id,</span>
<a id=__codelineno-50-7 name=__codelineno-50-7 href=#__codelineno-50-7></a><span class=s2>        inv_status_flag,</span>
<a id=__codelineno-50-8 name=__codelineno-50-8 href=#__codelineno-50-8></a><span class=s2>        inv_title,</span>
<a id=__codelineno-50-9 name=__codelineno-50-9 href=#__codelineno-50-9></a><span class=s2>        inv_total</span>
<a id=__codelineno-50-10 name=__codelineno-50-10 href=#__codelineno-50-10></a><span class=s2>    )</span>
<a id=__codelineno-50-11 name=__codelineno-50-11 href=#__codelineno-50-11></a><span class=s2>    VALUES (</span>
<a id=__codelineno-50-12 name=__codelineno-50-12 href=#__codelineno-50-12></a><span class=s2>        NULL,</span>
<a id=__codelineno-50-13 name=__codelineno-50-13 href=#__codelineno-50-13></a><span class=s2>        1,</span>
<a id=__codelineno-50-14 name=__codelineno-50-14 href=#__codelineno-50-14></a><span class=s2>        0,</span>
<a id=__codelineno-50-15 name=__codelineno-50-15 href=#__codelineno-50-15></a><span class=s2>        &#39;Invoice for ACME Inc.&#39;,</span>
<a id=__codelineno-50-16 name=__codelineno-50-16 href=#__codelineno-50-16></a><span class=s2>        0</span>
<a id=__codelineno-50-17 name=__codelineno-50-17 href=#__codelineno-50-17></a><span class=s2>    )&quot;</span><span class=p>;</span>
<a id=__codelineno-50-18 name=__codelineno-50-18 href=#__codelineno-50-18></a>
<a id=__codelineno-50-19 name=__codelineno-50-19 href=#__codelineno-50-19></a><span class=nv>$records</span>  <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-50-20 name=__codelineno-50-20 href=#__codelineno-50-20></a>    <span class=o>-&gt;</span><span class=na>modelsManager</span>
<a id=__codelineno-50-21 name=__codelineno-50-21 href=#__codelineno-50-21></a>    <span class=o>-&gt;</span><span class=na>executeQuery</span><span class=p>(</span><span class=nv>$phql</span><span class=p>)</span>
<a id=__codelineno-50-22 name=__codelineno-50-22 href=#__codelineno-50-22></a><span class=p>;</span>
</code></pre></div> <p>Inserting data with named placeholders:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-51-1 name=__codelineno-51-1 href=#__codelineno-51-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-51-2 name=__codelineno-51-2 href=#__codelineno-51-2></a>
<a id=__codelineno-51-3 name=__codelineno-51-3 href=#__codelineno-51-3></a><span class=nv>$phql</span> <span class=o>=</span> <span class=s2>&quot;</span>
<a id=__codelineno-51-4 name=__codelineno-51-4 href=#__codelineno-51-4></a><span class=s2>    INSERT INTO Invoices (</span>
<a id=__codelineno-51-5 name=__codelineno-51-5 href=#__codelineno-51-5></a><span class=s2>        inv_id,</span>
<a id=__codelineno-51-6 name=__codelineno-51-6 href=#__codelineno-51-6></a><span class=s2>        inv_cst_id,</span>
<a id=__codelineno-51-7 name=__codelineno-51-7 href=#__codelineno-51-7></a><span class=s2>        inv_status_flag,</span>
<a id=__codelineno-51-8 name=__codelineno-51-8 href=#__codelineno-51-8></a><span class=s2>        inv_title,</span>
<a id=__codelineno-51-9 name=__codelineno-51-9 href=#__codelineno-51-9></a><span class=s2>        inv_total</span>
<a id=__codelineno-51-10 name=__codelineno-51-10 href=#__codelineno-51-10></a><span class=s2>    )</span>
<a id=__codelineno-51-11 name=__codelineno-51-11 href=#__codelineno-51-11></a><span class=s2>    VALUES (</span>
<a id=__codelineno-51-12 name=__codelineno-51-12 href=#__codelineno-51-12></a><span class=s2>        :id:,</span>
<a id=__codelineno-51-13 name=__codelineno-51-13 href=#__codelineno-51-13></a><span class=s2>        :cst_id:,</span>
<a id=__codelineno-51-14 name=__codelineno-51-14 href=#__codelineno-51-14></a><span class=s2>        :status_flag:,</span>
<a id=__codelineno-51-15 name=__codelineno-51-15 href=#__codelineno-51-15></a><span class=s2>        :title:,</span>
<a id=__codelineno-51-16 name=__codelineno-51-16 href=#__codelineno-51-16></a><span class=s2>        :total:</span>
<a id=__codelineno-51-17 name=__codelineno-51-17 href=#__codelineno-51-17></a><span class=s2>    )&quot;</span><span class=p>;</span>
<a id=__codelineno-51-18 name=__codelineno-51-18 href=#__codelineno-51-18></a>
<a id=__codelineno-51-19 name=__codelineno-51-19 href=#__codelineno-51-19></a><span class=nv>$records</span>  <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-51-20 name=__codelineno-51-20 href=#__codelineno-51-20></a>    <span class=o>-&gt;</span><span class=na>modelsManager</span>
<a id=__codelineno-51-21 name=__codelineno-51-21 href=#__codelineno-51-21></a>    <span class=o>-&gt;</span><span class=na>executeQuery</span><span class=p>(</span>
<a id=__codelineno-51-22 name=__codelineno-51-22 href=#__codelineno-51-22></a>        <span class=nv>$phql</span><span class=p>,</span>
<a id=__codelineno-51-23 name=__codelineno-51-23 href=#__codelineno-51-23></a>        <span class=p>[</span>
<a id=__codelineno-51-24 name=__codelineno-51-24 href=#__codelineno-51-24></a>            <span class=s1>&#39;id&#39;</span>          <span class=o>=&gt;</span> <span class=k>NULL</span><span class=p>,</span>
<a id=__codelineno-51-25 name=__codelineno-51-25 href=#__codelineno-51-25></a>            <span class=s1>&#39;cst_id&#39;</span>      <span class=o>=&gt;</span> <span class=mi>1</span><span class=p>,</span>
<a id=__codelineno-51-26 name=__codelineno-51-26 href=#__codelineno-51-26></a>            <span class=s1>&#39;status_flag&#39;</span> <span class=o>=&gt;</span> <span class=mi>0</span><span class=p>,</span>
<a id=__codelineno-51-27 name=__codelineno-51-27 href=#__codelineno-51-27></a>            <span class=s1>&#39;title&#39;</span>       <span class=o>=&gt;</span> <span class=s1>&#39;Invoice for ACME Inc.&#39;</span><span class=p>,</span>
<a id=__codelineno-51-28 name=__codelineno-51-28 href=#__codelineno-51-28></a>            <span class=s1>&#39;total&#39;</span>       <span class=o>=&gt;</span> <span class=mi>0</span>
<a id=__codelineno-51-29 name=__codelineno-51-29 href=#__codelineno-51-29></a>        <span class=p>]</span>
<a id=__codelineno-51-30 name=__codelineno-51-30 href=#__codelineno-51-30></a>    <span class=p>)</span>
<a id=__codelineno-51-31 name=__codelineno-51-31 href=#__codelineno-51-31></a><span class=p>;</span>
</code></pre></div> <p>Inserting data with numeric placeholders:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-52-1 name=__codelineno-52-1 href=#__codelineno-52-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-52-2 name=__codelineno-52-2 href=#__codelineno-52-2></a>
<a id=__codelineno-52-3 name=__codelineno-52-3 href=#__codelineno-52-3></a><span class=nv>$phql</span> <span class=o>=</span> <span class=s2>&quot;</span>
<a id=__codelineno-52-4 name=__codelineno-52-4 href=#__codelineno-52-4></a><span class=s2>    INSERT INTO Invoices (</span>
<a id=__codelineno-52-5 name=__codelineno-52-5 href=#__codelineno-52-5></a><span class=s2>        inv_id,</span>
<a id=__codelineno-52-6 name=__codelineno-52-6 href=#__codelineno-52-6></a><span class=s2>        inv_cst_id,</span>
<a id=__codelineno-52-7 name=__codelineno-52-7 href=#__codelineno-52-7></a><span class=s2>        inv_status_flag,</span>
<a id=__codelineno-52-8 name=__codelineno-52-8 href=#__codelineno-52-8></a><span class=s2>        inv_title,</span>
<a id=__codelineno-52-9 name=__codelineno-52-9 href=#__codelineno-52-9></a><span class=s2>        inv_total</span>
<a id=__codelineno-52-10 name=__codelineno-52-10 href=#__codelineno-52-10></a><span class=s2>    )</span>
<a id=__codelineno-52-11 name=__codelineno-52-11 href=#__codelineno-52-11></a><span class=s2>    VALUES (</span>
<a id=__codelineno-52-12 name=__codelineno-52-12 href=#__codelineno-52-12></a><span class=s2>        ?0,</span>
<a id=__codelineno-52-13 name=__codelineno-52-13 href=#__codelineno-52-13></a><span class=s2>        ?1,</span>
<a id=__codelineno-52-14 name=__codelineno-52-14 href=#__codelineno-52-14></a><span class=s2>        ?2,</span>
<a id=__codelineno-52-15 name=__codelineno-52-15 href=#__codelineno-52-15></a><span class=s2>        ?3,</span>
<a id=__codelineno-52-16 name=__codelineno-52-16 href=#__codelineno-52-16></a><span class=s2>        ?4</span>
<a id=__codelineno-52-17 name=__codelineno-52-17 href=#__codelineno-52-17></a><span class=s2>    )&quot;</span><span class=p>;</span>
<a id=__codelineno-52-18 name=__codelineno-52-18 href=#__codelineno-52-18></a>
<a id=__codelineno-52-19 name=__codelineno-52-19 href=#__codelineno-52-19></a><span class=nv>$records</span>  <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-52-20 name=__codelineno-52-20 href=#__codelineno-52-20></a>    <span class=o>-&gt;</span><span class=na>modelsManager</span>
<a id=__codelineno-52-21 name=__codelineno-52-21 href=#__codelineno-52-21></a>    <span class=o>-&gt;</span><span class=na>executeQuery</span><span class=p>(</span>
<a id=__codelineno-52-22 name=__codelineno-52-22 href=#__codelineno-52-22></a>        <span class=nv>$phql</span><span class=p>,</span>
<a id=__codelineno-52-23 name=__codelineno-52-23 href=#__codelineno-52-23></a>        <span class=p>[</span>
<a id=__codelineno-52-24 name=__codelineno-52-24 href=#__codelineno-52-24></a>            <span class=mi>0</span> <span class=o>=&gt;</span> <span class=k>NULL</span><span class=p>,</span>
<a id=__codelineno-52-25 name=__codelineno-52-25 href=#__codelineno-52-25></a>            <span class=mi>1</span> <span class=o>=&gt;</span> <span class=mi>1</span><span class=p>,</span>
<a id=__codelineno-52-26 name=__codelineno-52-26 href=#__codelineno-52-26></a>            <span class=mi>2</span> <span class=o>=&gt;</span> <span class=mi>0</span><span class=p>,</span>
<a id=__codelineno-52-27 name=__codelineno-52-27 href=#__codelineno-52-27></a>            <span class=mi>3</span> <span class=o>=&gt;</span> <span class=s1>&#39;Invoice for ACME Inc.&#39;</span><span class=p>,</span>
<a id=__codelineno-52-28 name=__codelineno-52-28 href=#__codelineno-52-28></a>            <span class=mi>4</span> <span class=o>=&gt;</span> <span class=mi>0</span>
<a id=__codelineno-52-29 name=__codelineno-52-29 href=#__codelineno-52-29></a>        <span class=p>]</span>
<a id=__codelineno-52-30 name=__codelineno-52-30 href=#__codelineno-52-30></a>    <span class=p>)</span>
<a id=__codelineno-52-31 name=__codelineno-52-31 href=#__codelineno-52-31></a><span class=p>;</span>
</code></pre></div> <p>Phalcon does not only transform the PHQL statements into SQL. All events and business rules defined in the model are executed as if we created individual objects manually. </p> <p>If we add a business rule in the <code>beforeCreate</code> event for the <code>Invoices</code> model, the event be called and our code will be executed. Assuming we add a rule where an invoice cannot have a negative total:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-53-1 name=__codelineno-53-1 href=#__codelineno-53-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-53-2 name=__codelineno-53-2 href=#__codelineno-53-2></a>
<a id=__codelineno-53-3 name=__codelineno-53-3 href=#__codelineno-53-3></a><span class=k>namespace</span> <span class=nx>MyApp\Models</span><span class=p>;</span>
<a id=__codelineno-53-4 name=__codelineno-53-4 href=#__codelineno-53-4></a>
<a id=__codelineno-53-5 name=__codelineno-53-5 href=#__codelineno-53-5></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\Model</span><span class=p>;</span>
<a id=__codelineno-53-6 name=__codelineno-53-6 href=#__codelineno-53-6></a><span class=k>use</span> <span class=nx>Phalcon\Messages\Message</span><span class=p>;</span>
<a id=__codelineno-53-7 name=__codelineno-53-7 href=#__codelineno-53-7></a>
<a id=__codelineno-53-8 name=__codelineno-53-8 href=#__codelineno-53-8></a><span class=k>class</span> <span class=nc>Invoices</span> <span class=k>extends</span> <span class=nx>Model</span>
<a id=__codelineno-53-9 name=__codelineno-53-9 href=#__codelineno-53-9></a><span class=p>{</span>
<a id=__codelineno-53-10 name=__codelineno-53-10 href=#__codelineno-53-10></a>    <span class=k>public</span> <span class=k>function</span> <span class=nf>beforeCreate</span><span class=p>()</span>
<a id=__codelineno-53-11 name=__codelineno-53-11 href=#__codelineno-53-11></a>    <span class=p>{</span>
<a id=__codelineno-53-12 name=__codelineno-53-12 href=#__codelineno-53-12></a>        <span class=k>if</span> <span class=p>(</span><span class=nv>$this</span><span class=o>-&gt;</span><span class=na>inv_total</span> <span class=o>&lt;</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-53-13 name=__codelineno-53-13 href=#__codelineno-53-13></a>            <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>appendMessage</span><span class=p>(</span>
<a id=__codelineno-53-14 name=__codelineno-53-14 href=#__codelineno-53-14></a>                <span class=k>new</span> <span class=nx>Message</span><span class=p>(</span><span class=s1>&#39;An invoice cannot have a negative total&#39;</span><span class=p>)</span>
<a id=__codelineno-53-15 name=__codelineno-53-15 href=#__codelineno-53-15></a>            <span class=p>);</span>
<a id=__codelineno-53-16 name=__codelineno-53-16 href=#__codelineno-53-16></a>
<a id=__codelineno-53-17 name=__codelineno-53-17 href=#__codelineno-53-17></a>            <span class=k>return</span> <span class=k>false</span><span class=p>;</span>
<a id=__codelineno-53-18 name=__codelineno-53-18 href=#__codelineno-53-18></a>        <span class=p>}</span>
<a id=__codelineno-53-19 name=__codelineno-53-19 href=#__codelineno-53-19></a>    <span class=p>}</span>
<a id=__codelineno-53-20 name=__codelineno-53-20 href=#__codelineno-53-20></a><span class=p>}</span>
</code></pre></div> <p>If we issue the following <code>INSERT</code> statement:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-54-1 name=__codelineno-54-1 href=#__codelineno-54-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-54-2 name=__codelineno-54-2 href=#__codelineno-54-2></a>
<a id=__codelineno-54-3 name=__codelineno-54-3 href=#__codelineno-54-3></a><span class=nv>$phql</span> <span class=o>=</span> <span class=s2>&quot;</span>
<a id=__codelineno-54-4 name=__codelineno-54-4 href=#__codelineno-54-4></a><span class=s2>    INSERT INTO Invoices (</span>
<a id=__codelineno-54-5 name=__codelineno-54-5 href=#__codelineno-54-5></a><span class=s2>        inv_id,</span>
<a id=__codelineno-54-6 name=__codelineno-54-6 href=#__codelineno-54-6></a><span class=s2>        inv_cst_id,</span>
<a id=__codelineno-54-7 name=__codelineno-54-7 href=#__codelineno-54-7></a><span class=s2>        inv_status_flag,</span>
<a id=__codelineno-54-8 name=__codelineno-54-8 href=#__codelineno-54-8></a><span class=s2>        inv_title,</span>
<a id=__codelineno-54-9 name=__codelineno-54-9 href=#__codelineno-54-9></a><span class=s2>        inv_total</span>
<a id=__codelineno-54-10 name=__codelineno-54-10 href=#__codelineno-54-10></a><span class=s2>    )</span>
<a id=__codelineno-54-11 name=__codelineno-54-11 href=#__codelineno-54-11></a><span class=s2>    VALUES (</span>
<a id=__codelineno-54-12 name=__codelineno-54-12 href=#__codelineno-54-12></a><span class=s2>        ?0,</span>
<a id=__codelineno-54-13 name=__codelineno-54-13 href=#__codelineno-54-13></a><span class=s2>        ?1,</span>
<a id=__codelineno-54-14 name=__codelineno-54-14 href=#__codelineno-54-14></a><span class=s2>        ?2,</span>
<a id=__codelineno-54-15 name=__codelineno-54-15 href=#__codelineno-54-15></a><span class=s2>        ?3,</span>
<a id=__codelineno-54-16 name=__codelineno-54-16 href=#__codelineno-54-16></a><span class=s2>        ?4</span>
<a id=__codelineno-54-17 name=__codelineno-54-17 href=#__codelineno-54-17></a><span class=s2>    )&quot;</span><span class=p>;</span>
<a id=__codelineno-54-18 name=__codelineno-54-18 href=#__codelineno-54-18></a>
<a id=__codelineno-54-19 name=__codelineno-54-19 href=#__codelineno-54-19></a><span class=nv>$result</span>  <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-54-20 name=__codelineno-54-20 href=#__codelineno-54-20></a>    <span class=o>-&gt;</span><span class=na>modelsManager</span>
<a id=__codelineno-54-21 name=__codelineno-54-21 href=#__codelineno-54-21></a>    <span class=o>-&gt;</span><span class=na>executeQuery</span><span class=p>(</span>
<a id=__codelineno-54-22 name=__codelineno-54-22 href=#__codelineno-54-22></a>        <span class=nv>$phql</span><span class=p>,</span>
<a id=__codelineno-54-23 name=__codelineno-54-23 href=#__codelineno-54-23></a>        <span class=p>[</span>
<a id=__codelineno-54-24 name=__codelineno-54-24 href=#__codelineno-54-24></a>            <span class=mi>0</span> <span class=o>=&gt;</span> <span class=k>NULL</span><span class=p>,</span>
<a id=__codelineno-54-25 name=__codelineno-54-25 href=#__codelineno-54-25></a>            <span class=mi>1</span> <span class=o>=&gt;</span> <span class=mi>1</span><span class=p>,</span>
<a id=__codelineno-54-26 name=__codelineno-54-26 href=#__codelineno-54-26></a>            <span class=mi>2</span> <span class=o>=&gt;</span> <span class=mi>0</span><span class=p>,</span>
<a id=__codelineno-54-27 name=__codelineno-54-27 href=#__codelineno-54-27></a>            <span class=mi>3</span> <span class=o>=&gt;</span> <span class=s1>&#39;Invoice for ACME Inc.&#39;</span><span class=p>,</span>
<a id=__codelineno-54-28 name=__codelineno-54-28 href=#__codelineno-54-28></a>            <span class=mi>4</span> <span class=o>=&gt;</span> <span class=o>-</span><span class=mi>100</span>
<a id=__codelineno-54-29 name=__codelineno-54-29 href=#__codelineno-54-29></a>        <span class=p>]</span>
<a id=__codelineno-54-30 name=__codelineno-54-30 href=#__codelineno-54-30></a>    <span class=p>)</span>
<a id=__codelineno-54-31 name=__codelineno-54-31 href=#__codelineno-54-31></a><span class=p>;</span>
<a id=__codelineno-54-32 name=__codelineno-54-32 href=#__codelineno-54-32></a>
<a id=__codelineno-54-33 name=__codelineno-54-33 href=#__codelineno-54-33></a><span class=k>if</span> <span class=p>(</span><span class=k>false</span> <span class=o>===</span> <span class=nv>$result</span><span class=o>-&gt;</span><span class=na>success</span><span class=p>())</span> <span class=p>{</span>
<a id=__codelineno-54-34 name=__codelineno-54-34 href=#__codelineno-54-34></a>    <span class=k>foreach</span> <span class=p>(</span><span class=nv>$result</span><span class=o>-&gt;</span><span class=na>getMessages</span><span class=p>()</span> <span class=k>as</span> <span class=nv>$message</span><span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-54-35 name=__codelineno-54-35 href=#__codelineno-54-35></a>        <span class=k>echo</span> <span class=nv>$message</span><span class=o>-&gt;</span><span class=na>getMessage</span><span class=p>();</span>
<a id=__codelineno-54-36 name=__codelineno-54-36 href=#__codelineno-54-36></a>    <span class=p>}</span>
<a id=__codelineno-54-37 name=__codelineno-54-37 href=#__codelineno-54-37></a><span class=p>}</span>
</code></pre></div> <p>Since we tried to insert a negative number for the <code>inv_total</code> the <code>beforeCreate</code> was invoked prior to saving the record. As a result the operation fails and the relevant error messages are being sent back.</p> <h2 id=update>Update<a class=headerlink href=#update title="Permanent link">&para;</a></h2> <p>Updating rows uses the same rules as inserting rows. For that operation we use the <code>UPDATE</code> command. Just as with inserting rows, when a record is updated the events related to the update operation will be executed for each row.</p> <p>Updating one column</p> <div class=highlight><pre><span></span><code><a id=__codelineno-55-1 name=__codelineno-55-1 href=#__codelineno-55-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-55-2 name=__codelineno-55-2 href=#__codelineno-55-2></a>
<a id=__codelineno-55-3 name=__codelineno-55-3 href=#__codelineno-55-3></a><span class=nv>$phql</span> <span class=o>=</span> <span class=s2>&quot;</span>
<a id=__codelineno-55-4 name=__codelineno-55-4 href=#__codelineno-55-4></a><span class=s2>    UPDATE Invoices</span>
<a id=__codelineno-55-5 name=__codelineno-55-5 href=#__codelineno-55-5></a><span class=s2>    SET</span>
<a id=__codelineno-55-6 name=__codelineno-55-6 href=#__codelineno-55-6></a><span class=s2>        inv_total = 0</span>
<a id=__codelineno-55-7 name=__codelineno-55-7 href=#__codelineno-55-7></a><span class=s2>    WHERE</span>
<a id=__codelineno-55-8 name=__codelineno-55-8 href=#__codelineno-55-8></a><span class=s2>        inv_cst_id = 1&quot;</span><span class=p>;</span>
<a id=__codelineno-55-9 name=__codelineno-55-9 href=#__codelineno-55-9></a>
<a id=__codelineno-55-10 name=__codelineno-55-10 href=#__codelineno-55-10></a><span class=nv>$records</span>  <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-55-11 name=__codelineno-55-11 href=#__codelineno-55-11></a>    <span class=o>-&gt;</span><span class=na>modelsManager</span>
<a id=__codelineno-55-12 name=__codelineno-55-12 href=#__codelineno-55-12></a>    <span class=o>-&gt;</span><span class=na>executeQuery</span><span class=p>(</span><span class=nv>$phql</span><span class=p>)</span>
<a id=__codelineno-55-13 name=__codelineno-55-13 href=#__codelineno-55-13></a><span class=p>;</span>
</code></pre></div> <p>Updating multiple columns</p> <div class=highlight><pre><span></span><code><a id=__codelineno-56-1 name=__codelineno-56-1 href=#__codelineno-56-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-56-2 name=__codelineno-56-2 href=#__codelineno-56-2></a>
<a id=__codelineno-56-3 name=__codelineno-56-3 href=#__codelineno-56-3></a><span class=nv>$phql</span> <span class=o>=</span> <span class=s2>&quot;</span>
<a id=__codelineno-56-4 name=__codelineno-56-4 href=#__codelineno-56-4></a><span class=s2>    UPDATE Invoices</span>
<a id=__codelineno-56-5 name=__codelineno-56-5 href=#__codelineno-56-5></a><span class=s2>    SET</span>
<a id=__codelineno-56-6 name=__codelineno-56-6 href=#__codelineno-56-6></a><span class=s2>        inv_status_flag = 0,</span>
<a id=__codelineno-56-7 name=__codelineno-56-7 href=#__codelineno-56-7></a><span class=s2>        inv_total = 0</span>
<a id=__codelineno-56-8 name=__codelineno-56-8 href=#__codelineno-56-8></a><span class=s2>    WHERE</span>
<a id=__codelineno-56-9 name=__codelineno-56-9 href=#__codelineno-56-9></a><span class=s2>        inv_cst_id = 1&quot;</span><span class=p>;</span>
<a id=__codelineno-56-10 name=__codelineno-56-10 href=#__codelineno-56-10></a>
<a id=__codelineno-56-11 name=__codelineno-56-11 href=#__codelineno-56-11></a><span class=nv>$records</span>  <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-56-12 name=__codelineno-56-12 href=#__codelineno-56-12></a>    <span class=o>-&gt;</span><span class=na>modelsManager</span>
<a id=__codelineno-56-13 name=__codelineno-56-13 href=#__codelineno-56-13></a>    <span class=o>-&gt;</span><span class=na>executeQuery</span><span class=p>(</span><span class=nv>$phql</span><span class=p>)</span>
<a id=__codelineno-56-14 name=__codelineno-56-14 href=#__codelineno-56-14></a><span class=p>;</span>
</code></pre></div> <p>Updating multiple rows:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-57-1 name=__codelineno-57-1 href=#__codelineno-57-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-57-2 name=__codelineno-57-2 href=#__codelineno-57-2></a>
<a id=__codelineno-57-3 name=__codelineno-57-3 href=#__codelineno-57-3></a><span class=nv>$phql</span> <span class=o>=</span> <span class=s2>&quot;</span>
<a id=__codelineno-57-4 name=__codelineno-57-4 href=#__codelineno-57-4></a><span class=s2>    UPDATE Invoices</span>
<a id=__codelineno-57-5 name=__codelineno-57-5 href=#__codelineno-57-5></a><span class=s2>    SET</span>
<a id=__codelineno-57-6 name=__codelineno-57-6 href=#__codelineno-57-6></a><span class=s2>        inv_status_flag = 0,</span>
<a id=__codelineno-57-7 name=__codelineno-57-7 href=#__codelineno-57-7></a><span class=s2>        inv_total = 0</span>
<a id=__codelineno-57-8 name=__codelineno-57-8 href=#__codelineno-57-8></a><span class=s2>    WHERE</span>
<a id=__codelineno-57-9 name=__codelineno-57-9 href=#__codelineno-57-9></a><span class=s2>        inv_cst_id &gt; 10&quot;</span><span class=p>;</span>
<a id=__codelineno-57-10 name=__codelineno-57-10 href=#__codelineno-57-10></a>
<a id=__codelineno-57-11 name=__codelineno-57-11 href=#__codelineno-57-11></a><span class=nv>$records</span>  <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-57-12 name=__codelineno-57-12 href=#__codelineno-57-12></a>    <span class=o>-&gt;</span><span class=na>modelsManager</span>
<a id=__codelineno-57-13 name=__codelineno-57-13 href=#__codelineno-57-13></a>    <span class=o>-&gt;</span><span class=na>executeQuery</span><span class=p>(</span><span class=nv>$phql</span><span class=p>)</span>
<a id=__codelineno-57-14 name=__codelineno-57-14 href=#__codelineno-57-14></a><span class=p>;</span>
</code></pre></div> <p>Updating data with named placeholders:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-58-1 name=__codelineno-58-1 href=#__codelineno-58-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-58-2 name=__codelineno-58-2 href=#__codelineno-58-2></a>
<a id=__codelineno-58-3 name=__codelineno-58-3 href=#__codelineno-58-3></a><span class=nv>$phql</span> <span class=o>=</span> <span class=s2>&quot;</span>
<a id=__codelineno-58-4 name=__codelineno-58-4 href=#__codelineno-58-4></a><span class=s2>    UPDATE Invoices</span>
<a id=__codelineno-58-5 name=__codelineno-58-5 href=#__codelineno-58-5></a><span class=s2>    SET</span>
<a id=__codelineno-58-6 name=__codelineno-58-6 href=#__codelineno-58-6></a><span class=s2>        inv_status_flag = :status:,</span>
<a id=__codelineno-58-7 name=__codelineno-58-7 href=#__codelineno-58-7></a><span class=s2>        inv_total = :total:</span>
<a id=__codelineno-58-8 name=__codelineno-58-8 href=#__codelineno-58-8></a><span class=s2>    WHERE</span>
<a id=__codelineno-58-9 name=__codelineno-58-9 href=#__codelineno-58-9></a><span class=s2>        inv_cst_id &gt; :customerId:&quot;</span><span class=p>;</span>
<a id=__codelineno-58-10 name=__codelineno-58-10 href=#__codelineno-58-10></a>
<a id=__codelineno-58-11 name=__codelineno-58-11 href=#__codelineno-58-11></a><span class=nv>$records</span>  <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-58-12 name=__codelineno-58-12 href=#__codelineno-58-12></a>    <span class=o>-&gt;</span><span class=na>modelsManager</span>
<a id=__codelineno-58-13 name=__codelineno-58-13 href=#__codelineno-58-13></a>    <span class=o>-&gt;</span><span class=na>executeQuery</span><span class=p>(</span>
<a id=__codelineno-58-14 name=__codelineno-58-14 href=#__codelineno-58-14></a>        <span class=nv>$phql</span><span class=p>,</span>
<a id=__codelineno-58-15 name=__codelineno-58-15 href=#__codelineno-58-15></a>        <span class=p>[</span>
<a id=__codelineno-58-16 name=__codelineno-58-16 href=#__codelineno-58-16></a>            <span class=s1>&#39;status&#39;</span>     <span class=o>=&gt;</span> <span class=mi>0</span><span class=p>,</span>
<a id=__codelineno-58-17 name=__codelineno-58-17 href=#__codelineno-58-17></a>            <span class=s1>&#39;total&#39;</span>      <span class=o>=&gt;</span> <span class=mi>0</span><span class=p>,</span>
<a id=__codelineno-58-18 name=__codelineno-58-18 href=#__codelineno-58-18></a>            <span class=s1>&#39;customerId&#39;</span> <span class=o>=&gt;</span> <span class=mi>10</span><span class=p>,</span>
<a id=__codelineno-58-19 name=__codelineno-58-19 href=#__codelineno-58-19></a>        <span class=p>]</span>
<a id=__codelineno-58-20 name=__codelineno-58-20 href=#__codelineno-58-20></a>    <span class=p>)</span>
<a id=__codelineno-58-21 name=__codelineno-58-21 href=#__codelineno-58-21></a><span class=p>;</span>
</code></pre></div> <p>Updating data with numeric placeholders:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-59-1 name=__codelineno-59-1 href=#__codelineno-59-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-59-2 name=__codelineno-59-2 href=#__codelineno-59-2></a>
<a id=__codelineno-59-3 name=__codelineno-59-3 href=#__codelineno-59-3></a><span class=nv>$phql</span> <span class=o>=</span> <span class=s2>&quot;</span>
<a id=__codelineno-59-4 name=__codelineno-59-4 href=#__codelineno-59-4></a><span class=s2>    UPDATE Invoices</span>
<a id=__codelineno-59-5 name=__codelineno-59-5 href=#__codelineno-59-5></a><span class=s2>    SET</span>
<a id=__codelineno-59-6 name=__codelineno-59-6 href=#__codelineno-59-6></a><span class=s2>        inv_status_flag = ?0,</span>
<a id=__codelineno-59-7 name=__codelineno-59-7 href=#__codelineno-59-7></a><span class=s2>        inv_total = ?1</span>
<a id=__codelineno-59-8 name=__codelineno-59-8 href=#__codelineno-59-8></a><span class=s2>    WHERE</span>
<a id=__codelineno-59-9 name=__codelineno-59-9 href=#__codelineno-59-9></a><span class=s2>        inv_cst_id &gt; ?2&quot;</span><span class=p>;</span>
<a id=__codelineno-59-10 name=__codelineno-59-10 href=#__codelineno-59-10></a>
<a id=__codelineno-59-11 name=__codelineno-59-11 href=#__codelineno-59-11></a><span class=nv>$records</span>  <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-59-12 name=__codelineno-59-12 href=#__codelineno-59-12></a>    <span class=o>-&gt;</span><span class=na>modelsManager</span>
<a id=__codelineno-59-13 name=__codelineno-59-13 href=#__codelineno-59-13></a>    <span class=o>-&gt;</span><span class=na>executeQuery</span><span class=p>(</span>
<a id=__codelineno-59-14 name=__codelineno-59-14 href=#__codelineno-59-14></a>        <span class=nv>$phql</span><span class=p>,</span>
<a id=__codelineno-59-15 name=__codelineno-59-15 href=#__codelineno-59-15></a>        <span class=p>[</span>
<a id=__codelineno-59-16 name=__codelineno-59-16 href=#__codelineno-59-16></a>            <span class=mi>0</span> <span class=o>=&gt;</span> <span class=mi>0</span><span class=p>,</span>
<a id=__codelineno-59-17 name=__codelineno-59-17 href=#__codelineno-59-17></a>            <span class=mi>1</span> <span class=o>=&gt;</span> <span class=mi>0</span><span class=p>,</span>
<a id=__codelineno-59-18 name=__codelineno-59-18 href=#__codelineno-59-18></a>            <span class=mi>2</span> <span class=o>=&gt;</span> <span class=mi>10</span><span class=p>,</span>
<a id=__codelineno-59-19 name=__codelineno-59-19 href=#__codelineno-59-19></a>        <span class=p>]</span>
<a id=__codelineno-59-20 name=__codelineno-59-20 href=#__codelineno-59-20></a>    <span class=p>)</span>
<a id=__codelineno-59-21 name=__codelineno-59-21 href=#__codelineno-59-21></a><span class=p>;</span>
</code></pre></div> <p>An <code>UPDATE</code> statement performs the update in two phases:</p> <ul> <li>If the <code>UPDATE</code> has a <code>WHERE</code> clause it retrieves all the objects that match these criteria,</li> <li>Based on the queried objects it updates the requested attributes storing them in the database</li> </ul> <p>This way of operation allows that events, virtual foreign keys and validations to be executed during the updating process. In short, the code:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-60-1 name=__codelineno-60-1 href=#__codelineno-60-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-60-2 name=__codelineno-60-2 href=#__codelineno-60-2></a>
<a id=__codelineno-60-3 name=__codelineno-60-3 href=#__codelineno-60-3></a><span class=nv>$phql</span> <span class=o>=</span> <span class=s2>&quot;</span>
<a id=__codelineno-60-4 name=__codelineno-60-4 href=#__codelineno-60-4></a><span class=s2>    UPDATE Invoices</span>
<a id=__codelineno-60-5 name=__codelineno-60-5 href=#__codelineno-60-5></a><span class=s2>    SET</span>
<a id=__codelineno-60-6 name=__codelineno-60-6 href=#__codelineno-60-6></a><span class=s2>        inv_status_flag = 0,</span>
<a id=__codelineno-60-7 name=__codelineno-60-7 href=#__codelineno-60-7></a><span class=s2>        inv_total = 0</span>
<a id=__codelineno-60-8 name=__codelineno-60-8 href=#__codelineno-60-8></a><span class=s2>    WHERE</span>
<a id=__codelineno-60-9 name=__codelineno-60-9 href=#__codelineno-60-9></a><span class=s2>        inv_cst_id &gt; 10&quot;</span><span class=p>;</span>
<a id=__codelineno-60-10 name=__codelineno-60-10 href=#__codelineno-60-10></a>
<a id=__codelineno-60-11 name=__codelineno-60-11 href=#__codelineno-60-11></a><span class=nv>$result</span> <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-60-12 name=__codelineno-60-12 href=#__codelineno-60-12></a>    <span class=o>-&gt;</span><span class=na>modelsManager</span>
<a id=__codelineno-60-13 name=__codelineno-60-13 href=#__codelineno-60-13></a>    <span class=o>-&gt;</span><span class=na>executeQuery</span><span class=p>(</span><span class=nv>$phql</span><span class=p>)</span>
<a id=__codelineno-60-14 name=__codelineno-60-14 href=#__codelineno-60-14></a><span class=p>;</span>
<a id=__codelineno-60-15 name=__codelineno-60-15 href=#__codelineno-60-15></a>
<a id=__codelineno-60-16 name=__codelineno-60-16 href=#__codelineno-60-16></a><span class=k>if</span> <span class=p>(</span><span class=k>false</span> <span class=o>===</span> <span class=nv>$result</span><span class=o>-&gt;</span><span class=na>success</span><span class=p>())</span> <span class=p>{</span>
<a id=__codelineno-60-17 name=__codelineno-60-17 href=#__codelineno-60-17></a>    <span class=nv>$messages</span> <span class=o>=</span> <span class=nv>$result</span><span class=o>-&gt;</span><span class=na>getMessages</span><span class=p>();</span>
<a id=__codelineno-60-18 name=__codelineno-60-18 href=#__codelineno-60-18></a>
<a id=__codelineno-60-19 name=__codelineno-60-19 href=#__codelineno-60-19></a>    <span class=k>foreach</span> <span class=p>(</span><span class=nv>$messages</span> <span class=k>as</span> <span class=nv>$message</span><span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-60-20 name=__codelineno-60-20 href=#__codelineno-60-20></a>        <span class=k>echo</span> <span class=nv>$message</span><span class=o>-&gt;</span><span class=na>getMessage</span><span class=p>();</span>
<a id=__codelineno-60-21 name=__codelineno-60-21 href=#__codelineno-60-21></a>    <span class=p>}</span>
<a id=__codelineno-60-22 name=__codelineno-60-22 href=#__codelineno-60-22></a><span class=p>}</span>
</code></pre></div> <p>is somewhat equivalent to:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-61-1 name=__codelineno-61-1 href=#__codelineno-61-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-61-2 name=__codelineno-61-2 href=#__codelineno-61-2></a>
<a id=__codelineno-61-3 name=__codelineno-61-3 href=#__codelineno-61-3></a><span class=k>use</span> <span class=nx>MyApp\Models\Invoices</span><span class=p>;</span>
<a id=__codelineno-61-4 name=__codelineno-61-4 href=#__codelineno-61-4></a>
<a id=__codelineno-61-5 name=__codelineno-61-5 href=#__codelineno-61-5></a><span class=nv>$messages</span> <span class=o>=</span> <span class=p>[];</span>
<a id=__codelineno-61-6 name=__codelineno-61-6 href=#__codelineno-61-6></a><span class=nv>$invoices</span> <span class=o>=</span> <span class=nx>Invoices</span><span class=o>::</span><span class=na>find</span><span class=p>(</span>
<a id=__codelineno-61-7 name=__codelineno-61-7 href=#__codelineno-61-7></a>    <span class=p>[</span>
<a id=__codelineno-61-8 name=__codelineno-61-8 href=#__codelineno-61-8></a>        <span class=s1>&#39;conditions&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;inc_cst_id = :customerId:&#39;</span><span class=p>,</span>
<a id=__codelineno-61-9 name=__codelineno-61-9 href=#__codelineno-61-9></a>        <span class=s1>&#39;bind&#39;</span>       <span class=o>=&gt;</span> <span class=p>[</span>
<a id=__codelineno-61-10 name=__codelineno-61-10 href=#__codelineno-61-10></a>            <span class=s1>&#39;customerId&#39;</span> <span class=o>=&gt;</span> <span class=mi>10</span><span class=p>,</span>
<a id=__codelineno-61-11 name=__codelineno-61-11 href=#__codelineno-61-11></a>        <span class=p>],</span>
<a id=__codelineno-61-12 name=__codelineno-61-12 href=#__codelineno-61-12></a>    <span class=p>]</span>  
<a id=__codelineno-61-13 name=__codelineno-61-13 href=#__codelineno-61-13></a><span class=p>);</span>
<a id=__codelineno-61-14 name=__codelineno-61-14 href=#__codelineno-61-14></a>
<a id=__codelineno-61-15 name=__codelineno-61-15 href=#__codelineno-61-15></a><span class=k>foreach</span> <span class=p>(</span><span class=nv>$invoices</span> <span class=k>as</span> <span class=nv>$invoice</span><span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-61-16 name=__codelineno-61-16 href=#__codelineno-61-16></a>    <span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>inv_status_flag</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
<a id=__codelineno-61-17 name=__codelineno-61-17 href=#__codelineno-61-17></a>    <span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>inv_total</span>       <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
<a id=__codelineno-61-18 name=__codelineno-61-18 href=#__codelineno-61-18></a>
<a id=__codelineno-61-19 name=__codelineno-61-19 href=#__codelineno-61-19></a>    <span class=nv>$result</span> <span class=o>=</span> <span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>save</span><span class=p>();</span>
<a id=__codelineno-61-20 name=__codelineno-61-20 href=#__codelineno-61-20></a>    <span class=k>if</span> <span class=p>(</span><span class=k>false</span> <span class=o>===</span> <span class=nv>$result</span><span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-61-21 name=__codelineno-61-21 href=#__codelineno-61-21></a>        <span class=nv>$messages</span><span class=p>[]</span> <span class=o>=</span> <span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>getMessages</span><span class=p>();</span>
<a id=__codelineno-61-22 name=__codelineno-61-22 href=#__codelineno-61-22></a>    <span class=p>}</span> 
<a id=__codelineno-61-23 name=__codelineno-61-23 href=#__codelineno-61-23></a><span class=p>}</span>
</code></pre></div> <h2 id=deleting-data>Deleting Data<a class=headerlink href=#deleting-data title="Permanent link">&para;</a></h2> <p>Similar to updating records, deleting records uses the same rules. For that operation we use the <code>DELETE</code> command. When a record is deleted the events related to the update operation will be executed for each row.</p> <p>Deleting one row</p> <div class=highlight><pre><span></span><code><a id=__codelineno-62-1 name=__codelineno-62-1 href=#__codelineno-62-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-62-2 name=__codelineno-62-2 href=#__codelineno-62-2></a>
<a id=__codelineno-62-3 name=__codelineno-62-3 href=#__codelineno-62-3></a><span class=nv>$phql</span> <span class=o>=</span> <span class=s2>&quot;</span>
<a id=__codelineno-62-4 name=__codelineno-62-4 href=#__codelineno-62-4></a><span class=s2>    DELETE</span>
<a id=__codelineno-62-5 name=__codelineno-62-5 href=#__codelineno-62-5></a><span class=s2>    FROM </span>
<a id=__codelineno-62-6 name=__codelineno-62-6 href=#__codelineno-62-6></a><span class=s2>        Invoices</span>
<a id=__codelineno-62-7 name=__codelineno-62-7 href=#__codelineno-62-7></a><span class=s2>    WHERE</span>
<a id=__codelineno-62-8 name=__codelineno-62-8 href=#__codelineno-62-8></a><span class=s2>        inv_cst_id = 1&quot;</span><span class=p>;</span>
<a id=__codelineno-62-9 name=__codelineno-62-9 href=#__codelineno-62-9></a>
<a id=__codelineno-62-10 name=__codelineno-62-10 href=#__codelineno-62-10></a><span class=nv>$records</span>  <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-62-11 name=__codelineno-62-11 href=#__codelineno-62-11></a>    <span class=o>-&gt;</span><span class=na>modelsManager</span>
<a id=__codelineno-62-12 name=__codelineno-62-12 href=#__codelineno-62-12></a>    <span class=o>-&gt;</span><span class=na>executeQuery</span><span class=p>(</span><span class=nv>$phql</span><span class=p>)</span>
<a id=__codelineno-62-13 name=__codelineno-62-13 href=#__codelineno-62-13></a><span class=p>;</span>
</code></pre></div> <p>Deleting multiple rows:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-63-1 name=__codelineno-63-1 href=#__codelineno-63-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-63-2 name=__codelineno-63-2 href=#__codelineno-63-2></a>
<a id=__codelineno-63-3 name=__codelineno-63-3 href=#__codelineno-63-3></a><span class=nv>$phql</span> <span class=o>=</span> <span class=s2>&quot;</span>
<a id=__codelineno-63-4 name=__codelineno-63-4 href=#__codelineno-63-4></a><span class=s2>    DELETE</span>
<a id=__codelineno-63-5 name=__codelineno-63-5 href=#__codelineno-63-5></a><span class=s2>    FROM </span>
<a id=__codelineno-63-6 name=__codelineno-63-6 href=#__codelineno-63-6></a><span class=s2>        Invoices</span>
<a id=__codelineno-63-7 name=__codelineno-63-7 href=#__codelineno-63-7></a><span class=s2>    WHERE</span>
<a id=__codelineno-63-8 name=__codelineno-63-8 href=#__codelineno-63-8></a><span class=s2>        inv_cst_id &gt; 10&quot;</span><span class=p>;</span>
<a id=__codelineno-63-9 name=__codelineno-63-9 href=#__codelineno-63-9></a>
<a id=__codelineno-63-10 name=__codelineno-63-10 href=#__codelineno-63-10></a><span class=nv>$records</span>  <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-63-11 name=__codelineno-63-11 href=#__codelineno-63-11></a>    <span class=o>-&gt;</span><span class=na>modelsManager</span>
<a id=__codelineno-63-12 name=__codelineno-63-12 href=#__codelineno-63-12></a>    <span class=o>-&gt;</span><span class=na>executeQuery</span><span class=p>(</span><span class=nv>$phql</span><span class=p>)</span>
<a id=__codelineno-63-13 name=__codelineno-63-13 href=#__codelineno-63-13></a><span class=p>;</span>
</code></pre></div> <p>Deleting data with named placeholders:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-64-1 name=__codelineno-64-1 href=#__codelineno-64-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-64-2 name=__codelineno-64-2 href=#__codelineno-64-2></a>
<a id=__codelineno-64-3 name=__codelineno-64-3 href=#__codelineno-64-3></a><span class=nv>$phql</span> <span class=o>=</span> <span class=s2>&quot;</span>
<a id=__codelineno-64-4 name=__codelineno-64-4 href=#__codelineno-64-4></a><span class=s2>    DELETE</span>
<a id=__codelineno-64-5 name=__codelineno-64-5 href=#__codelineno-64-5></a><span class=s2>    FROM </span>
<a id=__codelineno-64-6 name=__codelineno-64-6 href=#__codelineno-64-6></a><span class=s2>        Invoices</span>
<a id=__codelineno-64-7 name=__codelineno-64-7 href=#__codelineno-64-7></a><span class=s2>    WHERE</span>
<a id=__codelineno-64-8 name=__codelineno-64-8 href=#__codelineno-64-8></a><span class=s2>        inv_cst_id &gt; :customerId:&quot;</span><span class=p>;</span>
<a id=__codelineno-64-9 name=__codelineno-64-9 href=#__codelineno-64-9></a>
<a id=__codelineno-64-10 name=__codelineno-64-10 href=#__codelineno-64-10></a><span class=nv>$records</span>  <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-64-11 name=__codelineno-64-11 href=#__codelineno-64-11></a>    <span class=o>-&gt;</span><span class=na>modelsManager</span>
<a id=__codelineno-64-12 name=__codelineno-64-12 href=#__codelineno-64-12></a>    <span class=o>-&gt;</span><span class=na>executeQuery</span><span class=p>(</span>
<a id=__codelineno-64-13 name=__codelineno-64-13 href=#__codelineno-64-13></a>        <span class=nv>$phql</span><span class=p>,</span>
<a id=__codelineno-64-14 name=__codelineno-64-14 href=#__codelineno-64-14></a>        <span class=p>[</span>
<a id=__codelineno-64-15 name=__codelineno-64-15 href=#__codelineno-64-15></a>            <span class=s1>&#39;customerId&#39;</span> <span class=o>=&gt;</span> <span class=mi>10</span><span class=p>,</span>
<a id=__codelineno-64-16 name=__codelineno-64-16 href=#__codelineno-64-16></a>        <span class=p>]</span>
<a id=__codelineno-64-17 name=__codelineno-64-17 href=#__codelineno-64-17></a>    <span class=p>)</span>
<a id=__codelineno-64-18 name=__codelineno-64-18 href=#__codelineno-64-18></a><span class=p>;</span>
</code></pre></div> <p>Deleting data with numeric placeholders:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-65-1 name=__codelineno-65-1 href=#__codelineno-65-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-65-2 name=__codelineno-65-2 href=#__codelineno-65-2></a>
<a id=__codelineno-65-3 name=__codelineno-65-3 href=#__codelineno-65-3></a><span class=nv>$phql</span> <span class=o>=</span> <span class=s2>&quot;</span>
<a id=__codelineno-65-4 name=__codelineno-65-4 href=#__codelineno-65-4></a><span class=s2>    DELETE</span>
<a id=__codelineno-65-5 name=__codelineno-65-5 href=#__codelineno-65-5></a><span class=s2>    FROM </span>
<a id=__codelineno-65-6 name=__codelineno-65-6 href=#__codelineno-65-6></a><span class=s2>        Invoices</span>
<a id=__codelineno-65-7 name=__codelineno-65-7 href=#__codelineno-65-7></a><span class=s2>    WHERE</span>
<a id=__codelineno-65-8 name=__codelineno-65-8 href=#__codelineno-65-8></a><span class=s2>        inv_cst_id &gt; ?2&quot;</span><span class=p>;</span>
<a id=__codelineno-65-9 name=__codelineno-65-9 href=#__codelineno-65-9></a>
<a id=__codelineno-65-10 name=__codelineno-65-10 href=#__codelineno-65-10></a><span class=nv>$records</span>  <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-65-11 name=__codelineno-65-11 href=#__codelineno-65-11></a>    <span class=o>-&gt;</span><span class=na>modelsManager</span>
<a id=__codelineno-65-12 name=__codelineno-65-12 href=#__codelineno-65-12></a>    <span class=o>-&gt;</span><span class=na>executeQuery</span><span class=p>(</span>
<a id=__codelineno-65-13 name=__codelineno-65-13 href=#__codelineno-65-13></a>        <span class=nv>$phql</span><span class=p>,</span>
<a id=__codelineno-65-14 name=__codelineno-65-14 href=#__codelineno-65-14></a>        <span class=p>[</span>
<a id=__codelineno-65-15 name=__codelineno-65-15 href=#__codelineno-65-15></a>            <span class=mi>2</span> <span class=o>=&gt;</span> <span class=mi>10</span><span class=p>,</span>
<a id=__codelineno-65-16 name=__codelineno-65-16 href=#__codelineno-65-16></a>        <span class=p>]</span>
<a id=__codelineno-65-17 name=__codelineno-65-17 href=#__codelineno-65-17></a>    <span class=p>)</span>
<a id=__codelineno-65-18 name=__codelineno-65-18 href=#__codelineno-65-18></a><span class=p>;</span>
</code></pre></div> <p>A <code>DELETE</code> statement performs the delete in two phases:</p> <ul> <li>If the <code>DELETE</code> has a <code>WHERE</code> clause it retrieves all the objects that match these criteria,</li> <li>Based on the queried objects it deletes the requested objects from the relational database</li> </ul> <p>Just as the rest of the operations, checking the status code returned allows you to retrieve back any validation messages returned by operations hooked up to your models</p> <div class=highlight><pre><span></span><code><a id=__codelineno-66-1 name=__codelineno-66-1 href=#__codelineno-66-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-66-2 name=__codelineno-66-2 href=#__codelineno-66-2></a>
<a id=__codelineno-66-3 name=__codelineno-66-3 href=#__codelineno-66-3></a><span class=nv>$phql</span> <span class=o>=</span> <span class=s2>&quot;</span>
<a id=__codelineno-66-4 name=__codelineno-66-4 href=#__codelineno-66-4></a><span class=s2>    DELETE</span>
<a id=__codelineno-66-5 name=__codelineno-66-5 href=#__codelineno-66-5></a><span class=s2>    FROM</span>
<a id=__codelineno-66-6 name=__codelineno-66-6 href=#__codelineno-66-6></a><span class=s2>        Invoices</span>
<a id=__codelineno-66-7 name=__codelineno-66-7 href=#__codelineno-66-7></a><span class=s2>    WHERE</span>
<a id=__codelineno-66-8 name=__codelineno-66-8 href=#__codelineno-66-8></a><span class=s2>        inv_cst_id &gt; 10&quot;</span><span class=p>;</span>
<a id=__codelineno-66-9 name=__codelineno-66-9 href=#__codelineno-66-9></a>
<a id=__codelineno-66-10 name=__codelineno-66-10 href=#__codelineno-66-10></a><span class=nv>$result</span> <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-66-11 name=__codelineno-66-11 href=#__codelineno-66-11></a>    <span class=o>-&gt;</span><span class=na>modelsManager</span>
<a id=__codelineno-66-12 name=__codelineno-66-12 href=#__codelineno-66-12></a>    <span class=o>-&gt;</span><span class=na>executeQuery</span><span class=p>(</span><span class=nv>$phql</span><span class=p>)</span>
<a id=__codelineno-66-13 name=__codelineno-66-13 href=#__codelineno-66-13></a><span class=p>;</span>
<a id=__codelineno-66-14 name=__codelineno-66-14 href=#__codelineno-66-14></a>
<a id=__codelineno-66-15 name=__codelineno-66-15 href=#__codelineno-66-15></a><span class=k>if</span> <span class=p>(</span><span class=k>false</span> <span class=o>===</span> <span class=nv>$result</span><span class=o>-&gt;</span><span class=na>success</span><span class=p>())</span> <span class=p>{</span>
<a id=__codelineno-66-16 name=__codelineno-66-16 href=#__codelineno-66-16></a>    <span class=nv>$messages</span> <span class=o>=</span> <span class=nv>$result</span><span class=o>-&gt;</span><span class=na>getMessages</span><span class=p>();</span>
<a id=__codelineno-66-17 name=__codelineno-66-17 href=#__codelineno-66-17></a>
<a id=__codelineno-66-18 name=__codelineno-66-18 href=#__codelineno-66-18></a>    <span class=k>foreach</span> <span class=p>(</span><span class=nv>$messages</span> <span class=k>as</span> <span class=nv>$message</span><span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-66-19 name=__codelineno-66-19 href=#__codelineno-66-19></a>        <span class=k>echo</span> <span class=nv>$message</span><span class=o>-&gt;</span><span class=na>getMessage</span><span class=p>();</span>
<a id=__codelineno-66-20 name=__codelineno-66-20 href=#__codelineno-66-20></a>    <span class=p>}</span>
<a id=__codelineno-66-21 name=__codelineno-66-21 href=#__codelineno-66-21></a><span class=p>}</span>
</code></pre></div> <h2 id=query-builder>Query Builder<a class=headerlink href=#query-builder title="Permanent link">&para;</a></h2> <p><a href=../api/phalcon_mvc/#mvc-model-query-builder>Phalcon\Mvc\Model\Query\Builder</a> is a very handy builder that allows you to construct PHQL statements in an object-oriented way. Most methods return the buider object, allowing you to use a fluent interface and is flexible enough allowing you to add conditionals if you need to without having to create complex <code>if</code> statements and string concatenations constructing the PHQL statement.</p> <p>The PHQL query:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-67-1 name=__codelineno-67-1 href=#__codelineno-67-1></a><span class=k>SELECT</span><span class=w> </span>
<a id=__codelineno-67-2 name=__codelineno-67-2 href=#__codelineno-67-2></a><span class=w>    </span><span class=o>*</span><span class=w> </span>
<a id=__codelineno-67-3 name=__codelineno-67-3 href=#__codelineno-67-3></a><span class=k>FROM</span><span class=w> </span>
<a id=__codelineno-67-4 name=__codelineno-67-4 href=#__codelineno-67-4></a><span class=w>    </span><span class=n>Invoices</span><span class=w> </span>
<a id=__codelineno-67-5 name=__codelineno-67-5 href=#__codelineno-67-5></a><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span>
<a id=__codelineno-67-6 name=__codelineno-67-6 href=#__codelineno-67-6></a><span class=w>    </span><span class=n>inv_title</span>
</code></pre></div> <p>can be created and executed as follows:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-68-1 name=__codelineno-68-1 href=#__codelineno-68-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-68-2 name=__codelineno-68-2 href=#__codelineno-68-2></a>
<a id=__codelineno-68-3 name=__codelineno-68-3 href=#__codelineno-68-3></a><span class=k>use</span> <span class=nx>MyApp\Models\Invoices</span><span class=p>;</span>
<a id=__codelineno-68-4 name=__codelineno-68-4 href=#__codelineno-68-4></a>
<a id=__codelineno-68-5 name=__codelineno-68-5 href=#__codelineno-68-5></a><span class=nv>$invoices</span> <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-68-6 name=__codelineno-68-6 href=#__codelineno-68-6></a>    <span class=o>-&gt;</span><span class=na>modelsManager</span>
<a id=__codelineno-68-7 name=__codelineno-68-7 href=#__codelineno-68-7></a>    <span class=o>-&gt;</span><span class=na>createBuilder</span><span class=p>()</span>
<a id=__codelineno-68-8 name=__codelineno-68-8 href=#__codelineno-68-8></a>    <span class=o>-&gt;</span><span class=na>from</span><span class=p>(</span><span class=nx>Invoices</span><span class=o>::</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-68-9 name=__codelineno-68-9 href=#__codelineno-68-9></a>    <span class=o>-&gt;</span><span class=na>orderBy</span><span class=p>(</span><span class=s1>&#39;inv_title&#39;</span><span class=p>)</span>
<a id=__codelineno-68-10 name=__codelineno-68-10 href=#__codelineno-68-10></a>    <span class=o>-&gt;</span><span class=na>getQuery</span><span class=p>()</span>
<a id=__codelineno-68-11 name=__codelineno-68-11 href=#__codelineno-68-11></a>    <span class=o>-&gt;</span><span class=na>execute</span><span class=p>();</span>
</code></pre></div> <p>To get a single row:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-69-1 name=__codelineno-69-1 href=#__codelineno-69-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-69-2 name=__codelineno-69-2 href=#__codelineno-69-2></a>
<a id=__codelineno-69-3 name=__codelineno-69-3 href=#__codelineno-69-3></a><span class=k>use</span> <span class=nx>MyApp\Models\Invoices</span><span class=p>;</span>
<a id=__codelineno-69-4 name=__codelineno-69-4 href=#__codelineno-69-4></a>
<a id=__codelineno-69-5 name=__codelineno-69-5 href=#__codelineno-69-5></a><span class=nv>$invoices</span> <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-69-6 name=__codelineno-69-6 href=#__codelineno-69-6></a>    <span class=o>-&gt;</span><span class=na>modelsManager</span>
<a id=__codelineno-69-7 name=__codelineno-69-7 href=#__codelineno-69-7></a>    <span class=o>-&gt;</span><span class=na>createBuilder</span><span class=p>()</span>
<a id=__codelineno-69-8 name=__codelineno-69-8 href=#__codelineno-69-8></a>    <span class=o>-&gt;</span><span class=na>from</span><span class=p>(</span><span class=nx>Invoices</span><span class=o>::</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-69-9 name=__codelineno-69-9 href=#__codelineno-69-9></a>    <span class=o>-&gt;</span><span class=na>orderBy</span><span class=p>(</span><span class=s1>&#39;inv_title&#39;</span><span class=p>)</span>
<a id=__codelineno-69-10 name=__codelineno-69-10 href=#__codelineno-69-10></a>    <span class=o>-&gt;</span><span class=na>getQuery</span><span class=p>()</span>
<a id=__codelineno-69-11 name=__codelineno-69-11 href=#__codelineno-69-11></a>    <span class=o>-&gt;</span><span class=na>getSingleResult</span><span class=p>();</span>
</code></pre></div> <h3 id=parameters_1>Parameters<a class=headerlink href=#parameters_1 title="Permanent link">&para;</a></h3> <p>Whether you create a <a href=../api/phalcon_mvc/#mvc-model-query-builder>Phalcon\Mvc\Model\Query\Builder</a> object directly or you are using the Models Manager's <code>createBuilder</code> method, you can always use the fluent interface to build your query or pass an array with parameters in the constructor. The keys of the array are:</p> <table> <thead> <tr> <th>Parameter</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>bind</code></td> <td><code>array</code></td> <td>array of the data to be bound</td> </tr> <tr> <td><code>bindTypes</code></td> <td><code>array</code></td> <td>PDO parameter types</td> </tr> <tr> <td><code>container</code></td> <td>DI</td> <td>DI Container</td> </tr> <tr> <td><code>columns</code></td> <td><code>array|string</code></td> <td>columns to select</td> </tr> <tr> <td><code>conditions</code></td> <td><code>array|string</code></td> <td>conditions (where)</td> </tr> <tr> <td><code>distinct</code></td> <td><code>string</code></td> <td>distinct column</td> </tr> <tr> <td><code>for_update</code></td> <td><code>bool</code></td> <td>for update or not</td> </tr> <tr> <td><code>group</code></td> <td><code>array</code></td> <td>group by columns</td> </tr> <tr> <td><code>having</code></td> <td><code>string</code></td> <td>having columns</td> </tr> <tr> <td><code>joins</code></td> <td><code>array</code></td> <td>model classes used for joins</td> </tr> <tr> <td><code>limit</code></td> <td><code>array|int</code></td> <td>limit for the records (i.e. <code>20</code> or <code>[20, 20]</code>)</td> </tr> <tr> <td><code>models</code></td> <td><code>array</code></td> <td>model classes used</td> </tr> <tr> <td><code>offset</code></td> <td><code>int</code></td> <td>the offset</td> </tr> <tr> <td><code>order</code></td> <td><code>array|string</code></td> <td>order columns</td> </tr> <tr> <td><code>shared_lock</code></td> <td><code>bool</code></td> <td>issue shared lock or not</td> </tr> </tbody> </table> <div class=highlight><pre><span></span><code><a id=__codelineno-70-1 name=__codelineno-70-1 href=#__codelineno-70-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-70-2 name=__codelineno-70-2 href=#__codelineno-70-2></a>
<a id=__codelineno-70-3 name=__codelineno-70-3 href=#__codelineno-70-3></a><span class=k>use</span> <span class=nx>PDO</span><span class=p>;</span>
<a id=__codelineno-70-4 name=__codelineno-70-4 href=#__codelineno-70-4></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\Model\Query\Builder</span><span class=p>;</span>
<a id=__codelineno-70-5 name=__codelineno-70-5 href=#__codelineno-70-5></a><span class=k>use</span> <span class=nx>Phalcon\Di\FactoryDefault</span> <span class=k>as</span> <span class=nx>Di</span><span class=p>;</span>
<a id=__codelineno-70-6 name=__codelineno-70-6 href=#__codelineno-70-6></a>
<a id=__codelineno-70-7 name=__codelineno-70-7 href=#__codelineno-70-7></a><span class=cm>/* DI is mandatory to use the Query Builder */</span>
<a id=__codelineno-70-8 name=__codelineno-70-8 href=#__codelineno-70-8></a><span class=nv>$di</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Di</span><span class=p>();</span>
<a id=__codelineno-70-9 name=__codelineno-70-9 href=#__codelineno-70-9></a>
<a id=__codelineno-70-10 name=__codelineno-70-10 href=#__codelineno-70-10></a><span class=nv>$params</span> <span class=o>=</span> <span class=p>[</span>
<a id=__codelineno-70-11 name=__codelineno-70-11 href=#__codelineno-70-11></a>    <span class=s2>&quot;container&quot;</span> <span class=o>=&gt;</span> <span class=nv>$di</span><span class=p>,</span>
<a id=__codelineno-70-12 name=__codelineno-70-12 href=#__codelineno-70-12></a>    <span class=s2>&quot;models&quot;</span>     <span class=o>=&gt;</span> <span class=p>[</span>
<a id=__codelineno-70-13 name=__codelineno-70-13 href=#__codelineno-70-13></a>        <span class=nx>Users</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<a id=__codelineno-70-14 name=__codelineno-70-14 href=#__codelineno-70-14></a>    <span class=p>],</span>
<a id=__codelineno-70-15 name=__codelineno-70-15 href=#__codelineno-70-15></a>    <span class=s2>&quot;columns&quot;</span>    <span class=o>=&gt;</span> <span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>,</span> <span class=s2>&quot;name&quot;</span><span class=p>,</span> <span class=s2>&quot;status&quot;</span><span class=p>],</span>
<a id=__codelineno-70-16 name=__codelineno-70-16 href=#__codelineno-70-16></a>    <span class=s2>&quot;conditions&quot;</span> <span class=o>=&gt;</span> <span class=p>[</span>
<a id=__codelineno-70-17 name=__codelineno-70-17 href=#__codelineno-70-17></a>        <span class=p>[</span>
<a id=__codelineno-70-18 name=__codelineno-70-18 href=#__codelineno-70-18></a>            <span class=s2>&quot;created &gt; :min: AND created &lt; :max:&quot;</span><span class=p>,</span>
<a id=__codelineno-70-19 name=__codelineno-70-19 href=#__codelineno-70-19></a>            <span class=p>[</span>
<a id=__codelineno-70-20 name=__codelineno-70-20 href=#__codelineno-70-20></a>                <span class=s2>&quot;min&quot;</span> <span class=o>=&gt;</span> <span class=s2>&quot;2013-01-01&quot;</span><span class=p>,</span>
<a id=__codelineno-70-21 name=__codelineno-70-21 href=#__codelineno-70-21></a>                <span class=s2>&quot;max&quot;</span> <span class=o>=&gt;</span> <span class=s2>&quot;2014-01-01&quot;</span><span class=p>,</span>
<a id=__codelineno-70-22 name=__codelineno-70-22 href=#__codelineno-70-22></a>            <span class=p>],</span>
<a id=__codelineno-70-23 name=__codelineno-70-23 href=#__codelineno-70-23></a>            <span class=p>[</span>
<a id=__codelineno-70-24 name=__codelineno-70-24 href=#__codelineno-70-24></a>                <span class=s2>&quot;min&quot;</span> <span class=o>=&gt;</span> <span class=nx>PDO</span><span class=o>::</span><span class=na>PARAM_STR</span><span class=p>,</span>
<a id=__codelineno-70-25 name=__codelineno-70-25 href=#__codelineno-70-25></a>                <span class=s2>&quot;max&quot;</span> <span class=o>=&gt;</span> <span class=nx>PDO</span><span class=o>::</span><span class=na>PARAM_STR</span><span class=p>,</span>
<a id=__codelineno-70-26 name=__codelineno-70-26 href=#__codelineno-70-26></a>            <span class=p>],</span>
<a id=__codelineno-70-27 name=__codelineno-70-27 href=#__codelineno-70-27></a>        <span class=p>],</span>
<a id=__codelineno-70-28 name=__codelineno-70-28 href=#__codelineno-70-28></a>    <span class=p>],</span>
<a id=__codelineno-70-29 name=__codelineno-70-29 href=#__codelineno-70-29></a>    <span class=c1>// or &quot;conditions&quot; =&gt; &quot;created &gt; &#39;2013-01-01&#39; AND created &lt; &#39;2014-01-01&#39;&quot;,</span>
<a id=__codelineno-70-30 name=__codelineno-70-30 href=#__codelineno-70-30></a>    <span class=s2>&quot;group&quot;</span>      <span class=o>=&gt;</span> <span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>,</span> <span class=s2>&quot;name&quot;</span><span class=p>],</span>
<a id=__codelineno-70-31 name=__codelineno-70-31 href=#__codelineno-70-31></a>    <span class=s2>&quot;having&quot;</span>     <span class=o>=&gt;</span> <span class=s2>&quot;name = &#39;Kamil&#39;&quot;</span><span class=p>,</span>
<a id=__codelineno-70-32 name=__codelineno-70-32 href=#__codelineno-70-32></a>    <span class=s2>&quot;order&quot;</span>      <span class=o>=&gt;</span> <span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>,</span> <span class=s2>&quot;id&quot;</span><span class=p>],</span>
<a id=__codelineno-70-33 name=__codelineno-70-33 href=#__codelineno-70-33></a>    <span class=s2>&quot;limit&quot;</span>      <span class=o>=&gt;</span> <span class=mi>20</span><span class=p>,</span>
<a id=__codelineno-70-34 name=__codelineno-70-34 href=#__codelineno-70-34></a>    <span class=s2>&quot;offset&quot;</span>     <span class=o>=&gt;</span> <span class=mi>20</span><span class=p>,</span>
<a id=__codelineno-70-35 name=__codelineno-70-35 href=#__codelineno-70-35></a>    <span class=c1>// or &quot;limit&quot; =&gt; [20, 20],</span>
<a id=__codelineno-70-36 name=__codelineno-70-36 href=#__codelineno-70-36></a><span class=p>];</span>
<a id=__codelineno-70-37 name=__codelineno-70-37 href=#__codelineno-70-37></a>
<a id=__codelineno-70-38 name=__codelineno-70-38 href=#__codelineno-70-38></a><span class=nv>$builder</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Builder</span><span class=p>(</span><span class=nv>$params</span><span class=p>);</span>
</code></pre></div> <h3 id=getters>Getters<a class=headerlink href=#getters title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Method</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>autoescape(string $identifier): string</code></td> <td>Automatically escapes identifiers but only if they need to be escaped.</td> </tr> <tr> <td><code>getBindParams(): array</code></td> <td>Returns default bind params</td> </tr> <tr> <td><code>getBindTypes(): array</code></td> <td>Returns default <a href=https://www.php.net/manual/en/pdo.constants.php>bind types</a></td> </tr> <tr> <td><code>getColumns(): string|array</code></td> <td>Return the columns to be queried</td> </tr> <tr> <td><code>getDistinct(): bool</code></td> <td>Returns the <code>SELECT DISTINCT</code> / <code>SELECT ALL</code> clause</td> </tr> <tr> <td><code>getFrom(): string|array</code></td> <td>Return the models for the query</td> </tr> <tr> <td><code>getGroupBy(): array</code></td> <td>Returns the <code>GROUP BY</code> clause</td> </tr> <tr> <td><code>getHaving(): string</code></td> <td>Returns the <code>HAVING</code> clause</td> </tr> <tr> <td><code>getJoins(): array</code></td> <td>Returns <code>JOIN</code> join parts of the query</td> </tr> <tr> <td><code>getLimit(): string|array</code></td> <td>Returns the current <code>LIMIT</code> clause</td> </tr> <tr> <td><code>getModels(): string|array|null</code></td> <td>Returns the models involved in the query</td> </tr> <tr> <td><code>getOffset(): int</code></td> <td>Returns the current <code>OFFSET</code> clause</td> </tr> <tr> <td><code>getOrderBy(): string|array</code></td> <td>Returns the <code>ORDER BY</code> clause</td> </tr> <tr> <td><code>getPhql(): string</code></td> <td>Returns the generated PHQL statement</td> </tr> <tr> <td><code>getQuery(): QueryInterface</code></td> <td>Returns the query built</td> </tr> <tr> <td><code>getWhere(): string|array</code></td> <td>Return the conditions for the query</td> </tr> </tbody> </table> <h3 id=methods>Methods<a class=headerlink href=#methods title="Permanent link">&para;</a></h3> <p><div class=highlight><pre><span></span><code><a id=__codelineno-71-1 name=__codelineno-71-1 href=#__codelineno-71-1></a><span class=k>public</span> <span class=k>function</span> <span class=nf>addFrom</span><span class=p>(</span>
<a id=__codelineno-71-2 name=__codelineno-71-2 href=#__codelineno-71-2></a>    <span class=nx>string</span> <span class=nv>$model</span><span class=p>,</span> 
<a id=__codelineno-71-3 name=__codelineno-71-3 href=#__codelineno-71-3></a>    <span class=nx>string</span> <span class=nv>$alias</span> <span class=o>=</span> <span class=k>null</span>
<a id=__codelineno-71-4 name=__codelineno-71-4 href=#__codelineno-71-4></a><span class=p>)</span><span class=o>:</span> <span class=nx>BuilderInterface</span>
</code></pre></div> Add a model. The first parameter is the model while the second one is the alias for the model.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-72-1 name=__codelineno-72-1 href=#__codelineno-72-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-72-2 name=__codelineno-72-2 href=#__codelineno-72-2></a>
<a id=__codelineno-72-3 name=__codelineno-72-3 href=#__codelineno-72-3></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>addFrom</span><span class=p>(</span>
<a id=__codelineno-72-4 name=__codelineno-72-4 href=#__codelineno-72-4></a>    <span class=nx>Customers</span><span class=o>::</span><span class=na>class</span>
<a id=__codelineno-72-5 name=__codelineno-72-5 href=#__codelineno-72-5></a><span class=p>);</span>
<a id=__codelineno-72-6 name=__codelineno-72-6 href=#__codelineno-72-6></a>
<a id=__codelineno-72-7 name=__codelineno-72-7 href=#__codelineno-72-7></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>addFrom</span><span class=p>(</span>
<a id=__codelineno-72-8 name=__codelineno-72-8 href=#__codelineno-72-8></a>    <span class=nx>Customers</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<a id=__codelineno-72-9 name=__codelineno-72-9 href=#__codelineno-72-9></a>    <span class=s2>&quot;c&quot;</span>
<a id=__codelineno-72-10 name=__codelineno-72-10 href=#__codelineno-72-10></a><span class=p>);</span>
</code></pre></div> <p><div class=highlight><pre><span></span><code><a id=__codelineno-73-1 name=__codelineno-73-1 href=#__codelineno-73-1></a><span class=k>public</span> <span class=k>function</span> <span class=nf>andHaving</span><span class=p>(</span>
<a id=__codelineno-73-2 name=__codelineno-73-2 href=#__codelineno-73-2></a>    <span class=nx>mixed</span> <span class=nv>$conditions</span><span class=p>,</span> 
<a id=__codelineno-73-3 name=__codelineno-73-3 href=#__codelineno-73-3></a>    <span class=k>array</span> <span class=nv>$bindParams</span> <span class=o>=</span> <span class=p>[],</span> 
<a id=__codelineno-73-4 name=__codelineno-73-4 href=#__codelineno-73-4></a>    <span class=k>array</span> <span class=nv>$bindTypes</span> <span class=o>=</span> <span class=p>[]</span>
<a id=__codelineno-73-5 name=__codelineno-73-5 href=#__codelineno-73-5></a><span class=p>)</span><span class=o>:</span> <span class=nx>BuilderInterface</span>
</code></pre></div> Appends a condition to the current <code>HAVING</code> conditions clause using an <code>AND</code> operator. The first parameter is the expression. The second parameter is an array with the bound parameter name as the key. The last parameter is an array that defines the bound type for each parameter. The bound types are <a href=https://www.php.net/manual/en/pdo.constants.php>PDO constants</a>.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-74-1 name=__codelineno-74-1 href=#__codelineno-74-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-74-2 name=__codelineno-74-2 href=#__codelineno-74-2></a>
<a id=__codelineno-74-3 name=__codelineno-74-3 href=#__codelineno-74-3></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>andHaving</span><span class=p>(</span><span class=s2>&quot;SUM(Invoices.inv_total) &gt; 1000&quot;</span><span class=p>);</span>
<a id=__codelineno-74-4 name=__codelineno-74-4 href=#__codelineno-74-4></a>
<a id=__codelineno-74-5 name=__codelineno-74-5 href=#__codelineno-74-5></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>andHaving</span><span class=p>(</span>
<a id=__codelineno-74-6 name=__codelineno-74-6 href=#__codelineno-74-6></a>    <span class=s2>&quot;SUM(Invoices.inv_total) &gt; :sum:&quot;</span><span class=p>,</span>
<a id=__codelineno-74-7 name=__codelineno-74-7 href=#__codelineno-74-7></a>    <span class=p>[</span>
<a id=__codelineno-74-8 name=__codelineno-74-8 href=#__codelineno-74-8></a>        <span class=s2>&quot;sum&quot;</span> <span class=o>=&gt;</span> <span class=mi>1000</span><span class=p>,</span>
<a id=__codelineno-74-9 name=__codelineno-74-9 href=#__codelineno-74-9></a>    <span class=p>],</span>
<a id=__codelineno-74-10 name=__codelineno-74-10 href=#__codelineno-74-10></a>    <span class=p>[</span>
<a id=__codelineno-74-11 name=__codelineno-74-11 href=#__codelineno-74-11></a>        <span class=s2>&quot;sum&quot;</span> <span class=o>=&gt;</span> <span class=nx>PDO</span><span class=o>::</span><span class=na>PARAM_INT</span><span class=p>,</span>
<a id=__codelineno-74-12 name=__codelineno-74-12 href=#__codelineno-74-12></a>    <span class=p>]</span>
<a id=__codelineno-74-13 name=__codelineno-74-13 href=#__codelineno-74-13></a><span class=p>);</span>
</code></pre></div> <p><div class=highlight><pre><span></span><code><a id=__codelineno-75-1 name=__codelineno-75-1 href=#__codelineno-75-1></a><span class=k>public</span> <span class=k>function</span> <span class=nf>andWhere</span><span class=p>(</span>
<a id=__codelineno-75-2 name=__codelineno-75-2 href=#__codelineno-75-2></a>    <span class=nx>mixed</span> <span class=nv>$conditions</span><span class=p>,</span> 
<a id=__codelineno-75-3 name=__codelineno-75-3 href=#__codelineno-75-3></a>    <span class=k>array</span> <span class=nv>$bindParams</span> <span class=o>=</span> <span class=p>[],</span> 
<a id=__codelineno-75-4 name=__codelineno-75-4 href=#__codelineno-75-4></a>    <span class=k>array</span> <span class=nv>$bindTypes</span> <span class=o>=</span> <span class=p>[]</span>
<a id=__codelineno-75-5 name=__codelineno-75-5 href=#__codelineno-75-5></a><span class=p>)</span><span class=o>:</span> <span class=nx>BuilderInterface</span>
</code></pre></div> Appends a condition to the current <code>WHERE</code> conditions clause using an <code>AND</code> operator. The first parameter is the expression. The second parameter is an array with the bound parameter name as the key. The last parameter is an array that defines the bound type for each parameter. The bound types are <a href=https://www.php.net/manual/en/pdo.constants.php>PDO constants</a>.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-76-1 name=__codelineno-76-1 href=#__codelineno-76-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-76-2 name=__codelineno-76-2 href=#__codelineno-76-2></a>
<a id=__codelineno-76-3 name=__codelineno-76-3 href=#__codelineno-76-3></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>andWhere</span><span class=p>(</span><span class=s2>&quot;SUM(Invoices.inv_total) &gt; 1000&quot;</span><span class=p>);</span>
<a id=__codelineno-76-4 name=__codelineno-76-4 href=#__codelineno-76-4></a>
<a id=__codelineno-76-5 name=__codelineno-76-5 href=#__codelineno-76-5></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>andWhere</span><span class=p>(</span>
<a id=__codelineno-76-6 name=__codelineno-76-6 href=#__codelineno-76-6></a>    <span class=s2>&quot;SUM(Invoices.inv_total) &gt; :sum:&quot;</span><span class=p>,</span>
<a id=__codelineno-76-7 name=__codelineno-76-7 href=#__codelineno-76-7></a>    <span class=p>[</span>
<a id=__codelineno-76-8 name=__codelineno-76-8 href=#__codelineno-76-8></a>        <span class=s2>&quot;sum&quot;</span> <span class=o>=&gt;</span> <span class=mi>1000</span><span class=p>,</span>
<a id=__codelineno-76-9 name=__codelineno-76-9 href=#__codelineno-76-9></a>    <span class=p>],</span>
<a id=__codelineno-76-10 name=__codelineno-76-10 href=#__codelineno-76-10></a>    <span class=p>[</span>
<a id=__codelineno-76-11 name=__codelineno-76-11 href=#__codelineno-76-11></a>        <span class=s2>&quot;sum&quot;</span> <span class=o>=&gt;</span> <span class=nx>PDO</span><span class=o>::</span><span class=na>PARAM_INT</span><span class=p>,</span>
<a id=__codelineno-76-12 name=__codelineno-76-12 href=#__codelineno-76-12></a>    <span class=p>]</span>
<a id=__codelineno-76-13 name=__codelineno-76-13 href=#__codelineno-76-13></a><span class=p>);</span>
</code></pre></div> <p><div class=highlight><pre><span></span><code><a id=__codelineno-77-1 name=__codelineno-77-1 href=#__codelineno-77-1></a><span class=k>public</span> <span class=k>function</span> <span class=nf>betweenHaving</span><span class=p>(</span>
<a id=__codelineno-77-2 name=__codelineno-77-2 href=#__codelineno-77-2></a>    <span class=nx>string</span> <span class=nv>$expr</span><span class=p>,</span> 
<a id=__codelineno-77-3 name=__codelineno-77-3 href=#__codelineno-77-3></a>    <span class=nx>mixed</span> <span class=nv>$minimum</span><span class=p>,</span> 
<a id=__codelineno-77-4 name=__codelineno-77-4 href=#__codelineno-77-4></a>    <span class=nx>mixed</span> <span class=nv>$maximum</span><span class=p>,</span> 
<a id=__codelineno-77-5 name=__codelineno-77-5 href=#__codelineno-77-5></a>    <span class=nx>string</span> <span class=nv>$operator</span> <span class=o>=</span> <span class=nx>BuilderInterface</span><span class=o>::</span><span class=na>OPERATOR_AND</span>
<a id=__codelineno-77-6 name=__codelineno-77-6 href=#__codelineno-77-6></a><span class=p>)</span><span class=o>:</span> <span class=nx>BuilderInterface</span>
</code></pre></div> Appends a <code>BETWEEN</code> condition to the current <code>HAVING</code> conditions clause. The method accepts the expression, minimum and maximum as well as the operator for the <code>BETWEEN</code> (<code>OPERATOR_AND</code> or <code>OPERATOR_OR</code>) </p> <div class=highlight><pre><span></span><code><a id=__codelineno-78-1 name=__codelineno-78-1 href=#__codelineno-78-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-78-2 name=__codelineno-78-2 href=#__codelineno-78-2></a>
<a id=__codelineno-78-3 name=__codelineno-78-3 href=#__codelineno-78-3></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>betweenHaving</span><span class=p>(</span>
<a id=__codelineno-78-4 name=__codelineno-78-4 href=#__codelineno-78-4></a>    <span class=s2>&quot;SUM(Invoices.inv_total)&quot;</span><span class=p>,</span>
<a id=__codelineno-78-5 name=__codelineno-78-5 href=#__codelineno-78-5></a>    <span class=mi>1000</span><span class=p>,</span>
<a id=__codelineno-78-6 name=__codelineno-78-6 href=#__codelineno-78-6></a>    <span class=mi>5000</span>
<a id=__codelineno-78-7 name=__codelineno-78-7 href=#__codelineno-78-7></a><span class=p>);</span>
</code></pre></div> <p><div class=highlight><pre><span></span><code><a id=__codelineno-79-1 name=__codelineno-79-1 href=#__codelineno-79-1></a><span class=k>public</span> <span class=k>function</span> <span class=nf>betweenWhere</span><span class=p>(</span>
<a id=__codelineno-79-2 name=__codelineno-79-2 href=#__codelineno-79-2></a>    <span class=nx>string</span> <span class=nv>$expr</span><span class=p>,</span> 
<a id=__codelineno-79-3 name=__codelineno-79-3 href=#__codelineno-79-3></a>    <span class=nx>mixed</span> <span class=nv>$minimum</span><span class=p>,</span> 
<a id=__codelineno-79-4 name=__codelineno-79-4 href=#__codelineno-79-4></a>    <span class=nx>mixed</span> <span class=nv>$maximum</span><span class=p>,</span> 
<a id=__codelineno-79-5 name=__codelineno-79-5 href=#__codelineno-79-5></a>    <span class=nx>string</span> <span class=nv>$operator</span> <span class=o>=</span> <span class=nx>BuilderInterface</span><span class=o>::</span><span class=na>OPERATOR_AND</span>
<a id=__codelineno-79-6 name=__codelineno-79-6 href=#__codelineno-79-6></a><span class=p>)</span><span class=o>:</span> <span class=nx>BuilderInterface</span>
</code></pre></div> Appends a <code>BETWEEN</code> condition to the current <code>WHERE</code> conditions clause. The method accepts the expression, minimum and maximum as well as the operator for the <code>BETWEEN</code> (<code>OPERATOR_AND</code> or <code>OPERATOR_OR</code>) </p> <div class=highlight><pre><span></span><code><a id=__codelineno-80-1 name=__codelineno-80-1 href=#__codelineno-80-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-80-2 name=__codelineno-80-2 href=#__codelineno-80-2></a>
<a id=__codelineno-80-3 name=__codelineno-80-3 href=#__codelineno-80-3></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>betweenWhere</span><span class=p>(</span>
<a id=__codelineno-80-4 name=__codelineno-80-4 href=#__codelineno-80-4></a>    <span class=s2>&quot;Invoices.inv_total&quot;</span><span class=p>,</span>
<a id=__codelineno-80-5 name=__codelineno-80-5 href=#__codelineno-80-5></a>    <span class=mi>1000</span><span class=p>,</span>
<a id=__codelineno-80-6 name=__codelineno-80-6 href=#__codelineno-80-6></a>    <span class=mi>5000</span>
<a id=__codelineno-80-7 name=__codelineno-80-7 href=#__codelineno-80-7></a><span class=p>);</span>
</code></pre></div> <p><div class=highlight><pre><span></span><code><a id=__codelineno-81-1 name=__codelineno-81-1 href=#__codelineno-81-1></a><span class=k>public</span> <span class=k>function</span> <span class=nf>columns</span><span class=p>(</span><span class=nx>mixed</span> <span class=nv>$columns</span><span class=p>)</span><span class=o>:</span> <span class=nx>BuilderInterface</span>
</code></pre></div> Sets the columns to be queried. The method accepts either a <code>string</code> or an <code>array</code>. If you specify an array with specific <code>keys</code>, they will be used as aliases for the relevant columns.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-82-1 name=__codelineno-82-1 href=#__codelineno-82-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-82-2 name=__codelineno-82-2 href=#__codelineno-82-2></a>
<a id=__codelineno-82-3 name=__codelineno-82-3 href=#__codelineno-82-3></a><span class=c1>// SELECT inv_id, inv_title</span>
<a id=__codelineno-82-4 name=__codelineno-82-4 href=#__codelineno-82-4></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>columns</span><span class=p>(</span><span class=s2>&quot;inv_id, inv_title&quot;</span><span class=p>);</span>
<a id=__codelineno-82-5 name=__codelineno-82-5 href=#__codelineno-82-5></a>
<a id=__codelineno-82-6 name=__codelineno-82-6 href=#__codelineno-82-6></a><span class=c1>// SELECT inv_id, inv_title</span>
<a id=__codelineno-82-7 name=__codelineno-82-7 href=#__codelineno-82-7></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>columns</span><span class=p>(</span>
<a id=__codelineno-82-8 name=__codelineno-82-8 href=#__codelineno-82-8></a>    <span class=p>[</span>
<a id=__codelineno-82-9 name=__codelineno-82-9 href=#__codelineno-82-9></a>        <span class=s2>&quot;inv_id&quot;</span><span class=p>,</span>
<a id=__codelineno-82-10 name=__codelineno-82-10 href=#__codelineno-82-10></a>        <span class=s2>&quot;inv_title&quot;</span><span class=p>,</span>
<a id=__codelineno-82-11 name=__codelineno-82-11 href=#__codelineno-82-11></a>    <span class=p>]</span>
<a id=__codelineno-82-12 name=__codelineno-82-12 href=#__codelineno-82-12></a><span class=p>);</span>
<a id=__codelineno-82-13 name=__codelineno-82-13 href=#__codelineno-82-13></a>
<a id=__codelineno-82-14 name=__codelineno-82-14 href=#__codelineno-82-14></a><span class=c1>// SELECT inv_cst_id, inv_total</span>
<a id=__codelineno-82-15 name=__codelineno-82-15 href=#__codelineno-82-15></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>columns</span><span class=p>(</span>
<a id=__codelineno-82-16 name=__codelineno-82-16 href=#__codelineno-82-16></a>    <span class=p>[</span>
<a id=__codelineno-82-17 name=__codelineno-82-17 href=#__codelineno-82-17></a>        <span class=s2>&quot;inv_cst_id&quot;</span><span class=p>,</span>
<a id=__codelineno-82-18 name=__codelineno-82-18 href=#__codelineno-82-18></a>        <span class=s2>&quot;inv_total&quot;</span> <span class=o>=&gt;</span> <span class=s2>&quot;SUM(inv_total)&quot;</span><span class=p>,</span>
<a id=__codelineno-82-19 name=__codelineno-82-19 href=#__codelineno-82-19></a>    <span class=p>]</span>
<a id=__codelineno-82-20 name=__codelineno-82-20 href=#__codelineno-82-20></a><span class=p>);</span>
</code></pre></div> <p><div class=highlight><pre><span></span><code><a id=__codelineno-83-1 name=__codelineno-83-1 href=#__codelineno-83-1></a><span class=k>public</span> <span class=k>function</span> <span class=nf>distinct</span><span class=p>(</span><span class=nx>mixed</span> <span class=nv>$distinct</span><span class=p>)</span><span class=o>:</span> <span class=nx>BuilderInterface</span>
</code></pre></div> Sets <code>SELECT DISTINCT</code> / <code>SELECT ALL</code> flag</p> <div class=highlight><pre><span></span><code><a id=__codelineno-84-1 name=__codelineno-84-1 href=#__codelineno-84-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-84-2 name=__codelineno-84-2 href=#__codelineno-84-2></a>
<a id=__codelineno-84-3 name=__codelineno-84-3 href=#__codelineno-84-3></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>distinct</span><span class=p>(</span><span class=s2>&quot;status&quot;</span><span class=p>);</span>
<a id=__codelineno-84-4 name=__codelineno-84-4 href=#__codelineno-84-4></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>distinct</span><span class=p>(</span><span class=k>null</span><span class=p>);</span>
</code></pre></div> <p><div class=highlight><pre><span></span><code><a id=__codelineno-85-1 name=__codelineno-85-1 href=#__codelineno-85-1></a><span class=k>public</span> <span class=k>function</span> <span class=nf>forUpdate</span><span class=p>(</span><span class=nx>bool</span> <span class=nv>$forUpdate</span><span class=p>)</span><span class=o>:</span> <span class=nx>BuilderInterface</span>
</code></pre></div> Sets a <code>FOR UPDATE</code> clause</p> <div class=highlight><pre><span></span><code><a id=__codelineno-86-1 name=__codelineno-86-1 href=#__codelineno-86-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-86-2 name=__codelineno-86-2 href=#__codelineno-86-2></a>
<a id=__codelineno-86-3 name=__codelineno-86-3 href=#__codelineno-86-3></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>forUpdate</span><span class=p>(</span><span class=k>true</span><span class=p>);</span>
</code></pre></div> <p><div class=highlight><pre><span></span><code><a id=__codelineno-87-1 name=__codelineno-87-1 href=#__codelineno-87-1></a><span class=k>public</span> <span class=k>function</span> <span class=nf>from</span><span class=p>(</span><span class=nx>mixed</span> <span class=nv>$models</span><span class=p>)</span><span class=o>:</span> <span class=nx>BuilderInterface</span>
</code></pre></div> Sets the models for the query. The method accepts either a <code>string</code> or an <code>array</code>. If you specify an array with specific <code>keys</code>, they will be used as aliases for the relevant models. </p> <div class=highlight><pre><span></span><code><a id=__codelineno-88-1 name=__codelineno-88-1 href=#__codelineno-88-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-88-2 name=__codelineno-88-2 href=#__codelineno-88-2></a>
<a id=__codelineno-88-3 name=__codelineno-88-3 href=#__codelineno-88-3></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>from</span><span class=p>(</span>
<a id=__codelineno-88-4 name=__codelineno-88-4 href=#__codelineno-88-4></a>    <span class=nx>Invoices</span><span class=o>::</span><span class=na>class</span>
<a id=__codelineno-88-5 name=__codelineno-88-5 href=#__codelineno-88-5></a><span class=p>);</span>
<a id=__codelineno-88-6 name=__codelineno-88-6 href=#__codelineno-88-6></a>
<a id=__codelineno-88-7 name=__codelineno-88-7 href=#__codelineno-88-7></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>from</span><span class=p>(</span>
<a id=__codelineno-88-8 name=__codelineno-88-8 href=#__codelineno-88-8></a>    <span class=p>[</span>
<a id=__codelineno-88-9 name=__codelineno-88-9 href=#__codelineno-88-9></a>        <span class=nx>Invoices</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<a id=__codelineno-88-10 name=__codelineno-88-10 href=#__codelineno-88-10></a>        <span class=nx>Customers</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<a id=__codelineno-88-11 name=__codelineno-88-11 href=#__codelineno-88-11></a>    <span class=p>]</span>
<a id=__codelineno-88-12 name=__codelineno-88-12 href=#__codelineno-88-12></a><span class=p>);</span>
<a id=__codelineno-88-13 name=__codelineno-88-13 href=#__codelineno-88-13></a>
<a id=__codelineno-88-14 name=__codelineno-88-14 href=#__codelineno-88-14></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>from</span><span class=p>(</span>
<a id=__codelineno-88-15 name=__codelineno-88-15 href=#__codelineno-88-15></a>    <span class=p>[</span>
<a id=__codelineno-88-16 name=__codelineno-88-16 href=#__codelineno-88-16></a>        <span class=s1>&#39;i&#39;</span> <span class=o>=&gt;</span> <span class=nx>Invoices</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<a id=__codelineno-88-17 name=__codelineno-88-17 href=#__codelineno-88-17></a>        <span class=s1>&#39;c&#39;</span> <span class=o>=&gt;</span> <span class=nx>Customers</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<a id=__codelineno-88-18 name=__codelineno-88-18 href=#__codelineno-88-18></a>    <span class=p>]</span>
<a id=__codelineno-88-19 name=__codelineno-88-19 href=#__codelineno-88-19></a><span class=p>);</span>
</code></pre></div> <p><div class=highlight><pre><span></span><code><a id=__codelineno-89-1 name=__codelineno-89-1 href=#__codelineno-89-1></a><span class=k>public</span> <span class=k>function</span> <span class=nf>groupBy</span><span class=p>(</span><span class=nx>mixed</span> <span class=nv>$group</span><span class=p>)</span><span class=o>:</span> <span class=nx>BuilderInterface</span>
</code></pre></div> Adds a <code>GROUP BY</code> condition to the builder.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-90-1 name=__codelineno-90-1 href=#__codelineno-90-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-90-2 name=__codelineno-90-2 href=#__codelineno-90-2></a>
<a id=__codelineno-90-3 name=__codelineno-90-3 href=#__codelineno-90-3></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>groupBy</span><span class=p>(</span>
<a id=__codelineno-90-4 name=__codelineno-90-4 href=#__codelineno-90-4></a>    <span class=p>[</span>
<a id=__codelineno-90-5 name=__codelineno-90-5 href=#__codelineno-90-5></a>        <span class=s2>&quot;Invoices.inv_cst_id&quot;</span><span class=p>,</span>
<a id=__codelineno-90-6 name=__codelineno-90-6 href=#__codelineno-90-6></a>    <span class=p>]</span>
<a id=__codelineno-90-7 name=__codelineno-90-7 href=#__codelineno-90-7></a><span class=p>);</span>
</code></pre></div> <p><div class=highlight><pre><span></span><code><a id=__codelineno-91-1 name=__codelineno-91-1 href=#__codelineno-91-1></a><span class=k>public</span> <span class=k>function</span> <span class=nf>having</span><span class=p>(</span>
<a id=__codelineno-91-2 name=__codelineno-91-2 href=#__codelineno-91-2></a>    <span class=nx>mixed</span> <span class=nv>$conditions</span><span class=p>,</span> 
<a id=__codelineno-91-3 name=__codelineno-91-3 href=#__codelineno-91-3></a>    <span class=k>array</span> <span class=nv>$bindParams</span> <span class=o>=</span> <span class=p>[],</span> 
<a id=__codelineno-91-4 name=__codelineno-91-4 href=#__codelineno-91-4></a>    <span class=k>array</span> <span class=nv>$bindTypes</span> <span class=o>=</span> <span class=p>[]</span>
<a id=__codelineno-91-5 name=__codelineno-91-5 href=#__codelineno-91-5></a><span class=p>)</span><span class=o>:</span> <span class=nx>BuilderInterface</span>
</code></pre></div> Sets the <code>HAVING</code> condition clause. The first parameter is the expression. The second parameter is an array with the bound parameter name as the key. The last parameter is an array that defines the bound type for each parameter. The bound types are <a href=https://www.php.net/manual/en/pdo.constants.php>PDO constants</a>.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-92-1 name=__codelineno-92-1 href=#__codelineno-92-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-92-2 name=__codelineno-92-2 href=#__codelineno-92-2></a>
<a id=__codelineno-92-3 name=__codelineno-92-3 href=#__codelineno-92-3></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>having</span><span class=p>(</span><span class=s2>&quot;SUM(Invoices.inv_total) &gt; 1000&quot;</span><span class=p>);</span>
<a id=__codelineno-92-4 name=__codelineno-92-4 href=#__codelineno-92-4></a>
<a id=__codelineno-92-5 name=__codelineno-92-5 href=#__codelineno-92-5></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>having</span><span class=p>(</span>
<a id=__codelineno-92-6 name=__codelineno-92-6 href=#__codelineno-92-6></a>    <span class=s2>&quot;SUM(Invoices.inv_total) &gt; :sum:&quot;</span><span class=p>,</span>
<a id=__codelineno-92-7 name=__codelineno-92-7 href=#__codelineno-92-7></a>    <span class=p>[</span>
<a id=__codelineno-92-8 name=__codelineno-92-8 href=#__codelineno-92-8></a>        <span class=s2>&quot;sum&quot;</span> <span class=o>=&gt;</span> <span class=mi>1000</span><span class=p>,</span>
<a id=__codelineno-92-9 name=__codelineno-92-9 href=#__codelineno-92-9></a>    <span class=p>],</span>
<a id=__codelineno-92-10 name=__codelineno-92-10 href=#__codelineno-92-10></a>    <span class=p>[</span>
<a id=__codelineno-92-11 name=__codelineno-92-11 href=#__codelineno-92-11></a>        <span class=s2>&quot;sum&quot;</span> <span class=o>=&gt;</span> <span class=nx>PDO</span><span class=o>::</span><span class=na>PARAM_INT</span><span class=p>,</span>
<a id=__codelineno-92-12 name=__codelineno-92-12 href=#__codelineno-92-12></a>    <span class=p>]</span>
<a id=__codelineno-92-13 name=__codelineno-92-13 href=#__codelineno-92-13></a><span class=p>);</span>
</code></pre></div> <p><div class=highlight><pre><span></span><code><a id=__codelineno-93-1 name=__codelineno-93-1 href=#__codelineno-93-1></a><span class=k>public</span> <span class=k>function</span> <span class=nf>inHaving</span><span class=p>(</span>
<a id=__codelineno-93-2 name=__codelineno-93-2 href=#__codelineno-93-2></a>    <span class=nx>string</span> <span class=nv>$expr</span><span class=p>,</span> 
<a id=__codelineno-93-3 name=__codelineno-93-3 href=#__codelineno-93-3></a>    <span class=k>array</span> <span class=nv>$values</span><span class=p>,</span> 
<a id=__codelineno-93-4 name=__codelineno-93-4 href=#__codelineno-93-4></a>    <span class=nx>string</span> <span class=nv>$operator</span> <span class=o>=</span> <span class=nx>BuilderInterface</span><span class=o>::</span><span class=na>OPERATOR_AND</span>
<a id=__codelineno-93-5 name=__codelineno-93-5 href=#__codelineno-93-5></a><span class=p>)</span><span class=o>:</span> <span class=nx>BuilderInterface</span>
</code></pre></div> Appends a <code>IN</code> condition to the current <code>HAVING</code> conditions clause. The method accepts the expression, an array with the <code>IN</code> values as well as the operator for the <code>IN</code> (<code>OPERATOR_AND</code> or <code>OPERATOR_OR</code>) </p> <div class=highlight><pre><span></span><code><a id=__codelineno-94-1 name=__codelineno-94-1 href=#__codelineno-94-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-94-2 name=__codelineno-94-2 href=#__codelineno-94-2></a>
<a id=__codelineno-94-3 name=__codelineno-94-3 href=#__codelineno-94-3></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>inHaving</span><span class=p>(</span>
<a id=__codelineno-94-4 name=__codelineno-94-4 href=#__codelineno-94-4></a>    <span class=s2>&quot;SUM(Invoices.inv_total)&quot;</span><span class=p>,</span>
<a id=__codelineno-94-5 name=__codelineno-94-5 href=#__codelineno-94-5></a>    <span class=p>[</span>
<a id=__codelineno-94-6 name=__codelineno-94-6 href=#__codelineno-94-6></a>        <span class=mi>1000</span><span class=p>,</span>
<a id=__codelineno-94-7 name=__codelineno-94-7 href=#__codelineno-94-7></a>        <span class=mi>5000</span><span class=p>,</span>
<a id=__codelineno-94-8 name=__codelineno-94-8 href=#__codelineno-94-8></a>    <span class=p>]</span>
<a id=__codelineno-94-9 name=__codelineno-94-9 href=#__codelineno-94-9></a><span class=p>);</span>
</code></pre></div> <p><div class=highlight><pre><span></span><code><a id=__codelineno-95-1 name=__codelineno-95-1 href=#__codelineno-95-1></a><span class=k>public</span> <span class=k>function</span> <span class=nf>innerJoin</span><span class=p>(</span>
<a id=__codelineno-95-2 name=__codelineno-95-2 href=#__codelineno-95-2></a>    <span class=nx>string</span> <span class=nv>$model</span><span class=p>,</span> 
<a id=__codelineno-95-3 name=__codelineno-95-3 href=#__codelineno-95-3></a>    <span class=nx>string</span> <span class=nv>$conditions</span> <span class=o>=</span> <span class=k>null</span><span class=p>,</span> 
<a id=__codelineno-95-4 name=__codelineno-95-4 href=#__codelineno-95-4></a>    <span class=nx>string</span> <span class=nv>$alias</span> <span class=o>=</span> <span class=k>null</span>
<a id=__codelineno-95-5 name=__codelineno-95-5 href=#__codelineno-95-5></a><span class=p>)</span><span class=o>:</span> <span class=nx>BuilderInterface</span>
</code></pre></div> Adds an <code>INNER</code> join to the query. The first parameter is the model. The join conditions are automatically calculated, if the relevant relationships have been properly set in the respective models. However, you can set the conditions manually using the second parameter is the conditions, while the third one (if specified) is the alias.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-96-1 name=__codelineno-96-1 href=#__codelineno-96-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-96-2 name=__codelineno-96-2 href=#__codelineno-96-2></a>
<a id=__codelineno-96-3 name=__codelineno-96-3 href=#__codelineno-96-3></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>innerJoin</span><span class=p>(</span>
<a id=__codelineno-96-4 name=__codelineno-96-4 href=#__codelineno-96-4></a>    <span class=nx>Customers</span><span class=o>::</span><span class=na>class</span>
<a id=__codelineno-96-5 name=__codelineno-96-5 href=#__codelineno-96-5></a><span class=p>);</span>
<a id=__codelineno-96-6 name=__codelineno-96-6 href=#__codelineno-96-6></a>
<a id=__codelineno-96-7 name=__codelineno-96-7 href=#__codelineno-96-7></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>innerJoin</span><span class=p>(</span>
<a id=__codelineno-96-8 name=__codelineno-96-8 href=#__codelineno-96-8></a>    <span class=nx>Customers</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<a id=__codelineno-96-9 name=__codelineno-96-9 href=#__codelineno-96-9></a>    <span class=s2>&quot;Invoices.inv_cst_id = Customers.cst_id&quot;</span>
<a id=__codelineno-96-10 name=__codelineno-96-10 href=#__codelineno-96-10></a><span class=p>);</span>
<a id=__codelineno-96-11 name=__codelineno-96-11 href=#__codelineno-96-11></a>
<a id=__codelineno-96-12 name=__codelineno-96-12 href=#__codelineno-96-12></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>innerJoin</span><span class=p>(</span>
<a id=__codelineno-96-13 name=__codelineno-96-13 href=#__codelineno-96-13></a>    <span class=nx>Customers</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<a id=__codelineno-96-14 name=__codelineno-96-14 href=#__codelineno-96-14></a>    <span class=s2>&quot;Invoices.inv_cst_id = c.cst_id&quot;</span><span class=p>,</span>
<a id=__codelineno-96-15 name=__codelineno-96-15 href=#__codelineno-96-15></a>    <span class=s2>&quot;c&quot;</span>
<a id=__codelineno-96-16 name=__codelineno-96-16 href=#__codelineno-96-16></a><span class=p>);</span>
</code></pre></div> <p><div class=highlight><pre><span></span><code><a id=__codelineno-97-1 name=__codelineno-97-1 href=#__codelineno-97-1></a><span class=k>public</span> <span class=k>function</span> <span class=nf>inWhere</span><span class=p>(</span>
<a id=__codelineno-97-2 name=__codelineno-97-2 href=#__codelineno-97-2></a>    <span class=nx>string</span> <span class=nv>$expr</span><span class=p>,</span> 
<a id=__codelineno-97-3 name=__codelineno-97-3 href=#__codelineno-97-3></a>    <span class=k>array</span> <span class=nv>$values</span><span class=p>,</span>  
<a id=__codelineno-97-4 name=__codelineno-97-4 href=#__codelineno-97-4></a>    <span class=nx>string</span> <span class=nv>$operator</span> <span class=o>=</span> <span class=nx>BuilderInterface</span><span class=o>::</span><span class=na>OPERATOR_AND</span>
<a id=__codelineno-97-5 name=__codelineno-97-5 href=#__codelineno-97-5></a><span class=p>)</span><span class=o>:</span> <span class=nx>BuilderInterface</span>
</code></pre></div> Appends an <code>IN</code> condition to the current <code>WHERE</code> conditions clause. The method accepts the expression, an array with the values for the <code>IN</code> clause as well as the operator for the <code>IN</code> (<code>OPERATOR_AND</code> or <code>OPERATOR_OR</code>) </p> <div class=highlight><pre><span></span><code><a id=__codelineno-98-1 name=__codelineno-98-1 href=#__codelineno-98-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-98-2 name=__codelineno-98-2 href=#__codelineno-98-2></a>
<a id=__codelineno-98-3 name=__codelineno-98-3 href=#__codelineno-98-3></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>inWhere</span><span class=p>(</span>
<a id=__codelineno-98-4 name=__codelineno-98-4 href=#__codelineno-98-4></a>    <span class=s2>&quot;Invoices.inv_id&quot;</span><span class=p>,</span>
<a id=__codelineno-98-5 name=__codelineno-98-5 href=#__codelineno-98-5></a>    <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>5</span><span class=p>]</span>
<a id=__codelineno-98-6 name=__codelineno-98-6 href=#__codelineno-98-6></a><span class=p>);</span>
<a id=__codelineno-98-7 name=__codelineno-98-7 href=#__codelineno-98-7></a>
<a id=__codelineno-98-8 name=__codelineno-98-8 href=#__codelineno-98-8></a><span class=c1>//Using OPERATOR_OR:</span>
<a id=__codelineno-98-9 name=__codelineno-98-9 href=#__codelineno-98-9></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>inWhere</span><span class=p>(</span>
<a id=__codelineno-98-10 name=__codelineno-98-10 href=#__codelineno-98-10></a>    <span class=s2>&quot;Invoices.inv_id&quot;</span><span class=p>,</span>
<a id=__codelineno-98-11 name=__codelineno-98-11 href=#__codelineno-98-11></a>    <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>5</span><span class=p>],</span>
<a id=__codelineno-98-12 name=__codelineno-98-12 href=#__codelineno-98-12></a>    <span class=nx>\Phalcon\Mvc\Model\Query\BuilderInterface</span><span class=o>::</span><span class=na>OPERATOR_OR</span>
<a id=__codelineno-98-13 name=__codelineno-98-13 href=#__codelineno-98-13></a><span class=p>);</span>
</code></pre></div> <div class=highlight><pre><span></span><code><a id=__codelineno-99-1 name=__codelineno-99-1 href=#__codelineno-99-1></a><span class=k>public</span> <span class=k>function</span> <span class=nf>join</span><span class=p>(</span>
<a id=__codelineno-99-2 name=__codelineno-99-2 href=#__codelineno-99-2></a>    <span class=nx>string</span> <span class=nv>$model</span><span class=p>,</span> 
<a id=__codelineno-99-3 name=__codelineno-99-3 href=#__codelineno-99-3></a>    <span class=nx>string</span> <span class=nv>$conditions</span> <span class=o>=</span> <span class=k>null</span><span class=p>,</span> 
<a id=__codelineno-99-4 name=__codelineno-99-4 href=#__codelineno-99-4></a>    <span class=nx>string</span> <span class=nv>$alias</span> <span class=o>=</span> <span class=k>null</span><span class=p>,</span> 
<a id=__codelineno-99-5 name=__codelineno-99-5 href=#__codelineno-99-5></a>    <span class=nx>string</span> <span class=nv>$type</span> <span class=o>=</span> <span class=k>null</span>
<a id=__codelineno-99-6 name=__codelineno-99-6 href=#__codelineno-99-6></a><span class=p>)</span><span class=o>:</span> <span class=nx>BuilderInterface</span>
</code></pre></div> <p>Adds a join to the query. The first parameter is the model. The join conditions are automatically calculated, if the relevant relationships have been properly set in the respective models. However, you can set the conditions manually using the second parameter is the conditions, while the third one (if specified) is the alias. The last parameter defines the <code>type</code> of the join. By default, the join is <code>INNER</code>. Acceptable values are: <code>INNER</code>, <code>LEFT</code> and <code>RIGHT</code>.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-100-1 name=__codelineno-100-1 href=#__codelineno-100-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-100-2 name=__codelineno-100-2 href=#__codelineno-100-2></a>
<a id=__codelineno-100-3 name=__codelineno-100-3 href=#__codelineno-100-3></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>join</span><span class=p>(</span>
<a id=__codelineno-100-4 name=__codelineno-100-4 href=#__codelineno-100-4></a>    <span class=nx>Customers</span><span class=o>::</span><span class=na>class</span>
<a id=__codelineno-100-5 name=__codelineno-100-5 href=#__codelineno-100-5></a><span class=p>);</span>
<a id=__codelineno-100-6 name=__codelineno-100-6 href=#__codelineno-100-6></a>
<a id=__codelineno-100-7 name=__codelineno-100-7 href=#__codelineno-100-7></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>join</span><span class=p>(</span>
<a id=__codelineno-100-8 name=__codelineno-100-8 href=#__codelineno-100-8></a>    <span class=nx>Customers</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<a id=__codelineno-100-9 name=__codelineno-100-9 href=#__codelineno-100-9></a>    <span class=s2>&quot;Invoices.inv_cst_id = Customers.cst_id&quot;</span>
<a id=__codelineno-100-10 name=__codelineno-100-10 href=#__codelineno-100-10></a><span class=p>);</span>
<a id=__codelineno-100-11 name=__codelineno-100-11 href=#__codelineno-100-11></a>
<a id=__codelineno-100-12 name=__codelineno-100-12 href=#__codelineno-100-12></a><span class=c1>//If model `Invoices` has an alias, use it accordingly in the following two examples:</span>
<a id=__codelineno-100-13 name=__codelineno-100-13 href=#__codelineno-100-13></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>join</span><span class=p>(</span>
<a id=__codelineno-100-14 name=__codelineno-100-14 href=#__codelineno-100-14></a>    <span class=nx>Customers</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<a id=__codelineno-100-15 name=__codelineno-100-15 href=#__codelineno-100-15></a>    <span class=s2>&quot;Invoices.inv_cst_id = c.cst_id&quot;</span><span class=p>,</span>
<a id=__codelineno-100-16 name=__codelineno-100-16 href=#__codelineno-100-16></a>    <span class=s2>&quot;c&quot;</span>
<a id=__codelineno-100-17 name=__codelineno-100-17 href=#__codelineno-100-17></a><span class=p>);</span>
<a id=__codelineno-100-18 name=__codelineno-100-18 href=#__codelineno-100-18></a>
<a id=__codelineno-100-19 name=__codelineno-100-19 href=#__codelineno-100-19></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>join</span><span class=p>(</span>
<a id=__codelineno-100-20 name=__codelineno-100-20 href=#__codelineno-100-20></a>    <span class=nx>Customers</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<a id=__codelineno-100-21 name=__codelineno-100-21 href=#__codelineno-100-21></a>    <span class=s2>&quot;Invoices.inv_cst_id = c.cst_id&quot;</span><span class=p>,</span>
<a id=__codelineno-100-22 name=__codelineno-100-22 href=#__codelineno-100-22></a>    <span class=s2>&quot;c&quot;</span><span class=p>,</span>
<a id=__codelineno-100-23 name=__codelineno-100-23 href=#__codelineno-100-23></a>    <span class=s2>&quot;INNER&quot;</span>
<a id=__codelineno-100-24 name=__codelineno-100-24 href=#__codelineno-100-24></a><span class=p>);</span>
</code></pre></div> <p><div class=highlight><pre><span></span><code><a id=__codelineno-101-1 name=__codelineno-101-1 href=#__codelineno-101-1></a><span class=k>public</span> <span class=k>function</span> <span class=nf>leftJoin</span><span class=p>(</span>
<a id=__codelineno-101-2 name=__codelineno-101-2 href=#__codelineno-101-2></a>    <span class=nx>string</span> <span class=nv>$model</span><span class=p>,</span> 
<a id=__codelineno-101-3 name=__codelineno-101-3 href=#__codelineno-101-3></a>    <span class=nx>string</span> <span class=nv>$conditions</span> <span class=o>=</span> <span class=k>null</span><span class=p>,</span> 
<a id=__codelineno-101-4 name=__codelineno-101-4 href=#__codelineno-101-4></a>    <span class=nx>string</span> <span class=nv>$alias</span> <span class=o>=</span> <span class=k>null</span>
<a id=__codelineno-101-5 name=__codelineno-101-5 href=#__codelineno-101-5></a><span class=p>)</span><span class=o>:</span> <span class=nx>BuilderInterface</span>
</code></pre></div> Adds a <code>LEFT</code> join to the query. The first parameter is the model. The join conditions are automatically calculated, if the relevant relationships have been properly set in the respective models. However, you can set the conditions manually using the second parameter is the conditions, while the third one (if specified) is the alias.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-102-1 name=__codelineno-102-1 href=#__codelineno-102-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-102-2 name=__codelineno-102-2 href=#__codelineno-102-2></a>
<a id=__codelineno-102-3 name=__codelineno-102-3 href=#__codelineno-102-3></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>leftJoin</span><span class=p>(</span>
<a id=__codelineno-102-4 name=__codelineno-102-4 href=#__codelineno-102-4></a>    <span class=nx>Customers</span><span class=o>::</span><span class=na>class</span>
<a id=__codelineno-102-5 name=__codelineno-102-5 href=#__codelineno-102-5></a><span class=p>);</span>
<a id=__codelineno-102-6 name=__codelineno-102-6 href=#__codelineno-102-6></a>
<a id=__codelineno-102-7 name=__codelineno-102-7 href=#__codelineno-102-7></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>leftJoin</span><span class=p>(</span>
<a id=__codelineno-102-8 name=__codelineno-102-8 href=#__codelineno-102-8></a>    <span class=nx>Customers</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<a id=__codelineno-102-9 name=__codelineno-102-9 href=#__codelineno-102-9></a>    <span class=s2>&quot;Invoices.inv_cst_id = Customers.cst_id&quot;</span>
<a id=__codelineno-102-10 name=__codelineno-102-10 href=#__codelineno-102-10></a><span class=p>);</span>
<a id=__codelineno-102-11 name=__codelineno-102-11 href=#__codelineno-102-11></a>
<a id=__codelineno-102-12 name=__codelineno-102-12 href=#__codelineno-102-12></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>leftJoin</span><span class=p>(</span>
<a id=__codelineno-102-13 name=__codelineno-102-13 href=#__codelineno-102-13></a>    <span class=nx>Customers</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<a id=__codelineno-102-14 name=__codelineno-102-14 href=#__codelineno-102-14></a>    <span class=s2>&quot;Invoices.inv_cst_id = c.cst_id&quot;</span><span class=p>,</span>
<a id=__codelineno-102-15 name=__codelineno-102-15 href=#__codelineno-102-15></a>    <span class=s2>&quot;c&quot;</span>
<a id=__codelineno-102-16 name=__codelineno-102-16 href=#__codelineno-102-16></a><span class=p>);</span>
</code></pre></div> <p><div class=highlight><pre><span></span><code><a id=__codelineno-103-1 name=__codelineno-103-1 href=#__codelineno-103-1></a><span class=k>public</span> <span class=k>function</span> <span class=nf>limit</span><span class=p>(</span>
<a id=__codelineno-103-2 name=__codelineno-103-2 href=#__codelineno-103-2></a>    <span class=nx>int</span> <span class=nv>$limit</span><span class=p>,</span> 
<a id=__codelineno-103-3 name=__codelineno-103-3 href=#__codelineno-103-3></a>    <span class=nx>mixed</span> <span class=nv>$offset</span> <span class=o>=</span> <span class=k>null</span>
<a id=__codelineno-103-4 name=__codelineno-103-4 href=#__codelineno-103-4></a><span class=p>)</span><span class=o>:</span> <span class=nx>BuilderInterface</span>
</code></pre></div> Sets a <code>LIMIT</code> clause, optionally an offset clause as the second parameter</p> <div class=highlight><pre><span></span><code><a id=__codelineno-104-1 name=__codelineno-104-1 href=#__codelineno-104-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-104-2 name=__codelineno-104-2 href=#__codelineno-104-2></a>
<a id=__codelineno-104-3 name=__codelineno-104-3 href=#__codelineno-104-3></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>limit</span><span class=p>(</span><span class=mi>100</span><span class=p>);</span>
<a id=__codelineno-104-4 name=__codelineno-104-4 href=#__codelineno-104-4></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>limit</span><span class=p>(</span><span class=mi>100</span><span class=p>,</span> <span class=mi>20</span><span class=p>);</span>
<a id=__codelineno-104-5 name=__codelineno-104-5 href=#__codelineno-104-5></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>limit</span><span class=p>(</span><span class=s2>&quot;100&quot;</span><span class=p>,</span> <span class=s2>&quot;20&quot;</span><span class=p>);</span>
</code></pre></div> <p><div class=highlight><pre><span></span><code><a id=__codelineno-105-1 name=__codelineno-105-1 href=#__codelineno-105-1></a><span class=k>public</span> <span class=k>function</span> <span class=nf>notBetweenHaving</span><span class=p>(</span>
<a id=__codelineno-105-2 name=__codelineno-105-2 href=#__codelineno-105-2></a>    <span class=nx>string</span> <span class=nv>$expr</span><span class=p>,</span> 
<a id=__codelineno-105-3 name=__codelineno-105-3 href=#__codelineno-105-3></a>    <span class=nx>mixed</span> <span class=nv>$minimum</span><span class=p>,</span> 
<a id=__codelineno-105-4 name=__codelineno-105-4 href=#__codelineno-105-4></a>    <span class=nx>mixed</span> <span class=nv>$maximum</span><span class=p>,</span> 
<a id=__codelineno-105-5 name=__codelineno-105-5 href=#__codelineno-105-5></a>    <span class=nx>string</span> <span class=nv>$operator</span> <span class=o>=</span> <span class=nx>BuilderInterface</span><span class=o>::</span><span class=na>OPERATOR_AND</span>
<a id=__codelineno-105-6 name=__codelineno-105-6 href=#__codelineno-105-6></a><span class=p>)</span><span class=o>:</span> <span class=nx>BuilderInterface</span>
</code></pre></div> Appends a <code>NOT BETWEEN</code> condition to the current <code>HAVING</code> conditions clause. The method accepts the expression, minimum and maximum as well as the operator for the <code>NOT BETWEEN</code> (<code>OPERATOR_AND</code> or <code>OPERATOR_OR</code>) </p> <div class=highlight><pre><span></span><code><a id=__codelineno-106-1 name=__codelineno-106-1 href=#__codelineno-106-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-106-2 name=__codelineno-106-2 href=#__codelineno-106-2></a>
<a id=__codelineno-106-3 name=__codelineno-106-3 href=#__codelineno-106-3></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>notBetweenHaving</span><span class=p>(</span>
<a id=__codelineno-106-4 name=__codelineno-106-4 href=#__codelineno-106-4></a>    <span class=s2>&quot;SUM(Invoices.inv_total)&quot;</span><span class=p>,</span>
<a id=__codelineno-106-5 name=__codelineno-106-5 href=#__codelineno-106-5></a>    <span class=mi>1000</span><span class=p>,</span>
<a id=__codelineno-106-6 name=__codelineno-106-6 href=#__codelineno-106-6></a>    <span class=mi>5000</span>
<a id=__codelineno-106-7 name=__codelineno-106-7 href=#__codelineno-106-7></a><span class=p>);</span>
</code></pre></div> <p><div class=highlight><pre><span></span><code><a id=__codelineno-107-1 name=__codelineno-107-1 href=#__codelineno-107-1></a><span class=k>public</span> <span class=k>function</span> <span class=nf>notBetweenWhere</span><span class=p>(</span>
<a id=__codelineno-107-2 name=__codelineno-107-2 href=#__codelineno-107-2></a>    <span class=nx>string</span> <span class=nv>$expr</span><span class=p>,</span> 
<a id=__codelineno-107-3 name=__codelineno-107-3 href=#__codelineno-107-3></a>    <span class=nx>mixed</span> <span class=nv>$minimum</span><span class=p>,</span> 
<a id=__codelineno-107-4 name=__codelineno-107-4 href=#__codelineno-107-4></a>    <span class=nx>mixed</span> <span class=nv>$maximum</span><span class=p>,</span> 
<a id=__codelineno-107-5 name=__codelineno-107-5 href=#__codelineno-107-5></a>    <span class=nx>string</span> <span class=nv>$operator</span> <span class=o>=</span> <span class=nx>BuilderInterface</span><span class=o>::</span><span class=na>OPERATOR_AND</span>
<a id=__codelineno-107-6 name=__codelineno-107-6 href=#__codelineno-107-6></a><span class=p>)</span><span class=o>:</span> <span class=nx>BuilderInterface</span>
</code></pre></div> Appends a <code>NOT BETWEEN</code> condition to the current <code>WHERE</code> conditions clause. The method accepts the expression, minimum and maximum as well as the operator for the <code>NOT BETWEEN</code> (<code>OPERATOR_AND</code> or <code>OPERATOR_OR</code>) </p> <div class=highlight><pre><span></span><code><a id=__codelineno-108-1 name=__codelineno-108-1 href=#__codelineno-108-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-108-2 name=__codelineno-108-2 href=#__codelineno-108-2></a>
<a id=__codelineno-108-3 name=__codelineno-108-3 href=#__codelineno-108-3></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>notBetweenWhere</span><span class=p>(</span>
<a id=__codelineno-108-4 name=__codelineno-108-4 href=#__codelineno-108-4></a>    <span class=s2>&quot;Invoices.inv_total&quot;</span><span class=p>,</span>
<a id=__codelineno-108-5 name=__codelineno-108-5 href=#__codelineno-108-5></a>    <span class=mi>1000</span><span class=p>,</span>
<a id=__codelineno-108-6 name=__codelineno-108-6 href=#__codelineno-108-6></a>    <span class=mi>5000</span>
<a id=__codelineno-108-7 name=__codelineno-108-7 href=#__codelineno-108-7></a><span class=p>);</span>
</code></pre></div> <p><div class=highlight><pre><span></span><code><a id=__codelineno-109-1 name=__codelineno-109-1 href=#__codelineno-109-1></a><span class=k>public</span> <span class=k>function</span> <span class=nf>notInHaving</span><span class=p>(</span>
<a id=__codelineno-109-2 name=__codelineno-109-2 href=#__codelineno-109-2></a>    <span class=nx>string</span> <span class=nv>$expr</span><span class=p>,</span> 
<a id=__codelineno-109-3 name=__codelineno-109-3 href=#__codelineno-109-3></a>    <span class=k>array</span> <span class=nv>$values</span><span class=p>,</span> 
<a id=__codelineno-109-4 name=__codelineno-109-4 href=#__codelineno-109-4></a>    <span class=nx>string</span> <span class=nv>$operator</span> <span class=o>=</span> <span class=nx>BuilderInterface</span><span class=o>::</span><span class=na>OPERATOR_AND</span>
<a id=__codelineno-109-5 name=__codelineno-109-5 href=#__codelineno-109-5></a><span class=p>)</span><span class=o>:</span> <span class=nx>BuilderInterface</span>
</code></pre></div> Appends a <code>NOT IN</code> condition to the current <code>HAVING</code> conditions clause. The method accepts the expression, an array with the <code>IN</code> values as well as the operator for the <code>NOT IN</code> (<code>OPERATOR_AND</code> or <code>OPERATOR_OR</code>) </p> <div class=highlight><pre><span></span><code><a id=__codelineno-110-1 name=__codelineno-110-1 href=#__codelineno-110-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-110-2 name=__codelineno-110-2 href=#__codelineno-110-2></a>
<a id=__codelineno-110-3 name=__codelineno-110-3 href=#__codelineno-110-3></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>notInHaving</span><span class=p>(</span>
<a id=__codelineno-110-4 name=__codelineno-110-4 href=#__codelineno-110-4></a>    <span class=s2>&quot;SUM(Invoices.inv_total)&quot;</span><span class=p>,</span>
<a id=__codelineno-110-5 name=__codelineno-110-5 href=#__codelineno-110-5></a>    <span class=p>[</span>
<a id=__codelineno-110-6 name=__codelineno-110-6 href=#__codelineno-110-6></a>        <span class=mi>1000</span><span class=p>,</span>
<a id=__codelineno-110-7 name=__codelineno-110-7 href=#__codelineno-110-7></a>        <span class=mi>5000</span><span class=p>,</span>
<a id=__codelineno-110-8 name=__codelineno-110-8 href=#__codelineno-110-8></a>    <span class=p>]</span>
<a id=__codelineno-110-9 name=__codelineno-110-9 href=#__codelineno-110-9></a><span class=p>);</span>
</code></pre></div> <p><div class=highlight><pre><span></span><code><a id=__codelineno-111-1 name=__codelineno-111-1 href=#__codelineno-111-1></a><span class=k>public</span> <span class=k>function</span> <span class=nf>notInWhere</span><span class=p>(</span>
<a id=__codelineno-111-2 name=__codelineno-111-2 href=#__codelineno-111-2></a>    <span class=nx>string</span> <span class=nv>$expr</span><span class=p>,</span> 
<a id=__codelineno-111-3 name=__codelineno-111-3 href=#__codelineno-111-3></a>    <span class=k>array</span> <span class=nv>$values</span><span class=p>,</span>  
<a id=__codelineno-111-4 name=__codelineno-111-4 href=#__codelineno-111-4></a>    <span class=nx>string</span> <span class=nv>$operator</span> <span class=o>=</span> <span class=nx>BuilderInterface</span><span class=o>::</span><span class=na>OPERATOR_AND</span>
<a id=__codelineno-111-5 name=__codelineno-111-5 href=#__codelineno-111-5></a><span class=p>)</span><span class=o>:</span> <span class=nx>BuilderInterface</span>
</code></pre></div> Appends an <code>NOT IN</code> condition to the current <code>WHERE</code> conditions clause. The method accepts the expression, an array with the values for the <code>IN</code> clause as well as the operator for the <code>NOT IN</code> (<code>OPERATOR_AND</code> or <code>OPERATOR_OR</code>) </p> <div class=highlight><pre><span></span><code><a id=__codelineno-112-1 name=__codelineno-112-1 href=#__codelineno-112-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-112-2 name=__codelineno-112-2 href=#__codelineno-112-2></a>
<a id=__codelineno-112-3 name=__codelineno-112-3 href=#__codelineno-112-3></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>notInWhere</span><span class=p>(</span>
<a id=__codelineno-112-4 name=__codelineno-112-4 href=#__codelineno-112-4></a>    <span class=s2>&quot;Invoices.inv_id&quot;</span><span class=p>,</span>
<a id=__codelineno-112-5 name=__codelineno-112-5 href=#__codelineno-112-5></a>    <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>5</span><span class=p>]</span>
<a id=__codelineno-112-6 name=__codelineno-112-6 href=#__codelineno-112-6></a><span class=p>);</span>
</code></pre></div> <p><div class=highlight><pre><span></span><code><a id=__codelineno-113-1 name=__codelineno-113-1 href=#__codelineno-113-1></a><span class=k>public</span> <span class=k>function</span> <span class=nf>offset</span><span class=p>(</span><span class=nx>int</span> <span class=nv>$offset</span><span class=p>)</span><span class=o>:</span> <span class=nx>BuilderInterface</span>
</code></pre></div> Sets an <code>OFFSET</code> clause</p> <div class=highlight><pre><span></span><code><a id=__codelineno-114-1 name=__codelineno-114-1 href=#__codelineno-114-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-114-2 name=__codelineno-114-2 href=#__codelineno-114-2></a>
<a id=__codelineno-114-3 name=__codelineno-114-3 href=#__codelineno-114-3></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>offset</span><span class=p>(</span><span class=mi>30</span><span class=p>);</span>
</code></pre></div> <p><div class=highlight><pre><span></span><code><a id=__codelineno-115-1 name=__codelineno-115-1 href=#__codelineno-115-1></a><span class=k>public</span> <span class=k>function</span> <span class=nf>orderBy</span><span class=p>(</span><span class=nx>mixed</span> <span class=nv>$orderBy</span><span class=p>)</span><span class=o>:</span> <span class=nx>BuilderInterface</span>
</code></pre></div> Sets an <code>ORDER BY</code> condition clause. The parameter can be a string or an array. You can also suffix each column with <code>ASC</code> or <code>DESC</code> to define the order direction.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-116-1 name=__codelineno-116-1 href=#__codelineno-116-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-116-2 name=__codelineno-116-2 href=#__codelineno-116-2></a>
<a id=__codelineno-116-3 name=__codelineno-116-3 href=#__codelineno-116-3></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>orderBy</span><span class=p>(</span><span class=s2>&quot;Invoices.inv_total&quot;</span><span class=p>);</span>
<a id=__codelineno-116-4 name=__codelineno-116-4 href=#__codelineno-116-4></a>
<a id=__codelineno-116-5 name=__codelineno-116-5 href=#__codelineno-116-5></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>orderBy</span><span class=p>(</span>
<a id=__codelineno-116-6 name=__codelineno-116-6 href=#__codelineno-116-6></a>    <span class=p>[</span>
<a id=__codelineno-116-7 name=__codelineno-116-7 href=#__codelineno-116-7></a>        <span class=s2>&quot;Invoices.inv_total&quot;</span><span class=p>,</span>
<a id=__codelineno-116-8 name=__codelineno-116-8 href=#__codelineno-116-8></a>    <span class=p>]</span>
<a id=__codelineno-116-9 name=__codelineno-116-9 href=#__codelineno-116-9></a><span class=p>);</span>
<a id=__codelineno-116-10 name=__codelineno-116-10 href=#__codelineno-116-10></a>
<a id=__codelineno-116-11 name=__codelineno-116-11 href=#__codelineno-116-11></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>orderBy</span><span class=p>(</span>
<a id=__codelineno-116-12 name=__codelineno-116-12 href=#__codelineno-116-12></a>    <span class=p>[</span>
<a id=__codelineno-116-13 name=__codelineno-116-13 href=#__codelineno-116-13></a>        <span class=s2>&quot;Invoices.inv_total DESC&quot;</span><span class=p>,</span>
<a id=__codelineno-116-14 name=__codelineno-116-14 href=#__codelineno-116-14></a>    <span class=p>]</span>
<a id=__codelineno-116-15 name=__codelineno-116-15 href=#__codelineno-116-15></a><span class=p>);</span>
</code></pre></div> <p><div class=highlight><pre><span></span><code><a id=__codelineno-117-1 name=__codelineno-117-1 href=#__codelineno-117-1></a><span class=k>public</span> <span class=k>function</span> <span class=nf>orHaving</span><span class=p>(</span>
<a id=__codelineno-117-2 name=__codelineno-117-2 href=#__codelineno-117-2></a>    <span class=nx>mixed</span> <span class=nv>$conditions</span><span class=p>,</span> 
<a id=__codelineno-117-3 name=__codelineno-117-3 href=#__codelineno-117-3></a>    <span class=k>array</span> <span class=nv>$bindParams</span> <span class=o>=</span> <span class=p>[],</span> 
<a id=__codelineno-117-4 name=__codelineno-117-4 href=#__codelineno-117-4></a>    <span class=k>array</span> <span class=nv>$bindTypes</span> <span class=o>=</span> <span class=p>[]</span>
<a id=__codelineno-117-5 name=__codelineno-117-5 href=#__codelineno-117-5></a><span class=p>)</span><span class=o>:</span> <span class=nx>BuilderInterface</span>
</code></pre></div> Appends a condition to the current <code>HAVING</code> condition clause using an <code>OR</code> operator. The first parameter is the expression. The second parameter is an array with the bound parameter name as the key. The last parameter is an array that defines the bound type for each parameter. The bound types are <a href=https://www.php.net/manual/en/pdo.constants.php>PDO constants</a>.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-118-1 name=__codelineno-118-1 href=#__codelineno-118-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-118-2 name=__codelineno-118-2 href=#__codelineno-118-2></a>
<a id=__codelineno-118-3 name=__codelineno-118-3 href=#__codelineno-118-3></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>orHaving</span><span class=p>(</span><span class=s2>&quot;SUM(Invoices.inv_total) &gt; 1000&quot;</span><span class=p>);</span>
<a id=__codelineno-118-4 name=__codelineno-118-4 href=#__codelineno-118-4></a>
<a id=__codelineno-118-5 name=__codelineno-118-5 href=#__codelineno-118-5></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>orHaving</span><span class=p>(</span>
<a id=__codelineno-118-6 name=__codelineno-118-6 href=#__codelineno-118-6></a>    <span class=s2>&quot;SUM(Invoices.inv_total) &gt; :sum:&quot;</span><span class=p>,</span>
<a id=__codelineno-118-7 name=__codelineno-118-7 href=#__codelineno-118-7></a>    <span class=p>[</span>
<a id=__codelineno-118-8 name=__codelineno-118-8 href=#__codelineno-118-8></a>        <span class=s2>&quot;sum&quot;</span> <span class=o>=&gt;</span> <span class=mi>1000</span><span class=p>,</span>
<a id=__codelineno-118-9 name=__codelineno-118-9 href=#__codelineno-118-9></a>    <span class=p>],</span>
<a id=__codelineno-118-10 name=__codelineno-118-10 href=#__codelineno-118-10></a>    <span class=p>[</span>
<a id=__codelineno-118-11 name=__codelineno-118-11 href=#__codelineno-118-11></a>        <span class=s2>&quot;sum&quot;</span> <span class=o>=&gt;</span> <span class=nx>PDO</span><span class=o>::</span><span class=na>PARAM_INT</span><span class=p>,</span>
<a id=__codelineno-118-12 name=__codelineno-118-12 href=#__codelineno-118-12></a>    <span class=p>]</span>
<a id=__codelineno-118-13 name=__codelineno-118-13 href=#__codelineno-118-13></a><span class=p>);</span>
</code></pre></div> <p><div class=highlight><pre><span></span><code><a id=__codelineno-119-1 name=__codelineno-119-1 href=#__codelineno-119-1></a><span class=k>public</span> <span class=k>function</span> <span class=nf>orWhere</span><span class=p>(</span>
<a id=__codelineno-119-2 name=__codelineno-119-2 href=#__codelineno-119-2></a>    <span class=nx>mixed</span> <span class=nv>$conditions</span><span class=p>,</span> 
<a id=__codelineno-119-3 name=__codelineno-119-3 href=#__codelineno-119-3></a>    <span class=k>array</span> <span class=nv>$bindParams</span> <span class=o>=</span> <span class=p>[],</span> 
<a id=__codelineno-119-4 name=__codelineno-119-4 href=#__codelineno-119-4></a>    <span class=k>array</span> <span class=nv>$bindTypes</span> <span class=o>=</span> <span class=p>[]</span>
<a id=__codelineno-119-5 name=__codelineno-119-5 href=#__codelineno-119-5></a><span class=p>)</span><span class=o>:</span> <span class=nx>BuilderInterface</span>
</code></pre></div> Appends a condition to the current <code>WHERE</code> condition clause using an <code>OR</code> operator. The first parameter is the expression. The second parameter is an array with the bound parameter name as the key. The last parameter is an array that defines the bound type for each parameter. The bound types are <a href=https://www.php.net/manual/en/pdo.constants.php>PDO constants</a>.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-120-1 name=__codelineno-120-1 href=#__codelineno-120-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-120-2 name=__codelineno-120-2 href=#__codelineno-120-2></a>
<a id=__codelineno-120-3 name=__codelineno-120-3 href=#__codelineno-120-3></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>orWhere</span><span class=p>(</span><span class=s2>&quot;SUM(Invoices.inv_total) &gt; 1000&quot;</span><span class=p>);</span>
<a id=__codelineno-120-4 name=__codelineno-120-4 href=#__codelineno-120-4></a>
<a id=__codelineno-120-5 name=__codelineno-120-5 href=#__codelineno-120-5></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>orWhere</span><span class=p>(</span>
<a id=__codelineno-120-6 name=__codelineno-120-6 href=#__codelineno-120-6></a>    <span class=s2>&quot;SUM(Invoices.inv_total) &gt; :sum:&quot;</span><span class=p>,</span>
<a id=__codelineno-120-7 name=__codelineno-120-7 href=#__codelineno-120-7></a>    <span class=p>[</span>
<a id=__codelineno-120-8 name=__codelineno-120-8 href=#__codelineno-120-8></a>        <span class=s2>&quot;sum&quot;</span> <span class=o>=&gt;</span> <span class=mi>1000</span><span class=p>,</span>
<a id=__codelineno-120-9 name=__codelineno-120-9 href=#__codelineno-120-9></a>    <span class=p>],</span>
<a id=__codelineno-120-10 name=__codelineno-120-10 href=#__codelineno-120-10></a>    <span class=p>[</span>
<a id=__codelineno-120-11 name=__codelineno-120-11 href=#__codelineno-120-11></a>        <span class=s2>&quot;sum&quot;</span> <span class=o>=&gt;</span> <span class=nx>PDO</span><span class=o>::</span><span class=na>PARAM_INT</span><span class=p>,</span>
<a id=__codelineno-120-12 name=__codelineno-120-12 href=#__codelineno-120-12></a>    <span class=p>]</span>
<a id=__codelineno-120-13 name=__codelineno-120-13 href=#__codelineno-120-13></a><span class=p>);</span>
</code></pre></div> <p><div class=highlight><pre><span></span><code><a id=__codelineno-121-1 name=__codelineno-121-1 href=#__codelineno-121-1></a><span class=k>public</span> <span class=k>function</span> <span class=nf>rightJoin</span><span class=p>(</span>
<a id=__codelineno-121-2 name=__codelineno-121-2 href=#__codelineno-121-2></a>    <span class=nx>string</span> <span class=nv>$model</span><span class=p>,</span> 
<a id=__codelineno-121-3 name=__codelineno-121-3 href=#__codelineno-121-3></a>    <span class=nx>string</span> <span class=nv>$conditions</span> <span class=o>=</span> <span class=k>null</span><span class=p>,</span> 
<a id=__codelineno-121-4 name=__codelineno-121-4 href=#__codelineno-121-4></a>    <span class=nx>string</span> <span class=nv>$alias</span> <span class=o>=</span> <span class=k>null</span>
<a id=__codelineno-121-5 name=__codelineno-121-5 href=#__codelineno-121-5></a><span class=p>)</span><span class=o>:</span> <span class=nx>BuilderInterface</span>
</code></pre></div> Adds a <code>RIGHT</code> join to the query. The first parameter is the model. The join conditions are automatically calculated, if the relevant relationships have been properly set in the respective models. However, you can set the conditions manually using the second parameter is the conditions, while the third one (if specified) is the alias.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-122-1 name=__codelineno-122-1 href=#__codelineno-122-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-122-2 name=__codelineno-122-2 href=#__codelineno-122-2></a>
<a id=__codelineno-122-3 name=__codelineno-122-3 href=#__codelineno-122-3></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>rightJoin</span><span class=p>(</span>
<a id=__codelineno-122-4 name=__codelineno-122-4 href=#__codelineno-122-4></a>    <span class=nx>Customers</span><span class=o>::</span><span class=na>class</span>
<a id=__codelineno-122-5 name=__codelineno-122-5 href=#__codelineno-122-5></a><span class=p>);</span>
<a id=__codelineno-122-6 name=__codelineno-122-6 href=#__codelineno-122-6></a>
<a id=__codelineno-122-7 name=__codelineno-122-7 href=#__codelineno-122-7></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>rightJoin</span><span class=p>(</span>
<a id=__codelineno-122-8 name=__codelineno-122-8 href=#__codelineno-122-8></a>    <span class=nx>Customers</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<a id=__codelineno-122-9 name=__codelineno-122-9 href=#__codelineno-122-9></a>    <span class=s2>&quot;Invoices.inv_cst_id = Customers.cst_id&quot;</span>
<a id=__codelineno-122-10 name=__codelineno-122-10 href=#__codelineno-122-10></a><span class=p>);</span>
<a id=__codelineno-122-11 name=__codelineno-122-11 href=#__codelineno-122-11></a>
<a id=__codelineno-122-12 name=__codelineno-122-12 href=#__codelineno-122-12></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>rightJoin</span><span class=p>(</span>
<a id=__codelineno-122-13 name=__codelineno-122-13 href=#__codelineno-122-13></a>    <span class=nx>Customers</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<a id=__codelineno-122-14 name=__codelineno-122-14 href=#__codelineno-122-14></a>    <span class=s2>&quot;Invoices.inv_cst_id = c.cst_id&quot;</span><span class=p>,</span>
<a id=__codelineno-122-15 name=__codelineno-122-15 href=#__codelineno-122-15></a>    <span class=s2>&quot;c&quot;</span>
<a id=__codelineno-122-16 name=__codelineno-122-16 href=#__codelineno-122-16></a><span class=p>);</span>
</code></pre></div> <p><div class=highlight><pre><span></span><code><a id=__codelineno-123-1 name=__codelineno-123-1 href=#__codelineno-123-1></a><span class=k>public</span> <span class=k>function</span> <span class=nf>setBindParams</span><span class=p>(</span>
<a id=__codelineno-123-2 name=__codelineno-123-2 href=#__codelineno-123-2></a>    <span class=k>array</span> <span class=nv>$bindParams</span><span class=p>,</span> 
<a id=__codelineno-123-3 name=__codelineno-123-3 href=#__codelineno-123-3></a>    <span class=nx>bool</span> <span class=nv>$merge</span> <span class=o>=</span> <span class=k>false</span>
<a id=__codelineno-123-4 name=__codelineno-123-4 href=#__codelineno-123-4></a><span class=p>)</span><span class=o>:</span> <span class=nx>BuilderInterface</span>
</code></pre></div> Set default bind parameters. The first parameter is an array, where the key is the bound parameter name or number. The second parameter is a boolean, instructing the component to merge the supplied parameters to the existing stack or not.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-124-1 name=__codelineno-124-1 href=#__codelineno-124-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-124-2 name=__codelineno-124-2 href=#__codelineno-124-2></a>
<a id=__codelineno-124-3 name=__codelineno-124-3 href=#__codelineno-124-3></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>setBindParams</span><span class=p>(</span>
<a id=__codelineno-124-4 name=__codelineno-124-4 href=#__codelineno-124-4></a>    <span class=p>[</span>
<a id=__codelineno-124-5 name=__codelineno-124-5 href=#__codelineno-124-5></a>        <span class=s2>&quot;sum&quot;</span> <span class=o>=&gt;</span> <span class=mi>1000</span><span class=p>,</span>
<a id=__codelineno-124-6 name=__codelineno-124-6 href=#__codelineno-124-6></a>    <span class=p>]</span>
<a id=__codelineno-124-7 name=__codelineno-124-7 href=#__codelineno-124-7></a><span class=p>);</span>
<a id=__codelineno-124-8 name=__codelineno-124-8 href=#__codelineno-124-8></a>
<a id=__codelineno-124-9 name=__codelineno-124-9 href=#__codelineno-124-9></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>setBindParams</span><span class=p>(</span>
<a id=__codelineno-124-10 name=__codelineno-124-10 href=#__codelineno-124-10></a>    <span class=p>[</span>
<a id=__codelineno-124-11 name=__codelineno-124-11 href=#__codelineno-124-11></a>        <span class=s2>&quot;cst_id&quot;</span> <span class=o>=&gt;</span> <span class=mi>10</span><span class=p>,</span>
<a id=__codelineno-124-12 name=__codelineno-124-12 href=#__codelineno-124-12></a>    <span class=p>],</span>
<a id=__codelineno-124-13 name=__codelineno-124-13 href=#__codelineno-124-13></a>    <span class=k>true</span>
<a id=__codelineno-124-14 name=__codelineno-124-14 href=#__codelineno-124-14></a><span class=p>);</span>
<a id=__codelineno-124-15 name=__codelineno-124-15 href=#__codelineno-124-15></a>
<a id=__codelineno-124-16 name=__codelineno-124-16 href=#__codelineno-124-16></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>where</span><span class=p>(</span>
<a id=__codelineno-124-17 name=__codelineno-124-17 href=#__codelineno-124-17></a>    <span class=s2>&quot;SUM(Invoices.inv_total) &gt; :sum: AND inv_cst_id &gt; :cst_id:&quot;</span><span class=p>,</span>
<a id=__codelineno-124-18 name=__codelineno-124-18 href=#__codelineno-124-18></a>    <span class=p>[</span>
<a id=__codelineno-124-19 name=__codelineno-124-19 href=#__codelineno-124-19></a>        <span class=s2>&quot;sum&quot;</span>    <span class=o>=&gt;</span> <span class=nx>PDO</span><span class=o>::</span><span class=na>PARAM_INT</span><span class=p>,</span>
<a id=__codelineno-124-20 name=__codelineno-124-20 href=#__codelineno-124-20></a>        <span class=s2>&quot;cst_id&quot;</span> <span class=o>=&gt;</span> <span class=nx>PDO</span><span class=o>::</span><span class=na>PARAM_INT</span><span class=p>,</span>
<a id=__codelineno-124-21 name=__codelineno-124-21 href=#__codelineno-124-21></a>    <span class=p>]</span>
<a id=__codelineno-124-22 name=__codelineno-124-22 href=#__codelineno-124-22></a><span class=p>);</span>
</code></pre></div> <p><div class=highlight><pre><span></span><code><a id=__codelineno-125-1 name=__codelineno-125-1 href=#__codelineno-125-1></a><span class=k>public</span> <span class=k>function</span> <span class=nf>setBindTypes</span><span class=p>(</span>
<a id=__codelineno-125-2 name=__codelineno-125-2 href=#__codelineno-125-2></a>    <span class=k>array</span> <span class=nx>bindTypes</span><span class=p>,</span> 
<a id=__codelineno-125-3 name=__codelineno-125-3 href=#__codelineno-125-3></a>    <span class=nx>bool</span> <span class=nv>$merge</span> <span class=o>=</span> <span class=k>false</span>
<a id=__codelineno-125-4 name=__codelineno-125-4 href=#__codelineno-125-4></a><span class=p>)</span><span class=o>:</span> <span class=nx>BuilderInterface</span>
</code></pre></div> Set default bind types. The first parameter is an array, where the key is the bound parameter name or number. The second parameter is a boolean, instructing the component to merge the supplied parameters to the existing stack or not. The bound types are <a href=https://www.php.net/manual/en/pdo.constants.php>PDO constants</a>.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-126-1 name=__codelineno-126-1 href=#__codelineno-126-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-126-2 name=__codelineno-126-2 href=#__codelineno-126-2></a>
<a id=__codelineno-126-3 name=__codelineno-126-3 href=#__codelineno-126-3></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>setBindParams</span><span class=p>(</span>
<a id=__codelineno-126-4 name=__codelineno-126-4 href=#__codelineno-126-4></a>    <span class=p>[</span>
<a id=__codelineno-126-5 name=__codelineno-126-5 href=#__codelineno-126-5></a>        <span class=s2>&quot;sum&quot;</span> <span class=o>=&gt;</span> <span class=mi>1000</span><span class=p>,</span>
<a id=__codelineno-126-6 name=__codelineno-126-6 href=#__codelineno-126-6></a>    <span class=p>]</span>
<a id=__codelineno-126-7 name=__codelineno-126-7 href=#__codelineno-126-7></a><span class=p>);</span>
<a id=__codelineno-126-8 name=__codelineno-126-8 href=#__codelineno-126-8></a>
<a id=__codelineno-126-9 name=__codelineno-126-9 href=#__codelineno-126-9></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>setBindParams</span><span class=p>(</span>
<a id=__codelineno-126-10 name=__codelineno-126-10 href=#__codelineno-126-10></a>    <span class=p>[</span>
<a id=__codelineno-126-11 name=__codelineno-126-11 href=#__codelineno-126-11></a>        <span class=s2>&quot;cst_id&quot;</span> <span class=o>=&gt;</span> <span class=mi>10</span><span class=p>,</span>
<a id=__codelineno-126-12 name=__codelineno-126-12 href=#__codelineno-126-12></a>    <span class=p>],</span>
<a id=__codelineno-126-13 name=__codelineno-126-13 href=#__codelineno-126-13></a>    <span class=k>true</span>
<a id=__codelineno-126-14 name=__codelineno-126-14 href=#__codelineno-126-14></a><span class=p>);</span>
<a id=__codelineno-126-15 name=__codelineno-126-15 href=#__codelineno-126-15></a>
<a id=__codelineno-126-16 name=__codelineno-126-16 href=#__codelineno-126-16></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>setBindTypes</span><span class=p>(</span>
<a id=__codelineno-126-17 name=__codelineno-126-17 href=#__codelineno-126-17></a>    <span class=p>[</span>
<a id=__codelineno-126-18 name=__codelineno-126-18 href=#__codelineno-126-18></a>        <span class=s2>&quot;sum&quot;</span> <span class=o>=&gt;</span> <span class=nx>PDO</span><span class=o>::</span><span class=na>PARAM_INT</span><span class=p>,</span>
<a id=__codelineno-126-19 name=__codelineno-126-19 href=#__codelineno-126-19></a>    <span class=p>]</span>
<a id=__codelineno-126-20 name=__codelineno-126-20 href=#__codelineno-126-20></a><span class=p>);</span>
<a id=__codelineno-126-21 name=__codelineno-126-21 href=#__codelineno-126-21></a>
<a id=__codelineno-126-22 name=__codelineno-126-22 href=#__codelineno-126-22></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>setBindTypes</span><span class=p>(</span>
<a id=__codelineno-126-23 name=__codelineno-126-23 href=#__codelineno-126-23></a>    <span class=p>[</span>
<a id=__codelineno-126-24 name=__codelineno-126-24 href=#__codelineno-126-24></a>        <span class=s2>&quot;cst_id&quot;</span> <span class=o>=&gt;</span> <span class=nx>PDO</span><span class=o>::</span><span class=na>PARAM_INT</span><span class=p>,</span>
<a id=__codelineno-126-25 name=__codelineno-126-25 href=#__codelineno-126-25></a>    <span class=p>],</span>
<a id=__codelineno-126-26 name=__codelineno-126-26 href=#__codelineno-126-26></a>    <span class=k>true</span>
<a id=__codelineno-126-27 name=__codelineno-126-27 href=#__codelineno-126-27></a><span class=p>);</span>
<a id=__codelineno-126-28 name=__codelineno-126-28 href=#__codelineno-126-28></a>
<a id=__codelineno-126-29 name=__codelineno-126-29 href=#__codelineno-126-29></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>where</span><span class=p>(</span>
<a id=__codelineno-126-30 name=__codelineno-126-30 href=#__codelineno-126-30></a>    <span class=s2>&quot;SUM(Invoices.inv_total) &gt; :sum: AND inv_cst_id &gt; :cst_id:&quot;</span>
<a id=__codelineno-126-31 name=__codelineno-126-31 href=#__codelineno-126-31></a><span class=p>);</span>
</code></pre></div> <p><div class=highlight><pre><span></span><code><a id=__codelineno-127-1 name=__codelineno-127-1 href=#__codelineno-127-1></a><span class=k>public</span> <span class=k>function</span> <span class=nf>where</span><span class=p>(</span>
<a id=__codelineno-127-2 name=__codelineno-127-2 href=#__codelineno-127-2></a>    <span class=nx>mixed</span> <span class=nv>$conditions</span><span class=p>,</span> 
<a id=__codelineno-127-3 name=__codelineno-127-3 href=#__codelineno-127-3></a>    <span class=k>array</span> <span class=nv>$bindParams</span> <span class=o>=</span> <span class=p>[],</span> 
<a id=__codelineno-127-4 name=__codelineno-127-4 href=#__codelineno-127-4></a>    <span class=k>array</span> <span class=nv>$bindTypes</span> <span class=o>=</span> <span class=p>[]</span>
<a id=__codelineno-127-5 name=__codelineno-127-5 href=#__codelineno-127-5></a><span class=p>)</span><span class=o>:</span> <span class=nx>BuilderInterface</span>
</code></pre></div> Sets the <code>WHERE</code> condition clause. The first parameter is the expression. The second parameter is an array with the bound parameter name as the key. The last parameter is an array that defines the bound type for each parameter. The bound types are <a href=https://www.php.net/manual/en/pdo.constants.php>PDO constants</a>.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-128-1 name=__codelineno-128-1 href=#__codelineno-128-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-128-2 name=__codelineno-128-2 href=#__codelineno-128-2></a>
<a id=__codelineno-128-3 name=__codelineno-128-3 href=#__codelineno-128-3></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>where</span><span class=p>(</span><span class=s2>&quot;SUM(Invoices.inv_total) &gt; 1000&quot;</span><span class=p>);</span>
<a id=__codelineno-128-4 name=__codelineno-128-4 href=#__codelineno-128-4></a>
<a id=__codelineno-128-5 name=__codelineno-128-5 href=#__codelineno-128-5></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>where</span><span class=p>(</span>
<a id=__codelineno-128-6 name=__codelineno-128-6 href=#__codelineno-128-6></a>    <span class=s2>&quot;SUM(Invoices.inv_total) &gt; :sum:&quot;</span><span class=p>,</span>
<a id=__codelineno-128-7 name=__codelineno-128-7 href=#__codelineno-128-7></a>    <span class=p>[</span>
<a id=__codelineno-128-8 name=__codelineno-128-8 href=#__codelineno-128-8></a>        <span class=s2>&quot;sum&quot;</span> <span class=o>=&gt;</span> <span class=mi>1000</span><span class=p>,</span>
<a id=__codelineno-128-9 name=__codelineno-128-9 href=#__codelineno-128-9></a>    <span class=p>],</span>
<a id=__codelineno-128-10 name=__codelineno-128-10 href=#__codelineno-128-10></a>    <span class=p>[</span>
<a id=__codelineno-128-11 name=__codelineno-128-11 href=#__codelineno-128-11></a>        <span class=s2>&quot;sum&quot;</span> <span class=o>=&gt;</span> <span class=nx>PDO</span><span class=o>::</span><span class=na>PARAM_INT</span><span class=p>,</span>
<a id=__codelineno-128-12 name=__codelineno-128-12 href=#__codelineno-128-12></a>    <span class=p>]</span>
<a id=__codelineno-128-13 name=__codelineno-128-13 href=#__codelineno-128-13></a><span class=p>);</span>
</code></pre></div> <h3 id=examples>Examples<a class=headerlink href=#examples title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-129-1 name=__codelineno-129-1 href=#__codelineno-129-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-129-2 name=__codelineno-129-2 href=#__codelineno-129-2></a>
<a id=__codelineno-129-3 name=__codelineno-129-3 href=#__codelineno-129-3></a><span class=c1>// SELECT </span>
<a id=__codelineno-129-4 name=__codelineno-129-4 href=#__codelineno-129-4></a><span class=c1>//      Invoices.* </span>
<a id=__codelineno-129-5 name=__codelineno-129-5 href=#__codelineno-129-5></a><span class=c1>// FROM </span>
<a id=__codelineno-129-6 name=__codelineno-129-6 href=#__codelineno-129-6></a><span class=c1>//      Invoices</span>
<a id=__codelineno-129-7 name=__codelineno-129-7 href=#__codelineno-129-7></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>from</span><span class=p>(</span><span class=nx>Invoices</span><span class=o>::</span><span class=na>class</span><span class=p>);</span>
<a id=__codelineno-129-8 name=__codelineno-129-8 href=#__codelineno-129-8></a>
<a id=__codelineno-129-9 name=__codelineno-129-9 href=#__codelineno-129-9></a><span class=c1>// SELECT </span>
<a id=__codelineno-129-10 name=__codelineno-129-10 href=#__codelineno-129-10></a><span class=c1>//      Invoices*, </span>
<a id=__codelineno-129-11 name=__codelineno-129-11 href=#__codelineno-129-11></a><span class=c1>//      Customers.* </span>
<a id=__codelineno-129-12 name=__codelineno-129-12 href=#__codelineno-129-12></a><span class=c1>// FROM </span>
<a id=__codelineno-129-13 name=__codelineno-129-13 href=#__codelineno-129-13></a><span class=c1>//      Invoices, </span>
<a id=__codelineno-129-14 name=__codelineno-129-14 href=#__codelineno-129-14></a><span class=c1>//      Customers</span>
<a id=__codelineno-129-15 name=__codelineno-129-15 href=#__codelineno-129-15></a><span class=nv>$builder</span><span class=o>-&gt;</span><span class=na>from</span><span class=p>(</span>
<a id=__codelineno-129-16 name=__codelineno-129-16 href=#__codelineno-129-16></a>    <span class=p>[</span>
<a id=__codelineno-129-17 name=__codelineno-129-17 href=#__codelineno-129-17></a>        <span class=nx>Invoices</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<a id=__codelineno-129-18 name=__codelineno-129-18 href=#__codelineno-129-18></a>        <span class=nx>Customers</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<a id=__codelineno-129-19 name=__codelineno-129-19 href=#__codelineno-129-19></a>    <span class=p>]</span>
<a id=__codelineno-129-20 name=__codelineno-129-20 href=#__codelineno-129-20></a><span class=p>);</span>
<a id=__codelineno-129-21 name=__codelineno-129-21 href=#__codelineno-129-21></a>
<a id=__codelineno-129-22 name=__codelineno-129-22 href=#__codelineno-129-22></a><span class=c1>// SELECT </span>
<a id=__codelineno-129-23 name=__codelineno-129-23 href=#__codelineno-129-23></a><span class=c1>//      Invoices.* </span>
<a id=__codelineno-129-24 name=__codelineno-129-24 href=#__codelineno-129-24></a><span class=c1>// FROM </span>
<a id=__codelineno-129-25 name=__codelineno-129-25 href=#__codelineno-129-25></a><span class=c1>//      Invoices</span>
<a id=__codelineno-129-26 name=__codelineno-129-26 href=#__codelineno-129-26></a><span class=nv>$builder</span>
<a id=__codelineno-129-27 name=__codelineno-129-27 href=#__codelineno-129-27></a>    <span class=o>-&gt;</span><span class=na>columns</span><span class=p>(</span><span class=s1>&#39;*&#39;</span><span class=p>)</span>
<a id=__codelineno-129-28 name=__codelineno-129-28 href=#__codelineno-129-28></a>    <span class=o>-&gt;</span><span class=na>from</span><span class=p>(</span><span class=nx>Invoices</span><span class=o>::</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-129-29 name=__codelineno-129-29 href=#__codelineno-129-29></a><span class=p>;</span>
<a id=__codelineno-129-30 name=__codelineno-129-30 href=#__codelineno-129-30></a>
<a id=__codelineno-129-31 name=__codelineno-129-31 href=#__codelineno-129-31></a><span class=c1>// SELECT </span>
<a id=__codelineno-129-32 name=__codelineno-129-32 href=#__codelineno-129-32></a><span class=c1>//      Invoices.inv_id </span>
<a id=__codelineno-129-33 name=__codelineno-129-33 href=#__codelineno-129-33></a><span class=c1>// FROM </span>
<a id=__codelineno-129-34 name=__codelineno-129-34 href=#__codelineno-129-34></a><span class=c1>//      Invoices</span>
<a id=__codelineno-129-35 name=__codelineno-129-35 href=#__codelineno-129-35></a><span class=nv>$builder</span>
<a id=__codelineno-129-36 name=__codelineno-129-36 href=#__codelineno-129-36></a>    <span class=o>-&gt;</span><span class=na>columns</span><span class=p>(</span><span class=s1>&#39;inv_id&#39;</span><span class=p>)</span>
<a id=__codelineno-129-37 name=__codelineno-129-37 href=#__codelineno-129-37></a>    <span class=o>-&gt;</span><span class=na>from</span><span class=p>(</span><span class=nx>Invoices</span><span class=o>::</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-129-38 name=__codelineno-129-38 href=#__codelineno-129-38></a><span class=p>;</span>
<a id=__codelineno-129-39 name=__codelineno-129-39 href=#__codelineno-129-39></a>
<a id=__codelineno-129-40 name=__codelineno-129-40 href=#__codelineno-129-40></a><span class=c1>// SELECT </span>
<a id=__codelineno-129-41 name=__codelineno-129-41 href=#__codelineno-129-41></a><span class=c1>//      Invoices.inv_id, </span>
<a id=__codelineno-129-42 name=__codelineno-129-42 href=#__codelineno-129-42></a><span class=c1>//      Invoices.inv_title </span>
<a id=__codelineno-129-43 name=__codelineno-129-43 href=#__codelineno-129-43></a><span class=c1>// FROM </span>
<a id=__codelineno-129-44 name=__codelineno-129-44 href=#__codelineno-129-44></a><span class=c1>//      Invoices</span>
<a id=__codelineno-129-45 name=__codelineno-129-45 href=#__codelineno-129-45></a><span class=nv>$builder</span>
<a id=__codelineno-129-46 name=__codelineno-129-46 href=#__codelineno-129-46></a>    <span class=o>-&gt;</span><span class=na>columns</span><span class=p>(</span>
<a id=__codelineno-129-47 name=__codelineno-129-47 href=#__codelineno-129-47></a>        <span class=p>[</span>
<a id=__codelineno-129-48 name=__codelineno-129-48 href=#__codelineno-129-48></a>            <span class=s1>&#39;inv_id&#39;</span><span class=p>,</span> 
<a id=__codelineno-129-49 name=__codelineno-129-49 href=#__codelineno-129-49></a>            <span class=s1>&#39;inv_title&#39;</span><span class=p>,</span>
<a id=__codelineno-129-50 name=__codelineno-129-50 href=#__codelineno-129-50></a>        <span class=p>]</span>
<a id=__codelineno-129-51 name=__codelineno-129-51 href=#__codelineno-129-51></a>    <span class=p>)</span>
<a id=__codelineno-129-52 name=__codelineno-129-52 href=#__codelineno-129-52></a>    <span class=o>-&gt;</span><span class=na>from</span><span class=p>(</span><span class=nx>Invoices</span><span class=o>::</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-129-53 name=__codelineno-129-53 href=#__codelineno-129-53></a><span class=p>;</span>
<a id=__codelineno-129-54 name=__codelineno-129-54 href=#__codelineno-129-54></a>
<a id=__codelineno-129-55 name=__codelineno-129-55 href=#__codelineno-129-55></a><span class=c1>// SELECT </span>
<a id=__codelineno-129-56 name=__codelineno-129-56 href=#__codelineno-129-56></a><span class=c1>//      Invoices.inv_id, </span>
<a id=__codelineno-129-57 name=__codelineno-129-57 href=#__codelineno-129-57></a><span class=c1>//      Invoices.title_alias </span>
<a id=__codelineno-129-58 name=__codelineno-129-58 href=#__codelineno-129-58></a><span class=c1>// FROM </span>
<a id=__codelineno-129-59 name=__codelineno-129-59 href=#__codelineno-129-59></a><span class=c1>//      Invoices</span>
<a id=__codelineno-129-60 name=__codelineno-129-60 href=#__codelineno-129-60></a><span class=nv>$builder</span>
<a id=__codelineno-129-61 name=__codelineno-129-61 href=#__codelineno-129-61></a>    <span class=o>-&gt;</span><span class=na>columns</span><span class=p>(</span>
<a id=__codelineno-129-62 name=__codelineno-129-62 href=#__codelineno-129-62></a>        <span class=p>[</span>
<a id=__codelineno-129-63 name=__codelineno-129-63 href=#__codelineno-129-63></a>            <span class=s1>&#39;inv_id&#39;</span><span class=p>,</span> 
<a id=__codelineno-129-64 name=__codelineno-129-64 href=#__codelineno-129-64></a>            <span class=s1>&#39;title_alias&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;inv_title&#39;</span><span class=p>,</span>
<a id=__codelineno-129-65 name=__codelineno-129-65 href=#__codelineno-129-65></a>        <span class=p>]</span>
<a id=__codelineno-129-66 name=__codelineno-129-66 href=#__codelineno-129-66></a>    <span class=p>)</span>
<a id=__codelineno-129-67 name=__codelineno-129-67 href=#__codelineno-129-67></a>    <span class=o>-&gt;</span><span class=na>from</span><span class=p>(</span><span class=nx>Invoices</span><span class=o>::</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-129-68 name=__codelineno-129-68 href=#__codelineno-129-68></a><span class=p>;</span>
<a id=__codelineno-129-69 name=__codelineno-129-69 href=#__codelineno-129-69></a>
<a id=__codelineno-129-70 name=__codelineno-129-70 href=#__codelineno-129-70></a><span class=c1>// SELECT </span>
<a id=__codelineno-129-71 name=__codelineno-129-71 href=#__codelineno-129-71></a><span class=c1>//      Invoices.* </span>
<a id=__codelineno-129-72 name=__codelineno-129-72 href=#__codelineno-129-72></a><span class=c1>// FROM </span>
<a id=__codelineno-129-73 name=__codelineno-129-73 href=#__codelineno-129-73></a><span class=c1>//      Invoices </span>
<a id=__codelineno-129-74 name=__codelineno-129-74 href=#__codelineno-129-74></a><span class=c1>// WHERE </span>
<a id=__codelineno-129-75 name=__codelineno-129-75 href=#__codelineno-129-75></a><span class=c1>//      Invoices.inv_cst_id = 1</span>
<a id=__codelineno-129-76 name=__codelineno-129-76 href=#__codelineno-129-76></a><span class=nv>$builder</span>
<a id=__codelineno-129-77 name=__codelineno-129-77 href=#__codelineno-129-77></a>    <span class=o>-&gt;</span><span class=na>from</span><span class=p>(</span><span class=nx>Invoices</span><span class=o>::</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-129-78 name=__codelineno-129-78 href=#__codelineno-129-78></a>    <span class=o>-&gt;</span><span class=na>where</span><span class=p>(</span><span class=s2>&quot;Invoices.inv_cst_id = 1&quot;</span><span class=p>)</span>
<a id=__codelineno-129-79 name=__codelineno-129-79 href=#__codelineno-129-79></a><span class=p>;</span>
<a id=__codelineno-129-80 name=__codelineno-129-80 href=#__codelineno-129-80></a>
<a id=__codelineno-129-81 name=__codelineno-129-81 href=#__codelineno-129-81></a><span class=c1>// SELECT </span>
<a id=__codelineno-129-82 name=__codelineno-129-82 href=#__codelineno-129-82></a><span class=c1>//      Invoices.* </span>
<a id=__codelineno-129-83 name=__codelineno-129-83 href=#__codelineno-129-83></a><span class=c1>// FROM </span>
<a id=__codelineno-129-84 name=__codelineno-129-84 href=#__codelineno-129-84></a><span class=c1>//      Invoices </span>
<a id=__codelineno-129-85 name=__codelineno-129-85 href=#__codelineno-129-85></a><span class=c1>// WHERE </span>
<a id=__codelineno-129-86 name=__codelineno-129-86 href=#__codelineno-129-86></a><span class=c1>//      Invoices.inv_id = 1</span>
<a id=__codelineno-129-87 name=__codelineno-129-87 href=#__codelineno-129-87></a><span class=nv>$builder</span>
<a id=__codelineno-129-88 name=__codelineno-129-88 href=#__codelineno-129-88></a>    <span class=o>-&gt;</span><span class=na>from</span><span class=p>(</span><span class=nx>Invoices</span><span class=o>::</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-129-89 name=__codelineno-129-89 href=#__codelineno-129-89></a>    <span class=o>-&gt;</span><span class=na>where</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
<a id=__codelineno-129-90 name=__codelineno-129-90 href=#__codelineno-129-90></a><span class=p>;</span>
<a id=__codelineno-129-91 name=__codelineno-129-91 href=#__codelineno-129-91></a>
<a id=__codelineno-129-92 name=__codelineno-129-92 href=#__codelineno-129-92></a><span class=c1>// SELECT </span>
<a id=__codelineno-129-93 name=__codelineno-129-93 href=#__codelineno-129-93></a><span class=c1>//      Invoices.* </span>
<a id=__codelineno-129-94 name=__codelineno-129-94 href=#__codelineno-129-94></a><span class=c1>// FROM </span>
<a id=__codelineno-129-95 name=__codelineno-129-95 href=#__codelineno-129-95></a><span class=c1>//      Invoices </span>
<a id=__codelineno-129-96 name=__codelineno-129-96 href=#__codelineno-129-96></a><span class=c1>// WHERE </span>
<a id=__codelineno-129-97 name=__codelineno-129-97 href=#__codelineno-129-97></a><span class=c1>//      Invoices.inv_cst_id = 1</span>
<a id=__codelineno-129-98 name=__codelineno-129-98 href=#__codelineno-129-98></a><span class=c1>// AND </span>
<a id=__codelineno-129-99 name=__codelineno-129-99 href=#__codelineno-129-99></a><span class=c1>//      Invoices.inv_total &gt; 1000</span>
<a id=__codelineno-129-100 name=__codelineno-129-100 href=#__codelineno-129-100></a><span class=nv>$builder</span>
<a id=__codelineno-129-101 name=__codelineno-129-101 href=#__codelineno-129-101></a>    <span class=o>-&gt;</span><span class=na>from</span><span class=p>(</span><span class=nx>Invoices</span><span class=o>::</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-129-102 name=__codelineno-129-102 href=#__codelineno-129-102></a>    <span class=o>-&gt;</span><span class=na>where</span><span class=p>(</span><span class=s2>&quot;inv_cst_id = 1&quot;</span><span class=p>)</span>
<a id=__codelineno-129-103 name=__codelineno-129-103 href=#__codelineno-129-103></a>    <span class=o>-&gt;</span><span class=na>andWhere</span><span class=p>(</span><span class=s1>&#39;inv_total &gt; 1000&#39;</span><span class=p>)</span>
<a id=__codelineno-129-104 name=__codelineno-129-104 href=#__codelineno-129-104></a><span class=p>;</span>
<a id=__codelineno-129-105 name=__codelineno-129-105 href=#__codelineno-129-105></a>
<a id=__codelineno-129-106 name=__codelineno-129-106 href=#__codelineno-129-106></a><span class=c1>// SELECT </span>
<a id=__codelineno-129-107 name=__codelineno-129-107 href=#__codelineno-129-107></a><span class=c1>//      Invoices.* </span>
<a id=__codelineno-129-108 name=__codelineno-129-108 href=#__codelineno-129-108></a><span class=c1>// FROM </span>
<a id=__codelineno-129-109 name=__codelineno-129-109 href=#__codelineno-129-109></a><span class=c1>//      Invoices </span>
<a id=__codelineno-129-110 name=__codelineno-129-110 href=#__codelineno-129-110></a><span class=c1>// WHERE </span>
<a id=__codelineno-129-111 name=__codelineno-129-111 href=#__codelineno-129-111></a><span class=c1>//      Invoices.inv_cst_id = 1</span>
<a id=__codelineno-129-112 name=__codelineno-129-112 href=#__codelineno-129-112></a><span class=c1>// OR </span>
<a id=__codelineno-129-113 name=__codelineno-129-113 href=#__codelineno-129-113></a><span class=c1>//      Invoices.inv_total &gt; 1000</span>
<a id=__codelineno-129-114 name=__codelineno-129-114 href=#__codelineno-129-114></a><span class=nv>$builder</span>
<a id=__codelineno-129-115 name=__codelineno-129-115 href=#__codelineno-129-115></a>    <span class=o>-&gt;</span><span class=na>from</span><span class=p>(</span><span class=nx>Invoices</span><span class=o>::</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-129-116 name=__codelineno-129-116 href=#__codelineno-129-116></a>    <span class=o>-&gt;</span><span class=na>where</span><span class=p>(</span><span class=s2>&quot;inv_cst_id = 1&quot;</span><span class=p>)</span>
<a id=__codelineno-129-117 name=__codelineno-129-117 href=#__codelineno-129-117></a>    <span class=o>-&gt;</span><span class=na>orWhere</span><span class=p>(</span><span class=s1>&#39;inv_total &gt; 1000&#39;</span><span class=p>)</span>
<a id=__codelineno-129-118 name=__codelineno-129-118 href=#__codelineno-129-118></a><span class=p>;</span>
<a id=__codelineno-129-119 name=__codelineno-129-119 href=#__codelineno-129-119></a>
<a id=__codelineno-129-120 name=__codelineno-129-120 href=#__codelineno-129-120></a>
<a id=__codelineno-129-121 name=__codelineno-129-121 href=#__codelineno-129-121></a><span class=c1>// SELECT </span>
<a id=__codelineno-129-122 name=__codelineno-129-122 href=#__codelineno-129-122></a><span class=c1>//      Invoices.* </span>
<a id=__codelineno-129-123 name=__codelineno-129-123 href=#__codelineno-129-123></a><span class=c1>// FROM </span>
<a id=__codelineno-129-124 name=__codelineno-129-124 href=#__codelineno-129-124></a><span class=c1>//      Invoices </span>
<a id=__codelineno-129-125 name=__codelineno-129-125 href=#__codelineno-129-125></a><span class=c1>// GROUP BY </span>
<a id=__codelineno-129-126 name=__codelineno-129-126 href=#__codelineno-129-126></a><span class=c1>//      Invoices.inv_cst_id</span>
<a id=__codelineno-129-127 name=__codelineno-129-127 href=#__codelineno-129-127></a><span class=nv>$builder</span>
<a id=__codelineno-129-128 name=__codelineno-129-128 href=#__codelineno-129-128></a>    <span class=o>-&gt;</span><span class=na>from</span><span class=p>(</span><span class=nx>Invoices</span><span class=o>::</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-129-129 name=__codelineno-129-129 href=#__codelineno-129-129></a>    <span class=o>-&gt;</span><span class=na>groupBy</span><span class=p>(</span><span class=s1>&#39;Invoices.inv_cst_id&#39;</span><span class=p>)</span>
<a id=__codelineno-129-130 name=__codelineno-129-130 href=#__codelineno-129-130></a><span class=p>;</span>
<a id=__codelineno-129-131 name=__codelineno-129-131 href=#__codelineno-129-131></a>
<a id=__codelineno-129-132 name=__codelineno-129-132 href=#__codelineno-129-132></a><span class=c1>// SELECT </span>
<a id=__codelineno-129-133 name=__codelineno-129-133 href=#__codelineno-129-133></a><span class=c1>//      Invoices.* </span>
<a id=__codelineno-129-134 name=__codelineno-129-134 href=#__codelineno-129-134></a><span class=c1>// FROM </span>
<a id=__codelineno-129-135 name=__codelineno-129-135 href=#__codelineno-129-135></a><span class=c1>//      Invoices </span>
<a id=__codelineno-129-136 name=__codelineno-129-136 href=#__codelineno-129-136></a><span class=c1>// GROUP BY </span>
<a id=__codelineno-129-137 name=__codelineno-129-137 href=#__codelineno-129-137></a><span class=c1>//      Invoices.inv_cst_id,</span>
<a id=__codelineno-129-138 name=__codelineno-129-138 href=#__codelineno-129-138></a><span class=c1>//      Invoices.inv_status_flag</span>
<a id=__codelineno-129-139 name=__codelineno-129-139 href=#__codelineno-129-139></a><span class=nv>$builder</span>
<a id=__codelineno-129-140 name=__codelineno-129-140 href=#__codelineno-129-140></a>    <span class=o>-&gt;</span><span class=na>from</span><span class=p>(</span><span class=nx>Invoices</span><span class=o>::</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-129-141 name=__codelineno-129-141 href=#__codelineno-129-141></a>    <span class=o>-&gt;</span><span class=na>groupBy</span><span class=p>(</span>
<a id=__codelineno-129-142 name=__codelineno-129-142 href=#__codelineno-129-142></a>        <span class=p>[</span>
<a id=__codelineno-129-143 name=__codelineno-129-143 href=#__codelineno-129-143></a>            <span class=s1>&#39;Invoices.inv_cst_id&#39;</span><span class=p>,</span>
<a id=__codelineno-129-144 name=__codelineno-129-144 href=#__codelineno-129-144></a>            <span class=s1>&#39;Invoices.inv_status_flag&#39;</span><span class=p>,</span>
<a id=__codelineno-129-145 name=__codelineno-129-145 href=#__codelineno-129-145></a>        <span class=p>]</span>
<a id=__codelineno-129-146 name=__codelineno-129-146 href=#__codelineno-129-146></a>    <span class=p>)</span>
<a id=__codelineno-129-147 name=__codelineno-129-147 href=#__codelineno-129-147></a><span class=p>;</span>
<a id=__codelineno-129-148 name=__codelineno-129-148 href=#__codelineno-129-148></a>
<a id=__codelineno-129-149 name=__codelineno-129-149 href=#__codelineno-129-149></a><span class=c1>// SELECT </span>
<a id=__codelineno-129-150 name=__codelineno-129-150 href=#__codelineno-129-150></a><span class=c1>//      Invoices.inv_title, </span>
<a id=__codelineno-129-151 name=__codelineno-129-151 href=#__codelineno-129-151></a><span class=c1>//      SUM(Invoices.inv_total) AS total</span>
<a id=__codelineno-129-152 name=__codelineno-129-152 href=#__codelineno-129-152></a><span class=c1>// FROM </span>
<a id=__codelineno-129-153 name=__codelineno-129-153 href=#__codelineno-129-153></a><span class=c1>//      Invoices </span>
<a id=__codelineno-129-154 name=__codelineno-129-154 href=#__codelineno-129-154></a><span class=c1>// GROUP BY </span>
<a id=__codelineno-129-155 name=__codelineno-129-155 href=#__codelineno-129-155></a><span class=c1>//      Invoices.inv_cst_id</span>
<a id=__codelineno-129-156 name=__codelineno-129-156 href=#__codelineno-129-156></a><span class=nv>$builder</span>
<a id=__codelineno-129-157 name=__codelineno-129-157 href=#__codelineno-129-157></a>    <span class=o>-&gt;</span><span class=na>columns</span><span class=p>(</span>
<a id=__codelineno-129-158 name=__codelineno-129-158 href=#__codelineno-129-158></a>        <span class=p>[</span>
<a id=__codelineno-129-159 name=__codelineno-129-159 href=#__codelineno-129-159></a>            <span class=s1>&#39;Invoices.inv_title&#39;</span><span class=p>,</span> 
<a id=__codelineno-129-160 name=__codelineno-129-160 href=#__codelineno-129-160></a>            <span class=s1>&#39;total&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;SUM(Invoices.inv_total)&#39;</span>
<a id=__codelineno-129-161 name=__codelineno-129-161 href=#__codelineno-129-161></a>        <span class=p>]</span>
<a id=__codelineno-129-162 name=__codelineno-129-162 href=#__codelineno-129-162></a>    <span class=p>)</span>
<a id=__codelineno-129-163 name=__codelineno-129-163 href=#__codelineno-129-163></a>    <span class=o>-&gt;</span><span class=na>from</span><span class=p>(</span><span class=nx>Invoices</span><span class=o>::</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-129-164 name=__codelineno-129-164 href=#__codelineno-129-164></a>    <span class=o>-&gt;</span><span class=na>groupBy</span><span class=p>(</span><span class=s1>&#39;Invoices.inv_cst_id&#39;</span><span class=p>)</span>
<a id=__codelineno-129-165 name=__codelineno-129-165 href=#__codelineno-129-165></a><span class=p>;</span>
<a id=__codelineno-129-166 name=__codelineno-129-166 href=#__codelineno-129-166></a>
<a id=__codelineno-129-167 name=__codelineno-129-167 href=#__codelineno-129-167></a><span class=c1>// SELECT </span>
<a id=__codelineno-129-168 name=__codelineno-129-168 href=#__codelineno-129-168></a><span class=c1>//      Invoices.inv_title, </span>
<a id=__codelineno-129-169 name=__codelineno-129-169 href=#__codelineno-129-169></a><span class=c1>//      SUM(Invoices.inv_total) AS total</span>
<a id=__codelineno-129-170 name=__codelineno-129-170 href=#__codelineno-129-170></a><span class=c1>// FROM </span>
<a id=__codelineno-129-171 name=__codelineno-129-171 href=#__codelineno-129-171></a><span class=c1>//      Invoices </span>
<a id=__codelineno-129-172 name=__codelineno-129-172 href=#__codelineno-129-172></a><span class=c1>// GROUP BY </span>
<a id=__codelineno-129-173 name=__codelineno-129-173 href=#__codelineno-129-173></a><span class=c1>//      Invoices.inv_cst_id</span>
<a id=__codelineno-129-174 name=__codelineno-129-174 href=#__codelineno-129-174></a><span class=c1>// HAVING</span>
<a id=__codelineno-129-175 name=__codelineno-129-175 href=#__codelineno-129-175></a><span class=c1>//      Invoices.inv_total &gt; 1000</span>
<a id=__codelineno-129-176 name=__codelineno-129-176 href=#__codelineno-129-176></a><span class=nv>$builder</span>
<a id=__codelineno-129-177 name=__codelineno-129-177 href=#__codelineno-129-177></a>    <span class=o>-&gt;</span><span class=na>columns</span><span class=p>(</span>
<a id=__codelineno-129-178 name=__codelineno-129-178 href=#__codelineno-129-178></a>        <span class=p>[</span>
<a id=__codelineno-129-179 name=__codelineno-129-179 href=#__codelineno-129-179></a>            <span class=s1>&#39;Invoices.inv_title&#39;</span><span class=p>,</span> 
<a id=__codelineno-129-180 name=__codelineno-129-180 href=#__codelineno-129-180></a>            <span class=s1>&#39;total&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;SUM(Invoices.inv_total)&#39;</span>
<a id=__codelineno-129-181 name=__codelineno-129-181 href=#__codelineno-129-181></a>        <span class=p>]</span>
<a id=__codelineno-129-182 name=__codelineno-129-182 href=#__codelineno-129-182></a>    <span class=p>)</span>
<a id=__codelineno-129-183 name=__codelineno-129-183 href=#__codelineno-129-183></a>    <span class=o>-&gt;</span><span class=na>from</span><span class=p>(</span><span class=nx>Invoices</span><span class=o>::</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-129-184 name=__codelineno-129-184 href=#__codelineno-129-184></a>    <span class=o>-&gt;</span><span class=na>groupBy</span><span class=p>(</span><span class=s1>&#39;Invoices.inv_cst_id&#39;</span><span class=p>)</span>
<a id=__codelineno-129-185 name=__codelineno-129-185 href=#__codelineno-129-185></a>    <span class=o>-&gt;</span><span class=na>having</span><span class=p>(</span><span class=s1>&#39;SUM(Invoices.inv_total) &gt; 1000&#39;</span><span class=p>)</span>
<a id=__codelineno-129-186 name=__codelineno-129-186 href=#__codelineno-129-186></a><span class=p>;</span>
<a id=__codelineno-129-187 name=__codelineno-129-187 href=#__codelineno-129-187></a>
<a id=__codelineno-129-188 name=__codelineno-129-188 href=#__codelineno-129-188></a><span class=c1>// SELECT </span>
<a id=__codelineno-129-189 name=__codelineno-129-189 href=#__codelineno-129-189></a><span class=c1>//      Invoices.* </span>
<a id=__codelineno-129-190 name=__codelineno-129-190 href=#__codelineno-129-190></a><span class=c1>// FROM </span>
<a id=__codelineno-129-191 name=__codelineno-129-191 href=#__codelineno-129-191></a><span class=c1>//      Invoices </span>
<a id=__codelineno-129-192 name=__codelineno-129-192 href=#__codelineno-129-192></a><span class=c1>// JOIN </span>
<a id=__codelineno-129-193 name=__codelineno-129-193 href=#__codelineno-129-193></a><span class=c1>//      Customers</span>
<a id=__codelineno-129-194 name=__codelineno-129-194 href=#__codelineno-129-194></a><span class=nv>$builder</span>
<a id=__codelineno-129-195 name=__codelineno-129-195 href=#__codelineno-129-195></a>    <span class=o>-&gt;</span><span class=na>from</span><span class=p>(</span><span class=nx>Invoices</span><span class=o>::</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-129-196 name=__codelineno-129-196 href=#__codelineno-129-196></a>    <span class=o>-&gt;</span><span class=na>join</span><span class=p>(</span><span class=nx>Customers</span><span class=o>::</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-129-197 name=__codelineno-129-197 href=#__codelineno-129-197></a><span class=p>;</span>
<a id=__codelineno-129-198 name=__codelineno-129-198 href=#__codelineno-129-198></a>
<a id=__codelineno-129-199 name=__codelineno-129-199 href=#__codelineno-129-199></a><span class=c1>// SELECT </span>
<a id=__codelineno-129-200 name=__codelineno-129-200 href=#__codelineno-129-200></a><span class=c1>//      Invoices.* </span>
<a id=__codelineno-129-201 name=__codelineno-129-201 href=#__codelineno-129-201></a><span class=c1>// FROM </span>
<a id=__codelineno-129-202 name=__codelineno-129-202 href=#__codelineno-129-202></a><span class=c1>//      Invoices </span>
<a id=__codelineno-129-203 name=__codelineno-129-203 href=#__codelineno-129-203></a><span class=c1>// JOIN </span>
<a id=__codelineno-129-204 name=__codelineno-129-204 href=#__codelineno-129-204></a><span class=c1>//      Customers AS c</span>
<a id=__codelineno-129-205 name=__codelineno-129-205 href=#__codelineno-129-205></a><span class=nv>$builder</span>
<a id=__codelineno-129-206 name=__codelineno-129-206 href=#__codelineno-129-206></a>    <span class=o>-&gt;</span><span class=na>from</span><span class=p>(</span><span class=nx>Invoices</span><span class=o>::</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-129-207 name=__codelineno-129-207 href=#__codelineno-129-207></a>    <span class=o>-&gt;</span><span class=na>join</span><span class=p>(</span><span class=nx>Customers</span><span class=o>::</span><span class=na>class</span><span class=p>,</span> <span class=k>null</span><span class=p>,</span> <span class=s1>&#39;c&#39;</span><span class=p>)</span>
<a id=__codelineno-129-208 name=__codelineno-129-208 href=#__codelineno-129-208></a><span class=p>;</span>
<a id=__codelineno-129-209 name=__codelineno-129-209 href=#__codelineno-129-209></a>
<a id=__codelineno-129-210 name=__codelineno-129-210 href=#__codelineno-129-210></a><span class=c1>// SELECT </span>
<a id=__codelineno-129-211 name=__codelineno-129-211 href=#__codelineno-129-211></a><span class=c1>//      Invoices.* </span>
<a id=__codelineno-129-212 name=__codelineno-129-212 href=#__codelineno-129-212></a><span class=c1>// FROM </span>
<a id=__codelineno-129-213 name=__codelineno-129-213 href=#__codelineno-129-213></a><span class=c1>//      Invoices AS i</span>
<a id=__codelineno-129-214 name=__codelineno-129-214 href=#__codelineno-129-214></a><span class=c1>// JOIN </span>
<a id=__codelineno-129-215 name=__codelineno-129-215 href=#__codelineno-129-215></a><span class=c1>//      Customers AS c</span>
<a id=__codelineno-129-216 name=__codelineno-129-216 href=#__codelineno-129-216></a><span class=c1>// ON</span>
<a id=__codelineno-129-217 name=__codelineno-129-217 href=#__codelineno-129-217></a><span class=c1>//      i.inv_cst_id = c.cst_id</span>
<a id=__codelineno-129-218 name=__codelineno-129-218 href=#__codelineno-129-218></a><span class=nv>$builder</span>
<a id=__codelineno-129-219 name=__codelineno-129-219 href=#__codelineno-129-219></a>    <span class=o>-&gt;</span><span class=na>from</span><span class=p>(</span><span class=nx>Invoices</span><span class=o>::</span><span class=na>class</span><span class=p>,</span> <span class=s1>&#39;i&#39;</span><span class=p>)</span>
<a id=__codelineno-129-220 name=__codelineno-129-220 href=#__codelineno-129-220></a>    <span class=o>-&gt;</span><span class=na>join</span><span class=p>(</span>
<a id=__codelineno-129-221 name=__codelineno-129-221 href=#__codelineno-129-221></a>        <span class=nx>Customers</span><span class=o>::</span><span class=na>class</span><span class=p>,</span> 
<a id=__codelineno-129-222 name=__codelineno-129-222 href=#__codelineno-129-222></a>        <span class=s1>&#39;i.inv_cst_id = c.cst_id&#39;</span><span class=p>,</span> 
<a id=__codelineno-129-223 name=__codelineno-129-223 href=#__codelineno-129-223></a>        <span class=s1>&#39;c&#39;</span>
<a id=__codelineno-129-224 name=__codelineno-129-224 href=#__codelineno-129-224></a>    <span class=p>)</span>
<a id=__codelineno-129-225 name=__codelineno-129-225 href=#__codelineno-129-225></a><span class=p>;</span>
<a id=__codelineno-129-226 name=__codelineno-129-226 href=#__codelineno-129-226></a>
<a id=__codelineno-129-227 name=__codelineno-129-227 href=#__codelineno-129-227></a><span class=c1>// SELECT </span>
<a id=__codelineno-129-228 name=__codelineno-129-228 href=#__codelineno-129-228></a><span class=c1>//      Invoices.* </span>
<a id=__codelineno-129-229 name=__codelineno-129-229 href=#__codelineno-129-229></a><span class=c1>// FROM </span>
<a id=__codelineno-129-230 name=__codelineno-129-230 href=#__codelineno-129-230></a><span class=c1>//      Invoices AS i</span>
<a id=__codelineno-129-231 name=__codelineno-129-231 href=#__codelineno-129-231></a><span class=c1>// JOIN </span>
<a id=__codelineno-129-232 name=__codelineno-129-232 href=#__codelineno-129-232></a><span class=c1>//      InvoicesXProducts AS x</span>
<a id=__codelineno-129-233 name=__codelineno-129-233 href=#__codelineno-129-233></a><span class=c1>// ON</span>
<a id=__codelineno-129-234 name=__codelineno-129-234 href=#__codelineno-129-234></a><span class=c1>//      i.inv_id = x.ixp_inv_id</span>
<a id=__codelineno-129-235 name=__codelineno-129-235 href=#__codelineno-129-235></a><span class=c1>// JOIN </span>
<a id=__codelineno-129-236 name=__codelineno-129-236 href=#__codelineno-129-236></a><span class=c1>//      Products AS prd</span>
<a id=__codelineno-129-237 name=__codelineno-129-237 href=#__codelineno-129-237></a><span class=c1>// ON</span>
<a id=__codelineno-129-238 name=__codelineno-129-238 href=#__codelineno-129-238></a><span class=c1>//      x.ixp_prd_id = p.prd_id</span>
<a id=__codelineno-129-239 name=__codelineno-129-239 href=#__codelineno-129-239></a><span class=nv>$builder</span>
<a id=__codelineno-129-240 name=__codelineno-129-240 href=#__codelineno-129-240></a>    <span class=o>-&gt;</span><span class=na>addFrom</span><span class=p>(</span><span class=nx>Invoices</span><span class=o>::</span><span class=na>class</span><span class=p>,</span> <span class=s1>&#39;i&#39;</span><span class=p>)</span>
<a id=__codelineno-129-241 name=__codelineno-129-241 href=#__codelineno-129-241></a>    <span class=o>-&gt;</span><span class=na>join</span><span class=p>(</span>
<a id=__codelineno-129-242 name=__codelineno-129-242 href=#__codelineno-129-242></a>        <span class=nx>InvoicesXProducts</span><span class=o>::</span><span class=na>class</span><span class=p>,</span> 
<a id=__codelineno-129-243 name=__codelineno-129-243 href=#__codelineno-129-243></a>        <span class=s1>&#39;i.inv_id = x.ixp_inv_id&#39;</span><span class=p>,</span> 
<a id=__codelineno-129-244 name=__codelineno-129-244 href=#__codelineno-129-244></a>        <span class=s1>&#39;x&#39;</span>
<a id=__codelineno-129-245 name=__codelineno-129-245 href=#__codelineno-129-245></a>    <span class=p>)</span>
<a id=__codelineno-129-246 name=__codelineno-129-246 href=#__codelineno-129-246></a>    <span class=o>-&gt;</span><span class=na>join</span><span class=p>(</span>
<a id=__codelineno-129-247 name=__codelineno-129-247 href=#__codelineno-129-247></a>        <span class=nx>Products</span><span class=o>::</span><span class=na>class</span><span class=p>,</span> 
<a id=__codelineno-129-248 name=__codelineno-129-248 href=#__codelineno-129-248></a>        <span class=s1>&#39;x.ixp_prd_id = p.prd_id&#39;</span><span class=p>,</span> 
<a id=__codelineno-129-249 name=__codelineno-129-249 href=#__codelineno-129-249></a>        <span class=s1>&#39;p&#39;</span>
<a id=__codelineno-129-250 name=__codelineno-129-250 href=#__codelineno-129-250></a>    <span class=p>)</span>
<a id=__codelineno-129-251 name=__codelineno-129-251 href=#__codelineno-129-251></a><span class=p>;</span>
<a id=__codelineno-129-252 name=__codelineno-129-252 href=#__codelineno-129-252></a>
<a id=__codelineno-129-253 name=__codelineno-129-253 href=#__codelineno-129-253></a><span class=c1>// SELECT </span>
<a id=__codelineno-129-254 name=__codelineno-129-254 href=#__codelineno-129-254></a><span class=c1>//      Invoices.*, </span>
<a id=__codelineno-129-255 name=__codelineno-129-255 href=#__codelineno-129-255></a><span class=c1>//      c.* </span>
<a id=__codelineno-129-256 name=__codelineno-129-256 href=#__codelineno-129-256></a><span class=c1>// FROM </span>
<a id=__codelineno-129-257 name=__codelineno-129-257 href=#__codelineno-129-257></a><span class=c1>//      Invoices, </span>
<a id=__codelineno-129-258 name=__codelineno-129-258 href=#__codelineno-129-258></a><span class=c1>//      Customers AS c</span>
<a id=__codelineno-129-259 name=__codelineno-129-259 href=#__codelineno-129-259></a><span class=nv>$builder</span>
<a id=__codelineno-129-260 name=__codelineno-129-260 href=#__codelineno-129-260></a>    <span class=o>-&gt;</span><span class=na>from</span><span class=p>(</span><span class=nx>Invoices</span><span class=o>::</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-129-261 name=__codelineno-129-261 href=#__codelineno-129-261></a>    <span class=o>-&gt;</span><span class=na>addFrom</span><span class=p>(</span><span class=nx>Customers</span><span class=o>::</span><span class=na>class</span><span class=p>,</span> <span class=s1>&#39;c&#39;</span><span class=p>)</span>
<a id=__codelineno-129-262 name=__codelineno-129-262 href=#__codelineno-129-262></a><span class=p>;</span>
<a id=__codelineno-129-263 name=__codelineno-129-263 href=#__codelineno-129-263></a>
<a id=__codelineno-129-264 name=__codelineno-129-264 href=#__codelineno-129-264></a><span class=c1>// SELECT </span>
<a id=__codelineno-129-265 name=__codelineno-129-265 href=#__codelineno-129-265></a><span class=c1>//      i.*, </span>
<a id=__codelineno-129-266 name=__codelineno-129-266 href=#__codelineno-129-266></a><span class=c1>//      c.* </span>
<a id=__codelineno-129-267 name=__codelineno-129-267 href=#__codelineno-129-267></a><span class=c1>// FROM </span>
<a id=__codelineno-129-268 name=__codelineno-129-268 href=#__codelineno-129-268></a><span class=c1>//      Invoices AS i, </span>
<a id=__codelineno-129-269 name=__codelineno-129-269 href=#__codelineno-129-269></a><span class=c1>//      Customers AS c</span>
<a id=__codelineno-129-270 name=__codelineno-129-270 href=#__codelineno-129-270></a><span class=nv>$builder</span>
<a id=__codelineno-129-271 name=__codelineno-129-271 href=#__codelineno-129-271></a>    <span class=o>-&gt;</span><span class=na>from</span><span class=p>(</span>
<a id=__codelineno-129-272 name=__codelineno-129-272 href=#__codelineno-129-272></a>        <span class=p>[</span>
<a id=__codelineno-129-273 name=__codelineno-129-273 href=#__codelineno-129-273></a>            <span class=s1>&#39;i&#39;</span> <span class=o>=&gt;</span> <span class=nx>Invoices</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<a id=__codelineno-129-274 name=__codelineno-129-274 href=#__codelineno-129-274></a>            <span class=s1>&#39;c&#39;</span> <span class=o>=&gt;</span> <span class=nx>Customers</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<a id=__codelineno-129-275 name=__codelineno-129-275 href=#__codelineno-129-275></a>        <span class=p>]</span>
<a id=__codelineno-129-276 name=__codelineno-129-276 href=#__codelineno-129-276></a>    <span class=p>)</span>
<a id=__codelineno-129-277 name=__codelineno-129-277 href=#__codelineno-129-277></a><span class=p>;</span>
<a id=__codelineno-129-278 name=__codelineno-129-278 href=#__codelineno-129-278></a>
<a id=__codelineno-129-279 name=__codelineno-129-279 href=#__codelineno-129-279></a>
<a id=__codelineno-129-280 name=__codelineno-129-280 href=#__codelineno-129-280></a><span class=c1>// SELECT </span>
<a id=__codelineno-129-281 name=__codelineno-129-281 href=#__codelineno-129-281></a><span class=c1>//      Invoices.* </span>
<a id=__codelineno-129-282 name=__codelineno-129-282 href=#__codelineno-129-282></a><span class=c1>// FROM </span>
<a id=__codelineno-129-283 name=__codelineno-129-283 href=#__codelineno-129-283></a><span class=c1>//      Invoices </span>
<a id=__codelineno-129-284 name=__codelineno-129-284 href=#__codelineno-129-284></a><span class=c1>// LIMIT </span>
<a id=__codelineno-129-285 name=__codelineno-129-285 href=#__codelineno-129-285></a><span class=c1>//      10</span>
<a id=__codelineno-129-286 name=__codelineno-129-286 href=#__codelineno-129-286></a><span class=nv>$builder</span>
<a id=__codelineno-129-287 name=__codelineno-129-287 href=#__codelineno-129-287></a>    <span class=o>-&gt;</span><span class=na>from</span><span class=p>(</span><span class=nx>Invoices</span><span class=o>::</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-129-288 name=__codelineno-129-288 href=#__codelineno-129-288></a>    <span class=o>-&gt;</span><span class=na>limit</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span>
<a id=__codelineno-129-289 name=__codelineno-129-289 href=#__codelineno-129-289></a><span class=p>;</span>
<a id=__codelineno-129-290 name=__codelineno-129-290 href=#__codelineno-129-290></a>
<a id=__codelineno-129-291 name=__codelineno-129-291 href=#__codelineno-129-291></a><span class=c1>// SELECT </span>
<a id=__codelineno-129-292 name=__codelineno-129-292 href=#__codelineno-129-292></a><span class=c1>//      Invoices.* </span>
<a id=__codelineno-129-293 name=__codelineno-129-293 href=#__codelineno-129-293></a><span class=c1>// FROM </span>
<a id=__codelineno-129-294 name=__codelineno-129-294 href=#__codelineno-129-294></a><span class=c1>//      Invoices </span>
<a id=__codelineno-129-295 name=__codelineno-129-295 href=#__codelineno-129-295></a><span class=c1>// LIMIT </span>
<a id=__codelineno-129-296 name=__codelineno-129-296 href=#__codelineno-129-296></a><span class=c1>//      10</span>
<a id=__codelineno-129-297 name=__codelineno-129-297 href=#__codelineno-129-297></a><span class=c1>// OFFSET</span>
<a id=__codelineno-129-298 name=__codelineno-129-298 href=#__codelineno-129-298></a><span class=c1>//      5</span>
<a id=__codelineno-129-299 name=__codelineno-129-299 href=#__codelineno-129-299></a><span class=nv>$builder</span>
<a id=__codelineno-129-300 name=__codelineno-129-300 href=#__codelineno-129-300></a>    <span class=o>-&gt;</span><span class=na>from</span><span class=p>(</span><span class=nx>Invoices</span><span class=o>::</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-129-301 name=__codelineno-129-301 href=#__codelineno-129-301></a>    <span class=o>-&gt;</span><span class=na>limit</span><span class=p>(</span><span class=mi>10</span><span class=p>,</span> <span class=mi>5</span><span class=p>)</span>
<a id=__codelineno-129-302 name=__codelineno-129-302 href=#__codelineno-129-302></a><span class=p>;</span>
<a id=__codelineno-129-303 name=__codelineno-129-303 href=#__codelineno-129-303></a>
<a id=__codelineno-129-304 name=__codelineno-129-304 href=#__codelineno-129-304></a><span class=c1>// SELECT </span>
<a id=__codelineno-129-305 name=__codelineno-129-305 href=#__codelineno-129-305></a><span class=c1>//      Invoices.* </span>
<a id=__codelineno-129-306 name=__codelineno-129-306 href=#__codelineno-129-306></a><span class=c1>// FROM </span>
<a id=__codelineno-129-307 name=__codelineno-129-307 href=#__codelineno-129-307></a><span class=c1>//      Invoices </span>
<a id=__codelineno-129-308 name=__codelineno-129-308 href=#__codelineno-129-308></a><span class=c1>// WHERE </span>
<a id=__codelineno-129-309 name=__codelineno-129-309 href=#__codelineno-129-309></a><span class=c1>//      inv_id </span>
<a id=__codelineno-129-310 name=__codelineno-129-310 href=#__codelineno-129-310></a><span class=c1>// BETWEEN </span>
<a id=__codelineno-129-311 name=__codelineno-129-311 href=#__codelineno-129-311></a><span class=c1>//      1 </span>
<a id=__codelineno-129-312 name=__codelineno-129-312 href=#__codelineno-129-312></a><span class=c1>// AND </span>
<a id=__codelineno-129-313 name=__codelineno-129-313 href=#__codelineno-129-313></a><span class=c1>//      100</span>
<a id=__codelineno-129-314 name=__codelineno-129-314 href=#__codelineno-129-314></a><span class=nv>$builder</span>
<a id=__codelineno-129-315 name=__codelineno-129-315 href=#__codelineno-129-315></a>    <span class=o>-&gt;</span><span class=na>from</span><span class=p>(</span><span class=nx>Invoices</span><span class=o>::</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-129-316 name=__codelineno-129-316 href=#__codelineno-129-316></a>    <span class=o>-&gt;</span><span class=na>betweenWhere</span><span class=p>(</span><span class=s1>&#39;inv_id&#39;</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>100</span><span class=p>)</span>
<a id=__codelineno-129-317 name=__codelineno-129-317 href=#__codelineno-129-317></a><span class=p>;</span>
<a id=__codelineno-129-318 name=__codelineno-129-318 href=#__codelineno-129-318></a>
<a id=__codelineno-129-319 name=__codelineno-129-319 href=#__codelineno-129-319></a><span class=c1>// SELECT </span>
<a id=__codelineno-129-320 name=__codelineno-129-320 href=#__codelineno-129-320></a><span class=c1>//      Invoices.* </span>
<a id=__codelineno-129-321 name=__codelineno-129-321 href=#__codelineno-129-321></a><span class=c1>// FROM </span>
<a id=__codelineno-129-322 name=__codelineno-129-322 href=#__codelineno-129-322></a><span class=c1>//      Invoices </span>
<a id=__codelineno-129-323 name=__codelineno-129-323 href=#__codelineno-129-323></a><span class=c1>// WHERE </span>
<a id=__codelineno-129-324 name=__codelineno-129-324 href=#__codelineno-129-324></a><span class=c1>//      inv_id </span>
<a id=__codelineno-129-325 name=__codelineno-129-325 href=#__codelineno-129-325></a><span class=c1>// IN </span>
<a id=__codelineno-129-326 name=__codelineno-129-326 href=#__codelineno-129-326></a><span class=c1>//      (1, 2, 3)</span>
<a id=__codelineno-129-327 name=__codelineno-129-327 href=#__codelineno-129-327></a><span class=nv>$builder</span>
<a id=__codelineno-129-328 name=__codelineno-129-328 href=#__codelineno-129-328></a>    <span class=o>-&gt;</span><span class=na>from</span><span class=p>(</span><span class=nx>Invoices</span><span class=o>::</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-129-329 name=__codelineno-129-329 href=#__codelineno-129-329></a>    <span class=o>-&gt;</span><span class=na>inWhere</span><span class=p>(</span>
<a id=__codelineno-129-330 name=__codelineno-129-330 href=#__codelineno-129-330></a>        <span class=s1>&#39;inv_id&#39;</span><span class=p>,</span> 
<a id=__codelineno-129-331 name=__codelineno-129-331 href=#__codelineno-129-331></a>        <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>]</span>
<a id=__codelineno-129-332 name=__codelineno-129-332 href=#__codelineno-129-332></a>    <span class=p>)</span>
<a id=__codelineno-129-333 name=__codelineno-129-333 href=#__codelineno-129-333></a><span class=p>;</span>
<a id=__codelineno-129-334 name=__codelineno-129-334 href=#__codelineno-129-334></a>
<a id=__codelineno-129-335 name=__codelineno-129-335 href=#__codelineno-129-335></a><span class=c1>// SELECT </span>
<a id=__codelineno-129-336 name=__codelineno-129-336 href=#__codelineno-129-336></a><span class=c1>//      Invoices.* </span>
<a id=__codelineno-129-337 name=__codelineno-129-337 href=#__codelineno-129-337></a><span class=c1>// FROM </span>
<a id=__codelineno-129-338 name=__codelineno-129-338 href=#__codelineno-129-338></a><span class=c1>//      Invoices </span>
<a id=__codelineno-129-339 name=__codelineno-129-339 href=#__codelineno-129-339></a><span class=c1>// WHERE </span>
<a id=__codelineno-129-340 name=__codelineno-129-340 href=#__codelineno-129-340></a><span class=c1>//      inv_id </span>
<a id=__codelineno-129-341 name=__codelineno-129-341 href=#__codelineno-129-341></a><span class=c1>// NOT IN </span>
<a id=__codelineno-129-342 name=__codelineno-129-342 href=#__codelineno-129-342></a><span class=c1>//      (1, 2, 3)</span>
<a id=__codelineno-129-343 name=__codelineno-129-343 href=#__codelineno-129-343></a><span class=nv>$builder</span>
<a id=__codelineno-129-344 name=__codelineno-129-344 href=#__codelineno-129-344></a>    <span class=o>-&gt;</span><span class=na>from</span><span class=p>(</span><span class=nx>Invoices</span><span class=o>::</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-129-345 name=__codelineno-129-345 href=#__codelineno-129-345></a>    <span class=o>-&gt;</span><span class=na>notInWhere</span><span class=p>(</span>
<a id=__codelineno-129-346 name=__codelineno-129-346 href=#__codelineno-129-346></a>        <span class=s1>&#39;inv_id&#39;</span><span class=p>,</span> 
<a id=__codelineno-129-347 name=__codelineno-129-347 href=#__codelineno-129-347></a>        <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>]</span>
<a id=__codelineno-129-348 name=__codelineno-129-348 href=#__codelineno-129-348></a>    <span class=p>)</span>
<a id=__codelineno-129-349 name=__codelineno-129-349 href=#__codelineno-129-349></a><span class=p>;</span>
<a id=__codelineno-129-350 name=__codelineno-129-350 href=#__codelineno-129-350></a>
<a id=__codelineno-129-351 name=__codelineno-129-351 href=#__codelineno-129-351></a><span class=c1>// SELECT </span>
<a id=__codelineno-129-352 name=__codelineno-129-352 href=#__codelineno-129-352></a><span class=c1>//      Invoices.* </span>
<a id=__codelineno-129-353 name=__codelineno-129-353 href=#__codelineno-129-353></a><span class=c1>// FROM </span>
<a id=__codelineno-129-354 name=__codelineno-129-354 href=#__codelineno-129-354></a><span class=c1>//      Invoices </span>
<a id=__codelineno-129-355 name=__codelineno-129-355 href=#__codelineno-129-355></a><span class=c1>// WHERE </span>
<a id=__codelineno-129-356 name=__codelineno-129-356 href=#__codelineno-129-356></a><span class=c1>//      inv_title </span>
<a id=__codelineno-129-357 name=__codelineno-129-357 href=#__codelineno-129-357></a><span class=c1>// LIKE </span>
<a id=__codelineno-129-358 name=__codelineno-129-358 href=#__codelineno-129-358></a><span class=c1>//      &#39;%ACME%&#39;;</span>
<a id=__codelineno-129-359 name=__codelineno-129-359 href=#__codelineno-129-359></a><span class=nv>$title</span> <span class=o>=</span> <span class=s1>&#39;ACME&#39;</span><span class=p>;</span>
<a id=__codelineno-129-360 name=__codelineno-129-360 href=#__codelineno-129-360></a><span class=nv>$builder</span>
<a id=__codelineno-129-361 name=__codelineno-129-361 href=#__codelineno-129-361></a>    <span class=o>-&gt;</span><span class=na>from</span><span class=p>(</span><span class=nx>Invoices</span><span class=o>::</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-129-362 name=__codelineno-129-362 href=#__codelineno-129-362></a>    <span class=o>-&gt;</span><span class=na>where</span><span class=p>(</span>
<a id=__codelineno-129-363 name=__codelineno-129-363 href=#__codelineno-129-363></a>        <span class=s1>&#39;inv_title LIKE :title:&#39;</span><span class=p>,</span> 
<a id=__codelineno-129-364 name=__codelineno-129-364 href=#__codelineno-129-364></a>        <span class=p>[</span>
<a id=__codelineno-129-365 name=__codelineno-129-365 href=#__codelineno-129-365></a>            <span class=s1>&#39;title&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;%&#39;</span> <span class=o>.</span> <span class=nv>$title</span> <span class=o>.</span> <span class=s1>&#39;%&#39;</span><span class=p>,</span>
<a id=__codelineno-129-366 name=__codelineno-129-366 href=#__codelineno-129-366></a>        <span class=p>]</span>
<a id=__codelineno-129-367 name=__codelineno-129-367 href=#__codelineno-129-367></a>    <span class=p>)</span>
<a id=__codelineno-129-368 name=__codelineno-129-368 href=#__codelineno-129-368></a><span class=p>;</span>
</code></pre></div> <h3 id=bound-parameters>Bound Parameters<a class=headerlink href=#bound-parameters title="Permanent link">&para;</a></h3> <p>Bound parameters in the query builder can be set as the query is built or when it is being executed:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-130-1 name=__codelineno-130-1 href=#__codelineno-130-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-130-2 name=__codelineno-130-2 href=#__codelineno-130-2></a>
<a id=__codelineno-130-3 name=__codelineno-130-3 href=#__codelineno-130-3></a><span class=nv>$invoices</span> <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-130-4 name=__codelineno-130-4 href=#__codelineno-130-4></a>    <span class=o>-&gt;</span><span class=na>modelsManager</span>
<a id=__codelineno-130-5 name=__codelineno-130-5 href=#__codelineno-130-5></a>    <span class=o>-&gt;</span><span class=na>createBuilder</span><span class=p>()</span>
<a id=__codelineno-130-6 name=__codelineno-130-6 href=#__codelineno-130-6></a>    <span class=o>-&gt;</span><span class=na>from</span><span class=p>(</span><span class=nx>Invoices</span><span class=o>::</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-130-7 name=__codelineno-130-7 href=#__codelineno-130-7></a>    <span class=o>-&gt;</span><span class=na>where</span><span class=p>(</span>
<a id=__codelineno-130-8 name=__codelineno-130-8 href=#__codelineno-130-8></a>        <span class=s1>&#39;inv_cst_id = :cst_id:&#39;</span><span class=p>,</span> 
<a id=__codelineno-130-9 name=__codelineno-130-9 href=#__codelineno-130-9></a>        <span class=p>[</span>
<a id=__codelineno-130-10 name=__codelineno-130-10 href=#__codelineno-130-10></a>            <span class=s1>&#39;cst_id&#39;</span> <span class=o>=&gt;</span> <span class=mi>1</span><span class=p>,</span>
<a id=__codelineno-130-11 name=__codelineno-130-11 href=#__codelineno-130-11></a>        <span class=p>]</span>
<a id=__codelineno-130-12 name=__codelineno-130-12 href=#__codelineno-130-12></a>    <span class=p>)</span>
<a id=__codelineno-130-13 name=__codelineno-130-13 href=#__codelineno-130-13></a>    <span class=o>-&gt;</span><span class=na>andWhere</span><span class=p>(</span>
<a id=__codelineno-130-14 name=__codelineno-130-14 href=#__codelineno-130-14></a>        <span class=s1>&#39;inv_total = :total:&#39;</span><span class=p>,</span> 
<a id=__codelineno-130-15 name=__codelineno-130-15 href=#__codelineno-130-15></a>        <span class=p>[</span>
<a id=__codelineno-130-16 name=__codelineno-130-16 href=#__codelineno-130-16></a>            <span class=s1>&#39;total&#39;</span> <span class=o>=&gt;</span> <span class=mi>1000</span><span class=p>,</span>
<a id=__codelineno-130-17 name=__codelineno-130-17 href=#__codelineno-130-17></a>        <span class=p>]</span>
<a id=__codelineno-130-18 name=__codelineno-130-18 href=#__codelineno-130-18></a>    <span class=p>)</span>
<a id=__codelineno-130-19 name=__codelineno-130-19 href=#__codelineno-130-19></a>    <span class=o>-&gt;</span><span class=na>getQuery</span><span class=p>()</span>
<a id=__codelineno-130-20 name=__codelineno-130-20 href=#__codelineno-130-20></a>    <span class=o>-&gt;</span><span class=na>execute</span><span class=p>();</span>
<a id=__codelineno-130-21 name=__codelineno-130-21 href=#__codelineno-130-21></a>
<a id=__codelineno-130-22 name=__codelineno-130-22 href=#__codelineno-130-22></a><span class=nv>$invoices</span> <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-130-23 name=__codelineno-130-23 href=#__codelineno-130-23></a>    <span class=o>-&gt;</span><span class=na>modelsManager</span>
<a id=__codelineno-130-24 name=__codelineno-130-24 href=#__codelineno-130-24></a>    <span class=o>-&gt;</span><span class=na>createBuilder</span><span class=p>()</span>
<a id=__codelineno-130-25 name=__codelineno-130-25 href=#__codelineno-130-25></a>    <span class=o>-&gt;</span><span class=na>from</span><span class=p>(</span><span class=nx>Invoices</span><span class=o>::</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-130-26 name=__codelineno-130-26 href=#__codelineno-130-26></a>    <span class=o>-&gt;</span><span class=na>where</span><span class=p>(</span><span class=s1>&#39;inv_cst_id = :cst_id:&#39;</span><span class=p>)</span>
<a id=__codelineno-130-27 name=__codelineno-130-27 href=#__codelineno-130-27></a>    <span class=o>-&gt;</span><span class=na>andWhere</span><span class=p>(</span><span class=s1>&#39;inv_total = :total:&#39;</span><span class=p>)</span>
<a id=__codelineno-130-28 name=__codelineno-130-28 href=#__codelineno-130-28></a>    <span class=o>-&gt;</span><span class=na>getQuery</span><span class=p>()</span>
<a id=__codelineno-130-29 name=__codelineno-130-29 href=#__codelineno-130-29></a>    <span class=o>-&gt;</span><span class=na>execute</span><span class=p>(</span>
<a id=__codelineno-130-30 name=__codelineno-130-30 href=#__codelineno-130-30></a>        <span class=p>[</span>
<a id=__codelineno-130-31 name=__codelineno-130-31 href=#__codelineno-130-31></a>            <span class=s1>&#39;cst_id&#39;</span> <span class=o>=&gt;</span> <span class=mi>1</span><span class=p>,</span>
<a id=__codelineno-130-32 name=__codelineno-130-32 href=#__codelineno-130-32></a>            <span class=s1>&#39;total&#39;</span>  <span class=o>=&gt;</span> <span class=mi>1000</span><span class=p>,</span>
<a id=__codelineno-130-33 name=__codelineno-130-33 href=#__codelineno-130-33></a>        <span class=p>]</span>
<a id=__codelineno-130-34 name=__codelineno-130-34 href=#__codelineno-130-34></a>    <span class=p>)</span>
<a id=__codelineno-130-35 name=__codelineno-130-35 href=#__codelineno-130-35></a><span class=p>;</span>
</code></pre></div> <h2 id=disable-literals-in-phql>Disable Literals in PHQL<a class=headerlink href=#disable-literals-in-phql title="Permanent link">&para;</a></h2> <p>Literals can be disabled in PHQL. This means that you will not be able to use strings, numbers or boolean values in PHQL. You will have to use bound parameters instead.</p> <div class="admonition info"> <p class=admonition-title>NOTE</p> <p>Disabling literals increases the security of your database statements and reduces the possibility of SQL injections.</p> </div> <div class="admonition info"> <p class=admonition-title>NOTE</p> <p>This setting can be set globally for all models. Please refer to the <a href=../db-models/ >models</a> document for a how-to and additional settings.</p> </div> <p>The following query could potentially lead to a SQL injection:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-131-1 name=__codelineno-131-1 href=#__codelineno-131-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-131-2 name=__codelineno-131-2 href=#__codelineno-131-2></a>
<a id=__codelineno-131-3 name=__codelineno-131-3 href=#__codelineno-131-3></a><span class=nv>$login</span>  <span class=o>=</span> <span class=s1>&#39;admin&#39;</span><span class=p>;</span>
<a id=__codelineno-131-4 name=__codelineno-131-4 href=#__codelineno-131-4></a><span class=nv>$phql</span>   <span class=o>=</span> <span class=s2>&quot;SELECT * FROM Users WHERE login = &#39;</span><span class=si>$login</span><span class=s2>&#39;&quot;</span><span class=p>;</span>
<a id=__codelineno-131-5 name=__codelineno-131-5 href=#__codelineno-131-5></a><span class=nv>$result</span> <span class=o>=</span> <span class=nv>$manager</span><span class=o>-&gt;</span><span class=na>executeQuery</span><span class=p>(</span><span class=nv>$phql</span><span class=p>);</span>
</code></pre></div> <p>If <code>$login</code> is changed to <code>' OR '' = '</code>, the produced PHQL is:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-132-1 name=__codelineno-132-1 href=#__codelineno-132-1></a><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>Users</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>login</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;&#39;</span><span class=w> </span><span class=k>OR</span><span class=w> </span><span class=s1>&#39;&#39;</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;&#39;</span>
</code></pre></div> <p>Which is always <code>true</code> no matter what the login stored in the database is. If literals are disabled, using strings, numbers or booleans in PHQL strings will cause an exception to be thrown, forcing the developer to use bound parameters. The same query can be written more securely as:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-133-1 name=__codelineno-133-1 href=#__codelineno-133-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-133-2 name=__codelineno-133-2 href=#__codelineno-133-2></a>
<a id=__codelineno-133-3 name=__codelineno-133-3 href=#__codelineno-133-3></a><span class=nv>$login</span>  <span class=o>=</span> <span class=s1>&#39;admin&#39;</span><span class=p>;</span>
<a id=__codelineno-133-4 name=__codelineno-133-4 href=#__codelineno-133-4></a><span class=nv>$phql</span>   <span class=o>=</span> <span class=s2>&quot;SELECT * FROM Users WHERE login = :login:&quot;</span><span class=p>;</span>
<a id=__codelineno-133-5 name=__codelineno-133-5 href=#__codelineno-133-5></a><span class=nv>$result</span> <span class=o>=</span> <span class=nv>$manager</span><span class=o>-&gt;</span><span class=na>executeQuery</span><span class=p>(</span>
<a id=__codelineno-133-6 name=__codelineno-133-6 href=#__codelineno-133-6></a>    <span class=nv>$phql</span><span class=p>,</span>
<a id=__codelineno-133-7 name=__codelineno-133-7 href=#__codelineno-133-7></a>    <span class=p>[</span>
<a id=__codelineno-133-8 name=__codelineno-133-8 href=#__codelineno-133-8></a>        <span class=s1>&#39;login&#39;</span> <span class=o>=&gt;</span> <span class=nv>$login</span><span class=p>,</span>
<a id=__codelineno-133-9 name=__codelineno-133-9 href=#__codelineno-133-9></a>    <span class=p>]</span>
<a id=__codelineno-133-10 name=__codelineno-133-10 href=#__codelineno-133-10></a><span class=p>);</span>
</code></pre></div> <p>You can disallow literals as follows:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-134-1 name=__codelineno-134-1 href=#__codelineno-134-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-134-2 name=__codelineno-134-2 href=#__codelineno-134-2></a>
<a id=__codelineno-134-3 name=__codelineno-134-3 href=#__codelineno-134-3></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\Model</span><span class=p>;</span>
<a id=__codelineno-134-4 name=__codelineno-134-4 href=#__codelineno-134-4></a>
<a id=__codelineno-134-5 name=__codelineno-134-5 href=#__codelineno-134-5></a><span class=nx>Model</span><span class=o>::</span><span class=na>setup</span><span class=p>(</span>
<a id=__codelineno-134-6 name=__codelineno-134-6 href=#__codelineno-134-6></a>    <span class=p>[</span>
<a id=__codelineno-134-7 name=__codelineno-134-7 href=#__codelineno-134-7></a>        <span class=s1>&#39;phqlLiterals&#39;</span> <span class=o>=&gt;</span> <span class=k>false</span>
<a id=__codelineno-134-8 name=__codelineno-134-8 href=#__codelineno-134-8></a>    <span class=p>]</span>
<a id=__codelineno-134-9 name=__codelineno-134-9 href=#__codelineno-134-9></a><span class=p>);</span>
</code></pre></div> <p>You can (and should) use bound parameters whether literals are disabled or not.</p> <h2 id=reserved-words>Reserved Words<a class=headerlink href=#reserved-words title="Permanent link">&para;</a></h2> <p>PHQL uses some reserved words internally. If you want to use any of them as attributes or model names, you will need to escape them using the cross-database escaping delimiters <code>[</code> and <code>]</code>:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-135-1 name=__codelineno-135-1 href=#__codelineno-135-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-135-2 name=__codelineno-135-2 href=#__codelineno-135-2></a>
<a id=__codelineno-135-3 name=__codelineno-135-3 href=#__codelineno-135-3></a><span class=nv>$phql</span>   <span class=o>=</span> <span class=s1>&#39;SELECT * FROM [Update]&#39;</span><span class=p>;</span>
<a id=__codelineno-135-4 name=__codelineno-135-4 href=#__codelineno-135-4></a><span class=nv>$result</span> <span class=o>=</span> <span class=nv>$manager</span><span class=o>-&gt;</span><span class=na>executeQuery</span><span class=p>(</span><span class=nv>$phql</span><span class=p>);</span>
<a id=__codelineno-135-5 name=__codelineno-135-5 href=#__codelineno-135-5></a>
<a id=__codelineno-135-6 name=__codelineno-135-6 href=#__codelineno-135-6></a><span class=nv>$phql</span>   <span class=o>=</span> <span class=s1>&#39;SELECT id, [Like] FROM Posts&#39;</span><span class=p>;</span>
<a id=__codelineno-135-7 name=__codelineno-135-7 href=#__codelineno-135-7></a><span class=nv>$result</span> <span class=o>=</span> <span class=nv>$manager</span><span class=o>-&gt;</span><span class=na>executeQuery</span><span class=p>(</span><span class=nv>$phql</span><span class=p>);</span>
</code></pre></div> <p>The delimiters are dynamically translated to valid delimiters depending on the database system where the application connecting to.</p> <h2 id=custom-dialect>Custom Dialect<a class=headerlink href=#custom-dialect title="Permanent link">&para;</a></h2> <p>Due to differences in SQL dialects based on the RDBMS of your choice, not all methods are supported. However, you can extend the dialect, so that you can use additional functions that your RDBMS supports. </p> <p>For the example below, we are using the <code>MATCH_AGAINST</code> method for MySQL.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-136-1 name=__codelineno-136-1 href=#__codelineno-136-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-136-2 name=__codelineno-136-2 href=#__codelineno-136-2></a>
<a id=__codelineno-136-3 name=__codelineno-136-3 href=#__codelineno-136-3></a><span class=k>use</span> <span class=nx>Phalcon\Db\Dialect\MySQL</span> <span class=k>as</span> <span class=nx>Dialect</span><span class=p>;</span>
<a id=__codelineno-136-4 name=__codelineno-136-4 href=#__codelineno-136-4></a><span class=k>use</span> <span class=nx>Phalcon\Db\Adapter\Pdo\MySQL</span> <span class=k>as</span> <span class=nx>Connection</span><span class=p>;</span>
<a id=__codelineno-136-5 name=__codelineno-136-5 href=#__codelineno-136-5></a>
<a id=__codelineno-136-6 name=__codelineno-136-6 href=#__codelineno-136-6></a><span class=nv>$dialect</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Dialect</span><span class=p>();</span>
<a id=__codelineno-136-7 name=__codelineno-136-7 href=#__codelineno-136-7></a><span class=nv>$dialect</span><span class=o>-&gt;</span><span class=na>registerCustomFunction</span><span class=p>(</span>
<a id=__codelineno-136-8 name=__codelineno-136-8 href=#__codelineno-136-8></a>    <span class=s1>&#39;MATCH_AGAINST&#39;</span><span class=p>,</span>
<a id=__codelineno-136-9 name=__codelineno-136-9 href=#__codelineno-136-9></a>    <span class=k>function</span> <span class=p>(</span><span class=nv>$dialect</span><span class=p>,</span> <span class=nv>$expression</span><span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-136-10 name=__codelineno-136-10 href=#__codelineno-136-10></a>        <span class=nv>$arguments</span> <span class=o>=</span> <span class=nv>$expression</span><span class=p>[</span><span class=s1>&#39;arguments&#39;</span><span class=p>];</span>
<a id=__codelineno-136-11 name=__codelineno-136-11 href=#__codelineno-136-11></a>        <span class=k>return</span> <span class=nb>sprintf</span><span class=p>(</span>
<a id=__codelineno-136-12 name=__codelineno-136-12 href=#__codelineno-136-12></a>            <span class=s2>&quot; MATCH (%s) AGAINST (%s)&quot;</span><span class=p>,</span>
<a id=__codelineno-136-13 name=__codelineno-136-13 href=#__codelineno-136-13></a>            <span class=nv>$dialect</span><span class=o>-&gt;</span><span class=na>getSqlExpression</span><span class=p>(</span><span class=nv>$arguments</span><span class=p>[</span><span class=mi>0</span><span class=p>]),</span>
<a id=__codelineno-136-14 name=__codelineno-136-14 href=#__codelineno-136-14></a>            <span class=nv>$dialect</span><span class=o>-&gt;</span><span class=na>getSqlExpression</span><span class=p>(</span><span class=nv>$arguments</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span>
<a id=__codelineno-136-15 name=__codelineno-136-15 href=#__codelineno-136-15></a>         <span class=p>);</span>
<a id=__codelineno-136-16 name=__codelineno-136-16 href=#__codelineno-136-16></a>    <span class=p>}</span>
<a id=__codelineno-136-17 name=__codelineno-136-17 href=#__codelineno-136-17></a><span class=p>);</span>
<a id=__codelineno-136-18 name=__codelineno-136-18 href=#__codelineno-136-18></a>
<a id=__codelineno-136-19 name=__codelineno-136-19 href=#__codelineno-136-19></a><span class=nv>$connection</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Connection</span><span class=p>(</span>
<a id=__codelineno-136-20 name=__codelineno-136-20 href=#__codelineno-136-20></a>    <span class=p>[</span>
<a id=__codelineno-136-21 name=__codelineno-136-21 href=#__codelineno-136-21></a>        <span class=s2>&quot;host&quot;</span>          <span class=o>=&gt;</span> <span class=s2>&quot;localhost&quot;</span><span class=p>,</span>
<a id=__codelineno-136-22 name=__codelineno-136-22 href=#__codelineno-136-22></a>        <span class=s2>&quot;username&quot;</span>      <span class=o>=&gt;</span> <span class=s2>&quot;root&quot;</span><span class=p>,</span>
<a id=__codelineno-136-23 name=__codelineno-136-23 href=#__codelineno-136-23></a>        <span class=s2>&quot;password&quot;</span>      <span class=o>=&gt;</span> <span class=s2>&quot;secret&quot;</span><span class=p>,</span>
<a id=__codelineno-136-24 name=__codelineno-136-24 href=#__codelineno-136-24></a>        <span class=s2>&quot;dbname&quot;</span>        <span class=o>=&gt;</span> <span class=s2>&quot;phalcon&quot;</span><span class=p>,</span>
<a id=__codelineno-136-25 name=__codelineno-136-25 href=#__codelineno-136-25></a>        <span class=s2>&quot;dialectClass&quot;</span>  <span class=o>=&gt;</span> <span class=nv>$dialect</span>
<a id=__codelineno-136-26 name=__codelineno-136-26 href=#__codelineno-136-26></a>    <span class=p>]</span>
<a id=__codelineno-136-27 name=__codelineno-136-27 href=#__codelineno-136-27></a><span class=p>);</span>
</code></pre></div> <p>Now you can use this function in PHQL, and it internally translates to the correct SQL using the custom function:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-137-1 name=__codelineno-137-1 href=#__codelineno-137-1></a><span class=nv>$phql</span> <span class=o>=</span> <span class=s2>&quot;SELECT *</span>
<a id=__codelineno-137-2 name=__codelineno-137-2 href=#__codelineno-137-2></a><span class=s2>         FROM Invoices</span>
<a id=__codelineno-137-3 name=__codelineno-137-3 href=#__codelineno-137-3></a><span class=s2>         WHERE MATCH_AGAINST(inv_title, :pattern:)&quot;</span><span class=p>;</span>
<a id=__codelineno-137-4 name=__codelineno-137-4 href=#__codelineno-137-4></a>
<a id=__codelineno-137-5 name=__codelineno-137-5 href=#__codelineno-137-5></a><span class=nv>$invoices</span> <span class=o>=</span> <span class=nv>$modelsManager</span>
<a id=__codelineno-137-6 name=__codelineno-137-6 href=#__codelineno-137-6></a>    <span class=o>-&gt;</span><span class=na>executeQuery</span><span class=p>(</span>
<a id=__codelineno-137-7 name=__codelineno-137-7 href=#__codelineno-137-7></a>        <span class=nv>$phql</span><span class=p>,</span> 
<a id=__codelineno-137-8 name=__codelineno-137-8 href=#__codelineno-137-8></a>        <span class=p>[</span>
<a id=__codelineno-137-9 name=__codelineno-137-9 href=#__codelineno-137-9></a>            <span class=s1>&#39;pattern&#39;</span> <span class=o>=&gt;</span> <span class=nv>$pattern</span>
<a id=__codelineno-137-10 name=__codelineno-137-10 href=#__codelineno-137-10></a>        <span class=p>]</span>
<a id=__codelineno-137-11 name=__codelineno-137-11 href=#__codelineno-137-11></a>    <span class=p>)</span>
<a id=__codelineno-137-12 name=__codelineno-137-12 href=#__codelineno-137-12></a><span class=p>;</span>
</code></pre></div> <p>Another example showcasing <code>GROUP_CONCAT</code>:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-138-1 name=__codelineno-138-1 href=#__codelineno-138-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-138-2 name=__codelineno-138-2 href=#__codelineno-138-2></a>
<a id=__codelineno-138-3 name=__codelineno-138-3 href=#__codelineno-138-3></a><span class=k>use</span> <span class=nx>Phalcon\Db\Dialect\MySQL</span> <span class=k>as</span> <span class=nx>Dialect</span><span class=p>;</span>
<a id=__codelineno-138-4 name=__codelineno-138-4 href=#__codelineno-138-4></a><span class=k>use</span> <span class=nx>Phalcon\Db\Adapter\Pdo\MySQL</span> <span class=k>as</span> <span class=nx>Connection</span><span class=p>;</span>
<a id=__codelineno-138-5 name=__codelineno-138-5 href=#__codelineno-138-5></a>
<a id=__codelineno-138-6 name=__codelineno-138-6 href=#__codelineno-138-6></a><span class=nv>$dialect</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Dialect</span><span class=p>();</span>
<a id=__codelineno-138-7 name=__codelineno-138-7 href=#__codelineno-138-7></a><span class=nv>$dialect</span><span class=o>-&gt;</span><span class=na>registerCustomFunction</span><span class=p>(</span>
<a id=__codelineno-138-8 name=__codelineno-138-8 href=#__codelineno-138-8></a>    <span class=s1>&#39;GROUPCONCAT&#39;</span><span class=p>,</span>
<a id=__codelineno-138-9 name=__codelineno-138-9 href=#__codelineno-138-9></a>    <span class=k>function</span> <span class=p>(</span><span class=nv>$dialect</span><span class=p>,</span> <span class=nv>$expression</span><span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-138-10 name=__codelineno-138-10 href=#__codelineno-138-10></a>        <span class=nv>$arguments</span> <span class=o>=</span> <span class=nv>$expression</span><span class=p>[</span><span class=s1>&#39;arguments&#39;</span><span class=p>];</span>
<a id=__codelineno-138-11 name=__codelineno-138-11 href=#__codelineno-138-11></a>        <span class=k>if</span> <span class=p>(</span><span class=k>true</span> <span class=o>!==</span> <span class=k>empty</span><span class=p>(</span><span class=nv>$arguments</span><span class=p>[</span><span class=mi>2</span><span class=p>]))</span> <span class=p>{</span>
<a id=__codelineno-138-12 name=__codelineno-138-12 href=#__codelineno-138-12></a>            <span class=k>return</span> <span class=nb>sprintf</span><span class=p>(</span>
<a id=__codelineno-138-13 name=__codelineno-138-13 href=#__codelineno-138-13></a>                <span class=s2>&quot; GROUP_CONCAT(DISTINCT %s ORDER BY %s SEPARATOR %s)&quot;</span><span class=p>,</span>
<a id=__codelineno-138-14 name=__codelineno-138-14 href=#__codelineno-138-14></a>                <span class=nv>$dialect</span><span class=o>-&gt;</span><span class=na>getSqlExpression</span><span class=p>(</span><span class=nv>$arguments</span><span class=p>[</span><span class=mi>0</span><span class=p>]),</span>
<a id=__codelineno-138-15 name=__codelineno-138-15 href=#__codelineno-138-15></a>                <span class=nv>$dialect</span><span class=o>-&gt;</span><span class=na>getSqlExpression</span><span class=p>(</span><span class=nv>$arguments</span><span class=p>[</span><span class=mi>1</span><span class=p>]),</span>
<a id=__codelineno-138-16 name=__codelineno-138-16 href=#__codelineno-138-16></a>                <span class=nv>$dialect</span><span class=o>-&gt;</span><span class=na>getSqlExpression</span><span class=p>(</span><span class=nv>$arguments</span><span class=p>[</span><span class=mi>2</span><span class=p>]),</span>
<a id=__codelineno-138-17 name=__codelineno-138-17 href=#__codelineno-138-17></a>            <span class=p>);</span>
<a id=__codelineno-138-18 name=__codelineno-138-18 href=#__codelineno-138-18></a>        <span class=p>}</span> <span class=k>elseif</span> <span class=p>(</span><span class=k>true</span> <span class=o>!==</span> <span class=k>empty</span><span class=p>(</span><span class=nv>$arguments</span><span class=p>[</span><span class=mi>1</span><span class=p>]))</span> <span class=p>{</span>
<a id=__codelineno-138-19 name=__codelineno-138-19 href=#__codelineno-138-19></a>            <span class=k>return</span> <span class=nb>sprintf</span><span class=p>(</span>
<a id=__codelineno-138-20 name=__codelineno-138-20 href=#__codelineno-138-20></a>                <span class=s2>&quot; GROUP_CONCAT(%s SEPARATOR %s)&quot;</span><span class=p>,</span>
<a id=__codelineno-138-21 name=__codelineno-138-21 href=#__codelineno-138-21></a>                <span class=nv>$dialect</span><span class=o>-&gt;</span><span class=na>getSqlExpression</span><span class=p>(</span><span class=nv>$arguments</span><span class=p>[</span><span class=mi>0</span><span class=p>]),</span>
<a id=__codelineno-138-22 name=__codelineno-138-22 href=#__codelineno-138-22></a>                <span class=nv>$dialect</span><span class=o>-&gt;</span><span class=na>getSqlExpression</span><span class=p>(</span><span class=nv>$arguments</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span>
<a id=__codelineno-138-23 name=__codelineno-138-23 href=#__codelineno-138-23></a>            <span class=p>);</span>
<a id=__codelineno-138-24 name=__codelineno-138-24 href=#__codelineno-138-24></a>        <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
<a id=__codelineno-138-25 name=__codelineno-138-25 href=#__codelineno-138-25></a>            <span class=k>return</span> <span class=nb>sprintf</span><span class=p>(</span>
<a id=__codelineno-138-26 name=__codelineno-138-26 href=#__codelineno-138-26></a>                <span class=s2>&quot; GROUP_CONCAT(%s)&quot;</span><span class=p>,</span>
<a id=__codelineno-138-27 name=__codelineno-138-27 href=#__codelineno-138-27></a>                <span class=nv>$dialect</span><span class=o>-&gt;</span><span class=na>getSqlExpression</span><span class=p>(</span><span class=nv>$arguments</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span>
<a id=__codelineno-138-28 name=__codelineno-138-28 href=#__codelineno-138-28></a>            <span class=p>);</span>
<a id=__codelineno-138-29 name=__codelineno-138-29 href=#__codelineno-138-29></a>        <span class=p>}</span>
<a id=__codelineno-138-30 name=__codelineno-138-30 href=#__codelineno-138-30></a>    <span class=p>}</span>
<a id=__codelineno-138-31 name=__codelineno-138-31 href=#__codelineno-138-31></a><span class=p>);</span>
<a id=__codelineno-138-32 name=__codelineno-138-32 href=#__codelineno-138-32></a>
<a id=__codelineno-138-33 name=__codelineno-138-33 href=#__codelineno-138-33></a><span class=nv>$connection</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Connection</span><span class=p>(</span>
<a id=__codelineno-138-34 name=__codelineno-138-34 href=#__codelineno-138-34></a>    <span class=p>[</span>
<a id=__codelineno-138-35 name=__codelineno-138-35 href=#__codelineno-138-35></a>        <span class=s2>&quot;host&quot;</span>          <span class=o>=&gt;</span> <span class=s2>&quot;localhost&quot;</span><span class=p>,</span>
<a id=__codelineno-138-36 name=__codelineno-138-36 href=#__codelineno-138-36></a>        <span class=s2>&quot;username&quot;</span>      <span class=o>=&gt;</span> <span class=s2>&quot;root&quot;</span><span class=p>,</span>
<a id=__codelineno-138-37 name=__codelineno-138-37 href=#__codelineno-138-37></a>        <span class=s2>&quot;password&quot;</span>      <span class=o>=&gt;</span> <span class=s2>&quot;secret&quot;</span><span class=p>,</span>
<a id=__codelineno-138-38 name=__codelineno-138-38 href=#__codelineno-138-38></a>        <span class=s2>&quot;dbname&quot;</span>        <span class=o>=&gt;</span> <span class=s2>&quot;phalcon&quot;</span><span class=p>,</span>
<a id=__codelineno-138-39 name=__codelineno-138-39 href=#__codelineno-138-39></a>        <span class=s2>&quot;dialectClass&quot;</span>  <span class=o>=&gt;</span> <span class=nv>$dialect</span>
<a id=__codelineno-138-40 name=__codelineno-138-40 href=#__codelineno-138-40></a>    <span class=p>]</span>
<a id=__codelineno-138-41 name=__codelineno-138-41 href=#__codelineno-138-41></a><span class=p>);</span>
</code></pre></div> <p>Now you can use this function in PHQL, and it internally translates to the correct SQL using the custom function:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-139-1 name=__codelineno-139-1 href=#__codelineno-139-1></a><span class=nv>$phql</span> <span class=o>=</span> <span class=s2>&quot;SELECT GROUPCONCAT(inv_title, inv_title, :separator:)</span>
<a id=__codelineno-139-2 name=__codelineno-139-2 href=#__codelineno-139-2></a><span class=s2>         FROM Invoices&quot;</span><span class=p>;</span>
<a id=__codelineno-139-3 name=__codelineno-139-3 href=#__codelineno-139-3></a>
<a id=__codelineno-139-4 name=__codelineno-139-4 href=#__codelineno-139-4></a><span class=nv>$invoices</span> <span class=o>=</span> <span class=nv>$modelsManager</span>
<a id=__codelineno-139-5 name=__codelineno-139-5 href=#__codelineno-139-5></a>    <span class=o>-&gt;</span><span class=na>executeQuery</span><span class=p>(</span>
<a id=__codelineno-139-6 name=__codelineno-139-6 href=#__codelineno-139-6></a>        <span class=nv>$phql</span><span class=p>,</span> 
<a id=__codelineno-139-7 name=__codelineno-139-7 href=#__codelineno-139-7></a>        <span class=p>[</span>
<a id=__codelineno-139-8 name=__codelineno-139-8 href=#__codelineno-139-8></a>            <span class=s1>&#39;separator&#39;</span> <span class=o>=&gt;</span> <span class=s2>&quot;, &quot;</span>
<a id=__codelineno-139-9 name=__codelineno-139-9 href=#__codelineno-139-9></a>        <span class=p>]</span>
<a id=__codelineno-139-10 name=__codelineno-139-10 href=#__codelineno-139-10></a>    <span class=p>)</span>
<a id=__codelineno-139-11 name=__codelineno-139-11 href=#__codelineno-139-11></a><span class=p>;</span>
</code></pre></div> <p>The above will create a <code>GROUP_CONCAT</code> based on the parameters passed to the method. If three parameters passed we will have a <code>GROUP_CONCAT</code> with a <code>DISTINCT</code>, <code>ORDER BY</code> and <code>SEPARATOR</code>, if two parameters passed we will have a <code>GROUP_CONCAT</code> with <code>SEPARATOR</code> and if only one parameter passed just a <code>GROUP_CONCAT</code></p> <h2 id=caching>Caching<a class=headerlink href=#caching title="Permanent link">&para;</a></h2> <p>PHQL queries can be cached. You can also check the [Models Caching][db-models-cache] document for more information.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-140-1 name=__codelineno-140-1 href=#__codelineno-140-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-140-2 name=__codelineno-140-2 href=#__codelineno-140-2></a>
<a id=__codelineno-140-3 name=__codelineno-140-3 href=#__codelineno-140-3></a><span class=nv>$phql</span>  <span class=o>=</span> <span class=s1>&#39;SELECT * FROM Customers WHERE cst_id = :cst_id:&#39;</span><span class=p>;</span>
<a id=__codelineno-140-4 name=__codelineno-140-4 href=#__codelineno-140-4></a><span class=nv>$query</span> <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-140-5 name=__codelineno-140-5 href=#__codelineno-140-5></a>    <span class=o>-&gt;</span><span class=na>modelsManager</span>
<a id=__codelineno-140-6 name=__codelineno-140-6 href=#__codelineno-140-6></a>    <span class=o>-&gt;</span><span class=na>createQuery</span><span class=p>(</span><span class=nv>$phql</span><span class=p>)</span>
<a id=__codelineno-140-7 name=__codelineno-140-7 href=#__codelineno-140-7></a><span class=p>;</span>
<a id=__codelineno-140-8 name=__codelineno-140-8 href=#__codelineno-140-8></a>
<a id=__codelineno-140-9 name=__codelineno-140-9 href=#__codelineno-140-9></a><span class=nv>$query</span><span class=o>-&gt;</span><span class=na>cache</span><span class=p>(</span>
<a id=__codelineno-140-10 name=__codelineno-140-10 href=#__codelineno-140-10></a>    <span class=p>[</span>
<a id=__codelineno-140-11 name=__codelineno-140-11 href=#__codelineno-140-11></a>        <span class=s1>&#39;key&#39;</span>      <span class=o>=&gt;</span> <span class=s1>&#39;customers-1&#39;</span><span class=p>,</span>
<a id=__codelineno-140-12 name=__codelineno-140-12 href=#__codelineno-140-12></a>        <span class=s1>&#39;lifetime&#39;</span> <span class=o>=&gt;</span> <span class=mi>300</span><span class=p>,</span>
<a id=__codelineno-140-13 name=__codelineno-140-13 href=#__codelineno-140-13></a>    <span class=p>]</span>
<a id=__codelineno-140-14 name=__codelineno-140-14 href=#__codelineno-140-14></a><span class=p>);</span>
<a id=__codelineno-140-15 name=__codelineno-140-15 href=#__codelineno-140-15></a>
<a id=__codelineno-140-16 name=__codelineno-140-16 href=#__codelineno-140-16></a><span class=nv>$invoice</span> <span class=o>=</span> <span class=nv>$query</span><span class=o>-&gt;</span><span class=na>execute</span><span class=p>(</span>
<a id=__codelineno-140-17 name=__codelineno-140-17 href=#__codelineno-140-17></a>    <span class=p>[</span>
<a id=__codelineno-140-18 name=__codelineno-140-18 href=#__codelineno-140-18></a>        <span class=s1>&#39;cst_id&#39;</span> <span class=o>=&gt;</span> <span class=mi>1</span><span class=p>,</span>
<a id=__codelineno-140-19 name=__codelineno-140-19 href=#__codelineno-140-19></a>    <span class=p>]</span>
<a id=__codelineno-140-20 name=__codelineno-140-20 href=#__codelineno-140-20></a><span class=p>);</span>
</code></pre></div> <h2 id=lifecycle>Lifecycle<a class=headerlink href=#lifecycle title="Permanent link">&para;</a></h2> <p>Being a high-level language, PHQL gives developers the ability to personalize and customize different aspects in order to suit their needs. The following is the life cycle of each PHQL statement executed:</p> <ul> <li>The PHQL is parsed and converted into an Intermediate Representation (IR) which is independent of the SQL implemented by database system</li> <li>The IR is converted to valid SQL according to the database system associated to the model</li> <li>PHQL statements are parsed once and cached in memory. Further executions of the same statement result in a slightly faster execution</li> </ul> <h2 id=raw-sql>Raw SQL<a class=headerlink href=#raw-sql title="Permanent link">&para;</a></h2> <p>A database system could offer specific SQL extensions that are not supported by PHQL, in this case, a raw SQL can be appropriate:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-141-1 name=__codelineno-141-1 href=#__codelineno-141-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-141-2 name=__codelineno-141-2 href=#__codelineno-141-2></a>
<a id=__codelineno-141-3 name=__codelineno-141-3 href=#__codelineno-141-3></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\Model</span><span class=p>;</span>
<a id=__codelineno-141-4 name=__codelineno-141-4 href=#__codelineno-141-4></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\Model\Resultset\Simple</span> <span class=k>as</span> <span class=nx>Resultset</span><span class=p>;</span>
<a id=__codelineno-141-5 name=__codelineno-141-5 href=#__codelineno-141-5></a>
<a id=__codelineno-141-6 name=__codelineno-141-6 href=#__codelineno-141-6></a><span class=k>class</span> <span class=nc>Invoices</span> <span class=k>extends</span> <span class=nx>Model</span>
<a id=__codelineno-141-7 name=__codelineno-141-7 href=#__codelineno-141-7></a><span class=p>{</span>
<a id=__codelineno-141-8 name=__codelineno-141-8 href=#__codelineno-141-8></a>    <span class=k>public</span> <span class=k>static</span> <span class=k>function</span> <span class=nf>findByCreateInterval</span><span class=p>()</span>
<a id=__codelineno-141-9 name=__codelineno-141-9 href=#__codelineno-141-9></a>    <span class=p>{</span>
<a id=__codelineno-141-10 name=__codelineno-141-10 href=#__codelineno-141-10></a>        <span class=nv>$sql</span>     <span class=o>=</span> <span class=s1>&#39;SELECT * FROM Invoices WHERE inv_id &gt; 1&#39;</span><span class=p>;</span>
<a id=__codelineno-141-11 name=__codelineno-141-11 href=#__codelineno-141-11></a>        <span class=nv>$invoice</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Invoices</span><span class=p>();</span>
<a id=__codelineno-141-12 name=__codelineno-141-12 href=#__codelineno-141-12></a>
<a id=__codelineno-141-13 name=__codelineno-141-13 href=#__codelineno-141-13></a>        <span class=c1>// Execute the query</span>
<a id=__codelineno-141-14 name=__codelineno-141-14 href=#__codelineno-141-14></a>        <span class=k>return</span> <span class=k>new</span> <span class=nx>Resultset</span><span class=p>(</span>
<a id=__codelineno-141-15 name=__codelineno-141-15 href=#__codelineno-141-15></a>            <span class=k>null</span><span class=p>,</span>
<a id=__codelineno-141-16 name=__codelineno-141-16 href=#__codelineno-141-16></a>            <span class=nv>$invoice</span><span class=p>,</span>
<a id=__codelineno-141-17 name=__codelineno-141-17 href=#__codelineno-141-17></a>            <span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>getReadConnection</span><span class=p>()</span><span class=o>-&gt;</span><span class=na>query</span><span class=p>(</span><span class=nv>$sql</span><span class=p>)</span>
<a id=__codelineno-141-18 name=__codelineno-141-18 href=#__codelineno-141-18></a>        <span class=p>);</span>
<a id=__codelineno-141-19 name=__codelineno-141-19 href=#__codelineno-141-19></a>    <span class=p>}</span>
<a id=__codelineno-141-20 name=__codelineno-141-20 href=#__codelineno-141-20></a><span class=p>}</span>
</code></pre></div> <p>If raw SQL queries are common in your application a generic method could be added to your model:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-142-1 name=__codelineno-142-1 href=#__codelineno-142-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-142-2 name=__codelineno-142-2 href=#__codelineno-142-2></a>
<a id=__codelineno-142-3 name=__codelineno-142-3 href=#__codelineno-142-3></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\Model</span><span class=p>;</span>
<a id=__codelineno-142-4 name=__codelineno-142-4 href=#__codelineno-142-4></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\Model\Resultset\Simple</span> <span class=k>as</span> <span class=nx>Resultset</span><span class=p>;</span>
<a id=__codelineno-142-5 name=__codelineno-142-5 href=#__codelineno-142-5></a>
<a id=__codelineno-142-6 name=__codelineno-142-6 href=#__codelineno-142-6></a><span class=k>class</span> <span class=nc>Invoices</span> <span class=k>extends</span> <span class=nx>Model</span>
<a id=__codelineno-142-7 name=__codelineno-142-7 href=#__codelineno-142-7></a><span class=p>{</span>
<a id=__codelineno-142-8 name=__codelineno-142-8 href=#__codelineno-142-8></a>    <span class=k>public</span> <span class=k>static</span> <span class=k>function</span> <span class=nf>findByRawSql</span><span class=p>(</span>
<a id=__codelineno-142-9 name=__codelineno-142-9 href=#__codelineno-142-9></a>        <span class=nx>string</span> <span class=nv>$conditions</span><span class=p>,</span> 
<a id=__codelineno-142-10 name=__codelineno-142-10 href=#__codelineno-142-10></a>        <span class=k>array</span> <span class=nv>$params</span> <span class=o>=</span> <span class=k>null</span>
<a id=__codelineno-142-11 name=__codelineno-142-11 href=#__codelineno-142-11></a>    <span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-142-12 name=__codelineno-142-12 href=#__codelineno-142-12></a>        <span class=nv>$sql</span>     <span class=o>=</span> <span class=s1>&#39;SELECT * FROM Invoices WHERE &#39;</span> <span class=o>.</span> <span class=nv>$conditions</span><span class=p>;</span>
<a id=__codelineno-142-13 name=__codelineno-142-13 href=#__codelineno-142-13></a>        <span class=nv>$invoice</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Invoices</span><span class=p>();</span>
<a id=__codelineno-142-14 name=__codelineno-142-14 href=#__codelineno-142-14></a>
<a id=__codelineno-142-15 name=__codelineno-142-15 href=#__codelineno-142-15></a>        <span class=c1>// Execute the query</span>
<a id=__codelineno-142-16 name=__codelineno-142-16 href=#__codelineno-142-16></a>        <span class=k>return</span> <span class=k>new</span> <span class=nx>Resultset</span><span class=p>(</span>
<a id=__codelineno-142-17 name=__codelineno-142-17 href=#__codelineno-142-17></a>            <span class=k>null</span><span class=p>,</span>
<a id=__codelineno-142-18 name=__codelineno-142-18 href=#__codelineno-142-18></a>            <span class=nv>$invoice</span><span class=p>,</span>
<a id=__codelineno-142-19 name=__codelineno-142-19 href=#__codelineno-142-19></a>            <span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>getReadConnection</span><span class=p>()</span><span class=o>-&gt;</span><span class=na>query</span><span class=p>(</span><span class=nv>$sql</span><span class=p>,</span> <span class=nv>$params</span><span class=p>)</span>
<a id=__codelineno-142-20 name=__codelineno-142-20 href=#__codelineno-142-20></a>        <span class=p>);</span>
<a id=__codelineno-142-21 name=__codelineno-142-21 href=#__codelineno-142-21></a>    <span class=p>}</span>
<a id=__codelineno-142-22 name=__codelineno-142-22 href=#__codelineno-142-22></a><span class=p>}</span>
</code></pre></div> <p>The above <code>findByRawSql</code> could be used as follows:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-143-1 name=__codelineno-143-1 href=#__codelineno-143-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-143-2 name=__codelineno-143-2 href=#__codelineno-143-2></a>
<a id=__codelineno-143-3 name=__codelineno-143-3 href=#__codelineno-143-3></a><span class=nv>$robots</span> <span class=o>=</span> <span class=nx>Invoices</span><span class=o>::</span><span class=na>findByRawSql</span><span class=p>(</span>
<a id=__codelineno-143-4 name=__codelineno-143-4 href=#__codelineno-143-4></a>    <span class=s1>&#39;id &gt; ?0&#39;</span><span class=p>,</span>
<a id=__codelineno-143-5 name=__codelineno-143-5 href=#__codelineno-143-5></a>    <span class=p>[</span>
<a id=__codelineno-143-6 name=__codelineno-143-6 href=#__codelineno-143-6></a>        <span class=mi>10</span>
<a id=__codelineno-143-7 name=__codelineno-143-7 href=#__codelineno-143-7></a>    <span class=p>]</span>
<a id=__codelineno-143-8 name=__codelineno-143-8 href=#__codelineno-143-8></a><span class=p>);</span>
</code></pre></div> <h2 id=troubleshooting>Troubleshooting<a class=headerlink href=#troubleshooting title="Permanent link">&para;</a></h2> <p>Some things to keep in mind when using PHQL:</p> <ul> <li>Classes are case-sensitive, if a class is not defined with the same name as it was created this could lead to an unexpected behavior in operating systems with case-sensitive file systems such as Linux.</li> <li>The correct charset must be defined in the connection to bind parameters successfully.</li> <li>Aliased classes are not replaced by full namespaced classes since this only occurs in PHP code and not inside strings.</li> <li>If column renaming is enabled avoid, using column aliases with the same name as columns to be renamed, this may confuse the query resolver.</li> </ul> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../db-layer/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Layer"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Layer </div> </div> </a> <a href=../db-odm/ class="md-footer__link md-footer__link--next" aria-label="Next: ODM"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> ODM </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2012 - present Phalcon Team </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://phalcon.io/discord target=_blank rel=noopener title=Discord class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M524.531 69.836a1.5 1.5 0 0 0-.764-.7A485.065 485.065 0 0 0 404.081 32.03a1.816 1.816 0 0 0-1.923.91 337.461 337.461 0 0 0-14.9 30.6 447.848 447.848 0 0 0-134.426 0 309.541 309.541 0 0 0-15.135-30.6 1.89 1.89 0 0 0-1.924-.91 483.689 483.689 0 0 0-119.688 37.107 1.712 1.712 0 0 0-.788.676C39.068 183.651 18.186 294.69 28.43 404.354a2.016 2.016 0 0 0 .765 1.375 487.666 487.666 0 0 0 146.825 74.189 1.9 1.9 0 0 0 2.063-.676A348.2 348.2 0 0 0 208.12 430.4a1.86 1.86 0 0 0-1.019-2.588 321.173 321.173 0 0 1-45.868-21.853 1.885 1.885 0 0 1-.185-3.126 251.047 251.047 0 0 0 9.109-7.137 1.819 1.819 0 0 1 1.9-.256c96.229 43.917 200.41 43.917 295.5 0a1.812 1.812 0 0 1 1.924.233 234.533 234.533 0 0 0 9.132 7.16 1.884 1.884 0 0 1-.162 3.126 301.407 301.407 0 0 1-45.89 21.83 1.875 1.875 0 0 0-1 2.611 391.055 391.055 0 0 0 30.014 48.815 1.864 1.864 0 0 0 2.063.7A486.048 486.048 0 0 0 610.7 405.729a1.882 1.882 0 0 0 .765-1.352c12.264-126.783-20.532-236.912-86.934-334.541ZM222.491 337.58c-28.972 0-52.844-26.587-52.844-59.239s23.409-59.241 52.844-59.241c29.665 0 53.306 26.82 52.843 59.239 0 32.654-23.41 59.241-52.843 59.241Zm195.38 0c-28.971 0-52.843-26.587-52.843-59.239s23.409-59.241 52.843-59.241c29.667 0 53.307 26.82 52.844 59.239 0 32.654-23.177 59.241-52.844 59.241Z"/></svg> </a> <a href=https://phalcon.io/discussions target=_blank rel=noopener title="GitHub Discussions" class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9 22a1 1 0 0 1-1-1v-3H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-6.1l-3.7 3.71c-.2.19-.45.29-.7.29H9Z"/></svg> </a> <a href=https://phalcon.io/github target=_blank rel=noopener title="GitHub Project" class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://phalcon.io/telegram target=_blank rel=noopener title=Telegram class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M248 8C111.033 8 0 119.033 0 256s111.033 248 248 248 248-111.033 248-248S384.967 8 248 8Zm114.952 168.66c-3.732 39.215-19.881 134.378-28.1 178.3-3.476 18.584-10.322 24.816-16.948 25.425-14.4 1.326-25.338-9.517-39.287-18.661-21.827-14.308-34.158-23.215-55.346-37.177-24.485-16.135-8.612-25 5.342-39.5 3.652-3.793 67.107-61.51 68.335-66.746.153-.655.3-3.1-1.154-4.384s-3.59-.849-5.135-.5q-3.283.746-104.608 69.142-14.845 10.194-26.894 9.934c-8.855-.191-25.888-5.006-38.551-9.123-15.531-5.048-27.875-7.717-26.8-16.291q.84-6.7 18.45-13.7 108.446-47.248 144.628-62.3c68.872-28.647 83.183-33.623 92.511-33.789 2.052-.034 6.639.474 9.61 2.885a10.452 10.452 0 0 1 3.53 6.716 43.765 43.765 0 0 1 .417 9.769Z"/></svg> </a> <a href=https://phalcon.io/gab target=_blank rel=noopener title=Gab class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M368 32c41.7 0 75.9 31.8 79.7 72.5l85.6 26.3c25.4 7.8 42.8 31.3 42.8 57.9 0 21.8-11.7 41.9-30.7 52.7l-144.6 82.1 92.5 92.5H544c17.7 0 32 14.3 32 32s-14.3 32-32 32h-64c-8.5 0-16.6-3.4-22.6-9.4L346.9 360.2c11.7-36 3.2-77.1-25.4-105.7-40.6-40.6-106.3-40.6-146.9-.1l-73.6 70c-6.4 6.1-6.7 16.2-.6 22.6s16.2 6.6 22.6.6l73.8-70.2.1-.1.1-.1c3.5-3.5 7.3-6.6 11.3-9.2 27.9-18.5 65.9-15.4 90.5 9.2 24.7 24.7 27.7 62.9 9 90.9-2.6 3.8-5.6 7.5-9 10.9l-37 37H352c17.7 0 32 14.3 32 32s-14.3 32-32 32H64c-35.3 0-64-28.7-64-64C0 249.6 127 112.9 289.3 97.5 296.2 60.2 328.8 32 368 32zm0 104a24 24 0 1 0 0-48 24 24 0 1 0 0 48z"/></svg> </a> <a href=https://phalcon.io/t target=_blank rel=noopener title=Twitter class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9L389.2 48zm-24.8 373.8h39.1L151.1 88h-42l255.3 333.8z"/></svg> </a> <a href=https://phalcon.io/fb target=_blank rel=noopener title=Facebook class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M512 256C512 114.6 397.4 0 256 0S0 114.6 0 256c0 120 82.7 220.8 194.2 248.5V334.2h-52.8V256h52.8v-33.7c0-87.1 39.4-127.5 125-127.5 16.2 0 44.2 3.2 55.7 6.4V172c-6-.6-16.5-1-29.6-1-42 0-58.2 15.9-58.2 57.2V256h83.6l-14.4 78.2H287v175.9C413.8 494.8 512 386.9 512 256z"/></svg> </a> <a href=https://phalcon.io/linkedin target=_blank rel=noopener title=LinkedIn class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg> </a> <a href=https://phalcon.io/youtube target=_blank rel=noopener title=LinkedIn class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-progress data-md-component=progress role=progressbar></div> <script id=__config type=application/json>{"base": "..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.code.select", "content.tooltips", "navigation.footer", "navigation.indexes", "navigation.instant", "navigation.instant.progress", "navigation.sections", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "5.4.0", "provider": "mike"}}</script> <script src=../assets/javascripts/bundle.d7c377c4.min.js></script> </body> </html>