<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Phalcon Framework. A full-stack PHP framework delivered as a PHP extension, offering lower resource consumption and high performance."><meta name=author content="Phalcon Team"><link href=https://docs.phalcon.io/5.7/db-models-relationships/ rel=canonical><link href=../db-models-metadata/ rel=prev><link href=../db-models-transactions/ rel=next><link rel=icon href=../assets/images/favicon.ico><meta name=generator content="mkdocs-1.6.0, mkdocs-material-9.5.24"><title>Relationships - Phalcon Documentation</title><link rel=stylesheet href=../assets/stylesheets/main.6543a935.min.css><link rel=stylesheet href=../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Titillium+Web:300,300i,400,400i,700,700i%7CSource+Code+Pro:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Titillium Web";--md-code-font:"Source Code Pro"}</style><link rel=stylesheet href=../assets/css/extra.css><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-JR4REKBKH3"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-JR4REKBKH3",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-JR4REKBKH3",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><!-- Fanart --><!--

Phalcon Framework

A full-stack PHP framework delivered as a PHP extension,
offering lower resource consumption and high performance.

<3 Phalcon Team

                         ..
                         ....
   %                  ,   ......
     %%%               ,,  .......
      %%%%%%           ,,,,.........
       %%%%%%%%&        ,,,,,.........,
    /    %%%%%%%%%%      ,,,,,,..........
      //  %%%%%%%%%%%%%    ,,,,,,..........
       //// %%%%%%%%%%%%%%%  ,,,,,,..........,
         ////%%%%%%%%%%%%%%%%%%,,,,,,...........
          ///////%%%%%%%%%%%%%%%%%%,,,,...........
            ////////%%%%%%%%%%%%%%%%%%/,,...........
          %%%%/////////(%%%%%%%%%%%%%%%%%%,..........
            %%%%%//////////%%%%%%%%%%%%%%%%%%........(
               %%%%///////////(%%%%%%%%%%%%%%%%.......(
                 %%%%%////////////%%%%%%%%%%%%%%%.....//
                ....%%%%%////////////#%%%%%%%%%%%%%....//
                   .......(%/////////////%%%%%%%%%%%%..  /
                      ...........///////********/%%%%%..
                     ,,,,.............,/***************.
                         ,,,,,.............************......,/(
                               ,,,,,,..........********.....//////////
                              ((((((((**((((((((((((((*.....///////////
                                  %*********.../(((((((..........///(/#/
                               **********..........#%%%           ..*%%%
                            *********(..........%%%                  %%%
                         *********/..........%%%                     %%
                   %    *******%%.........%%%%
                  %   ******%%%%...../.*((((((   %%%%
                     ****%%%%%%.....///* (((((((%%%%%
                    ***&%%%%%%.....////* ((((((((%%  %
                    *  &%%%%%#..../////*  (((     %
                       &%%%%%....//////*           %
                        %%%% ....//////***   %%%
                     (  %%%   ...*/////*****%%%%
                     (   %     ...  //(*****/%%
                      (  &      ..   // ***  %%
                                 .     /      %
--><!-- Fanart --></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#model-relationships class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title="Phalcon Documentation" class="md-header__button md-logo" aria-label="Phalcon Documentation" data-md-component=logo> <img src=https://assets.phalcon.io/phalcon/images/svg/phalcon-logo-35x39.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Phalcon Documentation </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Relationships </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media=(prefers-color-scheme) data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1M8 13h8v-2H8v2m9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.71-1.39 3.1-3.1 3.1h-4V17h4a5 5 0 0 0 5-5 5 5 0 0 0-5-5Z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=custom data-md-color-accent=teal aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=custom data-md-color-accent=teal aria-label="Switch to system preference" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to system preference" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5M7 15a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg> </label> </form> <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/phalcon/documentation title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> phalcon/documentation </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../introduction/ class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../installation/ class=md-tabs__link> Getting Started </a> </li> <li class=md-tabs__item> <a href=../application/ class=md-tabs__link> Core </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../db-layer/ class=md-tabs__link> Database </a> </li> <li class=md-tabs__item> <a href=../assets/ class=md-tabs__link> Front End </a> </li> <li class=md-tabs__item> <a href=../acl/ class=md-tabs__link> Business Logic </a> </li> <li class=md-tabs__item> <a href=../cache/ class=md-tabs__link> Services </a> </li> <li class=md-tabs__item> <a href=../api/ class=md-tabs__link> API </a> </li> <li class=md-tabs__item> <a href=https://blog.phalcon.io/ class=md-tabs__link> Blog </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title="Phalcon Documentation" class="md-nav__button md-logo" aria-label="Phalcon Documentation" data-md-component=logo> <img src=https://assets.phalcon.io/phalcon/images/svg/phalcon-logo-35x39.svg alt=logo> </a> Phalcon Documentation </label> <div class=md-nav__source> <a href=https://github.com/phalcon/documentation title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> phalcon/documentation </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1> <label class=md-nav__link for=__nav_1 id=__nav_1_label tabindex=0> <span class=md-ellipsis> Home </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_1_label aria-expanded=false> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> Home </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../introduction/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1_2> <label class=md-nav__link for=__nav_1_2 id=__nav_1_2_label tabindex=0> <span class=md-ellipsis> Changelog </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_1_2_label aria-expanded=false> <label class=md-nav__title for=__nav_1_2> <span class="md-nav__icon md-icon"></span> Changelog </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=https://github.com/phalcon/cphalcon/blob/5.0.x/CHANGELOG-5.0.md class=md-nav__link> <span class=md-ellipsis> Current Version </span> </a> </li> <li class=md-nav__item> <a href=../releases/ class=md-nav__link> <span class=md-ellipsis> Releases </span> </a> </li> <li class=md-nav__item> <a href=../upgrade/ class=md-nav__link> <span class=md-ellipsis> How to upgrade </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1_3> <label class=md-nav__link for=__nav_1_3 id=__nav_1_3_label tabindex=0> <span class=md-ellipsis> Contributing </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_1_3_label aria-expanded=false> <label class=md-nav__title for=__nav_1_3> <span class="md-nav__icon md-icon"></span> Contributing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../contributions/ class=md-nav__link> <span class=md-ellipsis> Contributions </span> </a> </li> <li class=md-nav__item> <a href=https://phalcon.io/discussions class=md-nav__link> <span class=md-ellipsis> Asking a question </span> </a> </li> <li class=md-nav__item> <a href=../new-feature-request/ class=md-nav__link> <span class=md-ellipsis> Requesting a change </span> </a> </li> <li class=md-nav__item> <a href=../new-pull-request/ class=md-nav__link> <span class=md-ellipsis> Issuing a Pull Request </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1_4> <label class=md-nav__link for=__nav_1_4 id=__nav_1_4_label tabindex=0> <span class=md-ellipsis> Guides </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_1_4_label aria-expanded=false> <label class=md-nav__title for=__nav_1_4> <span class="md-nav__icon md-icon"></span> Guides </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../generating-backtrace/ class=md-nav__link> <span class=md-ellipsis> Backtrace Generation </span> </a> </li> <li class=md-nav__item> <a href=../reproducible-tests/ class=md-nav__link> <span class=md-ellipsis> Reproducible Tests </span> </a> </li> <li class=md-nav__item> <a href=../testing-environment/ class=md-nav__link> <span class=md-ellipsis> Testing environment </span> </a> </li> <li class=md-nav__item> <a href=../coding-standard/ class=md-nav__link> <span class=md-ellipsis> Coding Standard </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../sponsors/ class=md-nav__link> <span class=md-ellipsis> Sponsoring </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> Getting Started </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Getting Started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../installation/ class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class=md-nav__item> <a href=../webserver-setup/ class=md-nav__link> <span class=md-ellipsis> Webserver Setup </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3> <label class=md-nav__link for=__nav_2_3 id=__nav_2_3_label tabindex=0> <span class=md-ellipsis> Environments </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> Environments </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../environments-devilbox/ class=md-nav__link> <span class=md-ellipsis> Devilbox </span> </a> </li> <li class=md-nav__item> <a href=../environments-nanobox/ class=md-nav__link> <span class=md-ellipsis> Nanobox </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4> <label class=md-nav__link for=__nav_2_4 id=__nav_2_4_label tabindex=0> <span class=md-ellipsis> Development Tools </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4> <span class="md-nav__icon md-icon"></span> Development Tools </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../devtools/ class=md-nav__link> <span class=md-ellipsis> Devtools </span> </a> </li> <li class=md-nav__item> <a href=../support-debug/ class=md-nav__link> <span class=md-ellipsis> Debug </span> </a> </li> <li class=md-nav__item> <a href=../db-migrations/ class=md-nav__link> <span class=md-ellipsis> Migrations </span> </a> </li> <li class=md-nav__item> <a href=../unit-testing/ class=md-nav__link> <span class=md-ellipsis> Unit Testing </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5> <label class=md-nav__link for=__nav_2_5 id=__nav_2_5_label tabindex=0> <span class=md-ellipsis> Tutorials </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_5_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5> <span class="md-nav__icon md-icon"></span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../tutorial-basic/ class=md-nav__link> <span class=md-ellipsis> Basic </span> </a> </li> <li class=md-nav__item> <a href=../tutorial-invo/ class=md-nav__link> <span class=md-ellipsis> Invo </span> </a> </li> <li class=md-nav__item> <a href=../tutorial-rest/ class=md-nav__link> <span class=md-ellipsis> REST </span> </a> </li> <li class=md-nav__item> <a href=../tutorial-vokuro/ class=md-nav__link> <span class=md-ellipsis> Vokuro </span> </a> </li> <li class=md-nav__item> <a href=../use-case/ class=md-nav__link> <span class=md-ellipsis> Use case </span> </a> </li> <li class=md-nav__item> <a href=../performance/ class=md-nav__link> <span class=md-ellipsis> Performance </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Core </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Core </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../application/ class=md-nav__link> <span class=md-ellipsis> Application </span> </a> </li> <li class=md-nav__item> <a href=../application-micro/ class=md-nav__link> <span class=md-ellipsis> Micro </span> </a> </li> <li class=md-nav__item> <a href=../application-cli/ class=md-nav__link> <span class=md-ellipsis> CLI </span> </a> </li> <li class=md-nav__item> <a href=../di/ class=md-nav__link> <span class=md-ellipsis> DI Container </span> </a> </li> <li class=md-nav__item> <a href=../mvc/ class=md-nav__link> <span class=md-ellipsis> MVC </span> </a> </li> <li class=md-nav__item> <a href=../namespaces/ class=md-nav__link> <span class=md-ellipsis> Namespaces </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex> <span class=md-ellipsis> Database </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=true> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Database </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../db-layer/ class=md-nav__link> <span class=md-ellipsis> Layer </span> </a> </li> <li class=md-nav__item> <a href=../db-phql/ class=md-nav__link> <span class=md-ellipsis> PHQL </span> </a> </li> <li class=md-nav__item> <a href=../db-odm/ class=md-nav__link> <span class=md-ellipsis> ODM </span> </a> </li> <li class=md-nav__item> <a href=../db-models/ class=md-nav__link> <span class=md-ellipsis> Models </span> </a> </li> <li class=md-nav__item> <a href=../db-models-behaviors/ class=md-nav__link> <span class=md-ellipsis> Behaviors </span> </a> </li> <li class=md-nav__item> <a href=../db-models-cache/ class=md-nav__link> <span class=md-ellipsis> Cache </span> </a> </li> <li class=md-nav__item> <a href=../db-models-events/ class=md-nav__link> <span class=md-ellipsis> Events </span> </a> </li> <li class=md-nav__item> <a href=../db-models-metadata/ class=md-nav__link> <span class=md-ellipsis> Metadata </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Relationships </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Relationships </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#unidirectional class=md-nav__link> <span class=md-ellipsis> Unidirectional </span> </a> </li> <li class=md-nav__item> <a href=#bidirectional class=md-nav__link> <span class=md-ellipsis> Bidirectional </span> </a> </li> <li class=md-nav__item> <a href=#setup class=md-nav__link> <span class=md-ellipsis> Setup </span> </a> </li> <li class=md-nav__item> <a href=#parameters class=md-nav__link> <span class=md-ellipsis> Parameters </span> </a> </li> <li class=md-nav__item> <a href=#multiple-fields class=md-nav__link> <span class=md-ellipsis> Multiple Fields </span> </a> </li> <li class=md-nav__item> <a href=#accessing class=md-nav__link> <span class=md-ellipsis> Accessing </span> </a> <nav class=md-nav aria-label=Accessing> <ul class=md-nav__list> <li class=md-nav__item> <a href=#__get class=md-nav__link> <span class=md-ellipsis> __get() </span> </a> </li> <li class=md-nav__item> <a href=#get class=md-nav__link> <span class=md-ellipsis> get*() </span> </a> </li> <li class=md-nav__item> <a href=#getrelated class=md-nav__link> <span class=md-ellipsis> getRelated() </span> </a> </li> <li class=md-nav__item> <a href=#setrelated class=md-nav__link> <span class=md-ellipsis> setRelated() </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#aliases class=md-nav__link> <span class=md-ellipsis> Aliases </span> </a> </li> <li class=md-nav__item> <a href=#caching class=md-nav__link> <span class=md-ellipsis> Caching </span> </a> </li> <li class=md-nav__item> <a href=#autocompletion class=md-nav__link> <span class=md-ellipsis> Autocompletion </span> </a> </li> <li class=md-nav__item> <a href=#conditionals class=md-nav__link> <span class=md-ellipsis> Conditionals </span> </a> </li> <li class=md-nav__item> <a href=#virtual-foreign-keys class=md-nav__link> <span class=md-ellipsis> Virtual Foreign Keys </span> </a> <nav class=md-nav aria-label="Virtual Foreign Keys"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#cascaderestrict class=md-nav__link> <span class=md-ellipsis> Cascade/Restrict </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#operations class=md-nav__link> <span class=md-ellipsis> Operations </span> </a> <nav class=md-nav aria-label=Operations> <ul class=md-nav__list> <li class=md-nav__item> <a href=#save class=md-nav__link> <span class=md-ellipsis> Save </span> </a> </li> <li class=md-nav__item> <a href=#update class=md-nav__link> <span class=md-ellipsis> Update </span> </a> </li> <li class=md-nav__item> <a href=#delete class=md-nav__link> <span class=md-ellipsis> Delete </span> </a> </li> <li class=md-nav__item> <a href=#messages class=md-nav__link> <span class=md-ellipsis> Messages </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../db-models-transactions/ class=md-nav__link> <span class=md-ellipsis> Transactions </span> </a> </li> <li class=md-nav__item> <a href=../db-models-validation/ class=md-nav__link> <span class=md-ellipsis> Validators </span> </a> </li> <li class=md-nav__item> <a href=../db-pagination/ class=md-nav__link> <span class=md-ellipsis> Pagination </span> </a> </li> <li class=md-nav__item> <a href=../db-migrations/ class=md-nav__link> <span class=md-ellipsis> Migrations </span> </a> </li> <li class=md-nav__item> <a href=../datamapper/ class=md-nav__link> <span class=md-ellipsis> DataMapper </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> Front End </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Front End </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../assets/ class=md-nav__link> <span class=md-ellipsis> Assets </span> </a> </li> <li class=md-nav__item> <a href=../flash/ class=md-nav__link> <span class=md-ellipsis> Flash Messenger </span> </a> </li> <li class=md-nav__item> <a href=../forms/ class=md-nav__link> <span class=md-ellipsis> Forms </span> </a> </li> <li class=md-nav__item> <a href=../image/ class=md-nav__link> <span class=md-ellipsis> Image </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_5> <label class=md-nav__link for=__nav_5_5 id=__nav_5_5_label tabindex=0> <span class=md-ellipsis> HTML </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5_5> <span class="md-nav__icon md-icon"></span> HTML </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../html-attributes/ class=md-nav__link> <span class=md-ellipsis> Attributes </span> </a> </li> <li class=md-nav__item> <a href=../html-breadcrumbs/ class=md-nav__link> <span class=md-ellipsis> Breadcrumbs </span> </a> </li> <li class=md-nav__item> <a href=../html-escaper/ class=md-nav__link> <span class=md-ellipsis> Escaper </span> </a> </li> <li class=md-nav__item> <a href=../html-link/ class=md-nav__link> <span class=md-ellipsis> Link </span> </a> </li> <li class=md-nav__item> <a href=../html-tagfactory/ class=md-nav__link> <span class=md-ellipsis> Tag Factory </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../tag/ class=md-nav__link> <span class=md-ellipsis> Tag (legacy) </span> </a> </li> <li class=md-nav__item> <a href=../views/ class=md-nav__link> <span class=md-ellipsis> View </span> </a> </li> <li class=md-nav__item> <a href=../volt/ class=md-nav__link> <span class=md-ellipsis> Volt </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex=0> <span class=md-ellipsis> Business Logic </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Business Logic </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../acl/ class=md-nav__link> <span class=md-ellipsis> Access Control Lists </span> </a> </li> <li class=md-nav__item> <a href=../annotations/ class=md-nav__link> <span class=md-ellipsis> Annotations </span> </a> </li> <li class=md-nav__item> <a href=../controllers/ class=md-nav__link> <span class=md-ellipsis> Controllers </span> </a> </li> <li class=md-nav__item> <a href=../dispatcher/ class=md-nav__link> <span class=md-ellipsis> Dispatcher </span> </a> </li> <li class=md-nav__item> <a href=../events/ class=md-nav__link> <span class=md-ellipsis> Event Manager </span> </a> </li> <li class=md-nav__item> <a href=../filter-filter/ class=md-nav__link> <span class=md-ellipsis> Filters </span> </a> </li> <li class=md-nav__item> <a href=../routing/ class=md-nav__link> <span class=md-ellipsis> Routing </span> </a> </li> <li class=md-nav__item> <a href=../session/ class=md-nav__link> <span class=md-ellipsis> Sessions </span> </a> </li> <li class=md-nav__item> <a href=../mvc-url/ class=md-nav__link> <span class=md-ellipsis> Url </span> </a> </li> <li class=md-nav__item> <a href=../filter-validation/ class=md-nav__link> <span class=md-ellipsis> Validation </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7 id=__nav_7_label tabindex=0> <span class=md-ellipsis> Services </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Services </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../cache/ class=md-nav__link> <span class=md-ellipsis> Cache </span> </a> </li> <li class=md-nav__item> <a href=../config/ class=md-nav__link> <span class=md-ellipsis> Config </span> </a> </li> <li class=md-nav__item> <a href=../html-escaper/ class=md-nav__link> <span class=md-ellipsis> Escaper </span> </a> </li> <li class=md-nav__item> <a href=../autoload/ class=md-nav__link> <span class=md-ellipsis> Loader </span> </a> </li> <li class=md-nav__item> <a href=../logger/ class=md-nav__link> <span class=md-ellipsis> Logger </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7_6> <label class=md-nav__link for=__nav_7_6 id=__nav_7_6_label tabindex=0> <span class=md-ellipsis> HTTP </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_7_6_label aria-expanded=false> <label class=md-nav__title for=__nav_7_6> <span class="md-nav__icon md-icon"></span> HTTP </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../response.md#cookies class=md-nav__link> <span class=md-ellipsis> Cookies </span> </a> </li> <li class=md-nav__item> <a href=../request/ class=md-nav__link> <span class=md-ellipsis> Request </span> </a> </li> <li class=md-nav__item> <a href=../response/ class=md-nav__link> <span class=md-ellipsis> Response </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7_7> <label class=md-nav__link for=__nav_7_7 id=__nav_7_7_label tabindex=0> <span class=md-ellipsis> i18n </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_7_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7_7> <span class="md-nav__icon md-icon"></span> i18n </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../i18n/ class=md-nav__link> <span class=md-ellipsis> Internationalization </span> </a> </li> <li class=md-nav__item> <a href=../translate/ class=md-nav__link> <span class=md-ellipsis> Translate </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../queue/ class=md-nav__link> <span class=md-ellipsis> Queue </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7_9> <label class=md-nav__link for=__nav_7_9 id=__nav_7_9_label tabindex=0> <span class=md-ellipsis> Security </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_7_9_label aria-expanded=false> <label class=md-nav__title for=__nav_7_9> <span class="md-nav__icon md-icon"></span> Security </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../encryption-crypt/ class=md-nav__link> <span class=md-ellipsis> Cryptography </span> </a> </li> <li class=md-nav__item> <a href=../encryption-security/ class=md-nav__link> <span class=md-ellipsis> Security </span> </a> </li> <li class=md-nav__item> <a href=../encryption-security-jwt/ class=md-nav__link> <span class=md-ellipsis> JWT </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../storage/ class=md-nav__link> <span class=md-ellipsis> Storage </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7_11> <label class=md-nav__link for=__nav_7_11 id=__nav_7_11_label tabindex=0> <span class=md-ellipsis> Utility </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_7_11_label aria-expanded=false> <label class=md-nav__title for=__nav_7_11> <span class="md-nav__icon md-icon"></span> Utility </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../support-collection/ class=md-nav__link> <span class=md-ellipsis> Collection </span> </a> </li> <li class=md-nav__item> <a href=../domain/ class=md-nav__link> <span class=md-ellipsis> Domain </span> </a> </li> <li class=md-nav__item> <a href=../support-helper/ class=md-nav__link> <span class=md-ellipsis> Helper </span> </a> </li> <li class=md-nav__item> <a href=../support-registry/ class=md-nav__link> <span class=md-ellipsis> Registry </span> </a> </li> <li class=md-nav__item> <a href=../support-version/ class=md-nav__link> <span class=md-ellipsis> Version </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../api/ class=md-nav__link> <span class=md-ellipsis> API </span> </a> </li> <li class=md-nav__item> <a href=https://blog.phalcon.io/ class=md-nav__link> <span class=md-ellipsis> Blog </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#unidirectional class=md-nav__link> <span class=md-ellipsis> Unidirectional </span> </a> </li> <li class=md-nav__item> <a href=#bidirectional class=md-nav__link> <span class=md-ellipsis> Bidirectional </span> </a> </li> <li class=md-nav__item> <a href=#setup class=md-nav__link> <span class=md-ellipsis> Setup </span> </a> </li> <li class=md-nav__item> <a href=#parameters class=md-nav__link> <span class=md-ellipsis> Parameters </span> </a> </li> <li class=md-nav__item> <a href=#multiple-fields class=md-nav__link> <span class=md-ellipsis> Multiple Fields </span> </a> </li> <li class=md-nav__item> <a href=#accessing class=md-nav__link> <span class=md-ellipsis> Accessing </span> </a> <nav class=md-nav aria-label=Accessing> <ul class=md-nav__list> <li class=md-nav__item> <a href=#__get class=md-nav__link> <span class=md-ellipsis> __get() </span> </a> </li> <li class=md-nav__item> <a href=#get class=md-nav__link> <span class=md-ellipsis> get*() </span> </a> </li> <li class=md-nav__item> <a href=#getrelated class=md-nav__link> <span class=md-ellipsis> getRelated() </span> </a> </li> <li class=md-nav__item> <a href=#setrelated class=md-nav__link> <span class=md-ellipsis> setRelated() </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#aliases class=md-nav__link> <span class=md-ellipsis> Aliases </span> </a> </li> <li class=md-nav__item> <a href=#caching class=md-nav__link> <span class=md-ellipsis> Caching </span> </a> </li> <li class=md-nav__item> <a href=#autocompletion class=md-nav__link> <span class=md-ellipsis> Autocompletion </span> </a> </li> <li class=md-nav__item> <a href=#conditionals class=md-nav__link> <span class=md-ellipsis> Conditionals </span> </a> </li> <li class=md-nav__item> <a href=#virtual-foreign-keys class=md-nav__link> <span class=md-ellipsis> Virtual Foreign Keys </span> </a> <nav class=md-nav aria-label="Virtual Foreign Keys"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#cascaderestrict class=md-nav__link> <span class=md-ellipsis> Cascade/Restrict </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#operations class=md-nav__link> <span class=md-ellipsis> Operations </span> </a> <nav class=md-nav aria-label=Operations> <ul class=md-nav__list> <li class=md-nav__item> <a href=#save class=md-nav__link> <span class=md-ellipsis> Save </span> </a> </li> <li class=md-nav__item> <a href=#update class=md-nav__link> <span class=md-ellipsis> Update </span> </a> </li> <li class=md-nav__item> <a href=#delete class=md-nav__link> <span class=md-ellipsis> Delete </span> </a> </li> <li class=md-nav__item> <a href=#messages class=md-nav__link> <span class=md-ellipsis> Messages </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/phalcon/documentation/edit/master/docs/db-models-relationships.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg> </a> <a href=https://github.com/phalcon/documentation/raw/master/docs/db-models-relationships.md title="View source of this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.15 8.15 0 0 1-1.23-2Z"/></svg> </a> <h1 id=model-relationships>Model Relationships<a class=headerlink href=#model-relationships title="Permanent link">&para;</a></h1> <hr> <h2 id=overview>Overview<a class=headerlink href=#overview title="Permanent link">&para;</a></h2> <p><a href=https://en.wikipedia.org/wiki/Database_normalization>Database normalization</a> is a process where data is split into different tables and links are created between those tables, in order to increase flexibility, reduce data redundancy, and improve data integrity. Relationships are defined in the <code>initialize</code> method of each model.</p> <p>The following types of relationships are available:</p> <p><strong>one to one</strong></p> <div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=nx>hasOne</span><span class=p>(</span>
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>    <span class=nx>string</span><span class=o>|</span><span class=k>array</span> <span class=nv>$fields</span><span class=p>,</span> 
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>    <span class=nx>string</span> <span class=nv>$referenceModel</span><span class=p>,</span> 
<a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a>    <span class=nx>string</span><span class=o>|</span><span class=k>array</span> <span class=nv>$referencedFields</span><span class=p>,</span> 
<a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a>    <span class=k>array</span> <span class=nv>$options</span> <span class=o>=</span> <span class=k>null</span>
<a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a><span class=p>)</span>
<a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a>
<a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a><span class=nx>hasOneThrough</span><span class=p>(</span>
<a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a>    <span class=nx>string</span><span class=o>|</span><span class=k>array</span> <span class=nv>$fields</span><span class=p>,</span> 
<a id=__codelineno-0-10 name=__codelineno-0-10 href=#__codelineno-0-10></a>    <span class=nx>string</span> <span class=nv>$intermediateModel</span><span class=p>,</span> 
<a id=__codelineno-0-11 name=__codelineno-0-11 href=#__codelineno-0-11></a>    <span class=nx>string</span><span class=o>|</span><span class=k>array</span> <span class=nv>$intermediateFields</span><span class=p>,</span> 
<a id=__codelineno-0-12 name=__codelineno-0-12 href=#__codelineno-0-12></a>    <span class=nx>string</span><span class=o>|</span><span class=k>array</span> <span class=nv>$intermediateReferencedFields</span><span class=p>,</span>
<a id=__codelineno-0-13 name=__codelineno-0-13 href=#__codelineno-0-13></a>    <span class=nx>string</span> <span class=nv>$referenceModel</span><span class=p>,</span> 
<a id=__codelineno-0-14 name=__codelineno-0-14 href=#__codelineno-0-14></a>    <span class=nx>string</span><span class=o>|</span><span class=k>array</span> <span class=nv>$referencedFields</span><span class=p>,</span> 
<a id=__codelineno-0-15 name=__codelineno-0-15 href=#__codelineno-0-15></a>    <span class=k>array</span> <span class=nv>$options</span> <span class=o>=</span> <span class=k>null</span>
<a id=__codelineno-0-16 name=__codelineno-0-16 href=#__codelineno-0-16></a><span class=p>)</span>
</code></pre></div> <p><strong>one to many</strong></p> <div class=highlight><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=nx>hasMany</span><span class=p>(</span>
<a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a>    <span class=nx>string</span><span class=o>|</span><span class=k>array</span> <span class=nv>$fields</span><span class=p>,</span> 
<a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a>    <span class=nx>string</span> <span class=nv>$referenceModel</span><span class=p>,</span> 
<a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a>    <span class=nx>string</span><span class=o>|</span><span class=k>array</span> <span class=nv>$referencedFields</span><span class=p>,</span> 
<a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a>    <span class=k>array</span> <span class=nx>options</span> <span class=o>=</span> <span class=k>null</span>
<a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a><span class=p>)</span>
</code></pre></div> <p><strong>many to one</strong></p> <div class=highlight><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=nx>belongsTo</span><span class=p>(</span>
<a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a>    <span class=nx>string</span><span class=o>|</span><span class=k>array</span> <span class=nv>$fields</span><span class=p>,</span> 
<a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a>    <span class=nx>string</span> <span class=nv>$referenceModel</span><span class=p>,</span> 
<a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a>    <span class=nx>string</span><span class=o>|</span><span class=k>array</span> <span class=nv>$referencedFields</span><span class=p>,</span> 
<a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a>    <span class=k>array</span> <span class=nx>options</span> <span class=o>=</span> <span class=k>null</span>
<a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a><span class=p>)</span>
</code></pre></div> <p><strong>many to many</strong></p> <div class=highlight><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=nx>hasManyToMany</span><span class=p>(</span>
<a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a>    <span class=nx>string</span><span class=o>|</span><span class=k>array</span> <span class=nv>$fields</span><span class=p>,</span> 
<a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a>    <span class=nx>string</span> <span class=nv>$intermediateModel</span><span class=p>,</span> 
<a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a>    <span class=nx>string</span><span class=o>|</span><span class=k>array</span> <span class=nv>$intermediateFields</span><span class=p>,</span> 
<a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a>    <span class=nx>string</span><span class=o>|</span><span class=k>array</span> <span class=nv>$intermediateReferencedFields</span><span class=p>,</span>
<a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a>    <span class=nx>string</span> <span class=nv>$referenceModel</span><span class=p>,</span> 
<a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a>    <span class=nx>string</span><span class=o>|</span><span class=k>array</span> <span class=nv>$referencedFields</span><span class=p>,</span> 
<a id=__codelineno-3-8 name=__codelineno-3-8 href=#__codelineno-3-8></a>    <span class=k>array</span> <span class=nv>$options</span> <span class=o>=</span> <span class=k>null</span>
<a id=__codelineno-3-9 name=__codelineno-3-9 href=#__codelineno-3-9></a><span class=p>)</span>
</code></pre></div> <p>Relationships can be unidirectional or bidirectional, and each can be simple (a one-to-one model) or more complex (a combination of models). The model manager manages foreign key constraints for these relationships, the definition of these helps referential integrity as well as easy and fast access of related records to a model. Through the implementation of relations, it is easy to access data in related models from the source model easily and in a uniform way.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a>
<a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a><span class=k>namespace</span> <span class=nx>MyApp\Models</span><span class=p>;</span>
<a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a>
<a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\Model</span><span class=p>;</span>
<a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a>
<a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a><span class=k>class</span> <span class=nc>Invoices</span> <span class=k>extends</span> <span class=nx>Model</span>
<a id=__codelineno-4-8 name=__codelineno-4-8 href=#__codelineno-4-8></a><span class=p>{</span>
<a id=__codelineno-4-9 name=__codelineno-4-9 href=#__codelineno-4-9></a>    <span class=k>public</span> <span class=k>function</span> <span class=nf>initialize</span><span class=p>()</span>
<a id=__codelineno-4-10 name=__codelineno-4-10 href=#__codelineno-4-10></a>    <span class=p>{</span>
<a id=__codelineno-4-11 name=__codelineno-4-11 href=#__codelineno-4-11></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>hasOne</span><span class=p>(</span>
<a id=__codelineno-4-12 name=__codelineno-4-12 href=#__codelineno-4-12></a>            <span class=s1>&#39;inv_cst_id&#39;</span><span class=p>,</span>
<a id=__codelineno-4-13 name=__codelineno-4-13 href=#__codelineno-4-13></a>            <span class=nx>Customers</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<a id=__codelineno-4-14 name=__codelineno-4-14 href=#__codelineno-4-14></a>            <span class=s1>&#39;cst_id&#39;</span><span class=p>,</span>
<a id=__codelineno-4-15 name=__codelineno-4-15 href=#__codelineno-4-15></a>            <span class=p>[</span>
<a id=__codelineno-4-16 name=__codelineno-4-16 href=#__codelineno-4-16></a>                <span class=s1>&#39;alias&#39;</span>    <span class=o>=&gt;</span> <span class=s1>&#39;customers&#39;</span><span class=p>,</span>
<a id=__codelineno-4-17 name=__codelineno-4-17 href=#__codelineno-4-17></a>                <span class=s1>&#39;reusable&#39;</span> <span class=o>=&gt;</span> <span class=k>true</span><span class=p>,</span>
<a id=__codelineno-4-18 name=__codelineno-4-18 href=#__codelineno-4-18></a>            <span class=p>]</span>
<a id=__codelineno-4-19 name=__codelineno-4-19 href=#__codelineno-4-19></a>        <span class=p>);</span>
<a id=__codelineno-4-20 name=__codelineno-4-20 href=#__codelineno-4-20></a>    <span class=p>}</span>
<a id=__codelineno-4-21 name=__codelineno-4-21 href=#__codelineno-4-21></a><span class=p>}</span>
</code></pre></div> <h2 id=unidirectional>Unidirectional<a class=headerlink href=#unidirectional title="Permanent link">&para;</a></h2> <p>Unidirectional relations are those that are generated in relation to one another but not vice versa.</p> <h2 id=bidirectional>Bidirectional<a class=headerlink href=#bidirectional title="Permanent link">&para;</a></h2> <p>The bidirectional relations build relationships in both models and each model defines the inverse relationship of the other.</p> <h2 id=setup>Setup<a class=headerlink href=#setup title="Permanent link">&para;</a></h2> <p>In Phalcon, relationships must be defined in the <code>initialize()</code> method of a model. The methods <code>belongsTo()</code>, <code>hasMany()</code>, <code>hasManyToMany()</code>, <code>hasOne()</code>, and <code>hasOneThrough()</code>, define the relationship between one or more fields from the current model to fields in another model. Each of these methods requires 3 parameters:</p> <ul> <li>local fields</li> <li>referenced model</li> <li>referenced fields</li> </ul> <table> <thead> <tr> <th>Method</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>belongsTo</code></td> <td>Defines a n-1 relationship</td> </tr> <tr> <td><code>hasMany</code></td> <td>Defines a 1-n relationship</td> </tr> <tr> <td><code>hasManyToMany</code></td> <td>Defines a n-n relationship</td> </tr> <tr> <td><code>hasOne</code></td> <td>Defines a 1-1 relationship</td> </tr> <tr> <td><code>hasOneThrough</code></td> <td>Defines a 1-1 relationship</td> </tr> </tbody> </table> <p>The following schema shows 3 tables whose relations will serve us as an example regarding relationships:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=k>create</span><span class=w> </span><span class=k>table</span><span class=w> </span><span class=n>co_invoices</span>
<a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=p>(</span>
<a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a><span class=w>    </span><span class=n>inv_id</span><span class=w>          </span><span class=nb>int</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span><span class=w> </span><span class=n>auto_increment</span><span class=w>  </span><span class=k>primary</span><span class=w> </span><span class=k>key</span><span class=p>,</span>
<a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a><span class=w>    </span><span class=n>inv_cst_id</span><span class=w>      </span><span class=nb>int</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span><span class=w>      </span><span class=k>null</span><span class=p>,</span>
<a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a><span class=w>    </span><span class=n>inv_status_flag</span><span class=w> </span><span class=n>tinyint</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span><span class=w>   </span><span class=k>null</span><span class=p>,</span>
<a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a><span class=w>    </span><span class=n>inv_title</span><span class=w>       </span><span class=nb>varchar</span><span class=p>(</span><span class=mi>100</span><span class=p>)</span><span class=w> </span><span class=k>null</span><span class=p>,</span>
<a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a><span class=w>    </span><span class=n>inv_total</span><span class=w>       </span><span class=nb>float</span><span class=p>(</span><span class=mi>10</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>)</span><span class=w> </span><span class=k>null</span><span class=p>,</span>
<a id=__codelineno-5-8 name=__codelineno-5-8 href=#__codelineno-5-8></a><span class=w>    </span><span class=n>inv_created_at</span><span class=w>  </span><span class=n>datetime</span><span class=w>     </span><span class=k>null</span>
<a id=__codelineno-5-9 name=__codelineno-5-9 href=#__codelineno-5-9></a><span class=p>);</span>
<a id=__codelineno-5-10 name=__codelineno-5-10 href=#__codelineno-5-10></a>
<a id=__codelineno-5-11 name=__codelineno-5-11 href=#__codelineno-5-11></a><span class=k>create</span><span class=w> </span><span class=k>table</span><span class=w> </span><span class=n>co_invoices_x_products</span>
<a id=__codelineno-5-12 name=__codelineno-5-12 href=#__codelineno-5-12></a><span class=p>(</span>
<a id=__codelineno-5-13 name=__codelineno-5-13 href=#__codelineno-5-13></a><span class=w>    </span><span class=n>ixp_inv_id</span><span class=w>      </span><span class=nb>int</span><span class=p>(</span><span class=mi>10</span><span class=p>),</span>
<a id=__codelineno-5-14 name=__codelineno-5-14 href=#__codelineno-5-14></a><span class=w>    </span><span class=n>inv_prd_id</span><span class=w>      </span><span class=nb>int</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span>
<a id=__codelineno-5-15 name=__codelineno-5-15 href=#__codelineno-5-15></a><span class=p>);</span>
<a id=__codelineno-5-16 name=__codelineno-5-16 href=#__codelineno-5-16></a>
<a id=__codelineno-5-17 name=__codelineno-5-17 href=#__codelineno-5-17></a><span class=k>create</span><span class=w> </span><span class=k>table</span><span class=w> </span><span class=n>co_products</span>
<a id=__codelineno-5-18 name=__codelineno-5-18 href=#__codelineno-5-18></a><span class=p>(</span>
<a id=__codelineno-5-19 name=__codelineno-5-19 href=#__codelineno-5-19></a><span class=w>    </span><span class=n>prd_id</span><span class=w>          </span><span class=nb>int</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span><span class=w> </span><span class=n>auto_increment</span><span class=w>  </span><span class=k>primary</span><span class=w> </span><span class=k>key</span><span class=p>,</span>
<a id=__codelineno-5-20 name=__codelineno-5-20 href=#__codelineno-5-20></a><span class=w>    </span><span class=n>prd_title</span><span class=w>       </span><span class=nb>varchar</span><span class=p>(</span><span class=mi>100</span><span class=p>)</span><span class=w> </span><span class=k>null</span><span class=p>,</span>
<a id=__codelineno-5-21 name=__codelineno-5-21 href=#__codelineno-5-21></a><span class=w>    </span><span class=n>prd_price</span><span class=w>       </span><span class=nb>float</span><span class=p>(</span><span class=mi>10</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>)</span><span class=w> </span><span class=k>null</span>
<a id=__codelineno-5-22 name=__codelineno-5-22 href=#__codelineno-5-22></a><span class=p>);</span>
</code></pre></div> <ul> <li>The model <code>Invoices</code> has many <code>InvoicesProducts</code>.</li> <li>The model <code>Products</code> has many <code>InvoicesProducts</code>.</li> <li>The model <code>InvoicesProducts</code> belongs to both <code>Invoices</code> and <code>Products</code> models as a many-to-one relation.</li> <li>The model <code>Invoices</code> has a relation many-to-many to <code>Products</code> through <code>InvoicesProducts</code>.</li> </ul> <p><img alt src=../assets/images/content/models-relationships-erd-1.png></p> <p>The models with their relations could be implemented as follows:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a>
<a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a><span class=k>namespace</span> <span class=nx>MyApp\Models</span><span class=p>;</span>
<a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a>
<a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\Model</span><span class=p>;</span>
<a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a>
<a id=__codelineno-6-7 name=__codelineno-6-7 href=#__codelineno-6-7></a><span class=k>class</span> <span class=nc>Invoices</span> <span class=k>extends</span> <span class=nx>Model</span>
<a id=__codelineno-6-8 name=__codelineno-6-8 href=#__codelineno-6-8></a><span class=p>{</span>
<a id=__codelineno-6-9 name=__codelineno-6-9 href=#__codelineno-6-9></a>    <span class=k>public</span> <span class=nv>$inv_id</span><span class=p>;</span>
<a id=__codelineno-6-10 name=__codelineno-6-10 href=#__codelineno-6-10></a>    <span class=k>public</span> <span class=nv>$inv_cst_id</span><span class=p>;</span>
<a id=__codelineno-6-11 name=__codelineno-6-11 href=#__codelineno-6-11></a>    <span class=k>public</span> <span class=nv>$inv_status_flag</span><span class=p>;</span>
<a id=__codelineno-6-12 name=__codelineno-6-12 href=#__codelineno-6-12></a>    <span class=k>public</span> <span class=nv>$inv_title</span><span class=p>;</span>
<a id=__codelineno-6-13 name=__codelineno-6-13 href=#__codelineno-6-13></a>    <span class=k>public</span> <span class=nv>$inv_total</span><span class=p>;</span>
<a id=__codelineno-6-14 name=__codelineno-6-14 href=#__codelineno-6-14></a>    <span class=k>public</span> <span class=nv>$inv_created_at</span><span class=p>;</span>
<a id=__codelineno-6-15 name=__codelineno-6-15 href=#__codelineno-6-15></a>
<a id=__codelineno-6-16 name=__codelineno-6-16 href=#__codelineno-6-16></a>    <span class=k>public</span> <span class=k>function</span> <span class=nf>initialize</span><span class=p>()</span>
<a id=__codelineno-6-17 name=__codelineno-6-17 href=#__codelineno-6-17></a>    <span class=p>{</span>
<a id=__codelineno-6-18 name=__codelineno-6-18 href=#__codelineno-6-18></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>hasManyToMany</span><span class=p>(</span>
<a id=__codelineno-6-19 name=__codelineno-6-19 href=#__codelineno-6-19></a>            <span class=s1>&#39;inv_id&#39;</span><span class=p>,</span>
<a id=__codelineno-6-20 name=__codelineno-6-20 href=#__codelineno-6-20></a>            <span class=nx>InvoicesProducts</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<a id=__codelineno-6-21 name=__codelineno-6-21 href=#__codelineno-6-21></a>            <span class=s1>&#39;ixp_inv_id&#39;</span><span class=p>,</span>
<a id=__codelineno-6-22 name=__codelineno-6-22 href=#__codelineno-6-22></a>            <span class=s1>&#39;ixp_prd_id&#39;</span><span class=p>,</span>
<a id=__codelineno-6-23 name=__codelineno-6-23 href=#__codelineno-6-23></a>            <span class=nx>Products</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<a id=__codelineno-6-24 name=__codelineno-6-24 href=#__codelineno-6-24></a>            <span class=s1>&#39;prd_id&#39;</span><span class=p>,</span>
<a id=__codelineno-6-25 name=__codelineno-6-25 href=#__codelineno-6-25></a>            <span class=p>[</span>
<a id=__codelineno-6-26 name=__codelineno-6-26 href=#__codelineno-6-26></a>                <span class=s1>&#39;reusable&#39;</span> <span class=o>=&gt;</span> <span class=k>true</span><span class=p>,</span>
<a id=__codelineno-6-27 name=__codelineno-6-27 href=#__codelineno-6-27></a>                <span class=s1>&#39;alias&#39;</span>    <span class=o>=&gt;</span> <span class=s1>&#39;products&#39;</span><span class=p>,</span>
<a id=__codelineno-6-28 name=__codelineno-6-28 href=#__codelineno-6-28></a>            <span class=p>]</span>
<a id=__codelineno-6-29 name=__codelineno-6-29 href=#__codelineno-6-29></a>        <span class=p>);</span>
<a id=__codelineno-6-30 name=__codelineno-6-30 href=#__codelineno-6-30></a>
<a id=__codelineno-6-31 name=__codelineno-6-31 href=#__codelineno-6-31></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>hasMany</span><span class=p>(</span>
<a id=__codelineno-6-32 name=__codelineno-6-32 href=#__codelineno-6-32></a>            <span class=s1>&#39;inv_id&#39;</span><span class=p>,</span>
<a id=__codelineno-6-33 name=__codelineno-6-33 href=#__codelineno-6-33></a>            <span class=nx>InvoicesProducts</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<a id=__codelineno-6-34 name=__codelineno-6-34 href=#__codelineno-6-34></a>            <span class=s1>&#39;ixp_inv_id&#39;</span><span class=p>,</span>
<a id=__codelineno-6-35 name=__codelineno-6-35 href=#__codelineno-6-35></a>            <span class=p>[</span>
<a id=__codelineno-6-36 name=__codelineno-6-36 href=#__codelineno-6-36></a>                <span class=s1>&#39;reusable&#39;</span> <span class=o>=&gt;</span> <span class=k>true</span><span class=p>,</span>
<a id=__codelineno-6-37 name=__codelineno-6-37 href=#__codelineno-6-37></a>                <span class=s1>&#39;alias&#39;</span>    <span class=o>=&gt;</span> <span class=s1>&#39;invoicesProducts&#39;</span>
<a id=__codelineno-6-38 name=__codelineno-6-38 href=#__codelineno-6-38></a>            <span class=p>]</span>
<a id=__codelineno-6-39 name=__codelineno-6-39 href=#__codelineno-6-39></a>        <span class=p>);</span>
<a id=__codelineno-6-40 name=__codelineno-6-40 href=#__codelineno-6-40></a>    <span class=p>}</span>
<a id=__codelineno-6-41 name=__codelineno-6-41 href=#__codelineno-6-41></a><span class=p>}</span>
</code></pre></div> <div class=highlight><pre><span></span><code><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a>
<a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a><span class=k>namespace</span> <span class=nx>MyApp\Models</span><span class=p>;</span>
<a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a>
<a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\Model</span><span class=p>;</span>
<a id=__codelineno-7-6 name=__codelineno-7-6 href=#__codelineno-7-6></a>
<a id=__codelineno-7-7 name=__codelineno-7-7 href=#__codelineno-7-7></a><span class=k>class</span> <span class=nc>InvoicesProducts</span> <span class=k>extends</span> <span class=nx>Model</span>
<a id=__codelineno-7-8 name=__codelineno-7-8 href=#__codelineno-7-8></a><span class=p>{</span>
<a id=__codelineno-7-9 name=__codelineno-7-9 href=#__codelineno-7-9></a>    <span class=k>public</span> <span class=nv>$ixp_inv_id</span><span class=p>;</span>
<a id=__codelineno-7-10 name=__codelineno-7-10 href=#__codelineno-7-10></a>    <span class=k>public</span> <span class=nv>$ixp_prd_id</span><span class=p>;</span>
<a id=__codelineno-7-11 name=__codelineno-7-11 href=#__codelineno-7-11></a>
<a id=__codelineno-7-12 name=__codelineno-7-12 href=#__codelineno-7-12></a>    <span class=k>public</span> <span class=k>function</span> <span class=nf>initialize</span><span class=p>()</span>
<a id=__codelineno-7-13 name=__codelineno-7-13 href=#__codelineno-7-13></a>    <span class=p>{</span>
<a id=__codelineno-7-14 name=__codelineno-7-14 href=#__codelineno-7-14></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>belongsTo</span><span class=p>(</span>
<a id=__codelineno-7-15 name=__codelineno-7-15 href=#__codelineno-7-15></a>            <span class=s1>&#39;ixp_inv_id&#39;</span><span class=p>,</span>
<a id=__codelineno-7-16 name=__codelineno-7-16 href=#__codelineno-7-16></a>            <span class=nx>Invoices</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<a id=__codelineno-7-17 name=__codelineno-7-17 href=#__codelineno-7-17></a>            <span class=s1>&#39;inv_id&#39;</span><span class=p>,</span>
<a id=__codelineno-7-18 name=__codelineno-7-18 href=#__codelineno-7-18></a>            <span class=p>[</span>
<a id=__codelineno-7-19 name=__codelineno-7-19 href=#__codelineno-7-19></a>                <span class=s1>&#39;reusable&#39;</span> <span class=o>=&gt;</span> <span class=k>true</span><span class=p>,</span>
<a id=__codelineno-7-20 name=__codelineno-7-20 href=#__codelineno-7-20></a>                <span class=s1>&#39;alias&#39;</span>    <span class=o>=&gt;</span> <span class=s1>&#39;invoice&#39;</span>
<a id=__codelineno-7-21 name=__codelineno-7-21 href=#__codelineno-7-21></a>            <span class=p>]</span>
<a id=__codelineno-7-22 name=__codelineno-7-22 href=#__codelineno-7-22></a>        <span class=p>);</span>
<a id=__codelineno-7-23 name=__codelineno-7-23 href=#__codelineno-7-23></a>
<a id=__codelineno-7-24 name=__codelineno-7-24 href=#__codelineno-7-24></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>belongsTo</span><span class=p>(</span>
<a id=__codelineno-7-25 name=__codelineno-7-25 href=#__codelineno-7-25></a>            <span class=s1>&#39;ixp_prd_id&#39;</span><span class=p>,</span>
<a id=__codelineno-7-26 name=__codelineno-7-26 href=#__codelineno-7-26></a>            <span class=nx>Products</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<a id=__codelineno-7-27 name=__codelineno-7-27 href=#__codelineno-7-27></a>            <span class=s1>&#39;prd_id&#39;</span><span class=p>,</span>
<a id=__codelineno-7-28 name=__codelineno-7-28 href=#__codelineno-7-28></a>            <span class=p>[</span>
<a id=__codelineno-7-29 name=__codelineno-7-29 href=#__codelineno-7-29></a>                <span class=s1>&#39;reusable&#39;</span> <span class=o>=&gt;</span> <span class=k>true</span><span class=p>,</span>
<a id=__codelineno-7-30 name=__codelineno-7-30 href=#__codelineno-7-30></a>                <span class=s1>&#39;alias&#39;</span>    <span class=o>=&gt;</span> <span class=s1>&#39;product&#39;</span>
<a id=__codelineno-7-31 name=__codelineno-7-31 href=#__codelineno-7-31></a>            <span class=p>]</span>
<a id=__codelineno-7-32 name=__codelineno-7-32 href=#__codelineno-7-32></a>        <span class=p>);</span>
<a id=__codelineno-7-33 name=__codelineno-7-33 href=#__codelineno-7-33></a>    <span class=p>}</span>
<a id=__codelineno-7-34 name=__codelineno-7-34 href=#__codelineno-7-34></a><span class=p>}</span>
</code></pre></div> <div class=highlight><pre><span></span><code><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a>
<a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a><span class=k>namespace</span> <span class=nx>MyApp\Models</span><span class=p>;</span>
<a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a>
<a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\Model</span><span class=p>;</span>
<a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a>
<a id=__codelineno-8-7 name=__codelineno-8-7 href=#__codelineno-8-7></a><span class=k>class</span> <span class=nc>Products</span> <span class=k>extends</span> <span class=nx>Model</span>
<a id=__codelineno-8-8 name=__codelineno-8-8 href=#__codelineno-8-8></a><span class=p>{</span>
<a id=__codelineno-8-9 name=__codelineno-8-9 href=#__codelineno-8-9></a>    <span class=k>public</span> <span class=nv>$prd_id</span><span class=p>;</span>
<a id=__codelineno-8-10 name=__codelineno-8-10 href=#__codelineno-8-10></a>    <span class=k>public</span> <span class=nv>$prd_title</span><span class=p>;</span>
<a id=__codelineno-8-11 name=__codelineno-8-11 href=#__codelineno-8-11></a>    <span class=k>public</span> <span class=nv>$prd_price</span><span class=p>;</span>
<a id=__codelineno-8-12 name=__codelineno-8-12 href=#__codelineno-8-12></a>    <span class=k>public</span> <span class=nv>$prd_created_at</span><span class=p>;</span>
<a id=__codelineno-8-13 name=__codelineno-8-13 href=#__codelineno-8-13></a>
<a id=__codelineno-8-14 name=__codelineno-8-14 href=#__codelineno-8-14></a>    <span class=k>public</span> <span class=k>function</span> <span class=nf>initialize</span><span class=p>()</span>
<a id=__codelineno-8-15 name=__codelineno-8-15 href=#__codelineno-8-15></a>    <span class=p>{</span>
<a id=__codelineno-8-16 name=__codelineno-8-16 href=#__codelineno-8-16></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>hasMany</span><span class=p>(</span>
<a id=__codelineno-8-17 name=__codelineno-8-17 href=#__codelineno-8-17></a>            <span class=s1>&#39;prd_id&#39;</span><span class=p>,</span>
<a id=__codelineno-8-18 name=__codelineno-8-18 href=#__codelineno-8-18></a>            <span class=nx>InvoicesProducts</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<a id=__codelineno-8-19 name=__codelineno-8-19 href=#__codelineno-8-19></a>            <span class=s1>&#39;ixp_prd_id&#39;</span>
<a id=__codelineno-8-20 name=__codelineno-8-20 href=#__codelineno-8-20></a>        <span class=p>);</span>
<a id=__codelineno-8-21 name=__codelineno-8-21 href=#__codelineno-8-21></a>
<a id=__codelineno-8-22 name=__codelineno-8-22 href=#__codelineno-8-22></a>        <span class=c1>// Many to many -&gt; Invoices</span>
<a id=__codelineno-8-23 name=__codelineno-8-23 href=#__codelineno-8-23></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>hasManyToMany</span><span class=p>(</span>
<a id=__codelineno-8-24 name=__codelineno-8-24 href=#__codelineno-8-24></a>            <span class=s1>&#39;prd_id&#39;</span><span class=p>,</span>
<a id=__codelineno-8-25 name=__codelineno-8-25 href=#__codelineno-8-25></a>            <span class=nx>InvoicesProducts</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<a id=__codelineno-8-26 name=__codelineno-8-26 href=#__codelineno-8-26></a>            <span class=s1>&#39;ixp_prd_id&#39;</span><span class=p>,</span>
<a id=__codelineno-8-27 name=__codelineno-8-27 href=#__codelineno-8-27></a>            <span class=s1>&#39;ixp_inv_id&#39;</span><span class=p>,</span>
<a id=__codelineno-8-28 name=__codelineno-8-28 href=#__codelineno-8-28></a>            <span class=nx>Invoices</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<a id=__codelineno-8-29 name=__codelineno-8-29 href=#__codelineno-8-29></a>            <span class=s1>&#39;inv_id&#39;</span><span class=p>,</span>
<a id=__codelineno-8-30 name=__codelineno-8-30 href=#__codelineno-8-30></a>            <span class=p>[</span>
<a id=__codelineno-8-31 name=__codelineno-8-31 href=#__codelineno-8-31></a>                <span class=s1>&#39;reusable&#39;</span> <span class=o>=&gt;</span> <span class=k>true</span><span class=p>,</span>
<a id=__codelineno-8-32 name=__codelineno-8-32 href=#__codelineno-8-32></a>                <span class=s1>&#39;alias&#39;</span>    <span class=o>=&gt;</span> <span class=s1>&#39;invoices&#39;</span><span class=p>,</span>
<a id=__codelineno-8-33 name=__codelineno-8-33 href=#__codelineno-8-33></a>            <span class=p>]</span>
<a id=__codelineno-8-34 name=__codelineno-8-34 href=#__codelineno-8-34></a>        <span class=p>);</span>
<a id=__codelineno-8-35 name=__codelineno-8-35 href=#__codelineno-8-35></a>    <span class=p>}</span>
<a id=__codelineno-8-36 name=__codelineno-8-36 href=#__codelineno-8-36></a><span class=p>}</span>
</code></pre></div> <p>The first parameter indicates the field of the local model used in the relationship; the second indicates the name of the referenced model, and the third is the field name in the referenced model. You could also use arrays to define multiple fields in the relationship.</p> <p>Many-to-many relationships require 3 models and define the attributes involved in the relationship:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a>
<a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a><span class=k>namespace</span> <span class=nx>MyApp\Models</span><span class=p>;</span>
<a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a>
<a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\Model</span><span class=p>;</span>
<a id=__codelineno-9-6 name=__codelineno-9-6 href=#__codelineno-9-6></a>
<a id=__codelineno-9-7 name=__codelineno-9-7 href=#__codelineno-9-7></a><span class=k>class</span> <span class=nc>Invoices</span> <span class=k>extends</span> <span class=nx>Model</span>
<a id=__codelineno-9-8 name=__codelineno-9-8 href=#__codelineno-9-8></a><span class=p>{</span>
<a id=__codelineno-9-9 name=__codelineno-9-9 href=#__codelineno-9-9></a>    <span class=k>public</span> <span class=nv>$inv_id</span><span class=p>;</span>
<a id=__codelineno-9-10 name=__codelineno-9-10 href=#__codelineno-9-10></a>    <span class=k>public</span> <span class=nv>$inv_cst_id</span><span class=p>;</span>
<a id=__codelineno-9-11 name=__codelineno-9-11 href=#__codelineno-9-11></a>    <span class=k>public</span> <span class=nv>$inv_status_flag</span><span class=p>;</span>
<a id=__codelineno-9-12 name=__codelineno-9-12 href=#__codelineno-9-12></a>    <span class=k>public</span> <span class=nv>$inv_title</span><span class=p>;</span>
<a id=__codelineno-9-13 name=__codelineno-9-13 href=#__codelineno-9-13></a>    <span class=k>public</span> <span class=nv>$inv_total</span><span class=p>;</span>
<a id=__codelineno-9-14 name=__codelineno-9-14 href=#__codelineno-9-14></a>    <span class=k>public</span> <span class=nv>$inv_created_at</span><span class=p>;</span>
<a id=__codelineno-9-15 name=__codelineno-9-15 href=#__codelineno-9-15></a>
<a id=__codelineno-9-16 name=__codelineno-9-16 href=#__codelineno-9-16></a>    <span class=k>public</span> <span class=k>function</span> <span class=nf>initialize</span><span class=p>()</span>
<a id=__codelineno-9-17 name=__codelineno-9-17 href=#__codelineno-9-17></a>    <span class=p>{</span>
<a id=__codelineno-9-18 name=__codelineno-9-18 href=#__codelineno-9-18></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>hasManyToMany</span><span class=p>(</span>
<a id=__codelineno-9-19 name=__codelineno-9-19 href=#__codelineno-9-19></a>            <span class=s1>&#39;inv_id&#39;</span><span class=p>,</span>
<a id=__codelineno-9-20 name=__codelineno-9-20 href=#__codelineno-9-20></a>            <span class=nx>InvoicesProducts</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<a id=__codelineno-9-21 name=__codelineno-9-21 href=#__codelineno-9-21></a>            <span class=s1>&#39;ixp_inv_id&#39;</span><span class=p>,</span>
<a id=__codelineno-9-22 name=__codelineno-9-22 href=#__codelineno-9-22></a>            <span class=s1>&#39;ixp_prd_id&#39;</span><span class=p>,</span>
<a id=__codelineno-9-23 name=__codelineno-9-23 href=#__codelineno-9-23></a>            <span class=nx>Products</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<a id=__codelineno-9-24 name=__codelineno-9-24 href=#__codelineno-9-24></a>            <span class=s1>&#39;prd_id&#39;</span><span class=p>,</span>
<a id=__codelineno-9-25 name=__codelineno-9-25 href=#__codelineno-9-25></a>            <span class=p>[</span>
<a id=__codelineno-9-26 name=__codelineno-9-26 href=#__codelineno-9-26></a>                <span class=s1>&#39;reusable&#39;</span> <span class=o>=&gt;</span> <span class=k>true</span><span class=p>,</span>
<a id=__codelineno-9-27 name=__codelineno-9-27 href=#__codelineno-9-27></a>                <span class=s1>&#39;alias&#39;</span>    <span class=o>=&gt;</span> <span class=s1>&#39;products&#39;</span><span class=p>,</span>
<a id=__codelineno-9-28 name=__codelineno-9-28 href=#__codelineno-9-28></a>            <span class=p>]</span>
<a id=__codelineno-9-29 name=__codelineno-9-29 href=#__codelineno-9-29></a>        <span class=p>);</span>
<a id=__codelineno-9-30 name=__codelineno-9-30 href=#__codelineno-9-30></a>    <span class=p>}</span>
<a id=__codelineno-9-31 name=__codelineno-9-31 href=#__codelineno-9-31></a><span class=p>}</span>
</code></pre></div> <h2 id=parameters>Parameters<a class=headerlink href=#parameters title="Permanent link">&para;</a></h2> <p>Depending on the needs of our application we might want to store data in one table, that describes different behaviors. For instance, you might want to only have a table called <code>co_customers</code> which has a field <code>cst_status_flag</code> describing the <em>status</em> of the customer (e.g. active, inactive, etc.).</p> <p>Using relationships, you can get only those <code>Customers</code> that relate to our <code>Invoices</code> that have a certain <code>cst_status_flag</code>. Defining that constraint in the relationship allows you to let the model do all the work.</p> <p>It also accepts a closure, which is evaluated every time before the related records are accessed. This enables the conditions to be automatically updated between queries.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a>
<a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a><span class=k>namespace</span> <span class=nx>MyApp\Models</span><span class=p>;</span>
<a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a>
<a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\Model</span><span class=p>;</span>
<a id=__codelineno-10-6 name=__codelineno-10-6 href=#__codelineno-10-6></a>
<a id=__codelineno-10-7 name=__codelineno-10-7 href=#__codelineno-10-7></a><span class=k>class</span> <span class=nc>Invoices</span> <span class=k>extends</span> <span class=nx>Model</span>
<a id=__codelineno-10-8 name=__codelineno-10-8 href=#__codelineno-10-8></a><span class=p>{</span>
<a id=__codelineno-10-9 name=__codelineno-10-9 href=#__codelineno-10-9></a>    <span class=k>public</span> <span class=nv>$inv_id</span><span class=p>;</span>
<a id=__codelineno-10-10 name=__codelineno-10-10 href=#__codelineno-10-10></a>    <span class=k>public</span> <span class=nv>$inv_cst_id</span><span class=p>;</span>
<a id=__codelineno-10-11 name=__codelineno-10-11 href=#__codelineno-10-11></a>    <span class=k>public</span> <span class=nv>$inv_status_flag</span><span class=p>;</span>
<a id=__codelineno-10-12 name=__codelineno-10-12 href=#__codelineno-10-12></a>    <span class=k>public</span> <span class=nv>$inv_title</span><span class=p>;</span>
<a id=__codelineno-10-13 name=__codelineno-10-13 href=#__codelineno-10-13></a>    <span class=k>public</span> <span class=nv>$inv_total</span><span class=p>;</span>
<a id=__codelineno-10-14 name=__codelineno-10-14 href=#__codelineno-10-14></a>    <span class=k>public</span> <span class=nv>$inv_created_at</span><span class=p>;</span>
<a id=__codelineno-10-15 name=__codelineno-10-15 href=#__codelineno-10-15></a>
<a id=__codelineno-10-16 name=__codelineno-10-16 href=#__codelineno-10-16></a>    <span class=k>public</span> <span class=k>function</span> <span class=nf>initialize</span><span class=p>()</span>
<a id=__codelineno-10-17 name=__codelineno-10-17 href=#__codelineno-10-17></a>    <span class=p>{</span>
<a id=__codelineno-10-18 name=__codelineno-10-18 href=#__codelineno-10-18></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>hasMany</span><span class=p>(</span>
<a id=__codelineno-10-19 name=__codelineno-10-19 href=#__codelineno-10-19></a>            <span class=s1>&#39;inv_cst_id&#39;</span><span class=p>,</span>
<a id=__codelineno-10-20 name=__codelineno-10-20 href=#__codelineno-10-20></a>            <span class=nx>Customers</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<a id=__codelineno-10-21 name=__codelineno-10-21 href=#__codelineno-10-21></a>            <span class=s1>&#39;cst_id&#39;</span><span class=p>,</span>
<a id=__codelineno-10-22 name=__codelineno-10-22 href=#__codelineno-10-22></a>            <span class=p>[</span>
<a id=__codelineno-10-23 name=__codelineno-10-23 href=#__codelineno-10-23></a>                <span class=s1>&#39;reusable&#39;</span> <span class=o>=&gt;</span> <span class=k>true</span><span class=p>,</span>
<a id=__codelineno-10-24 name=__codelineno-10-24 href=#__codelineno-10-24></a>                <span class=s1>&#39;alias&#39;</span>    <span class=o>=&gt;</span> <span class=s1>&#39;customersActive&#39;</span><span class=p>,</span>
<a id=__codelineno-10-25 name=__codelineno-10-25 href=#__codelineno-10-25></a>                <span class=s1>&#39;params&#39;</span>   <span class=o>=&gt;</span> <span class=p>[</span>
<a id=__codelineno-10-26 name=__codelineno-10-26 href=#__codelineno-10-26></a>                    <span class=s1>&#39;conditions&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;cst_status_flag = :status:&#39;</span><span class=p>,</span>
<a id=__codelineno-10-27 name=__codelineno-10-27 href=#__codelineno-10-27></a>                    <span class=s1>&#39;bind&#39;</span>       <span class=o>=&gt;</span> <span class=p>[</span>
<a id=__codelineno-10-28 name=__codelineno-10-28 href=#__codelineno-10-28></a>                        <span class=s1>&#39;status&#39;</span> <span class=o>=&gt;</span> <span class=mi>1</span><span class=p>,</span>
<a id=__codelineno-10-29 name=__codelineno-10-29 href=#__codelineno-10-29></a>                     <span class=p>]</span>
<a id=__codelineno-10-30 name=__codelineno-10-30 href=#__codelineno-10-30></a>                <span class=p>]</span>
<a id=__codelineno-10-31 name=__codelineno-10-31 href=#__codelineno-10-31></a>            <span class=p>]</span>
<a id=__codelineno-10-32 name=__codelineno-10-32 href=#__codelineno-10-32></a>        <span class=p>);</span>
<a id=__codelineno-10-33 name=__codelineno-10-33 href=#__codelineno-10-33></a>
<a id=__codelineno-10-34 name=__codelineno-10-34 href=#__codelineno-10-34></a>        <span class=nv>$container</span> <span class=o>=</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>getDI</span><span class=p>();</span>
<a id=__codelineno-10-35 name=__codelineno-10-35 href=#__codelineno-10-35></a>
<a id=__codelineno-10-36 name=__codelineno-10-36 href=#__codelineno-10-36></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>hasMany</span><span class=p>(</span>
<a id=__codelineno-10-37 name=__codelineno-10-37 href=#__codelineno-10-37></a>            <span class=s1>&#39;inv_cst_id&#39;</span><span class=p>,</span>
<a id=__codelineno-10-38 name=__codelineno-10-38 href=#__codelineno-10-38></a>            <span class=nx>Customers</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<a id=__codelineno-10-39 name=__codelineno-10-39 href=#__codelineno-10-39></a>            <span class=s1>&#39;cst_id&#39;</span><span class=p>,</span>
<a id=__codelineno-10-40 name=__codelineno-10-40 href=#__codelineno-10-40></a>            <span class=p>[</span>
<a id=__codelineno-10-41 name=__codelineno-10-41 href=#__codelineno-10-41></a>                <span class=s1>&#39;reusable&#39;</span> <span class=o>=&gt;</span> <span class=k>true</span><span class=p>,</span>
<a id=__codelineno-10-42 name=__codelineno-10-42 href=#__codelineno-10-42></a>                <span class=s1>&#39;alias&#39;</span>    <span class=o>=&gt;</span> <span class=s1>&#39;customersNearby&#39;</span><span class=p>,</span>
<a id=__codelineno-10-43 name=__codelineno-10-43 href=#__codelineno-10-43></a>                <span class=s1>&#39;params&#39;</span>   <span class=o>=&gt;</span> <span class=k>function</span><span class=p>()</span> <span class=k>use</span> <span class=p>(</span><span class=nv>$container</span><span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-10-44 name=__codelineno-10-44 href=#__codelineno-10-44></a>                    <span class=k>return</span> <span class=p>[</span>
<a id=__codelineno-10-45 name=__codelineno-10-45 href=#__codelineno-10-45></a>                        <span class=s1>&#39;conditions&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;cst_location = :location:&#39;</span><span class=p>,</span>
<a id=__codelineno-10-46 name=__codelineno-10-46 href=#__codelineno-10-46></a>                        <span class=s1>&#39;bind&#39;</span>       <span class=o>=&gt;</span> <span class=p>[</span>
<a id=__codelineno-10-47 name=__codelineno-10-47 href=#__codelineno-10-47></a>                            <span class=s1>&#39;location&#39;</span> <span class=o>=&gt;</span> <span class=nv>$container</span><span class=o>-&gt;</span><span class=na>getShared</span><span class=p>(</span><span class=s1>&#39;myLocationService&#39;</span><span class=p>)</span><span class=o>-&gt;</span><span class=na>myLocation</span><span class=p>,</span>
<a id=__codelineno-10-48 name=__codelineno-10-48 href=#__codelineno-10-48></a>                         <span class=p>]</span>
<a id=__codelineno-10-49 name=__codelineno-10-49 href=#__codelineno-10-49></a>                    <span class=p>];</span>
<a id=__codelineno-10-50 name=__codelineno-10-50 href=#__codelineno-10-50></a>                <span class=p>}</span>
<a id=__codelineno-10-51 name=__codelineno-10-51 href=#__codelineno-10-51></a>            <span class=p>]</span>
<a id=__codelineno-10-52 name=__codelineno-10-52 href=#__codelineno-10-52></a>        <span class=p>);</span>
<a id=__codelineno-10-53 name=__codelineno-10-53 href=#__codelineno-10-53></a>    <span class=p>}</span>
<a id=__codelineno-10-54 name=__codelineno-10-54 href=#__codelineno-10-54></a><span class=p>}</span>
</code></pre></div> <h2 id=multiple-fields>Multiple Fields<a class=headerlink href=#multiple-fields title="Permanent link">&para;</a></h2> <p>There are times when relationships need to be defined on a combination of fields and not only one. Consider the following example:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a>
<a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a><span class=k>namespace</span> <span class=nx>MyApp\Models</span><span class=p>;</span>
<a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a>
<a id=__codelineno-11-5 name=__codelineno-11-5 href=#__codelineno-11-5></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\Model</span><span class=p>;</span>
<a id=__codelineno-11-6 name=__codelineno-11-6 href=#__codelineno-11-6></a>
<a id=__codelineno-11-7 name=__codelineno-11-7 href=#__codelineno-11-7></a><span class=k>class</span> <span class=nc>Products</span> <span class=k>extends</span> <span class=nx>Model</span>
<a id=__codelineno-11-8 name=__codelineno-11-8 href=#__codelineno-11-8></a><span class=p>{</span>
<a id=__codelineno-11-9 name=__codelineno-11-9 href=#__codelineno-11-9></a>    <span class=k>public</span> <span class=nv>$prd_id</span><span class=p>;</span>
<a id=__codelineno-11-10 name=__codelineno-11-10 href=#__codelineno-11-10></a>    <span class=k>public</span> <span class=nv>$prd_type_flag</span><span class=p>;</span>
<a id=__codelineno-11-11 name=__codelineno-11-11 href=#__codelineno-11-11></a>    <span class=k>public</span> <span class=nv>$prd_name</span><span class=p>;</span>
<a id=__codelineno-11-12 name=__codelineno-11-12 href=#__codelineno-11-12></a><span class=p>}</span>
</code></pre></div> <p>and</p> <div class=highlight><pre><span></span><code><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a>
<a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a><span class=k>namespace</span> <span class=nx>MyApp\Models</span><span class=p>;</span>
<a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a>
<a id=__codelineno-12-5 name=__codelineno-12-5 href=#__codelineno-12-5></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\Model</span><span class=p>;</span>
<a id=__codelineno-12-6 name=__codelineno-12-6 href=#__codelineno-12-6></a>
<a id=__codelineno-12-7 name=__codelineno-12-7 href=#__codelineno-12-7></a><span class=k>class</span> <span class=nc>Parts</span> <span class=k>extends</span> <span class=nx>Model</span>
<a id=__codelineno-12-8 name=__codelineno-12-8 href=#__codelineno-12-8></a><span class=p>{</span>
<a id=__codelineno-12-9 name=__codelineno-12-9 href=#__codelineno-12-9></a>    <span class=k>public</span> <span class=nv>$par_id</span><span class=p>;</span>
<a id=__codelineno-12-10 name=__codelineno-12-10 href=#__codelineno-12-10></a>    <span class=k>public</span> <span class=nv>$par_prd_id</span><span class=p>;</span>
<a id=__codelineno-12-11 name=__codelineno-12-11 href=#__codelineno-12-11></a>    <span class=k>public</span> <span class=nv>$par_par_id</span><span class=p>;</span>
<a id=__codelineno-12-12 name=__codelineno-12-12 href=#__codelineno-12-12></a>    <span class=k>public</span> <span class=nv>$par_type_flag</span><span class=p>;</span>
<a id=__codelineno-12-13 name=__codelineno-12-13 href=#__codelineno-12-13></a>    <span class=k>public</span> <span class=nv>$par_name</span><span class=p>;</span>
<a id=__codelineno-12-14 name=__codelineno-12-14 href=#__codelineno-12-14></a><span class=p>}</span>
</code></pre></div> <p>In the above, we have a <code>Products</code> model which has <code>prd_id</code>, <code>prd_type_flag</code>, and <code>prd_name</code> fields. The <code>Parts</code> model contains <code>par_id</code>, <code>par_prd_id</code>, <code>par_type_flag</code>, and <code>par_name</code>. The relationship exists based on the product's unique id as well as the type.</p> <p>Using the relationship options, as seen above, binding one field between the two models will not return the results we need. We can use an array with the necessary fields to define the relationship.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a>
<a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a><span class=k>namespace</span> <span class=nx>MyApp\Models</span><span class=p>;</span>
<a id=__codelineno-13-4 name=__codelineno-13-4 href=#__codelineno-13-4></a>
<a id=__codelineno-13-5 name=__codelineno-13-5 href=#__codelineno-13-5></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\Model</span><span class=p>;</span>
<a id=__codelineno-13-6 name=__codelineno-13-6 href=#__codelineno-13-6></a>
<a id=__codelineno-13-7 name=__codelineno-13-7 href=#__codelineno-13-7></a><span class=k>class</span> <span class=nc>Products</span> <span class=k>extends</span> <span class=nx>Model</span>
<a id=__codelineno-13-8 name=__codelineno-13-8 href=#__codelineno-13-8></a><span class=p>{</span>
<a id=__codelineno-13-9 name=__codelineno-13-9 href=#__codelineno-13-9></a>    <span class=k>public</span> <span class=nv>$prd_id</span><span class=p>;</span>
<a id=__codelineno-13-10 name=__codelineno-13-10 href=#__codelineno-13-10></a>    <span class=k>public</span> <span class=nv>$prd_type_flag</span><span class=p>;</span>
<a id=__codelineno-13-11 name=__codelineno-13-11 href=#__codelineno-13-11></a>    <span class=k>public</span> <span class=nv>$prd_name</span><span class=p>;</span>
<a id=__codelineno-13-12 name=__codelineno-13-12 href=#__codelineno-13-12></a>
<a id=__codelineno-13-13 name=__codelineno-13-13 href=#__codelineno-13-13></a>    <span class=k>public</span> <span class=k>function</span> <span class=nf>initialize</span><span class=p>()</span>
<a id=__codelineno-13-14 name=__codelineno-13-14 href=#__codelineno-13-14></a>    <span class=p>{</span>
<a id=__codelineno-13-15 name=__codelineno-13-15 href=#__codelineno-13-15></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>hasOne</span><span class=p>(</span>
<a id=__codelineno-13-16 name=__codelineno-13-16 href=#__codelineno-13-16></a>            <span class=p>[</span>
<a id=__codelineno-13-17 name=__codelineno-13-17 href=#__codelineno-13-17></a>                <span class=s1>&#39;prd_id&#39;</span><span class=p>,</span> 
<a id=__codelineno-13-18 name=__codelineno-13-18 href=#__codelineno-13-18></a>                <span class=s1>&#39;prd_type_flag&#39;</span>
<a id=__codelineno-13-19 name=__codelineno-13-19 href=#__codelineno-13-19></a>            <span class=p>],</span>
<a id=__codelineno-13-20 name=__codelineno-13-20 href=#__codelineno-13-20></a>            <span class=nx>Parts</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<a id=__codelineno-13-21 name=__codelineno-13-21 href=#__codelineno-13-21></a>            <span class=p>[</span>
<a id=__codelineno-13-22 name=__codelineno-13-22 href=#__codelineno-13-22></a>                <span class=s1>&#39;par_prd_id&#39;</span><span class=p>,</span> 
<a id=__codelineno-13-23 name=__codelineno-13-23 href=#__codelineno-13-23></a>                <span class=s1>&#39;par_type_flag&#39;</span>
<a id=__codelineno-13-24 name=__codelineno-13-24 href=#__codelineno-13-24></a>            <span class=p>],</span>
<a id=__codelineno-13-25 name=__codelineno-13-25 href=#__codelineno-13-25></a>            <span class=p>[</span>
<a id=__codelineno-13-26 name=__codelineno-13-26 href=#__codelineno-13-26></a>                <span class=s1>&#39;reusable&#39;</span> <span class=o>=&gt;</span> <span class=k>true</span><span class=p>,</span> <span class=c1>// cache</span>
<a id=__codelineno-13-27 name=__codelineno-13-27 href=#__codelineno-13-27></a>                <span class=s1>&#39;alias&#39;</span>    <span class=o>=&gt;</span> <span class=s1>&#39;parts&#39;</span><span class=p>,</span>
<a id=__codelineno-13-28 name=__codelineno-13-28 href=#__codelineno-13-28></a>            <span class=p>]</span>
<a id=__codelineno-13-29 name=__codelineno-13-29 href=#__codelineno-13-29></a>        <span class=p>);</span>
<a id=__codelineno-13-30 name=__codelineno-13-30 href=#__codelineno-13-30></a>    <span class=p>}</span>
<a id=__codelineno-13-31 name=__codelineno-13-31 href=#__codelineno-13-31></a><span class=p>}</span>
</code></pre></div> <div class="admonition info"> <p class=admonition-title>NOTE</p> <p>The field mappings in the relationship are one for one i.e. the first field of the source model array matches the first field of the target array etc. The field count must be identical in both source and target models.</p> </div> <h2 id=accessing>Accessing<a class=headerlink href=#accessing title="Permanent link">&para;</a></h2> <p>There are several ways that we can access the relationships of a model.</p> <ul> <li>Magic <code>__get</code>, <code>__set</code></li> <li>Magic <code>get*</code></li> <li><code>getRelated</code></li> </ul> <h3 id=__get><code>__get()</code><a class=headerlink href=#__get title="Permanent link">&para;</a></h3> <p>You can use the magic method to access the relationship. Assigning an <code>alias</code> to the relationship simplifies accessing the related data. The name of the property is the same as the one defined in the <code>alias</code>.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a>
<a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a><span class=nv>$customer</span> <span class=o>=</span> <span class=nx>Customers</span><span class=o>::</span><span class=na>findFirst</span><span class=p>(</span>
<a id=__codelineno-14-4 name=__codelineno-14-4 href=#__codelineno-14-4></a>    <span class=p>[</span>
<a id=__codelineno-14-5 name=__codelineno-14-5 href=#__codelineno-14-5></a>        <span class=s1>&#39;conditions&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;cst_id = :customerId:&#39;</span><span class=p>,</span>
<a id=__codelineno-14-6 name=__codelineno-14-6 href=#__codelineno-14-6></a>        <span class=s1>&#39;bind&#39;</span>       <span class=o>=&gt;</span> <span class=p>[</span>
<a id=__codelineno-14-7 name=__codelineno-14-7 href=#__codelineno-14-7></a>            <span class=s1>&#39;customerId&#39;</span> <span class=o>=&gt;</span> <span class=mi>1</span><span class=p>,</span>
<a id=__codelineno-14-8 name=__codelineno-14-8 href=#__codelineno-14-8></a>        <span class=p>],</span>
<a id=__codelineno-14-9 name=__codelineno-14-9 href=#__codelineno-14-9></a>    <span class=p>]</span>
<a id=__codelineno-14-10 name=__codelineno-14-10 href=#__codelineno-14-10></a><span class=p>);</span>
<a id=__codelineno-14-11 name=__codelineno-14-11 href=#__codelineno-14-11></a>
<a id=__codelineno-14-12 name=__codelineno-14-12 href=#__codelineno-14-12></a><span class=k>foreach</span> <span class=p>(</span><span class=nv>$customer</span><span class=o>-&gt;</span><span class=na>invoices</span> <span class=k>as</span> <span class=nv>$invoice</span><span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-14-13 name=__codelineno-14-13 href=#__codelineno-14-13></a>    <span class=k>echo</span> <span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>inv_title</span><span class=p>;</span>
<a id=__codelineno-14-14 name=__codelineno-14-14 href=#__codelineno-14-14></a><span class=p>}</span>
</code></pre></div> <p>or for a many-to-many relationship (see models above):</p> <div class=highlight><pre><span></span><code><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-15-2 name=__codelineno-15-2 href=#__codelineno-15-2></a>
<a id=__codelineno-15-3 name=__codelineno-15-3 href=#__codelineno-15-3></a><span class=nv>$invoice</span> <span class=o>=</span> <span class=nx>Invoices</span><span class=o>::</span><span class=na>findFirst</span><span class=p>(</span>
<a id=__codelineno-15-4 name=__codelineno-15-4 href=#__codelineno-15-4></a>    <span class=p>[</span>
<a id=__codelineno-15-5 name=__codelineno-15-5 href=#__codelineno-15-5></a>        <span class=s1>&#39;conditions&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;inv_cst_id = :customerId:&#39;</span><span class=p>,</span>
<a id=__codelineno-15-6 name=__codelineno-15-6 href=#__codelineno-15-6></a>        <span class=s1>&#39;bind&#39;</span>       <span class=o>=&gt;</span> <span class=p>[</span>
<a id=__codelineno-15-7 name=__codelineno-15-7 href=#__codelineno-15-7></a>            <span class=s1>&#39;customerId&#39;</span> <span class=o>=&gt;</span> <span class=mi>1</span><span class=p>,</span>
<a id=__codelineno-15-8 name=__codelineno-15-8 href=#__codelineno-15-8></a>        <span class=p>],</span>
<a id=__codelineno-15-9 name=__codelineno-15-9 href=#__codelineno-15-9></a>    <span class=p>]</span>
<a id=__codelineno-15-10 name=__codelineno-15-10 href=#__codelineno-15-10></a><span class=p>);</span>
<a id=__codelineno-15-11 name=__codelineno-15-11 href=#__codelineno-15-11></a>
<a id=__codelineno-15-12 name=__codelineno-15-12 href=#__codelineno-15-12></a><span class=k>foreach</span> <span class=p>(</span><span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>invoicesProducts</span> <span class=k>as</span> <span class=nv>$product</span><span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-15-13 name=__codelineno-15-13 href=#__codelineno-15-13></a>    <span class=k>echo</span> <span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>product</span><span class=o>-&gt;</span><span class=na>prd_name</span><span class=p>;</span>
<a id=__codelineno-15-14 name=__codelineno-15-14 href=#__codelineno-15-14></a><span class=p>}</span>
<a id=__codelineno-15-15 name=__codelineno-15-15 href=#__codelineno-15-15></a>
<a id=__codelineno-15-16 name=__codelineno-15-16 href=#__codelineno-15-16></a><span class=k>foreach</span> <span class=p>(</span><span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>products</span> <span class=k>as</span> <span class=nv>$product</span><span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-15-17 name=__codelineno-15-17 href=#__codelineno-15-17></a>    <span class=k>echo</span> <span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>prd_name</span><span class=p>;</span>
<a id=__codelineno-15-18 name=__codelineno-15-18 href=#__codelineno-15-18></a><span class=p>}</span>
</code></pre></div> <p>Using the magic <code>__get</code> allows you to access the relationship directly but does not offer additional functionality such as filtering or ordering on the relationship.</p> <h3 id=get><code>get*()</code><a class=headerlink href=#get title="Permanent link">&para;</a></h3> <p>You can access the same relationship by using a getter method, starting with <em>get</em> and using the name of the relationship.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a>
<a id=__codelineno-16-3 name=__codelineno-16-3 href=#__codelineno-16-3></a><span class=nv>$customer</span> <span class=o>=</span> <span class=nx>Customers</span><span class=o>::</span><span class=na>findFirst</span><span class=p>(</span>
<a id=__codelineno-16-4 name=__codelineno-16-4 href=#__codelineno-16-4></a>    <span class=p>[</span>
<a id=__codelineno-16-5 name=__codelineno-16-5 href=#__codelineno-16-5></a>        <span class=s1>&#39;conditions&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;cst_id = :customerId:&#39;</span><span class=p>,</span>
<a id=__codelineno-16-6 name=__codelineno-16-6 href=#__codelineno-16-6></a>        <span class=s1>&#39;bind&#39;</span>       <span class=o>=&gt;</span> <span class=p>[</span>
<a id=__codelineno-16-7 name=__codelineno-16-7 href=#__codelineno-16-7></a>            <span class=s1>&#39;customerId&#39;</span> <span class=o>=&gt;</span> <span class=mi>1</span><span class=p>,</span>
<a id=__codelineno-16-8 name=__codelineno-16-8 href=#__codelineno-16-8></a>        <span class=p>],</span>
<a id=__codelineno-16-9 name=__codelineno-16-9 href=#__codelineno-16-9></a>    <span class=p>]</span>
<a id=__codelineno-16-10 name=__codelineno-16-10 href=#__codelineno-16-10></a><span class=p>);</span>
<a id=__codelineno-16-11 name=__codelineno-16-11 href=#__codelineno-16-11></a>
<a id=__codelineno-16-12 name=__codelineno-16-12 href=#__codelineno-16-12></a><span class=k>foreach</span> <span class=p>(</span><span class=nv>$customer</span><span class=o>-&gt;</span><span class=na>getInvoices</span><span class=p>()</span> <span class=k>as</span> <span class=nv>$invoice</span><span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-16-13 name=__codelineno-16-13 href=#__codelineno-16-13></a>    <span class=k>echo</span> <span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>inv_title</span><span class=p>;</span>
<a id=__codelineno-16-14 name=__codelineno-16-14 href=#__codelineno-16-14></a><span class=p>}</span>
</code></pre></div> <p>or for a many-to-many relationship (see models above):</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-17-2 name=__codelineno-17-2 href=#__codelineno-17-2></a>
<a id=__codelineno-17-3 name=__codelineno-17-3 href=#__codelineno-17-3></a><span class=nv>$invoice</span> <span class=o>=</span> <span class=nx>Invoices</span><span class=o>::</span><span class=na>findFirst</span><span class=p>(</span>
<a id=__codelineno-17-4 name=__codelineno-17-4 href=#__codelineno-17-4></a>    <span class=p>[</span>
<a id=__codelineno-17-5 name=__codelineno-17-5 href=#__codelineno-17-5></a>        <span class=s1>&#39;conditions&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;inv_cst_id = :customerId:&#39;</span><span class=p>,</span>
<a id=__codelineno-17-6 name=__codelineno-17-6 href=#__codelineno-17-6></a>        <span class=s1>&#39;bind&#39;</span>       <span class=o>=&gt;</span> <span class=p>[</span>
<a id=__codelineno-17-7 name=__codelineno-17-7 href=#__codelineno-17-7></a>            <span class=s1>&#39;customerId&#39;</span> <span class=o>=&gt;</span> <span class=mi>1</span><span class=p>,</span>
<a id=__codelineno-17-8 name=__codelineno-17-8 href=#__codelineno-17-8></a>        <span class=p>],</span>
<a id=__codelineno-17-9 name=__codelineno-17-9 href=#__codelineno-17-9></a>    <span class=p>]</span>
<a id=__codelineno-17-10 name=__codelineno-17-10 href=#__codelineno-17-10></a><span class=p>);</span>
<a id=__codelineno-17-11 name=__codelineno-17-11 href=#__codelineno-17-11></a>
<a id=__codelineno-17-12 name=__codelineno-17-12 href=#__codelineno-17-12></a><span class=k>foreach</span> <span class=p>(</span><span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>getInvoiceProducts</span><span class=p>()</span> <span class=k>as</span> <span class=nv>$product</span><span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-17-13 name=__codelineno-17-13 href=#__codelineno-17-13></a>    <span class=k>echo</span> <span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>product</span><span class=o>-&gt;</span><span class=na>prd_name</span><span class=p>;</span>
<a id=__codelineno-17-14 name=__codelineno-17-14 href=#__codelineno-17-14></a><span class=p>}</span>
<a id=__codelineno-17-15 name=__codelineno-17-15 href=#__codelineno-17-15></a>
<a id=__codelineno-17-16 name=__codelineno-17-16 href=#__codelineno-17-16></a><span class=k>foreach</span> <span class=p>(</span><span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>getProducts</span><span class=p>()</span> <span class=k>as</span> <span class=nv>$product</span><span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-17-17 name=__codelineno-17-17 href=#__codelineno-17-17></a>    <span class=k>echo</span> <span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>prd_name</span><span class=p>;</span>
<a id=__codelineno-17-18 name=__codelineno-17-18 href=#__codelineno-17-18></a><span class=p>}</span>
</code></pre></div> This magic-getter also allows us to perform certain operations when accessing the relationship such as ordering the relationship:</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-18-2 name=__codelineno-18-2 href=#__codelineno-18-2></a>
<a id=__codelineno-18-3 name=__codelineno-18-3 href=#__codelineno-18-3></a><span class=nv>$invoice</span> <span class=o>=</span> <span class=nx>Invoices</span><span class=o>::</span><span class=na>findFirst</span><span class=p>(</span>
<a id=__codelineno-18-4 name=__codelineno-18-4 href=#__codelineno-18-4></a>    <span class=p>[</span>
<a id=__codelineno-18-5 name=__codelineno-18-5 href=#__codelineno-18-5></a>        <span class=s1>&#39;conditions&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;inv_cst_id = :customerId:&#39;</span><span class=p>,</span>
<a id=__codelineno-18-6 name=__codelineno-18-6 href=#__codelineno-18-6></a>        <span class=s1>&#39;bind&#39;</span>       <span class=o>=&gt;</span> <span class=p>[</span>
<a id=__codelineno-18-7 name=__codelineno-18-7 href=#__codelineno-18-7></a>            <span class=s1>&#39;customerId&#39;</span> <span class=o>=&gt;</span> <span class=mi>1</span><span class=p>,</span>
<a id=__codelineno-18-8 name=__codelineno-18-8 href=#__codelineno-18-8></a>        <span class=p>],</span>
<a id=__codelineno-18-9 name=__codelineno-18-9 href=#__codelineno-18-9></a>    <span class=p>]</span>
<a id=__codelineno-18-10 name=__codelineno-18-10 href=#__codelineno-18-10></a><span class=p>);</span>
<a id=__codelineno-18-11 name=__codelineno-18-11 href=#__codelineno-18-11></a>
<a id=__codelineno-18-12 name=__codelineno-18-12 href=#__codelineno-18-12></a><span class=nv>$products</span> <span class=o>=</span> <span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>getProducts</span><span class=p>(</span>
<a id=__codelineno-18-13 name=__codelineno-18-13 href=#__codelineno-18-13></a>    <span class=p>[</span>
<a id=__codelineno-18-14 name=__codelineno-18-14 href=#__codelineno-18-14></a>        <span class=s1>&#39;order&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;prd_name&#39;</span><span class=p>,</span>
<a id=__codelineno-18-15 name=__codelineno-18-15 href=#__codelineno-18-15></a>    <span class=p>]</span>
<a id=__codelineno-18-16 name=__codelineno-18-16 href=#__codelineno-18-16></a><span class=p>);</span>
<a id=__codelineno-18-17 name=__codelineno-18-17 href=#__codelineno-18-17></a><span class=k>foreach</span> <span class=p>(</span><span class=nv>$products</span> <span class=k>as</span> <span class=nv>$product</span><span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-18-18 name=__codelineno-18-18 href=#__codelineno-18-18></a>    <span class=k>echo</span> <span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>prd_name</span><span class=p>;</span>
<a id=__codelineno-18-19 name=__codelineno-18-19 href=#__codelineno-18-19></a><span class=p>}</span>
</code></pre></div> You can also add additional conditionals to the relationship:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-19-2 name=__codelineno-19-2 href=#__codelineno-19-2></a>
<a id=__codelineno-19-3 name=__codelineno-19-3 href=#__codelineno-19-3></a><span class=nv>$invoice</span> <span class=o>=</span> <span class=nx>Invoices</span><span class=o>::</span><span class=na>findFirst</span><span class=p>(</span>
<a id=__codelineno-19-4 name=__codelineno-19-4 href=#__codelineno-19-4></a>    <span class=p>[</span>
<a id=__codelineno-19-5 name=__codelineno-19-5 href=#__codelineno-19-5></a>        <span class=s1>&#39;conditions&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;inv_cst_id = :customerId:&#39;</span><span class=p>,</span>
<a id=__codelineno-19-6 name=__codelineno-19-6 href=#__codelineno-19-6></a>        <span class=s1>&#39;bind&#39;</span>       <span class=o>=&gt;</span> <span class=p>[</span>
<a id=__codelineno-19-7 name=__codelineno-19-7 href=#__codelineno-19-7></a>            <span class=s1>&#39;customerId&#39;</span> <span class=o>=&gt;</span> <span class=mi>1</span><span class=p>,</span>
<a id=__codelineno-19-8 name=__codelineno-19-8 href=#__codelineno-19-8></a>        <span class=p>],</span>
<a id=__codelineno-19-9 name=__codelineno-19-9 href=#__codelineno-19-9></a>    <span class=p>]</span>
<a id=__codelineno-19-10 name=__codelineno-19-10 href=#__codelineno-19-10></a><span class=p>);</span>
<a id=__codelineno-19-11 name=__codelineno-19-11 href=#__codelineno-19-11></a>
<a id=__codelineno-19-12 name=__codelineno-19-12 href=#__codelineno-19-12></a><span class=nv>$products</span> <span class=o>=</span> <span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>getProducts</span><span class=p>(</span>
<a id=__codelineno-19-13 name=__codelineno-19-13 href=#__codelineno-19-13></a>    <span class=p>[</span>
<a id=__codelineno-19-14 name=__codelineno-19-14 href=#__codelineno-19-14></a>        <span class=s1>&#39;prd_created_at = :date:&#39;</span><span class=p>,</span>
<a id=__codelineno-19-15 name=__codelineno-19-15 href=#__codelineno-19-15></a>        <span class=s1>&#39;bind&#39;</span> <span class=o>=&gt;</span> <span class=p>[</span>
<a id=__codelineno-19-16 name=__codelineno-19-16 href=#__codelineno-19-16></a>            <span class=s1>&#39;date&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;2019-12-25&#39;</span><span class=p>,</span>
<a id=__codelineno-19-17 name=__codelineno-19-17 href=#__codelineno-19-17></a>        <span class=p>],</span>
<a id=__codelineno-19-18 name=__codelineno-19-18 href=#__codelineno-19-18></a>    <span class=p>]</span>
<a id=__codelineno-19-19 name=__codelineno-19-19 href=#__codelineno-19-19></a><span class=p>);</span>
<a id=__codelineno-19-20 name=__codelineno-19-20 href=#__codelineno-19-20></a>
<a id=__codelineno-19-21 name=__codelineno-19-21 href=#__codelineno-19-21></a><span class=k>foreach</span> <span class=p>(</span><span class=nv>$products</span> <span class=k>as</span> <span class=nv>$product</span><span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-19-22 name=__codelineno-19-22 href=#__codelineno-19-22></a>    <span class=k>echo</span> <span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>prd_name</span><span class=p>;</span>
<a id=__codelineno-19-23 name=__codelineno-19-23 href=#__codelineno-19-23></a><span class=p>}</span>
</code></pre></div> <p>To get the same records manually:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-20-1 name=__codelineno-20-1 href=#__codelineno-20-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-20-2 name=__codelineno-20-2 href=#__codelineno-20-2></a>
<a id=__codelineno-20-3 name=__codelineno-20-3 href=#__codelineno-20-3></a><span class=nv>$invoice</span> <span class=o>=</span> <span class=nx>Invoices</span><span class=o>::</span><span class=na>findFirst</span><span class=p>(</span>
<a id=__codelineno-20-4 name=__codelineno-20-4 href=#__codelineno-20-4></a>    <span class=p>[</span>
<a id=__codelineno-20-5 name=__codelineno-20-5 href=#__codelineno-20-5></a>        <span class=s1>&#39;conditions&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;inv_cst_id = :customerId:&#39;</span><span class=p>,</span>
<a id=__codelineno-20-6 name=__codelineno-20-6 href=#__codelineno-20-6></a>        <span class=s1>&#39;bind&#39;</span>       <span class=o>=&gt;</span> <span class=p>[</span>
<a id=__codelineno-20-7 name=__codelineno-20-7 href=#__codelineno-20-7></a>            <span class=s1>&#39;customerId&#39;</span> <span class=o>=&gt;</span> <span class=mi>1</span><span class=p>,</span>
<a id=__codelineno-20-8 name=__codelineno-20-8 href=#__codelineno-20-8></a>        <span class=p>],</span>
<a id=__codelineno-20-9 name=__codelineno-20-9 href=#__codelineno-20-9></a>    <span class=p>]</span>
<a id=__codelineno-20-10 name=__codelineno-20-10 href=#__codelineno-20-10></a><span class=p>);</span>
<a id=__codelineno-20-11 name=__codelineno-20-11 href=#__codelineno-20-11></a>
<a id=__codelineno-20-12 name=__codelineno-20-12 href=#__codelineno-20-12></a>
<a id=__codelineno-20-13 name=__codelineno-20-13 href=#__codelineno-20-13></a><span class=nv>$invoicesProducts</span> <span class=o>=</span> <span class=nx>InvoicesProducts</span><span class=o>::</span><span class=na>find</span><span class=p>(</span>
<a id=__codelineno-20-14 name=__codelineno-20-14 href=#__codelineno-20-14></a>    <span class=p>[</span>
<a id=__codelineno-20-15 name=__codelineno-20-15 href=#__codelineno-20-15></a>        <span class=s1>&#39;conditions&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;ixp_inv_id = :invoiceId:&#39;</span><span class=p>,</span>
<a id=__codelineno-20-16 name=__codelineno-20-16 href=#__codelineno-20-16></a>        <span class=s1>&#39;bind&#39;</span>       <span class=o>=&gt;</span> <span class=p>[</span>
<a id=__codelineno-20-17 name=__codelineno-20-17 href=#__codelineno-20-17></a>            <span class=s1>&#39;invoiceId&#39;</span> <span class=o>=&gt;</span> <span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>inv_id</span><span class=p>,</span>
<a id=__codelineno-20-18 name=__codelineno-20-18 href=#__codelineno-20-18></a>        <span class=p>],</span>
<a id=__codelineno-20-19 name=__codelineno-20-19 href=#__codelineno-20-19></a>    <span class=p>]</span>
<a id=__codelineno-20-20 name=__codelineno-20-20 href=#__codelineno-20-20></a><span class=p>);</span>
<a id=__codelineno-20-21 name=__codelineno-20-21 href=#__codelineno-20-21></a>
<a id=__codelineno-20-22 name=__codelineno-20-22 href=#__codelineno-20-22></a><span class=nv>$productIds</span> <span class=o>=</span> <span class=p>[];</span>
<a id=__codelineno-20-23 name=__codelineno-20-23 href=#__codelineno-20-23></a><span class=k>foreach</span> <span class=p>(</span><span class=nv>$invoicesProducts</span> <span class=k>as</span> <span class=nv>$intermediate</span><span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-20-24 name=__codelineno-20-24 href=#__codelineno-20-24></a>    <span class=nv>$productIds</span><span class=p>[]</span> <span class=o>=</span> <span class=nv>$intermediate</span><span class=o>-&gt;</span><span class=na>ixp_prd_id</span><span class=p>;</span>
<a id=__codelineno-20-25 name=__codelineno-20-25 href=#__codelineno-20-25></a><span class=p>}</span>
<a id=__codelineno-20-26 name=__codelineno-20-26 href=#__codelineno-20-26></a>
<a id=__codelineno-20-27 name=__codelineno-20-27 href=#__codelineno-20-27></a><span class=nv>$products</span> <span class=o>=</span> <span class=nx>Products</span><span class=o>::</span><span class=na>find</span><span class=p>(</span>
<a id=__codelineno-20-28 name=__codelineno-20-28 href=#__codelineno-20-28></a>    <span class=p>[</span>
<a id=__codelineno-20-29 name=__codelineno-20-29 href=#__codelineno-20-29></a>        <span class=s1>&#39;conditions&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;prd_id IN ({array:productIds})&#39;</span><span class=p>,</span>
<a id=__codelineno-20-30 name=__codelineno-20-30 href=#__codelineno-20-30></a>        <span class=s1>&#39;bind&#39;</span>       <span class=o>=&gt;</span> <span class=p>[</span>
<a id=__codelineno-20-31 name=__codelineno-20-31 href=#__codelineno-20-31></a>            <span class=s1>&#39;productIds&#39;</span> <span class=o>=&gt;</span> <span class=nv>$productIds</span><span class=p>,,</span>
<a id=__codelineno-20-32 name=__codelineno-20-32 href=#__codelineno-20-32></a>        <span class=p>],</span>
<a id=__codelineno-20-33 name=__codelineno-20-33 href=#__codelineno-20-33></a>    <span class=p>]</span>
<a id=__codelineno-20-34 name=__codelineno-20-34 href=#__codelineno-20-34></a><span class=p>);</span>
<a id=__codelineno-20-35 name=__codelineno-20-35 href=#__codelineno-20-35></a>
<a id=__codelineno-20-36 name=__codelineno-20-36 href=#__codelineno-20-36></a><span class=k>foreach</span> <span class=p>(</span><span class=nv>$products</span> <span class=k>as</span> <span class=nv>$product</span><span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-20-37 name=__codelineno-20-37 href=#__codelineno-20-37></a>    <span class=k>echo</span> <span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>prd_name</span><span class=p>;</span>
<a id=__codelineno-20-38 name=__codelineno-20-38 href=#__codelineno-20-38></a><span class=p>}</span>
</code></pre></div> <p>The prefix <code>get</code> is used to <code>find()</code>/<code>findFirst()</code> related records.</p> <table> <thead> <tr> <th>Type</th> <th>Implicit Method</th> <th>Returns</th> </tr> </thead> <tbody> <tr> <td>Belongs-To</td> <td><code>findFirst</code></td> <td>Model instance of the related record directly</td> </tr> <tr> <td>Has-One</td> <td><code>findFirst</code></td> <td>Model instance of the related record directly</td> </tr> <tr> <td>Has-One-Through</td> <td><code>findFirst</code></td> <td>Model instance of the related record directly</td> </tr> <tr> <td>Has-Many</td> <td><code>find</code></td> <td>Collection of model instances of the referenced model</td> </tr> <tr> <td>Has-Many-to-Many</td> <td>(complex query)</td> <td>Collection of model instances of the referenced model (<code>inner join</code>)</td> </tr> </tbody> </table> <p>You can also use the <code>count</code> prefix to return an integer denoting the count of the related records:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-21-1 name=__codelineno-21-1 href=#__codelineno-21-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-21-2 name=__codelineno-21-2 href=#__codelineno-21-2></a>
<a id=__codelineno-21-3 name=__codelineno-21-3 href=#__codelineno-21-3></a><span class=nv>$invoice</span> <span class=o>=</span> <span class=nx>Invoices</span><span class=o>::</span><span class=na>findFirst</span><span class=p>(</span>
<a id=__codelineno-21-4 name=__codelineno-21-4 href=#__codelineno-21-4></a>    <span class=p>[</span>
<a id=__codelineno-21-5 name=__codelineno-21-5 href=#__codelineno-21-5></a>        <span class=s1>&#39;conditions&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;inv_cst_id = :customerId:&#39;</span><span class=p>,</span>
<a id=__codelineno-21-6 name=__codelineno-21-6 href=#__codelineno-21-6></a>        <span class=s1>&#39;bind&#39;</span>       <span class=o>=&gt;</span> <span class=p>[</span>
<a id=__codelineno-21-7 name=__codelineno-21-7 href=#__codelineno-21-7></a>            <span class=s1>&#39;customerId&#39;</span> <span class=o>=&gt;</span> <span class=mi>1</span><span class=p>,</span>
<a id=__codelineno-21-8 name=__codelineno-21-8 href=#__codelineno-21-8></a>        <span class=p>],</span>
<a id=__codelineno-21-9 name=__codelineno-21-9 href=#__codelineno-21-9></a>    <span class=p>]</span>
<a id=__codelineno-21-10 name=__codelineno-21-10 href=#__codelineno-21-10></a><span class=p>);</span>
<a id=__codelineno-21-11 name=__codelineno-21-11 href=#__codelineno-21-11></a>
<a id=__codelineno-21-12 name=__codelineno-21-12 href=#__codelineno-21-12></a><span class=k>echo</span> <span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>countProducts</span><span class=p>();</span>
</code></pre></div> <h3 id=getrelated><code>getRelated()</code><a class=headerlink href=#getrelated title="Permanent link">&para;</a></h3> <p>You can access the same relationship by using <code>getRelated()</code> and defining which relationship you want to get.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-22-1 name=__codelineno-22-1 href=#__codelineno-22-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-22-2 name=__codelineno-22-2 href=#__codelineno-22-2></a>
<a id=__codelineno-22-3 name=__codelineno-22-3 href=#__codelineno-22-3></a><span class=nv>$customer</span> <span class=o>=</span> <span class=nx>Customers</span><span class=o>::</span><span class=na>findFirst</span><span class=p>(</span>
<a id=__codelineno-22-4 name=__codelineno-22-4 href=#__codelineno-22-4></a>    <span class=p>[</span>
<a id=__codelineno-22-5 name=__codelineno-22-5 href=#__codelineno-22-5></a>        <span class=s1>&#39;conditions&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;cst_id = :customerId:&#39;</span><span class=p>,</span>
<a id=__codelineno-22-6 name=__codelineno-22-6 href=#__codelineno-22-6></a>        <span class=s1>&#39;bind&#39;</span>       <span class=o>=&gt;</span> <span class=p>[</span>
<a id=__codelineno-22-7 name=__codelineno-22-7 href=#__codelineno-22-7></a>            <span class=s1>&#39;customerId&#39;</span> <span class=o>=&gt;</span> <span class=mi>1</span><span class=p>,</span>
<a id=__codelineno-22-8 name=__codelineno-22-8 href=#__codelineno-22-8></a>        <span class=p>],</span>
<a id=__codelineno-22-9 name=__codelineno-22-9 href=#__codelineno-22-9></a>    <span class=p>]</span>
<a id=__codelineno-22-10 name=__codelineno-22-10 href=#__codelineno-22-10></a><span class=p>);</span>
<a id=__codelineno-22-11 name=__codelineno-22-11 href=#__codelineno-22-11></a>
<a id=__codelineno-22-12 name=__codelineno-22-12 href=#__codelineno-22-12></a><span class=k>foreach</span> <span class=p>(</span><span class=nv>$customer</span><span class=o>-&gt;</span><span class=na>getRelated</span><span class=p>(</span><span class=s1>&#39;invoices&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=nv>$invoice</span><span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-22-13 name=__codelineno-22-13 href=#__codelineno-22-13></a>    <span class=k>echo</span> <span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>inv_title</span><span class=p>;</span>
<a id=__codelineno-22-14 name=__codelineno-22-14 href=#__codelineno-22-14></a><span class=p>}</span>
</code></pre></div> <p>or for a many-to-many relationship (see models above):</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-23-1 name=__codelineno-23-1 href=#__codelineno-23-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-23-2 name=__codelineno-23-2 href=#__codelineno-23-2></a>
<a id=__codelineno-23-3 name=__codelineno-23-3 href=#__codelineno-23-3></a><span class=nv>$invoice</span> <span class=o>=</span> <span class=nx>Invoices</span><span class=o>::</span><span class=na>findFirst</span><span class=p>(</span>
<a id=__codelineno-23-4 name=__codelineno-23-4 href=#__codelineno-23-4></a>    <span class=p>[</span>
<a id=__codelineno-23-5 name=__codelineno-23-5 href=#__codelineno-23-5></a>        <span class=s1>&#39;conditions&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;inv_cst_id = :customerId:&#39;</span><span class=p>,</span>
<a id=__codelineno-23-6 name=__codelineno-23-6 href=#__codelineno-23-6></a>        <span class=s1>&#39;bind&#39;</span>       <span class=o>=&gt;</span> <span class=p>[</span>
<a id=__codelineno-23-7 name=__codelineno-23-7 href=#__codelineno-23-7></a>            <span class=s1>&#39;customerId&#39;</span> <span class=o>=&gt;</span> <span class=mi>1</span><span class=p>,</span>
<a id=__codelineno-23-8 name=__codelineno-23-8 href=#__codelineno-23-8></a>        <span class=p>],</span>
<a id=__codelineno-23-9 name=__codelineno-23-9 href=#__codelineno-23-9></a>    <span class=p>]</span>
<a id=__codelineno-23-10 name=__codelineno-23-10 href=#__codelineno-23-10></a><span class=p>);</span>
<a id=__codelineno-23-11 name=__codelineno-23-11 href=#__codelineno-23-11></a>
<a id=__codelineno-23-12 name=__codelineno-23-12 href=#__codelineno-23-12></a><span class=k>foreach</span> <span class=p>(</span><span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>getRelated</span><span class=p>(</span><span class=s1>&#39;products&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=nv>$product</span><span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-23-13 name=__codelineno-23-13 href=#__codelineno-23-13></a>    <span class=k>echo</span> <span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>prd_name</span><span class=p>;</span>
<a id=__codelineno-23-14 name=__codelineno-23-14 href=#__codelineno-23-14></a><span class=p>}</span>
</code></pre></div> The second parameter of <code>getRelated()</code> is an array that offers additional options to be set such as filtering and ordering.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-24-1 name=__codelineno-24-1 href=#__codelineno-24-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-24-2 name=__codelineno-24-2 href=#__codelineno-24-2></a>
<a id=__codelineno-24-3 name=__codelineno-24-3 href=#__codelineno-24-3></a><span class=nv>$invoice</span> <span class=o>=</span> <span class=nx>Invoices</span><span class=o>::</span><span class=na>findFirst</span><span class=p>(</span>
<a id=__codelineno-24-4 name=__codelineno-24-4 href=#__codelineno-24-4></a>    <span class=p>[</span>
<a id=__codelineno-24-5 name=__codelineno-24-5 href=#__codelineno-24-5></a>        <span class=s1>&#39;conditions&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;inv_cst_id = :customerId:&#39;</span><span class=p>,</span>
<a id=__codelineno-24-6 name=__codelineno-24-6 href=#__codelineno-24-6></a>        <span class=s1>&#39;bind&#39;</span>       <span class=o>=&gt;</span> <span class=p>[</span>
<a id=__codelineno-24-7 name=__codelineno-24-7 href=#__codelineno-24-7></a>            <span class=s1>&#39;customerId&#39;</span> <span class=o>=&gt;</span> <span class=mi>1</span><span class=p>,</span>
<a id=__codelineno-24-8 name=__codelineno-24-8 href=#__codelineno-24-8></a>        <span class=p>],</span>
<a id=__codelineno-24-9 name=__codelineno-24-9 href=#__codelineno-24-9></a>    <span class=p>]</span>
<a id=__codelineno-24-10 name=__codelineno-24-10 href=#__codelineno-24-10></a><span class=p>);</span>
<a id=__codelineno-24-11 name=__codelineno-24-11 href=#__codelineno-24-11></a>
<a id=__codelineno-24-12 name=__codelineno-24-12 href=#__codelineno-24-12></a><span class=nv>$products</span> <span class=o>=</span> <span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>getRelated</span><span class=p>(</span>
<a id=__codelineno-24-13 name=__codelineno-24-13 href=#__codelineno-24-13></a>    <span class=s1>&#39;products&#39;</span><span class=p>,</span>
<a id=__codelineno-24-14 name=__codelineno-24-14 href=#__codelineno-24-14></a>    <span class=p>[</span>
<a id=__codelineno-24-15 name=__codelineno-24-15 href=#__codelineno-24-15></a>        <span class=s1>&#39;prd_created_at = :date:&#39;</span><span class=p>,</span>
<a id=__codelineno-24-16 name=__codelineno-24-16 href=#__codelineno-24-16></a>        <span class=s1>&#39;bind&#39;</span> <span class=o>=&gt;</span> <span class=p>[</span>
<a id=__codelineno-24-17 name=__codelineno-24-17 href=#__codelineno-24-17></a>            <span class=s1>&#39;date&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;2019-12-25&#39;</span><span class=p>,</span>
<a id=__codelineno-24-18 name=__codelineno-24-18 href=#__codelineno-24-18></a>        <span class=p>],</span>
<a id=__codelineno-24-19 name=__codelineno-24-19 href=#__codelineno-24-19></a>    <span class=p>]</span>
<a id=__codelineno-24-20 name=__codelineno-24-20 href=#__codelineno-24-20></a><span class=p>);</span>
<a id=__codelineno-24-21 name=__codelineno-24-21 href=#__codelineno-24-21></a>
<a id=__codelineno-24-22 name=__codelineno-24-22 href=#__codelineno-24-22></a><span class=k>foreach</span> <span class=p>(</span><span class=nv>$products</span> <span class=k>as</span> <span class=nv>$product</span><span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-24-23 name=__codelineno-24-23 href=#__codelineno-24-23></a>    <span class=k>echo</span> <span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>prd_name</span><span class=p>;</span>
<a id=__codelineno-24-24 name=__codelineno-24-24 href=#__codelineno-24-24></a><span class=p>}</span>
</code></pre></div> <h3 id=setrelated><code>setRelated()</code><a class=headerlink href=#setrelated title="Permanent link">&para;</a></h3> <p>You can set the same relationship by using <code>setRelated()</code> and defining which relationship you want to set.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-25-1 name=__codelineno-25-1 href=#__codelineno-25-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-25-2 name=__codelineno-25-2 href=#__codelineno-25-2></a>
<a id=__codelineno-25-3 name=__codelineno-25-3 href=#__codelineno-25-3></a><span class=nv>$customer</span> <span class=o>=</span> <span class=nx>Customers</span><span class=o>::</span><span class=na>findFirst</span><span class=p>(</span>
<a id=__codelineno-25-4 name=__codelineno-25-4 href=#__codelineno-25-4></a>    <span class=p>[</span>
<a id=__codelineno-25-5 name=__codelineno-25-5 href=#__codelineno-25-5></a>        <span class=s1>&#39;conditions&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;cst_id = :customerId:&#39;</span><span class=p>,</span>
<a id=__codelineno-25-6 name=__codelineno-25-6 href=#__codelineno-25-6></a>        <span class=s1>&#39;bind&#39;</span>       <span class=o>=&gt;</span> <span class=p>[</span>
<a id=__codelineno-25-7 name=__codelineno-25-7 href=#__codelineno-25-7></a>            <span class=s1>&#39;customerId&#39;</span> <span class=o>=&gt;</span> <span class=mi>1</span><span class=p>,</span>
<a id=__codelineno-25-8 name=__codelineno-25-8 href=#__codelineno-25-8></a>        <span class=p>],</span>
<a id=__codelineno-25-9 name=__codelineno-25-9 href=#__codelineno-25-9></a>    <span class=p>]</span>
<a id=__codelineno-25-10 name=__codelineno-25-10 href=#__codelineno-25-10></a><span class=p>);</span>
<a id=__codelineno-25-11 name=__codelineno-25-11 href=#__codelineno-25-11></a><span class=nv>$invoice</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Invoice</span><span class=p>();</span>
<a id=__codelineno-25-12 name=__codelineno-25-12 href=#__codelineno-25-12></a><span class=nv>$customer</span><span class=o>-&gt;</span><span class=na>setRelated</span><span class=p>(</span><span class=s1>&#39;invoices&#39;</span><span class=p>,</span> <span class=p>[</span><span class=nv>$invoice</span><span class=p>]);</span>
</code></pre></div> <h2 id=aliases>Aliases<a class=headerlink href=#aliases title="Permanent link">&para;</a></h2> <p>Accessing a relationship can be achieved by using the name of the remote table. Due to naming conventions, this might not be that easy and could lead to confusion. As seen above, you can define an <code>alias</code> to the relationship.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-26-1 name=__codelineno-26-1 href=#__codelineno-26-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-26-2 name=__codelineno-26-2 href=#__codelineno-26-2></a>
<a id=__codelineno-26-3 name=__codelineno-26-3 href=#__codelineno-26-3></a><span class=k>namespace</span> <span class=nx>MyApp\Models</span><span class=p>;</span>
<a id=__codelineno-26-4 name=__codelineno-26-4 href=#__codelineno-26-4></a>
<a id=__codelineno-26-5 name=__codelineno-26-5 href=#__codelineno-26-5></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\Model</span><span class=p>;</span>
<a id=__codelineno-26-6 name=__codelineno-26-6 href=#__codelineno-26-6></a>
<a id=__codelineno-26-7 name=__codelineno-26-7 href=#__codelineno-26-7></a><span class=k>class</span> <span class=nc>Invoices</span> <span class=k>extends</span> <span class=nx>Model</span>
<a id=__codelineno-26-8 name=__codelineno-26-8 href=#__codelineno-26-8></a><span class=p>{</span>
<a id=__codelineno-26-9 name=__codelineno-26-9 href=#__codelineno-26-9></a>    <span class=k>public</span> <span class=nv>$inv_id</span><span class=p>;</span>
<a id=__codelineno-26-10 name=__codelineno-26-10 href=#__codelineno-26-10></a>    <span class=k>public</span> <span class=nv>$inv_cst_id</span><span class=p>;</span>
<a id=__codelineno-26-11 name=__codelineno-26-11 href=#__codelineno-26-11></a>    <span class=k>public</span> <span class=nv>$inv_status_flag</span><span class=p>;</span>
<a id=__codelineno-26-12 name=__codelineno-26-12 href=#__codelineno-26-12></a>    <span class=k>public</span> <span class=nv>$inv_title</span><span class=p>;</span>
<a id=__codelineno-26-13 name=__codelineno-26-13 href=#__codelineno-26-13></a>    <span class=k>public</span> <span class=nv>$inv_total</span><span class=p>;</span>
<a id=__codelineno-26-14 name=__codelineno-26-14 href=#__codelineno-26-14></a>    <span class=k>public</span> <span class=nv>$inv_created_at</span><span class=p>;</span>
<a id=__codelineno-26-15 name=__codelineno-26-15 href=#__codelineno-26-15></a>
<a id=__codelineno-26-16 name=__codelineno-26-16 href=#__codelineno-26-16></a>    <span class=k>public</span> <span class=k>function</span> <span class=nf>initialize</span><span class=p>()</span>
<a id=__codelineno-26-17 name=__codelineno-26-17 href=#__codelineno-26-17></a>    <span class=p>{</span>
<a id=__codelineno-26-18 name=__codelineno-26-18 href=#__codelineno-26-18></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>hasManyToMany</span><span class=p>(</span>
<a id=__codelineno-26-19 name=__codelineno-26-19 href=#__codelineno-26-19></a>            <span class=s1>&#39;inv_id&#39;</span><span class=p>,</span>
<a id=__codelineno-26-20 name=__codelineno-26-20 href=#__codelineno-26-20></a>            <span class=nx>InvoicesProducts</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<a id=__codelineno-26-21 name=__codelineno-26-21 href=#__codelineno-26-21></a>            <span class=s1>&#39;ixp_inv_id&#39;</span><span class=p>,</span>
<a id=__codelineno-26-22 name=__codelineno-26-22 href=#__codelineno-26-22></a>            <span class=s1>&#39;ixp_prd_id&#39;</span><span class=p>,</span>
<a id=__codelineno-26-23 name=__codelineno-26-23 href=#__codelineno-26-23></a>            <span class=nx>Products</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<a id=__codelineno-26-24 name=__codelineno-26-24 href=#__codelineno-26-24></a>            <span class=s1>&#39;prd_id&#39;</span>
<a id=__codelineno-26-25 name=__codelineno-26-25 href=#__codelineno-26-25></a>        <span class=p>);</span>
<a id=__codelineno-26-26 name=__codelineno-26-26 href=#__codelineno-26-26></a>    <span class=p>}</span>
<a id=__codelineno-26-27 name=__codelineno-26-27 href=#__codelineno-26-27></a><span class=p>}</span>
</code></pre></div> <p>With an alias:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-27-1 name=__codelineno-27-1 href=#__codelineno-27-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-27-2 name=__codelineno-27-2 href=#__codelineno-27-2></a>
<a id=__codelineno-27-3 name=__codelineno-27-3 href=#__codelineno-27-3></a><span class=k>namespace</span> <span class=nx>MyApp\Models</span><span class=p>;</span>
<a id=__codelineno-27-4 name=__codelineno-27-4 href=#__codelineno-27-4></a>
<a id=__codelineno-27-5 name=__codelineno-27-5 href=#__codelineno-27-5></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\Model</span><span class=p>;</span>
<a id=__codelineno-27-6 name=__codelineno-27-6 href=#__codelineno-27-6></a>
<a id=__codelineno-27-7 name=__codelineno-27-7 href=#__codelineno-27-7></a><span class=k>class</span> <span class=nc>Invoices</span> <span class=k>extends</span> <span class=nx>Model</span>
<a id=__codelineno-27-8 name=__codelineno-27-8 href=#__codelineno-27-8></a><span class=p>{</span>
<a id=__codelineno-27-9 name=__codelineno-27-9 href=#__codelineno-27-9></a>    <span class=k>public</span> <span class=nv>$inv_id</span><span class=p>;</span>
<a id=__codelineno-27-10 name=__codelineno-27-10 href=#__codelineno-27-10></a>    <span class=k>public</span> <span class=nv>$inv_cst_id</span><span class=p>;</span>
<a id=__codelineno-27-11 name=__codelineno-27-11 href=#__codelineno-27-11></a>    <span class=k>public</span> <span class=nv>$inv_status_flag</span><span class=p>;</span>
<a id=__codelineno-27-12 name=__codelineno-27-12 href=#__codelineno-27-12></a>    <span class=k>public</span> <span class=nv>$inv_title</span><span class=p>;</span>
<a id=__codelineno-27-13 name=__codelineno-27-13 href=#__codelineno-27-13></a>    <span class=k>public</span> <span class=nv>$inv_total</span><span class=p>;</span>
<a id=__codelineno-27-14 name=__codelineno-27-14 href=#__codelineno-27-14></a>    <span class=k>public</span> <span class=nv>$inv_created_at</span><span class=p>;</span>
<a id=__codelineno-27-15 name=__codelineno-27-15 href=#__codelineno-27-15></a>
<a id=__codelineno-27-16 name=__codelineno-27-16 href=#__codelineno-27-16></a>    <span class=k>public</span> <span class=k>function</span> <span class=nf>initialize</span><span class=p>()</span>
<a id=__codelineno-27-17 name=__codelineno-27-17 href=#__codelineno-27-17></a>    <span class=p>{</span>
<a id=__codelineno-27-18 name=__codelineno-27-18 href=#__codelineno-27-18></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>hasManyToMany</span><span class=p>(</span>
<a id=__codelineno-27-19 name=__codelineno-27-19 href=#__codelineno-27-19></a>            <span class=s1>&#39;inv_id&#39;</span><span class=p>,</span>
<a id=__codelineno-27-20 name=__codelineno-27-20 href=#__codelineno-27-20></a>            <span class=nx>InvoicesProducts</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<a id=__codelineno-27-21 name=__codelineno-27-21 href=#__codelineno-27-21></a>            <span class=s1>&#39;ixp_inv_id&#39;</span><span class=p>,</span>
<a id=__codelineno-27-22 name=__codelineno-27-22 href=#__codelineno-27-22></a>            <span class=s1>&#39;ixp_prd_id&#39;</span><span class=p>,</span>
<a id=__codelineno-27-23 name=__codelineno-27-23 href=#__codelineno-27-23></a>            <span class=nx>Products</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<a id=__codelineno-27-24 name=__codelineno-27-24 href=#__codelineno-27-24></a>            <span class=s1>&#39;prd_id&#39;</span><span class=p>,</span>
<a id=__codelineno-27-25 name=__codelineno-27-25 href=#__codelineno-27-25></a>            <span class=p>[</span>
<a id=__codelineno-27-26 name=__codelineno-27-26 href=#__codelineno-27-26></a>                <span class=s1>&#39;reusable&#39;</span> <span class=o>=&gt;</span> <span class=k>true</span><span class=p>,</span>
<a id=__codelineno-27-27 name=__codelineno-27-27 href=#__codelineno-27-27></a>                <span class=s1>&#39;alias&#39;</span>    <span class=o>=&gt;</span> <span class=s1>&#39;products&#39;</span><span class=p>,</span>
<a id=__codelineno-27-28 name=__codelineno-27-28 href=#__codelineno-27-28></a>            <span class=p>]</span>
<a id=__codelineno-27-29 name=__codelineno-27-29 href=#__codelineno-27-29></a>        <span class=p>);</span>
<a id=__codelineno-27-30 name=__codelineno-27-30 href=#__codelineno-27-30></a>    <span class=p>}</span>
<a id=__codelineno-27-31 name=__codelineno-27-31 href=#__codelineno-27-31></a><span class=p>}</span>
</code></pre></div> <p>If your table structure has self-joins, you will not be able to access those relationships without aliases because you will be using the same model.</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-28-1 name=__codelineno-28-1 href=#__codelineno-28-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-28-2 name=__codelineno-28-2 href=#__codelineno-28-2></a>
<a id=__codelineno-28-3 name=__codelineno-28-3 href=#__codelineno-28-3></a><span class=k>namespace</span> <span class=nx>MyApp\Models</span><span class=p>;</span>
<a id=__codelineno-28-4 name=__codelineno-28-4 href=#__codelineno-28-4></a>
<a id=__codelineno-28-5 name=__codelineno-28-5 href=#__codelineno-28-5></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\Model</span><span class=p>;</span>
<a id=__codelineno-28-6 name=__codelineno-28-6 href=#__codelineno-28-6></a>
<a id=__codelineno-28-7 name=__codelineno-28-7 href=#__codelineno-28-7></a><span class=k>class</span> <span class=nc>Parts</span> <span class=k>extends</span> <span class=nx>Model</span>
<a id=__codelineno-28-8 name=__codelineno-28-8 href=#__codelineno-28-8></a><span class=p>{</span>
<a id=__codelineno-28-9 name=__codelineno-28-9 href=#__codelineno-28-9></a>    <span class=k>public</span> <span class=nv>$par_id</span><span class=p>;</span>
<a id=__codelineno-28-10 name=__codelineno-28-10 href=#__codelineno-28-10></a>    <span class=k>public</span> <span class=nv>$par_prd_id</span><span class=p>;</span>
<a id=__codelineno-28-11 name=__codelineno-28-11 href=#__codelineno-28-11></a>    <span class=k>public</span> <span class=nv>$par_par_id</span><span class=p>;</span>
<a id=__codelineno-28-12 name=__codelineno-28-12 href=#__codelineno-28-12></a>    <span class=k>public</span> <span class=nv>$par_type_flag</span><span class=p>;</span>
<a id=__codelineno-28-13 name=__codelineno-28-13 href=#__codelineno-28-13></a>    <span class=k>public</span> <span class=nv>$par_name</span><span class=p>;</span>
<a id=__codelineno-28-14 name=__codelineno-28-14 href=#__codelineno-28-14></a>
<a id=__codelineno-28-15 name=__codelineno-28-15 href=#__codelineno-28-15></a>    <span class=k>public</span> <span class=k>function</span> <span class=nf>initialize</span><span class=p>()</span>
<a id=__codelineno-28-16 name=__codelineno-28-16 href=#__codelineno-28-16></a>    <span class=p>{</span>
<a id=__codelineno-28-17 name=__codelineno-28-17 href=#__codelineno-28-17></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>hasMany</span><span class=p>(</span>
<a id=__codelineno-28-18 name=__codelineno-28-18 href=#__codelineno-28-18></a>            <span class=s1>&#39;par_id&#39;</span><span class=p>,</span>
<a id=__codelineno-28-19 name=__codelineno-28-19 href=#__codelineno-28-19></a>            <span class=nx>Parts</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<a id=__codelineno-28-20 name=__codelineno-28-20 href=#__codelineno-28-20></a>            <span class=s1>&#39;par_par_id&#39;</span><span class=p>,</span>
<a id=__codelineno-28-21 name=__codelineno-28-21 href=#__codelineno-28-21></a>            <span class=p>[</span>
<a id=__codelineno-28-22 name=__codelineno-28-22 href=#__codelineno-28-22></a>                <span class=s1>&#39;reusable&#39;</span> <span class=o>=&gt;</span> <span class=k>true</span><span class=p>,</span>
<a id=__codelineno-28-23 name=__codelineno-28-23 href=#__codelineno-28-23></a>                <span class=s1>&#39;alias&#39;</span>    <span class=o>=&gt;</span> <span class=s1>&#39;children&#39;</span><span class=p>,</span>
<a id=__codelineno-28-24 name=__codelineno-28-24 href=#__codelineno-28-24></a>            <span class=p>]</span>
<a id=__codelineno-28-25 name=__codelineno-28-25 href=#__codelineno-28-25></a>        <span class=p>);</span>
<a id=__codelineno-28-26 name=__codelineno-28-26 href=#__codelineno-28-26></a>
<a id=__codelineno-28-27 name=__codelineno-28-27 href=#__codelineno-28-27></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>belongsTo</span><span class=p>(</span>
<a id=__codelineno-28-28 name=__codelineno-28-28 href=#__codelineno-28-28></a>            <span class=s1>&#39;par_par_id&#39;</span><span class=p>,</span>
<a id=__codelineno-28-29 name=__codelineno-28-29 href=#__codelineno-28-29></a>            <span class=nx>Parts</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<a id=__codelineno-28-30 name=__codelineno-28-30 href=#__codelineno-28-30></a>            <span class=s1>&#39;par_id&#39;</span><span class=p>,</span>
<a id=__codelineno-28-31 name=__codelineno-28-31 href=#__codelineno-28-31></a>            <span class=p>[</span>
<a id=__codelineno-28-32 name=__codelineno-28-32 href=#__codelineno-28-32></a>                <span class=s1>&#39;reusable&#39;</span> <span class=o>=&gt;</span> <span class=k>true</span><span class=p>,</span>
<a id=__codelineno-28-33 name=__codelineno-28-33 href=#__codelineno-28-33></a>                <span class=s1>&#39;alias&#39;</span>    <span class=o>=&gt;</span> <span class=s1>&#39;parent&#39;</span><span class=p>,</span>
<a id=__codelineno-28-34 name=__codelineno-28-34 href=#__codelineno-28-34></a>            <span class=p>]</span>
<a id=__codelineno-28-35 name=__codelineno-28-35 href=#__codelineno-28-35></a>        <span class=p>);</span>
<a id=__codelineno-28-36 name=__codelineno-28-36 href=#__codelineno-28-36></a>    <span class=p>}</span>
<a id=__codelineno-28-37 name=__codelineno-28-37 href=#__codelineno-28-37></a><span class=p>}</span>
</code></pre></div> In the example above, we have a <code>Part</code> that has a relationship with one or more <code>Part</code> objects. Each <code>Part</code> can consist of other parts that construct it. As a result, we end up with a self-join relationship. For a telephone <code>Part</code> we have the following children:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-29-1 name=__codelineno-29-1 href=#__codelineno-29-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-29-2 name=__codelineno-29-2 href=#__codelineno-29-2></a>
<a id=__codelineno-29-3 name=__codelineno-29-3 href=#__codelineno-29-3></a><span class=nv>$phone</span> <span class=o>=</span> <span class=nx>Parts</span><span class=o>::</span><span class=na>findFirst</span><span class=p>(</span><span class=o>....</span><span class=p>);</span>
<a id=__codelineno-29-4 name=__codelineno-29-4 href=#__codelineno-29-4></a>
<a id=__codelineno-29-5 name=__codelineno-29-5 href=#__codelineno-29-5></a><span class=k>echo</span> <span class=nv>$phone</span><span class=o>-&gt;</span><span class=na>getChildren</span><span class=p>();</span>
<a id=__codelineno-29-6 name=__codelineno-29-6 href=#__codelineno-29-6></a>
<a id=__codelineno-29-7 name=__codelineno-29-7 href=#__codelineno-29-7></a><span class=c1>// --- Cover</span>
<a id=__codelineno-29-8 name=__codelineno-29-8 href=#__codelineno-29-8></a><span class=c1>// --- Battery</span>
<a id=__codelineno-29-9 name=__codelineno-29-9 href=#__codelineno-29-9></a><span class=c1>// --- Charger</span>
</code></pre></div> <p>and each of those parts has the telephone as a parent:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-30-1 name=__codelineno-30-1 href=#__codelineno-30-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-30-2 name=__codelineno-30-2 href=#__codelineno-30-2></a><span class=nv>$charger</span> <span class=o>=</span> <span class=nx>Parts</span><span class=o>::</span><span class=na>findFirst</span><span class=p>(</span><span class=o>...</span><span class=p>);</span>
<a id=__codelineno-30-3 name=__codelineno-30-3 href=#__codelineno-30-3></a>
<a id=__codelineno-30-4 name=__codelineno-30-4 href=#__codelineno-30-4></a><span class=k>echo</span> <span class=nv>$phone</span><span class=o>-&gt;</span><span class=na>getParent</span><span class=p>();</span>
<a id=__codelineno-30-5 name=__codelineno-30-5 href=#__codelineno-30-5></a>
<a id=__codelineno-30-6 name=__codelineno-30-6 href=#__codelineno-30-6></a><span class=c1>// Phone</span>
</code></pre></div> <h2 id=caching>Caching<a class=headerlink href=#caching title="Permanent link">&para;</a></h2> <p>Accessing related data can significantly increase the number of queries in your database. You can reduce this load as much as possible, by utilizing the <code>reusable</code> option in your relationship. Setting this option to <code>true</code> will instruct Phalcon to cache the results of the relationship the first time it is accessed, so that subsequent calls to the same relationship can use the cached resultset and not request the data again from the database. This cache is active during the same request.</p> <div class="admonition info"> <p class=admonition-title>NOTE</p> <p>You are encouraged to use the <code>reusable</code> option as often as possible in your relationships</p> </div> <div class=highlight><pre><span></span><code><a id=__codelineno-31-1 name=__codelineno-31-1 href=#__codelineno-31-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-31-2 name=__codelineno-31-2 href=#__codelineno-31-2></a>
<a id=__codelineno-31-3 name=__codelineno-31-3 href=#__codelineno-31-3></a><span class=k>namespace</span> <span class=nx>MyApp\Models</span><span class=p>;</span>
<a id=__codelineno-31-4 name=__codelineno-31-4 href=#__codelineno-31-4></a>
<a id=__codelineno-31-5 name=__codelineno-31-5 href=#__codelineno-31-5></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\Model</span><span class=p>;</span>
<a id=__codelineno-31-6 name=__codelineno-31-6 href=#__codelineno-31-6></a>
<a id=__codelineno-31-7 name=__codelineno-31-7 href=#__codelineno-31-7></a><span class=k>class</span> <span class=nc>Invoices</span> <span class=k>extends</span> <span class=nx>Model</span>
<a id=__codelineno-31-8 name=__codelineno-31-8 href=#__codelineno-31-8></a><span class=p>{</span>
<a id=__codelineno-31-9 name=__codelineno-31-9 href=#__codelineno-31-9></a>    <span class=k>public</span> <span class=k>function</span> <span class=nf>initialize</span><span class=p>()</span>
<a id=__codelineno-31-10 name=__codelineno-31-10 href=#__codelineno-31-10></a>    <span class=p>{</span>
<a id=__codelineno-31-11 name=__codelineno-31-11 href=#__codelineno-31-11></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>hasOne</span><span class=p>(</span>
<a id=__codelineno-31-12 name=__codelineno-31-12 href=#__codelineno-31-12></a>            <span class=s1>&#39;inv_cst_id&#39;</span><span class=p>,</span>
<a id=__codelineno-31-13 name=__codelineno-31-13 href=#__codelineno-31-13></a>            <span class=nx>Customers</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<a id=__codelineno-31-14 name=__codelineno-31-14 href=#__codelineno-31-14></a>            <span class=s1>&#39;cst_id&#39;</span><span class=p>,</span>
<a id=__codelineno-31-15 name=__codelineno-31-15 href=#__codelineno-31-15></a>            <span class=p>[</span>
<a id=__codelineno-31-16 name=__codelineno-31-16 href=#__codelineno-31-16></a>                <span class=s1>&#39;alias&#39;</span>    <span class=o>=&gt;</span> <span class=s1>&#39;customers&#39;</span><span class=p>,</span>
<a id=__codelineno-31-17 name=__codelineno-31-17 href=#__codelineno-31-17></a>                <span class=s1>&#39;reusable&#39;</span> <span class=o>=&gt;</span> <span class=k>true</span><span class=p>,</span>
<a id=__codelineno-31-18 name=__codelineno-31-18 href=#__codelineno-31-18></a>            <span class=p>]</span>
<a id=__codelineno-31-19 name=__codelineno-31-19 href=#__codelineno-31-19></a>        <span class=p>);</span>
<a id=__codelineno-31-20 name=__codelineno-31-20 href=#__codelineno-31-20></a>    <span class=p>}</span>
<a id=__codelineno-31-21 name=__codelineno-31-21 href=#__codelineno-31-21></a><span class=p>}</span>
</code></pre></div> <h2 id=autocompletion>Autocompletion<a class=headerlink href=#autocompletion title="Permanent link">&para;</a></h2> <p>Most IDEs and editors with auto-completion capabilities can not detect the correct types when using magic getters (both methods and properties). To address this issue, you can use the class docblock that specifies what magic actions are available, helping the IDE to produce a better auto-completion:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-32-1 name=__codelineno-32-1 href=#__codelineno-32-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-32-2 name=__codelineno-32-2 href=#__codelineno-32-2></a>
<a id=__codelineno-32-3 name=__codelineno-32-3 href=#__codelineno-32-3></a><span class=k>namespace</span> <span class=nx>MyApp\Models</span><span class=p>;</span>
<a id=__codelineno-32-4 name=__codelineno-32-4 href=#__codelineno-32-4></a>
<a id=__codelineno-32-5 name=__codelineno-32-5 href=#__codelineno-32-5></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\Model</span><span class=p>;</span>
<a id=__codelineno-32-6 name=__codelineno-32-6 href=#__codelineno-32-6></a>
<a id=__codelineno-32-7 name=__codelineno-32-7 href=#__codelineno-32-7></a><span class=sd>/**</span>
<a id=__codelineno-32-8 name=__codelineno-32-8 href=#__codelineno-32-8></a><span class=sd> * Invoices model</span>
<a id=__codelineno-32-9 name=__codelineno-32-9 href=#__codelineno-32-9></a><span class=sd> *</span>
<a id=__codelineno-32-10 name=__codelineno-32-10 href=#__codelineno-32-10></a><span class=sd> * @property Simple|Products[] $products</span>
<a id=__codelineno-32-11 name=__codelineno-32-11 href=#__codelineno-32-11></a><span class=sd> * @method   Simple|Products[] getProducts($parameters = null)</span>
<a id=__codelineno-32-12 name=__codelineno-32-12 href=#__codelineno-32-12></a><span class=sd> * @method   integer           countProducts()</span>
<a id=__codelineno-32-13 name=__codelineno-32-13 href=#__codelineno-32-13></a><span class=sd> */</span>
<a id=__codelineno-32-14 name=__codelineno-32-14 href=#__codelineno-32-14></a><span class=k>class</span> <span class=nc>Invoices</span> <span class=k>extends</span> <span class=nx>Model</span>
<a id=__codelineno-32-15 name=__codelineno-32-15 href=#__codelineno-32-15></a><span class=p>{</span>
<a id=__codelineno-32-16 name=__codelineno-32-16 href=#__codelineno-32-16></a>    <span class=k>public</span> <span class=nv>$inv_id</span><span class=p>;</span>
<a id=__codelineno-32-17 name=__codelineno-32-17 href=#__codelineno-32-17></a>    <span class=k>public</span> <span class=nv>$inv_cst_id</span><span class=p>;</span>
<a id=__codelineno-32-18 name=__codelineno-32-18 href=#__codelineno-32-18></a>    <span class=k>public</span> <span class=nv>$inv_status_flag</span><span class=p>;</span>
<a id=__codelineno-32-19 name=__codelineno-32-19 href=#__codelineno-32-19></a>    <span class=k>public</span> <span class=nv>$inv_title</span><span class=p>;</span>
<a id=__codelineno-32-20 name=__codelineno-32-20 href=#__codelineno-32-20></a>    <span class=k>public</span> <span class=nv>$inv_total</span><span class=p>;</span>
<a id=__codelineno-32-21 name=__codelineno-32-21 href=#__codelineno-32-21></a>    <span class=k>public</span> <span class=nv>$inv_created_at</span><span class=p>;</span>
<a id=__codelineno-32-22 name=__codelineno-32-22 href=#__codelineno-32-22></a>
<a id=__codelineno-32-23 name=__codelineno-32-23 href=#__codelineno-32-23></a>    <span class=k>public</span> <span class=k>function</span> <span class=nf>initialize</span><span class=p>()</span>
<a id=__codelineno-32-24 name=__codelineno-32-24 href=#__codelineno-32-24></a>    <span class=p>{</span>
<a id=__codelineno-32-25 name=__codelineno-32-25 href=#__codelineno-32-25></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>hasManyToMany</span><span class=p>(</span>
<a id=__codelineno-32-26 name=__codelineno-32-26 href=#__codelineno-32-26></a>            <span class=s1>&#39;inv_id&#39;</span><span class=p>,</span>
<a id=__codelineno-32-27 name=__codelineno-32-27 href=#__codelineno-32-27></a>            <span class=nx>InvoicesProducts</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<a id=__codelineno-32-28 name=__codelineno-32-28 href=#__codelineno-32-28></a>            <span class=s1>&#39;ixp_inv_id&#39;</span><span class=p>,</span>
<a id=__codelineno-32-29 name=__codelineno-32-29 href=#__codelineno-32-29></a>            <span class=s1>&#39;ixp_prd_id&#39;</span><span class=p>,</span>
<a id=__codelineno-32-30 name=__codelineno-32-30 href=#__codelineno-32-30></a>            <span class=nx>Products</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<a id=__codelineno-32-31 name=__codelineno-32-31 href=#__codelineno-32-31></a>            <span class=s1>&#39;prd_id&#39;</span><span class=p>,</span>
<a id=__codelineno-32-32 name=__codelineno-32-32 href=#__codelineno-32-32></a>            <span class=p>[</span>
<a id=__codelineno-32-33 name=__codelineno-32-33 href=#__codelineno-32-33></a>                <span class=s1>&#39;reusable&#39;</span> <span class=o>=&gt;</span> <span class=k>true</span><span class=p>,</span>
<a id=__codelineno-32-34 name=__codelineno-32-34 href=#__codelineno-32-34></a>                <span class=s1>&#39;alias&#39;</span>    <span class=o>=&gt;</span> <span class=s1>&#39;products&#39;</span><span class=p>,</span>
<a id=__codelineno-32-35 name=__codelineno-32-35 href=#__codelineno-32-35></a>            <span class=p>]</span>
<a id=__codelineno-32-36 name=__codelineno-32-36 href=#__codelineno-32-36></a>        <span class=p>);</span>
<a id=__codelineno-32-37 name=__codelineno-32-37 href=#__codelineno-32-37></a>    <span class=p>}</span>
<a id=__codelineno-32-38 name=__codelineno-32-38 href=#__codelineno-32-38></a><span class=p>}</span>
</code></pre></div> <h2 id=conditionals>Conditionals<a class=headerlink href=#conditionals title="Permanent link">&para;</a></h2> <p>You can also create relationships based on conditionals. When querying based on the relationship the condition will be automatically appended to the query:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-33-1 name=__codelineno-33-1 href=#__codelineno-33-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-33-2 name=__codelineno-33-2 href=#__codelineno-33-2></a>
<a id=__codelineno-33-3 name=__codelineno-33-3 href=#__codelineno-33-3></a><span class=k>namespace</span> <span class=nx>MyApp\Models</span><span class=p>;</span>
<a id=__codelineno-33-4 name=__codelineno-33-4 href=#__codelineno-33-4></a>
<a id=__codelineno-33-5 name=__codelineno-33-5 href=#__codelineno-33-5></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\Model</span><span class=p>;</span>
<a id=__codelineno-33-6 name=__codelineno-33-6 href=#__codelineno-33-6></a>
<a id=__codelineno-33-7 name=__codelineno-33-7 href=#__codelineno-33-7></a><span class=k>class</span> <span class=nc>Invoices</span> <span class=k>extends</span> <span class=nx>Model</span>
<a id=__codelineno-33-8 name=__codelineno-33-8 href=#__codelineno-33-8></a><span class=p>{</span>
<a id=__codelineno-33-9 name=__codelineno-33-9 href=#__codelineno-33-9></a>    <span class=k>public</span> <span class=nv>$inv_id</span><span class=p>;</span>
<a id=__codelineno-33-10 name=__codelineno-33-10 href=#__codelineno-33-10></a>    <span class=k>public</span> <span class=nv>$inv_cst_id</span><span class=p>;</span>
<a id=__codelineno-33-11 name=__codelineno-33-11 href=#__codelineno-33-11></a>    <span class=k>public</span> <span class=nv>$inv_status_flag</span><span class=p>;</span>
<a id=__codelineno-33-12 name=__codelineno-33-12 href=#__codelineno-33-12></a>    <span class=k>public</span> <span class=nv>$inv_title</span><span class=p>;</span>
<a id=__codelineno-33-13 name=__codelineno-33-13 href=#__codelineno-33-13></a>    <span class=k>public</span> <span class=nv>$inv_total</span><span class=p>;</span>
<a id=__codelineno-33-14 name=__codelineno-33-14 href=#__codelineno-33-14></a>    <span class=k>public</span> <span class=nv>$inv_created_at</span><span class=p>;</span>
<a id=__codelineno-33-15 name=__codelineno-33-15 href=#__codelineno-33-15></a>
<a id=__codelineno-33-16 name=__codelineno-33-16 href=#__codelineno-33-16></a>    <span class=k>public</span> <span class=k>function</span> <span class=nf>initialize</span><span class=p>()</span>
<a id=__codelineno-33-17 name=__codelineno-33-17 href=#__codelineno-33-17></a>    <span class=p>{</span>
<a id=__codelineno-33-18 name=__codelineno-33-18 href=#__codelineno-33-18></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>hasManyToMany</span><span class=p>(</span>
<a id=__codelineno-33-19 name=__codelineno-33-19 href=#__codelineno-33-19></a>            <span class=s1>&#39;inv_id&#39;</span><span class=p>,</span>
<a id=__codelineno-33-20 name=__codelineno-33-20 href=#__codelineno-33-20></a>            <span class=nx>InvoicesProducts</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<a id=__codelineno-33-21 name=__codelineno-33-21 href=#__codelineno-33-21></a>            <span class=s1>&#39;ixp_inv_id&#39;</span><span class=p>,</span>
<a id=__codelineno-33-22 name=__codelineno-33-22 href=#__codelineno-33-22></a>            <span class=s1>&#39;ixp_prd_id&#39;</span><span class=p>,</span>
<a id=__codelineno-33-23 name=__codelineno-33-23 href=#__codelineno-33-23></a>            <span class=nx>Products</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<a id=__codelineno-33-24 name=__codelineno-33-24 href=#__codelineno-33-24></a>            <span class=s1>&#39;prd_id&#39;</span><span class=p>,</span>
<a id=__codelineno-33-25 name=__codelineno-33-25 href=#__codelineno-33-25></a>            <span class=p>[</span>
<a id=__codelineno-33-26 name=__codelineno-33-26 href=#__codelineno-33-26></a>                <span class=s1>&#39;reusable&#39;</span> <span class=o>=&gt;</span> <span class=k>true</span><span class=p>,</span>
<a id=__codelineno-33-27 name=__codelineno-33-27 href=#__codelineno-33-27></a>                <span class=s1>&#39;alias&#39;</span>    <span class=o>=&gt;</span> <span class=s1>&#39;products&#39;</span><span class=p>,</span>
<a id=__codelineno-33-28 name=__codelineno-33-28 href=#__codelineno-33-28></a>            <span class=p>]</span>
<a id=__codelineno-33-29 name=__codelineno-33-29 href=#__codelineno-33-29></a>        <span class=p>);</span>
<a id=__codelineno-33-30 name=__codelineno-33-30 href=#__codelineno-33-30></a>    <span class=p>}</span>
<a id=__codelineno-33-31 name=__codelineno-33-31 href=#__codelineno-33-31></a><span class=p>}</span>
<a id=__codelineno-33-32 name=__codelineno-33-32 href=#__codelineno-33-32></a>
<a id=__codelineno-33-33 name=__codelineno-33-33 href=#__codelineno-33-33></a><span class=k>class</span> <span class=nc>Companies</span> <span class=k>extends</span> <span class=nx>Model</span>
<a id=__codelineno-33-34 name=__codelineno-33-34 href=#__codelineno-33-34></a><span class=p>{</span>
<a id=__codelineno-33-35 name=__codelineno-33-35 href=#__codelineno-33-35></a>    <span class=k>public</span> <span class=k>function</span> <span class=nf>initialize</span><span class=p>()</span>
<a id=__codelineno-33-36 name=__codelineno-33-36 href=#__codelineno-33-36></a>    <span class=p>{</span>
<a id=__codelineno-33-37 name=__codelineno-33-37 href=#__codelineno-33-37></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>hasMany</span><span class=p>(</span>
<a id=__codelineno-33-38 name=__codelineno-33-38 href=#__codelineno-33-38></a>            <span class=s1>&#39;id&#39;</span><span class=p>,</span>
<a id=__codelineno-33-39 name=__codelineno-33-39 href=#__codelineno-33-39></a>            <span class=nx>Invoices</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<a id=__codelineno-33-40 name=__codelineno-33-40 href=#__codelineno-33-40></a>            <span class=s1>&#39;inv_id&#39;</span><span class=p>,</span>
<a id=__codelineno-33-41 name=__codelineno-33-41 href=#__codelineno-33-41></a>            <span class=p>[</span>
<a id=__codelineno-33-42 name=__codelineno-33-42 href=#__codelineno-33-42></a>                <span class=s1>&#39;alias&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;Invoices&#39;</span><span class=p>,</span>
<a id=__codelineno-33-43 name=__codelineno-33-43 href=#__codelineno-33-43></a>            <span class=p>]</span>
<a id=__codelineno-33-44 name=__codelineno-33-44 href=#__codelineno-33-44></a>        <span class=p>);</span>
<a id=__codelineno-33-45 name=__codelineno-33-45 href=#__codelineno-33-45></a>
<a id=__codelineno-33-46 name=__codelineno-33-46 href=#__codelineno-33-46></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>hasMany</span><span class=p>(</span>
<a id=__codelineno-33-47 name=__codelineno-33-47 href=#__codelineno-33-47></a>            <span class=s1>&#39;id&#39;</span><span class=p>,</span>
<a id=__codelineno-33-48 name=__codelineno-33-48 href=#__codelineno-33-48></a>            <span class=nx>Invoices</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<a id=__codelineno-33-49 name=__codelineno-33-49 href=#__codelineno-33-49></a>            <span class=s1>&#39;inv_id&#39;</span><span class=p>,</span>
<a id=__codelineno-33-50 name=__codelineno-33-50 href=#__codelineno-33-50></a>            <span class=p>[</span>
<a id=__codelineno-33-51 name=__codelineno-33-51 href=#__codelineno-33-51></a>                <span class=s1>&#39;alias&#39;</span>  <span class=o>=&gt;</span> <span class=s1>&#39;InvoicesPaid&#39;</span><span class=p>,</span>
<a id=__codelineno-33-52 name=__codelineno-33-52 href=#__codelineno-33-52></a>                <span class=s1>&#39;params&#39;</span> <span class=o>=&gt;</span> <span class=p>[</span>
<a id=__codelineno-33-53 name=__codelineno-33-53 href=#__codelineno-33-53></a>                    <span class=s1>&#39;conditions&#39;</span> <span class=o>=&gt;</span> <span class=s2>&quot;inv_status = &#39;paid&#39;&quot;</span><span class=p>,</span>
<a id=__codelineno-33-54 name=__codelineno-33-54 href=#__codelineno-33-54></a>                <span class=p>],</span>
<a id=__codelineno-33-55 name=__codelineno-33-55 href=#__codelineno-33-55></a>            <span class=p>]</span>
<a id=__codelineno-33-56 name=__codelineno-33-56 href=#__codelineno-33-56></a>        <span class=p>);</span>
<a id=__codelineno-33-57 name=__codelineno-33-57 href=#__codelineno-33-57></a>
<a id=__codelineno-33-58 name=__codelineno-33-58 href=#__codelineno-33-58></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>hasMany</span><span class=p>(</span>
<a id=__codelineno-33-59 name=__codelineno-33-59 href=#__codelineno-33-59></a>            <span class=s1>&#39;id&#39;</span><span class=p>,</span>
<a id=__codelineno-33-60 name=__codelineno-33-60 href=#__codelineno-33-60></a>            <span class=nx>Invoices</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<a id=__codelineno-33-61 name=__codelineno-33-61 href=#__codelineno-33-61></a>            <span class=s1>&#39;inv_id&#39;</span><span class=p>,</span>
<a id=__codelineno-33-62 name=__codelineno-33-62 href=#__codelineno-33-62></a>            <span class=p>[</span>
<a id=__codelineno-33-63 name=__codelineno-33-63 href=#__codelineno-33-63></a>                <span class=s1>&#39;alias&#39;</span>  <span class=o>=&gt;</span> <span class=s1>&#39;InvoicesUnpaid&#39;</span><span class=p>,</span>
<a id=__codelineno-33-64 name=__codelineno-33-64 href=#__codelineno-33-64></a>                <span class=s1>&#39;params&#39;</span> <span class=o>=&gt;</span> <span class=p>[</span>
<a id=__codelineno-33-65 name=__codelineno-33-65 href=#__codelineno-33-65></a>                    <span class=s1>&#39;conditions&#39;</span> <span class=o>=&gt;</span> <span class=s2>&quot;inv_status &lt;&gt; :status:&quot;</span><span class=p>,</span>
<a id=__codelineno-33-66 name=__codelineno-33-66 href=#__codelineno-33-66></a>                    <span class=s1>&#39;bind&#39;</span>       <span class=o>=&gt;</span> <span class=p>[</span>
<a id=__codelineno-33-67 name=__codelineno-33-67 href=#__codelineno-33-67></a>                        <span class=s1>&#39;status&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;unpaid&#39;</span><span class=p>,</span>
<a id=__codelineno-33-68 name=__codelineno-33-68 href=#__codelineno-33-68></a>                    <span class=p>],</span>
<a id=__codelineno-33-69 name=__codelineno-33-69 href=#__codelineno-33-69></a>                <span class=p>],</span>
<a id=__codelineno-33-70 name=__codelineno-33-70 href=#__codelineno-33-70></a>            <span class=p>]</span>
<a id=__codelineno-33-71 name=__codelineno-33-71 href=#__codelineno-33-71></a>        <span class=p>);</span>
<a id=__codelineno-33-72 name=__codelineno-33-72 href=#__codelineno-33-72></a>    <span class=p>}</span>
<a id=__codelineno-33-73 name=__codelineno-33-73 href=#__codelineno-33-73></a><span class=p>}</span>
</code></pre></div> <p>Additionally, you can use the parameters of <code>getInvoices()</code> or <code>getRelated()</code> on the model, to further filter or order your relationship:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-34-1 name=__codelineno-34-1 href=#__codelineno-34-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-34-2 name=__codelineno-34-2 href=#__codelineno-34-2></a>
<a id=__codelineno-34-3 name=__codelineno-34-3 href=#__codelineno-34-3></a><span class=nv>$company</span> <span class=o>=</span> <span class=nx>Companies</span><span class=o>::</span><span class=na>findFirst</span><span class=p>(</span>
<a id=__codelineno-34-4 name=__codelineno-34-4 href=#__codelineno-34-4></a>    <span class=p>[</span>
<a id=__codelineno-34-5 name=__codelineno-34-5 href=#__codelineno-34-5></a>        <span class=s1>&#39;conditions&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;id = :id:&#39;</span><span class=p>,</span>
<a id=__codelineno-34-6 name=__codelineno-34-6 href=#__codelineno-34-6></a>        <span class=s1>&#39;bind&#39;</span>       <span class=o>=&gt;</span> <span class=p>[</span>
<a id=__codelineno-34-7 name=__codelineno-34-7 href=#__codelineno-34-7></a>            <span class=s1>&#39;id&#39;</span> <span class=o>=&gt;</span> <span class=mi>1</span><span class=p>,</span>
<a id=__codelineno-34-8 name=__codelineno-34-8 href=#__codelineno-34-8></a>        <span class=p>],</span>
<a id=__codelineno-34-9 name=__codelineno-34-9 href=#__codelineno-34-9></a>    <span class=p>]</span>
<a id=__codelineno-34-10 name=__codelineno-34-10 href=#__codelineno-34-10></a><span class=p>);</span>
<a id=__codelineno-34-11 name=__codelineno-34-11 href=#__codelineno-34-11></a><span class=o>*</span>
<a id=__codelineno-34-12 name=__codelineno-34-12 href=#__codelineno-34-12></a><span class=nv>$unpaidInvoices</span> <span class=o>=</span> <span class=nv>$company</span><span class=o>-&gt;</span><span class=na>InvoicesUnpaid</span><span class=p>;</span>
<a id=__codelineno-34-13 name=__codelineno-34-13 href=#__codelineno-34-13></a><span class=nv>$unpaidInvoices</span> <span class=o>=</span> <span class=nv>$company</span><span class=o>-&gt;</span><span class=na>getInvoicesUnpaid</span><span class=p>();</span>
<a id=__codelineno-34-14 name=__codelineno-34-14 href=#__codelineno-34-14></a><span class=nv>$unpaidInvoices</span> <span class=o>=</span> <span class=nv>$company</span><span class=o>-&gt;</span><span class=na>getRelated</span><span class=p>(</span><span class=s1>&#39;InvoicesUnpaid&#39;</span><span class=p>);</span>
<a id=__codelineno-34-15 name=__codelineno-34-15 href=#__codelineno-34-15></a><span class=nv>$unpaidInvoices</span> <span class=o>=</span> <span class=nv>$company</span><span class=o>-&gt;</span><span class=na>getRelated</span><span class=p>(</span>
<a id=__codelineno-34-16 name=__codelineno-34-16 href=#__codelineno-34-16></a>    <span class=s1>&#39;Invoices&#39;</span><span class=p>,</span> 
<a id=__codelineno-34-17 name=__codelineno-34-17 href=#__codelineno-34-17></a>    <span class=p>[</span>
<a id=__codelineno-34-18 name=__codelineno-34-18 href=#__codelineno-34-18></a>        <span class=s1>&#39;conditions&#39;</span> <span class=o>=&gt;</span> <span class=s2>&quot;inv_status = &#39;paid&#39;&quot;</span><span class=p>,</span>
<a id=__codelineno-34-19 name=__codelineno-34-19 href=#__codelineno-34-19></a>    <span class=p>]</span>
<a id=__codelineno-34-20 name=__codelineno-34-20 href=#__codelineno-34-20></a><span class=p>);</span>
<a id=__codelineno-34-21 name=__codelineno-34-21 href=#__codelineno-34-21></a>
<a id=__codelineno-34-22 name=__codelineno-34-22 href=#__codelineno-34-22></a><span class=nv>$unpaidInvoices</span> <span class=o>=</span> <span class=nv>$company</span><span class=o>-&gt;</span><span class=na>getRelated</span><span class=p>(</span>
<a id=__codelineno-34-23 name=__codelineno-34-23 href=#__codelineno-34-23></a>    <span class=s1>&#39;Invoices&#39;</span><span class=p>,</span> 
<a id=__codelineno-34-24 name=__codelineno-34-24 href=#__codelineno-34-24></a>    <span class=p>[</span>
<a id=__codelineno-34-25 name=__codelineno-34-25 href=#__codelineno-34-25></a>        <span class=s1>&#39;conditions&#39;</span> <span class=o>=&gt;</span> <span class=s2>&quot;inv_status = &#39;paid&#39;&quot;</span><span class=p>,</span>
<a id=__codelineno-34-26 name=__codelineno-34-26 href=#__codelineno-34-26></a>        <span class=s1>&#39;order&#39;</span>      <span class=o>=&gt;</span> <span class=s1>&#39;inv_created_date ASC&#39;</span><span class=p>,</span>
<a id=__codelineno-34-27 name=__codelineno-34-27 href=#__codelineno-34-27></a>    <span class=p>]</span>
<a id=__codelineno-34-28 name=__codelineno-34-28 href=#__codelineno-34-28></a><span class=p>);</span>
</code></pre></div> <h2 id=virtual-foreign-keys>Virtual Foreign Keys<a class=headerlink href=#virtual-foreign-keys title="Permanent link">&para;</a></h2> <p>By default, relationships do not have any constraints attached to them, to check related data when adding, updating, or deleting records. You can however attach validations to your relationships, to ensure the integrity of data. This can be done with the last parameter of the relationship-related method.</p> <p>The cross table <code>InvoicesProducts</code> can be slightly changed to demonstrate this functionality:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-35-1 name=__codelineno-35-1 href=#__codelineno-35-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-35-2 name=__codelineno-35-2 href=#__codelineno-35-2></a>
<a id=__codelineno-35-3 name=__codelineno-35-3 href=#__codelineno-35-3></a><span class=k>namespace</span> <span class=nx>MyApp\Models</span><span class=p>;</span>
<a id=__codelineno-35-4 name=__codelineno-35-4 href=#__codelineno-35-4></a>
<a id=__codelineno-35-5 name=__codelineno-35-5 href=#__codelineno-35-5></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\Model</span><span class=p>;</span>
<a id=__codelineno-35-6 name=__codelineno-35-6 href=#__codelineno-35-6></a>
<a id=__codelineno-35-7 name=__codelineno-35-7 href=#__codelineno-35-7></a><span class=k>class</span> <span class=nc>InvoicesProducts</span> <span class=k>extends</span> <span class=nx>Model</span>
<a id=__codelineno-35-8 name=__codelineno-35-8 href=#__codelineno-35-8></a><span class=p>{</span>
<a id=__codelineno-35-9 name=__codelineno-35-9 href=#__codelineno-35-9></a>    <span class=k>public</span> <span class=nv>$ixp_inv_id</span><span class=p>;</span>
<a id=__codelineno-35-10 name=__codelineno-35-10 href=#__codelineno-35-10></a>    <span class=k>public</span> <span class=nv>$ixp_prd_id</span><span class=p>;</span>
<a id=__codelineno-35-11 name=__codelineno-35-11 href=#__codelineno-35-11></a>
<a id=__codelineno-35-12 name=__codelineno-35-12 href=#__codelineno-35-12></a>    <span class=k>public</span> <span class=k>function</span> <span class=nf>initialize</span><span class=p>()</span>
<a id=__codelineno-35-13 name=__codelineno-35-13 href=#__codelineno-35-13></a>    <span class=p>{</span>
<a id=__codelineno-35-14 name=__codelineno-35-14 href=#__codelineno-35-14></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>belongsTo</span><span class=p>(</span>
<a id=__codelineno-35-15 name=__codelineno-35-15 href=#__codelineno-35-15></a>            <span class=s1>&#39;ixp_inv_id&#39;</span><span class=p>,</span>
<a id=__codelineno-35-16 name=__codelineno-35-16 href=#__codelineno-35-16></a>            <span class=nx>Invoices</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<a id=__codelineno-35-17 name=__codelineno-35-17 href=#__codelineno-35-17></a>            <span class=s1>&#39;inv_id&#39;</span><span class=p>,</span>
<a id=__codelineno-35-18 name=__codelineno-35-18 href=#__codelineno-35-18></a>            <span class=p>[</span>
<a id=__codelineno-35-19 name=__codelineno-35-19 href=#__codelineno-35-19></a>                <span class=s1>&#39;alias&#39;</span>      <span class=o>=&gt;</span> <span class=s1>&#39;invoice&#39;</span><span class=p>,</span>
<a id=__codelineno-35-20 name=__codelineno-35-20 href=#__codelineno-35-20></a>                <span class=s1>&#39;foreignKey&#39;</span> <span class=o>=&gt;</span> <span class=k>true</span><span class=p>,</span>
<a id=__codelineno-35-21 name=__codelineno-35-21 href=#__codelineno-35-21></a>                <span class=s1>&#39;reusable&#39;</span>   <span class=o>=&gt;</span> <span class=k>true</span><span class=p>,</span>
<a id=__codelineno-35-22 name=__codelineno-35-22 href=#__codelineno-35-22></a>            <span class=p>]</span>
<a id=__codelineno-35-23 name=__codelineno-35-23 href=#__codelineno-35-23></a>        <span class=p>);</span>
<a id=__codelineno-35-24 name=__codelineno-35-24 href=#__codelineno-35-24></a>
<a id=__codelineno-35-25 name=__codelineno-35-25 href=#__codelineno-35-25></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>belongsTo</span><span class=p>(</span>
<a id=__codelineno-35-26 name=__codelineno-35-26 href=#__codelineno-35-26></a>            <span class=s1>&#39;ixp_prd_id&#39;</span><span class=p>,</span>
<a id=__codelineno-35-27 name=__codelineno-35-27 href=#__codelineno-35-27></a>            <span class=nx>Products</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<a id=__codelineno-35-28 name=__codelineno-35-28 href=#__codelineno-35-28></a>            <span class=s1>&#39;prd_id&#39;</span><span class=p>,</span>
<a id=__codelineno-35-29 name=__codelineno-35-29 href=#__codelineno-35-29></a>            <span class=p>[</span>
<a id=__codelineno-35-30 name=__codelineno-35-30 href=#__codelineno-35-30></a>                <span class=s1>&#39;alias&#39;</span>      <span class=o>=&gt;</span> <span class=s1>&#39;product&#39;</span><span class=p>,</span>
<a id=__codelineno-35-31 name=__codelineno-35-31 href=#__codelineno-35-31></a>                <span class=s1>&#39;foreignKey&#39;</span> <span class=o>=&gt;</span> <span class=p>[</span>
<a id=__codelineno-35-32 name=__codelineno-35-32 href=#__codelineno-35-32></a>                    <span class=s1>&#39;message&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;The prd_id does not exist &#39;</span> <span class=o>.</span>
<a id=__codelineno-35-33 name=__codelineno-35-33 href=#__codelineno-35-33></a>                                 <span class=s1>&#39;in the Products model&#39;</span><span class=p>,</span>
<a id=__codelineno-35-34 name=__codelineno-35-34 href=#__codelineno-35-34></a>                <span class=p>],</span>
<a id=__codelineno-35-35 name=__codelineno-35-35 href=#__codelineno-35-35></a>                <span class=s1>&#39;reusable&#39;</span>   <span class=o>=&gt;</span> <span class=k>true</span><span class=p>,</span>
<a id=__codelineno-35-36 name=__codelineno-35-36 href=#__codelineno-35-36></a>            <span class=p>]</span>
<a id=__codelineno-35-37 name=__codelineno-35-37 href=#__codelineno-35-37></a>        <span class=p>);</span>
<a id=__codelineno-35-38 name=__codelineno-35-38 href=#__codelineno-35-38></a>    <span class=p>}</span>
<a id=__codelineno-35-39 name=__codelineno-35-39 href=#__codelineno-35-39></a><span class=p>}</span>
</code></pre></div> <p>If you alter a <code>belongsTo()</code> relationship to act as foreign key, it will validate that the values inserted/updated on those fields have reference valid ids in the respective models. Similarly, if a <code>hasMany()</code>/<code>hasOne()</code> is changed to define the <code>foreignKey</code>, it will validate that records can or cannot if the record has related data.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-36-1 name=__codelineno-36-1 href=#__codelineno-36-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-36-2 name=__codelineno-36-2 href=#__codelineno-36-2></a>
<a id=__codelineno-36-3 name=__codelineno-36-3 href=#__codelineno-36-3></a><span class=k>namespace</span> <span class=nx>MyApp\Models</span><span class=p>;</span>
<a id=__codelineno-36-4 name=__codelineno-36-4 href=#__codelineno-36-4></a>
<a id=__codelineno-36-5 name=__codelineno-36-5 href=#__codelineno-36-5></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\Model</span><span class=p>;</span>
<a id=__codelineno-36-6 name=__codelineno-36-6 href=#__codelineno-36-6></a>
<a id=__codelineno-36-7 name=__codelineno-36-7 href=#__codelineno-36-7></a><span class=k>class</span> <span class=nc>Products</span> <span class=k>extends</span> <span class=nx>Model</span>
<a id=__codelineno-36-8 name=__codelineno-36-8 href=#__codelineno-36-8></a><span class=p>{</span>
<a id=__codelineno-36-9 name=__codelineno-36-9 href=#__codelineno-36-9></a>    <span class=k>public</span> <span class=nv>$prd_id</span><span class=p>;</span>
<a id=__codelineno-36-10 name=__codelineno-36-10 href=#__codelineno-36-10></a>    <span class=k>public</span> <span class=nv>$prd_title</span><span class=p>;</span>
<a id=__codelineno-36-11 name=__codelineno-36-11 href=#__codelineno-36-11></a>    <span class=k>public</span> <span class=nv>$prd_price</span><span class=p>;</span>
<a id=__codelineno-36-12 name=__codelineno-36-12 href=#__codelineno-36-12></a>    <span class=k>public</span> <span class=nv>$prd_created_at</span><span class=p>;</span>
<a id=__codelineno-36-13 name=__codelineno-36-13 href=#__codelineno-36-13></a>
<a id=__codelineno-36-14 name=__codelineno-36-14 href=#__codelineno-36-14></a>    <span class=k>public</span> <span class=k>function</span> <span class=nf>initialize</span><span class=p>()</span>
<a id=__codelineno-36-15 name=__codelineno-36-15 href=#__codelineno-36-15></a>    <span class=p>{</span>
<a id=__codelineno-36-16 name=__codelineno-36-16 href=#__codelineno-36-16></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>hasMany</span><span class=p>(</span>
<a id=__codelineno-36-17 name=__codelineno-36-17 href=#__codelineno-36-17></a>            <span class=s1>&#39;prd_id&#39;</span><span class=p>,</span>
<a id=__codelineno-36-18 name=__codelineno-36-18 href=#__codelineno-36-18></a>            <span class=nx>Products</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<a id=__codelineno-36-19 name=__codelineno-36-19 href=#__codelineno-36-19></a>            <span class=s1>&#39;ixp_prd_id&#39;</span><span class=p>,</span>
<a id=__codelineno-36-20 name=__codelineno-36-20 href=#__codelineno-36-20></a>            <span class=p>[</span>
<a id=__codelineno-36-21 name=__codelineno-36-21 href=#__codelineno-36-21></a>                <span class=s1>&#39;foreignKey&#39;</span> <span class=o>=&gt;</span> <span class=p>[</span>
<a id=__codelineno-36-22 name=__codelineno-36-22 href=#__codelineno-36-22></a>                    <span class=s1>&#39;message&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;The product cannot be deleted &#39;</span> <span class=o>.</span> 
<a id=__codelineno-36-23 name=__codelineno-36-23 href=#__codelineno-36-23></a>                                 <span class=s1>&#39;because there are invoices &#39;</span> <span class=o>.</span>
<a id=__codelineno-36-24 name=__codelineno-36-24 href=#__codelineno-36-24></a>                                 <span class=s1>&#39;attached to it&#39;</span><span class=p>,</span>
<a id=__codelineno-36-25 name=__codelineno-36-25 href=#__codelineno-36-25></a>                <span class=p>],</span>
<a id=__codelineno-36-26 name=__codelineno-36-26 href=#__codelineno-36-26></a>            <span class=p>]</span>
<a id=__codelineno-36-27 name=__codelineno-36-27 href=#__codelineno-36-27></a>        <span class=p>);</span>
<a id=__codelineno-36-28 name=__codelineno-36-28 href=#__codelineno-36-28></a>    <span class=p>}</span>
<a id=__codelineno-36-29 name=__codelineno-36-29 href=#__codelineno-36-29></a><span class=p>}</span>
</code></pre></div> <p>A virtual foreign key can be set up to allow null values as follows:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-37-1 name=__codelineno-37-1 href=#__codelineno-37-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-37-2 name=__codelineno-37-2 href=#__codelineno-37-2></a>
<a id=__codelineno-37-3 name=__codelineno-37-3 href=#__codelineno-37-3></a><span class=k>namespace</span> <span class=nx>MyApp\Models</span><span class=p>;</span>
<a id=__codelineno-37-4 name=__codelineno-37-4 href=#__codelineno-37-4></a>
<a id=__codelineno-37-5 name=__codelineno-37-5 href=#__codelineno-37-5></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\Model</span><span class=p>;</span>
<a id=__codelineno-37-6 name=__codelineno-37-6 href=#__codelineno-37-6></a>
<a id=__codelineno-37-7 name=__codelineno-37-7 href=#__codelineno-37-7></a><span class=k>class</span> <span class=nc>InvoicesProducts</span> <span class=k>extends</span> <span class=nx>Model</span>
<a id=__codelineno-37-8 name=__codelineno-37-8 href=#__codelineno-37-8></a><span class=p>{</span>
<a id=__codelineno-37-9 name=__codelineno-37-9 href=#__codelineno-37-9></a>    <span class=k>public</span> <span class=nv>$ixp_inv_id</span><span class=p>;</span>
<a id=__codelineno-37-10 name=__codelineno-37-10 href=#__codelineno-37-10></a>    <span class=k>public</span> <span class=nv>$ixp_prd_id</span><span class=p>;</span>
<a id=__codelineno-37-11 name=__codelineno-37-11 href=#__codelineno-37-11></a>
<a id=__codelineno-37-12 name=__codelineno-37-12 href=#__codelineno-37-12></a>    <span class=k>public</span> <span class=k>function</span> <span class=nf>initialize</span><span class=p>()</span>
<a id=__codelineno-37-13 name=__codelineno-37-13 href=#__codelineno-37-13></a>    <span class=p>{</span>
<a id=__codelineno-37-14 name=__codelineno-37-14 href=#__codelineno-37-14></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>belongsTo</span><span class=p>(</span>
<a id=__codelineno-37-15 name=__codelineno-37-15 href=#__codelineno-37-15></a>            <span class=s1>&#39;ixp_inv_id&#39;</span><span class=p>,</span>
<a id=__codelineno-37-16 name=__codelineno-37-16 href=#__codelineno-37-16></a>            <span class=nx>Invoices</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<a id=__codelineno-37-17 name=__codelineno-37-17 href=#__codelineno-37-17></a>            <span class=s1>&#39;inv_id&#39;</span><span class=p>,</span>
<a id=__codelineno-37-18 name=__codelineno-37-18 href=#__codelineno-37-18></a>            <span class=p>[</span>
<a id=__codelineno-37-19 name=__codelineno-37-19 href=#__codelineno-37-19></a>                <span class=s1>&#39;alias&#39;</span>      <span class=o>=&gt;</span> <span class=s1>&#39;invoice&#39;</span><span class=p>,</span>
<a id=__codelineno-37-20 name=__codelineno-37-20 href=#__codelineno-37-20></a>                <span class=s1>&#39;foreignKey&#39;</span> <span class=o>=&gt;</span> <span class=k>true</span><span class=p>,</span>
<a id=__codelineno-37-21 name=__codelineno-37-21 href=#__codelineno-37-21></a>                <span class=s1>&#39;reusable&#39;</span>   <span class=o>=&gt;</span> <span class=k>true</span><span class=p>,</span>
<a id=__codelineno-37-22 name=__codelineno-37-22 href=#__codelineno-37-22></a>            <span class=p>]</span>
<a id=__codelineno-37-23 name=__codelineno-37-23 href=#__codelineno-37-23></a>        <span class=p>);</span>
<a id=__codelineno-37-24 name=__codelineno-37-24 href=#__codelineno-37-24></a>
<a id=__codelineno-37-25 name=__codelineno-37-25 href=#__codelineno-37-25></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>belongsTo</span><span class=p>(</span>
<a id=__codelineno-37-26 name=__codelineno-37-26 href=#__codelineno-37-26></a>            <span class=s1>&#39;ixp_prd_id&#39;</span><span class=p>,</span>
<a id=__codelineno-37-27 name=__codelineno-37-27 href=#__codelineno-37-27></a>            <span class=nx>Products</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<a id=__codelineno-37-28 name=__codelineno-37-28 href=#__codelineno-37-28></a>            <span class=s1>&#39;prd_id&#39;</span><span class=p>,</span>
<a id=__codelineno-37-29 name=__codelineno-37-29 href=#__codelineno-37-29></a>            <span class=p>[</span>
<a id=__codelineno-37-30 name=__codelineno-37-30 href=#__codelineno-37-30></a>                <span class=s1>&#39;alias&#39;</span>      <span class=o>=&gt;</span> <span class=s1>&#39;product&#39;</span><span class=p>,</span>
<a id=__codelineno-37-31 name=__codelineno-37-31 href=#__codelineno-37-31></a>                <span class=s1>&#39;foreignKey&#39;</span> <span class=o>=&gt;</span> <span class=p>[</span>
<a id=__codelineno-37-32 name=__codelineno-37-32 href=#__codelineno-37-32></a>                    <span class=s1>&#39;allowNulls&#39;</span> <span class=o>=&gt;</span> <span class=k>true</span><span class=p>,</span>
<a id=__codelineno-37-33 name=__codelineno-37-33 href=#__codelineno-37-33></a>                    <span class=s1>&#39;message&#39;</span>    <span class=o>=&gt;</span> <span class=s1>&#39;The prd_id does not exist &#39;</span> <span class=o>.</span>
<a id=__codelineno-37-34 name=__codelineno-37-34 href=#__codelineno-37-34></a>                                    <span class=s1>&#39;in the Products model&#39;</span><span class=p>,</span>
<a id=__codelineno-37-35 name=__codelineno-37-35 href=#__codelineno-37-35></a>                <span class=p>],</span>
<a id=__codelineno-37-36 name=__codelineno-37-36 href=#__codelineno-37-36></a>                <span class=s1>&#39;reusable&#39;</span>   <span class=o>=&gt;</span> <span class=k>true</span><span class=p>,</span>
<a id=__codelineno-37-37 name=__codelineno-37-37 href=#__codelineno-37-37></a>            <span class=p>]</span>
<a id=__codelineno-37-38 name=__codelineno-37-38 href=#__codelineno-37-38></a>        <span class=p>);</span>
<a id=__codelineno-37-39 name=__codelineno-37-39 href=#__codelineno-37-39></a>    <span class=p>}</span>
<a id=__codelineno-37-40 name=__codelineno-37-40 href=#__codelineno-37-40></a><span class=p>}</span>
</code></pre></div> <h3 id=cascaderestrict>Cascade/Restrict<a class=headerlink href=#cascaderestrict title="Permanent link">&para;</a></h3> <p>Relationships that act as virtual foreign keys by default restrict the creation/update/deletion of records to maintain the integrity of data. You can define these constraints that mimic the RDBMS functionality for <code>CASCADE</code> and <code>RESTRICT</code> by using the <code>action</code> option in <code>foreignKey</code>. The <a href=../api/phalcon_mvc/#mvcmodelrelation->Phalcon\Mvc\Model\Relation</a> underlying object offers two constants:</p> <ul> <li><code>Relation::ACTION_CASCADE</code></li> <li><code>Relation::ACTION_RESTRICT</code></li> </ul> <div class=highlight><pre><span></span><code><a id=__codelineno-38-1 name=__codelineno-38-1 href=#__codelineno-38-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-38-2 name=__codelineno-38-2 href=#__codelineno-38-2></a>
<a id=__codelineno-38-3 name=__codelineno-38-3 href=#__codelineno-38-3></a><span class=k>namespace</span> <span class=nx>MyApp\Models</span><span class=p>;</span>
<a id=__codelineno-38-4 name=__codelineno-38-4 href=#__codelineno-38-4></a>
<a id=__codelineno-38-5 name=__codelineno-38-5 href=#__codelineno-38-5></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\Model</span><span class=p>;</span>
<a id=__codelineno-38-6 name=__codelineno-38-6 href=#__codelineno-38-6></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\Model\Relation</span><span class=p>;</span>
<a id=__codelineno-38-7 name=__codelineno-38-7 href=#__codelineno-38-7></a>
<a id=__codelineno-38-8 name=__codelineno-38-8 href=#__codelineno-38-8></a><span class=k>class</span> <span class=nc>Products</span> <span class=k>extends</span> <span class=nx>Model</span>
<a id=__codelineno-38-9 name=__codelineno-38-9 href=#__codelineno-38-9></a><span class=p>{</span>
<a id=__codelineno-38-10 name=__codelineno-38-10 href=#__codelineno-38-10></a>    <span class=k>public</span> <span class=nv>$prd_id</span><span class=p>;</span>
<a id=__codelineno-38-11 name=__codelineno-38-11 href=#__codelineno-38-11></a>    <span class=k>public</span> <span class=nv>$prd_title</span><span class=p>;</span>
<a id=__codelineno-38-12 name=__codelineno-38-12 href=#__codelineno-38-12></a>    <span class=k>public</span> <span class=nv>$prd_price</span><span class=p>;</span>
<a id=__codelineno-38-13 name=__codelineno-38-13 href=#__codelineno-38-13></a>    <span class=k>public</span> <span class=nv>$prd_created_at</span><span class=p>;</span>
<a id=__codelineno-38-14 name=__codelineno-38-14 href=#__codelineno-38-14></a>
<a id=__codelineno-38-15 name=__codelineno-38-15 href=#__codelineno-38-15></a>    <span class=k>public</span> <span class=k>function</span> <span class=nf>initialize</span><span class=p>()</span>
<a id=__codelineno-38-16 name=__codelineno-38-16 href=#__codelineno-38-16></a>    <span class=p>{</span>
<a id=__codelineno-38-17 name=__codelineno-38-17 href=#__codelineno-38-17></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>hasMany</span><span class=p>(</span>
<a id=__codelineno-38-18 name=__codelineno-38-18 href=#__codelineno-38-18></a>            <span class=s1>&#39;prd_id&#39;</span><span class=p>,</span>
<a id=__codelineno-38-19 name=__codelineno-38-19 href=#__codelineno-38-19></a>            <span class=nx>Products</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<a id=__codelineno-38-20 name=__codelineno-38-20 href=#__codelineno-38-20></a>            <span class=s1>&#39;ixp_prd_id&#39;</span><span class=p>,</span>
<a id=__codelineno-38-21 name=__codelineno-38-21 href=#__codelineno-38-21></a>            <span class=p>[</span>
<a id=__codelineno-38-22 name=__codelineno-38-22 href=#__codelineno-38-22></a>                <span class=s1>&#39;foreignKey&#39;</span> <span class=o>=&gt;</span> <span class=p>[</span>
<a id=__codelineno-38-23 name=__codelineno-38-23 href=#__codelineno-38-23></a>                    <span class=s1>&#39;action&#39;</span> <span class=o>=&gt;</span> <span class=nx>Relation</span><span class=o>::</span><span class=na>ACTION_CASCADE</span><span class=p>,</span>
<a id=__codelineno-38-24 name=__codelineno-38-24 href=#__codelineno-38-24></a>                <span class=p>],</span>
<a id=__codelineno-38-25 name=__codelineno-38-25 href=#__codelineno-38-25></a>            <span class=p>]</span>
<a id=__codelineno-38-26 name=__codelineno-38-26 href=#__codelineno-38-26></a>        <span class=p>);</span>
<a id=__codelineno-38-27 name=__codelineno-38-27 href=#__codelineno-38-27></a>    <span class=p>}</span>
<a id=__codelineno-38-28 name=__codelineno-38-28 href=#__codelineno-38-28></a><span class=p>}</span>
</code></pre></div> <p>The code above allows you to delete all the related records if the primary record is deleted (cascade delete).</p> <h2 id=operations>Operations<a class=headerlink href=#operations title="Permanent link">&para;</a></h2> <p>You can perform operations using relationships if a resultset returns complete objects.</p> <h3 id=save>Save<a class=headerlink href=#save title="Permanent link">&para;</a></h3> <p>Magic properties can be used to store a record and its related properties:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-39-1 name=__codelineno-39-1 href=#__codelineno-39-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-39-2 name=__codelineno-39-2 href=#__codelineno-39-2></a>
<a id=__codelineno-39-3 name=__codelineno-39-3 href=#__codelineno-39-3></a><span class=nv>$artist</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Artists</span><span class=p>();</span>
<a id=__codelineno-39-4 name=__codelineno-39-4 href=#__codelineno-39-4></a>
<a id=__codelineno-39-5 name=__codelineno-39-5 href=#__codelineno-39-5></a><span class=nv>$artist</span><span class=o>-&gt;</span><span class=na>name</span>    <span class=o>=</span> <span class=s1>&#39;Shinichi Osawa&#39;</span><span class=p>;</span>
<a id=__codelineno-39-6 name=__codelineno-39-6 href=#__codelineno-39-6></a><span class=nv>$artist</span><span class=o>-&gt;</span><span class=na>country</span> <span class=o>=</span> <span class=s1>&#39;Japan&#39;</span><span class=p>;</span>
<a id=__codelineno-39-7 name=__codelineno-39-7 href=#__codelineno-39-7></a>
<a id=__codelineno-39-8 name=__codelineno-39-8 href=#__codelineno-39-8></a><span class=nv>$album</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Albums</span><span class=p>();</span>
<a id=__codelineno-39-9 name=__codelineno-39-9 href=#__codelineno-39-9></a>
<a id=__codelineno-39-10 name=__codelineno-39-10 href=#__codelineno-39-10></a><span class=nv>$album</span><span class=o>-&gt;</span><span class=na>name</span>   <span class=o>=</span> <span class=s1>&#39;The One&#39;</span><span class=p>;</span>
<a id=__codelineno-39-11 name=__codelineno-39-11 href=#__codelineno-39-11></a><span class=nv>$album</span><span class=o>-&gt;</span><span class=na>artist</span> <span class=o>=</span> <span class=nv>$artist</span><span class=p>;</span>
<a id=__codelineno-39-12 name=__codelineno-39-12 href=#__codelineno-39-12></a><span class=nv>$album</span><span class=o>-&gt;</span><span class=na>year</span>   <span class=o>=</span> <span class=mi>2008</span><span class=p>;</span>
<a id=__codelineno-39-13 name=__codelineno-39-13 href=#__codelineno-39-13></a>
<a id=__codelineno-39-14 name=__codelineno-39-14 href=#__codelineno-39-14></a><span class=nv>$album</span><span class=o>-&gt;</span><span class=na>save</span><span class=p>();</span>
</code></pre></div> <p>Saving a record and its related records in a has-many relation:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-40-1 name=__codelineno-40-1 href=#__codelineno-40-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-40-2 name=__codelineno-40-2 href=#__codelineno-40-2></a>
<a id=__codelineno-40-3 name=__codelineno-40-3 href=#__codelineno-40-3></a><span class=nv>$customer</span> <span class=o>=</span> <span class=nx>Customers</span><span class=o>::</span><span class=na>findFirst</span><span class=p>(</span>
<a id=__codelineno-40-4 name=__codelineno-40-4 href=#__codelineno-40-4></a>    <span class=p>[</span>
<a id=__codelineno-40-5 name=__codelineno-40-5 href=#__codelineno-40-5></a>        <span class=s1>&#39;conditions&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;cst_id = :customerId:&#39;</span><span class=p>,</span>
<a id=__codelineno-40-6 name=__codelineno-40-6 href=#__codelineno-40-6></a>        <span class=s1>&#39;bind&#39;</span>       <span class=o>=&gt;</span> <span class=p>[</span>
<a id=__codelineno-40-7 name=__codelineno-40-7 href=#__codelineno-40-7></a>            <span class=s1>&#39;customerId&#39;</span> <span class=o>=&gt;</span> <span class=mi>1</span><span class=p>,</span>
<a id=__codelineno-40-8 name=__codelineno-40-8 href=#__codelineno-40-8></a>        <span class=p>]</span>
<a id=__codelineno-40-9 name=__codelineno-40-9 href=#__codelineno-40-9></a>    <span class=p>]</span>
<a id=__codelineno-40-10 name=__codelineno-40-10 href=#__codelineno-40-10></a><span class=p>);</span>
<a id=__codelineno-40-11 name=__codelineno-40-11 href=#__codelineno-40-11></a>
<a id=__codelineno-40-12 name=__codelineno-40-12 href=#__codelineno-40-12></a><span class=nv>$invoice1</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Invoices</span><span class=p>();</span>
<a id=__codelineno-40-13 name=__codelineno-40-13 href=#__codelineno-40-13></a><span class=nv>$invoice1</span><span class=o>-&gt;</span> <span class=na>inv_status_flag</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
<a id=__codelineno-40-14 name=__codelineno-40-14 href=#__codelineno-40-14></a><span class=nv>$invoice1</span><span class=o>-&gt;</span> <span class=na>inv_title</span>       <span class=o>=</span> <span class=s1>&#39;Invoice for ACME Inc. #1&#39;</span><span class=p>;</span>
<a id=__codelineno-40-15 name=__codelineno-40-15 href=#__codelineno-40-15></a><span class=nv>$invoice1</span><span class=o>-&gt;</span> <span class=na>inv_total</span>       <span class=o>=</span> <span class=mi>100</span><span class=p>;</span>
<a id=__codelineno-40-16 name=__codelineno-40-16 href=#__codelineno-40-16></a><span class=nv>$invoice1</span><span class=o>-&gt;</span> <span class=na>inv_created_at</span>  <span class=o>=</span> <span class=nb>time</span><span class=p>();</span>
<a id=__codelineno-40-17 name=__codelineno-40-17 href=#__codelineno-40-17></a>
<a id=__codelineno-40-18 name=__codelineno-40-18 href=#__codelineno-40-18></a><span class=nv>$invoice2</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Invoices</span><span class=p>();</span>
<a id=__codelineno-40-19 name=__codelineno-40-19 href=#__codelineno-40-19></a><span class=nv>$invoice2</span><span class=o>-&gt;</span> <span class=na>inv_status_flag</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
<a id=__codelineno-40-20 name=__codelineno-40-20 href=#__codelineno-40-20></a><span class=nv>$invoice2</span><span class=o>-&gt;</span> <span class=na>inv_title</span>       <span class=o>=</span> <span class=s1>&#39;Invoice for ACME Inc. #2&#39;</span><span class=p>;</span>
<a id=__codelineno-40-21 name=__codelineno-40-21 href=#__codelineno-40-21></a><span class=nv>$invoice2</span><span class=o>-&gt;</span> <span class=na>inv_total</span>       <span class=o>=</span> <span class=mi>200</span><span class=p>;</span>
<a id=__codelineno-40-22 name=__codelineno-40-22 href=#__codelineno-40-22></a><span class=nv>$invoice2</span><span class=o>-&gt;</span> <span class=na>inv_created_at</span>  <span class=o>=</span> <span class=nb>time</span><span class=p>();</span>
<a id=__codelineno-40-23 name=__codelineno-40-23 href=#__codelineno-40-23></a>
<a id=__codelineno-40-24 name=__codelineno-40-24 href=#__codelineno-40-24></a>
<a id=__codelineno-40-25 name=__codelineno-40-25 href=#__codelineno-40-25></a><span class=nv>$customer</span><span class=o>-&gt;</span><span class=na>invoices</span> <span class=o>=</span> <span class=p>[</span>
<a id=__codelineno-40-26 name=__codelineno-40-26 href=#__codelineno-40-26></a>    <span class=nv>$invoice1</span><span class=p>,</span>
<a id=__codelineno-40-27 name=__codelineno-40-27 href=#__codelineno-40-27></a>    <span class=nv>$invoice2</span>
<a id=__codelineno-40-28 name=__codelineno-40-28 href=#__codelineno-40-28></a><span class=p>];</span>
<a id=__codelineno-40-29 name=__codelineno-40-29 href=#__codelineno-40-29></a>
<a id=__codelineno-40-30 name=__codelineno-40-30 href=#__codelineno-40-30></a>
<a id=__codelineno-40-31 name=__codelineno-40-31 href=#__codelineno-40-31></a><span class=nv>$customer</span><span class=o>-&gt;</span><span class=na>save</span><span class=p>();</span>
</code></pre></div> <p>The code above gets a customer from our database. Two invoices are created and assigned to the <code>invoices</code> relationship of the customer as an array. The customer record is then saved, which also saves the two invoices in the database and links them to the customer.</p> <p>Although the syntax above is very handy, it is not always ideal to use it, especially when updating related records. Phalcon does not know which records need to be added or removed using an <strong>update</strong>, and as a result, it will perform a replacement. In update situations, it is better to control the data yourself vs. leaving it to the framework to do that.</p> <p>Saving data with the above syntax will implicitly create a transaction and commit it if all goes well. Messages generated during the save process of the whole transaction will be passed back to the user for more information.</p> <div class="admonition warning"> <p class=admonition-title>NOTE</p> <p>Adding related entities by overloading the following methods/events is <strong>not</strong> possible:</p> <ul> <li><code>Phalcon\Mvc\Model::beforeSave()</code></li> <li><code>Phalcon\Mvc\Model::beforeCreate()</code></li> <li><code>Phalcon\Mvc\Model::beforeUpdate()</code></li> </ul> </div> <p>You need to overload <code>Phalcon\Mvc\Model::save()</code> for this to work from within a model.</p> <h3 id=update>Update<a class=headerlink href=#update title="Permanent link">&para;</a></h3> <p>Instead of doing this:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-41-1 name=__codelineno-41-1 href=#__codelineno-41-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-41-2 name=__codelineno-41-2 href=#__codelineno-41-2></a>
<a id=__codelineno-41-3 name=__codelineno-41-3 href=#__codelineno-41-3></a><span class=nv>$invoices</span> <span class=o>=</span> <span class=nv>$customer</span><span class=o>-&gt;</span><span class=na>getInvoices</span><span class=p>();</span>
<a id=__codelineno-41-4 name=__codelineno-41-4 href=#__codelineno-41-4></a>
<a id=__codelineno-41-5 name=__codelineno-41-5 href=#__codelineno-41-5></a><span class=k>foreach</span> <span class=p>(</span><span class=nv>$invoices</span> <span class=k>as</span> <span class=nv>$invoice</span><span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-41-6 name=__codelineno-41-6 href=#__codelineno-41-6></a>    <span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>inv_total</span>      <span class=o>=</span> <span class=mi>100</span><span class=p>;</span>
<a id=__codelineno-41-7 name=__codelineno-41-7 href=#__codelineno-41-7></a>    <span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>inv_updated_at</span> <span class=o>=</span> <span class=nb>time</span><span class=p>();</span>
<a id=__codelineno-41-8 name=__codelineno-41-8 href=#__codelineno-41-8></a>
<a id=__codelineno-41-9 name=__codelineno-41-9 href=#__codelineno-41-9></a>    <span class=k>if</span> <span class=p>(</span><span class=k>false</span> <span class=o>===</span> <span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>update</span><span class=p>())</span> <span class=p>{</span>
<a id=__codelineno-41-10 name=__codelineno-41-10 href=#__codelineno-41-10></a>        <span class=nv>$messages</span> <span class=o>=</span> <span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>getMessages</span><span class=p>();</span>
<a id=__codelineno-41-11 name=__codelineno-41-11 href=#__codelineno-41-11></a>
<a id=__codelineno-41-12 name=__codelineno-41-12 href=#__codelineno-41-12></a>        <span class=k>foreach</span> <span class=p>(</span><span class=nv>$messages</span> <span class=k>as</span> <span class=nv>$message</span><span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-41-13 name=__codelineno-41-13 href=#__codelineno-41-13></a>            <span class=k>echo</span> <span class=nv>$message</span><span class=p>;</span>
<a id=__codelineno-41-14 name=__codelineno-41-14 href=#__codelineno-41-14></a>        <span class=p>}</span>
<a id=__codelineno-41-15 name=__codelineno-41-15 href=#__codelineno-41-15></a>
<a id=__codelineno-41-16 name=__codelineno-41-16 href=#__codelineno-41-16></a>        <span class=k>break</span><span class=p>;</span>
<a id=__codelineno-41-17 name=__codelineno-41-17 href=#__codelineno-41-17></a>    <span class=p>}</span>
<a id=__codelineno-41-18 name=__codelineno-41-18 href=#__codelineno-41-18></a><span class=p>}</span>
</code></pre></div> <p>you can do this:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-42-1 name=__codelineno-42-1 href=#__codelineno-42-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-42-2 name=__codelineno-42-2 href=#__codelineno-42-2></a>
<a id=__codelineno-42-3 name=__codelineno-42-3 href=#__codelineno-42-3></a><span class=nv>$customer</span><span class=o>-&gt;</span><span class=na>getInvoices</span><span class=p>()</span><span class=o>-&gt;</span><span class=na>update</span><span class=p>(</span>
<a id=__codelineno-42-4 name=__codelineno-42-4 href=#__codelineno-42-4></a>    <span class=p>[</span>
<a id=__codelineno-42-5 name=__codelineno-42-5 href=#__codelineno-42-5></a>        <span class=s1>&#39;inv_total&#39;</span>      <span class=o>=&gt;</span> <span class=mi>100</span><span class=p>,</span>
<a id=__codelineno-42-6 name=__codelineno-42-6 href=#__codelineno-42-6></a>        <span class=s1>&#39;inv_updated_at&#39;</span> <span class=o>=&gt;</span> <span class=nb>time</span><span class=p>(),</span>
<a id=__codelineno-42-7 name=__codelineno-42-7 href=#__codelineno-42-7></a>    <span class=p>]</span>
<a id=__codelineno-42-8 name=__codelineno-42-8 href=#__codelineno-42-8></a><span class=p>);</span>
</code></pre></div> <p><code>update</code> also accepts an anonymous function to filter what records must be updated:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-43-1 name=__codelineno-43-1 href=#__codelineno-43-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-43-2 name=__codelineno-43-2 href=#__codelineno-43-2></a>
<a id=__codelineno-43-3 name=__codelineno-43-3 href=#__codelineno-43-3></a><span class=nv>$data</span> <span class=o>=</span> <span class=p>[</span>
<a id=__codelineno-43-4 name=__codelineno-43-4 href=#__codelineno-43-4></a>    <span class=s1>&#39;inv_total&#39;</span>      <span class=o>=&gt;</span> <span class=mi>100</span><span class=p>,</span>
<a id=__codelineno-43-5 name=__codelineno-43-5 href=#__codelineno-43-5></a>    <span class=s1>&#39;inv_updated_at&#39;</span> <span class=o>=&gt;</span> <span class=nb>time</span><span class=p>(),</span>
<a id=__codelineno-43-6 name=__codelineno-43-6 href=#__codelineno-43-6></a><span class=p>];</span>
<a id=__codelineno-43-7 name=__codelineno-43-7 href=#__codelineno-43-7></a>
<a id=__codelineno-43-8 name=__codelineno-43-8 href=#__codelineno-43-8></a><span class=nv>$customer</span><span class=o>-&gt;</span><span class=na>getInvoices</span><span class=p>()</span><span class=o>-&gt;</span><span class=na>update</span><span class=p>(</span>
<a id=__codelineno-43-9 name=__codelineno-43-9 href=#__codelineno-43-9></a>    <span class=nv>$data</span><span class=p>,</span>
<a id=__codelineno-43-10 name=__codelineno-43-10 href=#__codelineno-43-10></a>    <span class=k>function</span> <span class=p>(</span><span class=nv>$invoice</span><span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-43-11 name=__codelineno-43-11 href=#__codelineno-43-11></a>        <span class=k>return</span> <span class=p>(</span><span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>inv_cst_id</span> <span class=o>!==</span> <span class=mi>1</span><span class=p>);</span>
<a id=__codelineno-43-12 name=__codelineno-43-12 href=#__codelineno-43-12></a>    <span class=p>}</span>
<a id=__codelineno-43-13 name=__codelineno-43-13 href=#__codelineno-43-13></a><span class=p>);</span>
</code></pre></div> <h3 id=delete>Delete<a class=headerlink href=#delete title="Permanent link">&para;</a></h3> <p>Instead of doing this:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-44-1 name=__codelineno-44-1 href=#__codelineno-44-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-44-2 name=__codelineno-44-2 href=#__codelineno-44-2></a>
<a id=__codelineno-44-3 name=__codelineno-44-3 href=#__codelineno-44-3></a><span class=nv>$invoices</span> <span class=o>=</span> <span class=nv>$customer</span><span class=o>-&gt;</span><span class=na>getInvoices</span><span class=p>();</span>
<a id=__codelineno-44-4 name=__codelineno-44-4 href=#__codelineno-44-4></a>
<a id=__codelineno-44-5 name=__codelineno-44-5 href=#__codelineno-44-5></a><span class=k>foreach</span> <span class=p>(</span><span class=nv>$invoices</span> <span class=k>as</span> <span class=nv>$invoice</span><span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-44-6 name=__codelineno-44-6 href=#__codelineno-44-6></a>    <span class=k>if</span> <span class=p>(</span><span class=k>false</span> <span class=o>===</span> <span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>delete</span><span class=p>())</span> <span class=p>{</span>
<a id=__codelineno-44-7 name=__codelineno-44-7 href=#__codelineno-44-7></a>        <span class=nv>$messages</span> <span class=o>=</span> <span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>getMessages</span><span class=p>();</span>
<a id=__codelineno-44-8 name=__codelineno-44-8 href=#__codelineno-44-8></a>
<a id=__codelineno-44-9 name=__codelineno-44-9 href=#__codelineno-44-9></a>        <span class=k>foreach</span> <span class=p>(</span><span class=nv>$messages</span> <span class=k>as</span> <span class=nv>$message</span><span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-44-10 name=__codelineno-44-10 href=#__codelineno-44-10></a>            <span class=k>echo</span> <span class=nv>$message</span><span class=p>;</span>
<a id=__codelineno-44-11 name=__codelineno-44-11 href=#__codelineno-44-11></a>        <span class=p>}</span>
<a id=__codelineno-44-12 name=__codelineno-44-12 href=#__codelineno-44-12></a>
<a id=__codelineno-44-13 name=__codelineno-44-13 href=#__codelineno-44-13></a>        <span class=k>break</span><span class=p>;</span>
<a id=__codelineno-44-14 name=__codelineno-44-14 href=#__codelineno-44-14></a>    <span class=p>}</span>
<a id=__codelineno-44-15 name=__codelineno-44-15 href=#__codelineno-44-15></a><span class=p>}</span>
</code></pre></div> <p>you can do this:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-45-1 name=__codelineno-45-1 href=#__codelineno-45-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-45-2 name=__codelineno-45-2 href=#__codelineno-45-2></a>
<a id=__codelineno-45-3 name=__codelineno-45-3 href=#__codelineno-45-3></a><span class=nv>$customer</span><span class=o>-&gt;</span><span class=na>getInvoices</span><span class=p>()</span><span class=o>-&gt;</span><span class=na>delete</span><span class=p>();</span>
</code></pre></div> <p><code>delete()</code> also accepts an anonymous function to filter what records must be deleted:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-46-1 name=__codelineno-46-1 href=#__codelineno-46-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-46-2 name=__codelineno-46-2 href=#__codelineno-46-2></a>
<a id=__codelineno-46-3 name=__codelineno-46-3 href=#__codelineno-46-3></a><span class=nv>$customer</span><span class=o>-&gt;</span><span class=na>getInvoices</span><span class=p>()</span><span class=o>-&gt;</span><span class=na>delete</span><span class=p>(</span>
<a id=__codelineno-46-4 name=__codelineno-46-4 href=#__codelineno-46-4></a>    <span class=k>function</span> <span class=p>(</span><span class=nv>$invoice</span><span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-46-5 name=__codelineno-46-5 href=#__codelineno-46-5></a>        <span class=k>return</span> <span class=p>(</span><span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>inv_total</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>);</span>
<a id=__codelineno-46-6 name=__codelineno-46-6 href=#__codelineno-46-6></a>    <span class=p>}</span>
<a id=__codelineno-46-7 name=__codelineno-46-7 href=#__codelineno-46-7></a><span class=p>);</span>
</code></pre></div> <h3 id=messages>Messages<a class=headerlink href=#messages title="Permanent link">&para;</a></h3> <p>You can append messages from another model.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-47-1 name=__codelineno-47-1 href=#__codelineno-47-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-47-2 name=__codelineno-47-2 href=#__codelineno-47-2></a>
<a id=__codelineno-47-3 name=__codelineno-47-3 href=#__codelineno-47-3></a><span class=nv>$invoices</span> <span class=o>=</span> <span class=nv>$customer</span><span class=o>-&gt;</span><span class=na>getInvoices</span><span class=p>();</span>
<a id=__codelineno-47-4 name=__codelineno-47-4 href=#__codelineno-47-4></a>
<a id=__codelineno-47-5 name=__codelineno-47-5 href=#__codelineno-47-5></a><span class=k>foreach</span> <span class=p>(</span><span class=nv>$invoices</span> <span class=k>as</span> <span class=nv>$invoice</span><span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-47-6 name=__codelineno-47-6 href=#__codelineno-47-6></a>    <span class=k>if</span> <span class=p>(</span> <span class=k>false</span> <span class=o>===</span> <span class=nv>$invoice</span><span class=o>-&gt;</span><span class=na>save</span><span class=p>()</span> <span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-47-7 name=__codelineno-47-7 href=#__codelineno-47-7></a>        <span class=nv>$customer</span><span class=o>-&gt;</span><span class=na>appendMessagesFrom</span><span class=p>(</span><span class=nv>$invoice</span><span class=p>);</span>
<a id=__codelineno-47-8 name=__codelineno-47-8 href=#__codelineno-47-8></a>    <span class=p>}</span>
<a id=__codelineno-47-9 name=__codelineno-47-9 href=#__codelineno-47-9></a><span class=p>}</span>
<a id=__codelineno-47-10 name=__codelineno-47-10 href=#__codelineno-47-10></a><span class=nv>$messages</span> <span class=o>=</span> <span class=nv>$customer</span><span class=o>-&gt;</span><span class=na>getMessages</span><span class=p>();</span>
<a id=__codelineno-47-11 name=__codelineno-47-11 href=#__codelineno-47-11></a><span class=k>foreach</span> <span class=p>(</span><span class=nv>$messages</span> <span class=k>as</span> <span class=nv>$message</span><span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-47-12 name=__codelineno-47-12 href=#__codelineno-47-12></a>    <span class=k>echo</span> <span class=nv>$message</span><span class=p>;</span>
<a id=__codelineno-47-13 name=__codelineno-47-13 href=#__codelineno-47-13></a>    <span class=nv>$metaData</span> <span class=o>=</span> <span class=nv>$message</span><span class=o>-&gt;</span><span class=na>getMetadata</span><span class=p>();</span>
<a id=__codelineno-47-14 name=__codelineno-47-14 href=#__codelineno-47-14></a>    <span class=k>if</span> <span class=p>(</span> <span class=k>true</span> <span class=o>===</span> <span class=nb>isset</span><span class=p>(</span><span class=nv>$metaData</span><span class=p>[</span><span class=s1>&#39;model&#39;</span><span class=p>])</span> <span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-47-15 name=__codelineno-47-15 href=#__codelineno-47-15></a>        <span class=k>echo</span> <span class=nv>$metaData</span><span class=p>[</span><span class=s1>&#39;model&#39;</span><span class=p>];</span>
<a id=__codelineno-47-16 name=__codelineno-47-16 href=#__codelineno-47-16></a>    <span class=p>}</span>
<a id=__codelineno-47-17 name=__codelineno-47-17 href=#__codelineno-47-17></a><span class=p>}</span>
</code></pre></div> <p>For better error reporting you can retrieve the name of the Model and Reference Model from the Message MetaData:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-48-1 name=__codelineno-48-1 href=#__codelineno-48-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-48-2 name=__codelineno-48-2 href=#__codelineno-48-2></a>
<a id=__codelineno-48-3 name=__codelineno-48-3 href=#__codelineno-48-3></a><span class=nv>$invoices</span> <span class=o>=</span> <span class=nv>$customer</span><span class=o>-&gt;</span><span class=na>getInvoices</span><span class=p>();</span>
<a id=__codelineno-48-4 name=__codelineno-48-4 href=#__codelineno-48-4></a><span class=k>if</span> <span class=p>(</span> <span class=k>false</span> <span class=o>===</span> <span class=nv>$customer</span><span class=o>-&gt;</span><span class=na>save</span><span class=p>()</span> <span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-48-5 name=__codelineno-48-5 href=#__codelineno-48-5></a>    <span class=nv>$messages</span> <span class=o>=</span> <span class=nv>$customer</span><span class=o>-&gt;</span><span class=na>getMessages</span><span class=p>();</span>
<a id=__codelineno-48-6 name=__codelineno-48-6 href=#__codelineno-48-6></a>    <span class=k>foreach</span> <span class=p>(</span><span class=nv>$messages</span> <span class=k>as</span> <span class=nv>$message</span><span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-48-7 name=__codelineno-48-7 href=#__codelineno-48-7></a>        <span class=k>echo</span> <span class=nv>$message</span><span class=p>;</span>
<a id=__codelineno-48-8 name=__codelineno-48-8 href=#__codelineno-48-8></a>        <span class=nv>$metaData</span> <span class=o>=</span> <span class=nv>$message</span><span class=o>-&gt;</span><span class=na>getMetadata</span><span class=p>();</span>
<a id=__codelineno-48-9 name=__codelineno-48-9 href=#__codelineno-48-9></a>        <span class=k>if</span> <span class=p>(</span> <span class=k>true</span> <span class=o>===</span> <span class=nb>isset</span><span class=p>(</span><span class=nv>$metaData</span><span class=p>[</span><span class=s1>&#39;model&#39;</span><span class=p>])</span> <span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-48-10 name=__codelineno-48-10 href=#__codelineno-48-10></a>            <span class=k>echo</span> <span class=nv>$metaData</span><span class=p>[</span><span class=s1>&#39;model&#39;</span><span class=p>];</span>
<a id=__codelineno-48-11 name=__codelineno-48-11 href=#__codelineno-48-11></a>        <span class=p>}</span>
<a id=__codelineno-48-12 name=__codelineno-48-12 href=#__codelineno-48-12></a>        <span class=k>if</span> <span class=p>(</span> <span class=k>true</span> <span class=o>===</span> <span class=nb>isset</span><span class=p>(</span><span class=nv>$metaData</span><span class=p>[</span><span class=s1>&#39;referenceModel&#39;</span><span class=p>])</span> <span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-48-13 name=__codelineno-48-13 href=#__codelineno-48-13></a>            <span class=k>echo</span> <span class=nv>$metaData</span><span class=p>[</span><span class=s1>&#39;referenceModel&#39;</span><span class=p>];</span>
<a id=__codelineno-48-14 name=__codelineno-48-14 href=#__codelineno-48-14></a>        <span class=p>}</span>
<a id=__codelineno-48-15 name=__codelineno-48-15 href=#__codelineno-48-15></a>    <span class=p>}</span>
<a id=__codelineno-48-16 name=__codelineno-48-16 href=#__codelineno-48-16></a><span class=p>}</span>
</code></pre></div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../db-models-metadata/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Metadata"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Metadata </div> </div> </a> <a href=../db-models-transactions/ class="md-footer__link md-footer__link--next" aria-label="Next: Transactions"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> Transactions </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2012 - present Phalcon Team </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://phalcon.io/discord target=_blank rel=noopener title=Discord class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M524.531 69.836a1.5 1.5 0 0 0-.764-.7A485.065 485.065 0 0 0 404.081 32.03a1.816 1.816 0 0 0-1.923.91 337.461 337.461 0 0 0-14.9 30.6 447.848 447.848 0 0 0-134.426 0 309.541 309.541 0 0 0-15.135-30.6 1.89 1.89 0 0 0-1.924-.91 483.689 483.689 0 0 0-119.688 37.107 1.712 1.712 0 0 0-.788.676C39.068 183.651 18.186 294.69 28.43 404.354a2.016 2.016 0 0 0 .765 1.375 487.666 487.666 0 0 0 146.825 74.189 1.9 1.9 0 0 0 2.063-.676A348.2 348.2 0 0 0 208.12 430.4a1.86 1.86 0 0 0-1.019-2.588 321.173 321.173 0 0 1-45.868-21.853 1.885 1.885 0 0 1-.185-3.126 251.047 251.047 0 0 0 9.109-7.137 1.819 1.819 0 0 1 1.9-.256c96.229 43.917 200.41 43.917 295.5 0a1.812 1.812 0 0 1 1.924.233 234.533 234.533 0 0 0 9.132 7.16 1.884 1.884 0 0 1-.162 3.126 301.407 301.407 0 0 1-45.89 21.83 1.875 1.875 0 0 0-1 2.611 391.055 391.055 0 0 0 30.014 48.815 1.864 1.864 0 0 0 2.063.7A486.048 486.048 0 0 0 610.7 405.729a1.882 1.882 0 0 0 .765-1.352c12.264-126.783-20.532-236.912-86.934-334.541ZM222.491 337.58c-28.972 0-52.844-26.587-52.844-59.239s23.409-59.241 52.844-59.241c29.665 0 53.306 26.82 52.843 59.239 0 32.654-23.41 59.241-52.843 59.241Zm195.38 0c-28.971 0-52.843-26.587-52.843-59.239s23.409-59.241 52.843-59.241c29.667 0 53.307 26.82 52.844 59.239 0 32.654-23.177 59.241-52.844 59.241Z"/></svg> </a> <a href=https://phalcon.io/discussions target=_blank rel=noopener title="GitHub Discussions" class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9 22a1 1 0 0 1-1-1v-3H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-6.1l-3.7 3.71c-.2.19-.45.29-.7.29H9Z"/></svg> </a> <a href=https://phalcon.io/github target=_blank rel=noopener title="GitHub Project" class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://phalcon.io/telegram target=_blank rel=noopener title=Telegram class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M248 8C111.033 8 0 119.033 0 256s111.033 248 248 248 248-111.033 248-248S384.967 8 248 8Zm114.952 168.66c-3.732 39.215-19.881 134.378-28.1 178.3-3.476 18.584-10.322 24.816-16.948 25.425-14.4 1.326-25.338-9.517-39.287-18.661-21.827-14.308-34.158-23.215-55.346-37.177-24.485-16.135-8.612-25 5.342-39.5 3.652-3.793 67.107-61.51 68.335-66.746.153-.655.3-3.1-1.154-4.384s-3.59-.849-5.135-.5q-3.283.746-104.608 69.142-14.845 10.194-26.894 9.934c-8.855-.191-25.888-5.006-38.551-9.123-15.531-5.048-27.875-7.717-26.8-16.291q.84-6.7 18.45-13.7 108.446-47.248 144.628-62.3c68.872-28.647 83.183-33.623 92.511-33.789 2.052-.034 6.639.474 9.61 2.885a10.452 10.452 0 0 1 3.53 6.716 43.765 43.765 0 0 1 .417 9.769Z"/></svg> </a> <a href=https://phalcon.io/gab target=_blank rel=noopener title=Gab class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><!-- Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M368 32c41.7 0 75.9 31.8 79.7 72.5l85.6 26.3c25.4 7.8 42.8 31.3 42.8 57.9 0 21.8-11.7 41.9-30.7 52.7l-144.6 82.1 92.5 92.5H544c17.7 0 32 14.3 32 32s-14.3 32-32 32h-64c-8.5 0-16.6-3.4-22.6-9.4L346.9 360.2c11.7-36 3.2-77.1-25.4-105.7-40.6-40.6-106.3-40.6-146.9-.1l-73.6 70c-6.4 6.1-6.7 16.2-.6 22.6s16.2 6.6 22.6.6l73.8-70.2.1-.1.1-.1c3.5-3.5 7.3-6.6 11.3-9.2 27.9-18.5 65.9-15.4 90.5 9.2 24.7 24.7 27.7 62.9 9 90.9-2.6 3.8-5.6 7.5-9 10.9l-37 37H352c17.7 0 32 14.3 32 32s-14.3 32-32 32H64c-35.3 0-64-28.7-64-64C0 249.6 127 112.9 289.3 97.5 296.2 60.2 328.8 32 368 32zm0 104a24 24 0 1 0 0-48 24 24 0 1 0 0 48z"/></svg> </a> <a href=https://phalcon.io/t target=_blank rel=noopener title=Twitter class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9L389.2 48zm-24.8 373.8h39.1L151.1 88h-42l255.3 333.8z"/></svg> </a> <a href=https://phalcon.io/fb target=_blank rel=noopener title=Facebook class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M512 256C512 114.6 397.4 0 256 0S0 114.6 0 256c0 120 82.7 220.8 194.2 248.5V334.2h-52.8V256h52.8v-33.7c0-87.1 39.4-127.5 125-127.5 16.2 0 44.2 3.2 55.7 6.4V172c-6-.6-16.5-1-29.6-1-42 0-58.2 15.9-58.2 57.2V256h83.6l-14.4 78.2H287v175.9C413.8 494.8 512 386.9 512 256z"/></svg> </a> <a href=https://phalcon.io/linkedin target=_blank rel=noopener title=LinkedIn class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg> </a> <a href=https://phalcon.io/youtube target=_blank rel=noopener title=LinkedIn class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><!-- Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-progress data-md-component=progress role=progressbar></div> <script id=__config type=application/json>{"base": "..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.code.select", "content.tooltips", "navigation.footer", "navigation.indexes", "navigation.instant", "navigation.instant.progress", "navigation.sections", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "5.4.0", "provider": "mike"}}</script> <script src=../assets/javascripts/bundle.081f42fc.min.js></script> </body> </html>